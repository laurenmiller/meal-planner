(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function r(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(u){if(u.ep)return;u.ep=!0;const d=r(u);fetch(u.href,d)}})();var dl={exports:{}},zs={},hl={exports:{}},Le={};var dd;function fp(){if(dd)return Le;dd=1;var s=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),C=Symbol.iterator;function x(_){return _===null||typeof _!="object"?null:(_=C&&_[C]||_["@@iterator"],typeof _=="function"?_:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,R={};function U(_,S,se){this.props=_,this.context=S,this.refs=R,this.updater=se||b}U.prototype.isReactComponent={},U.prototype.setState=function(_,S){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,S,"setState")},U.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function D(){}D.prototype=U.prototype;function W(_,S,se){this.props=_,this.context=S,this.refs=R,this.updater=se||b}var E=W.prototype=new D;E.constructor=W,A(E,U.prototype),E.isPureReactComponent=!0;var q=Array.isArray,ee=Object.prototype.hasOwnProperty,Z={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function _e(_,S,se){var ye,ge={},oe=null,Re=null;if(S!=null)for(ye in S.ref!==void 0&&(Re=S.ref),S.key!==void 0&&(oe=""+S.key),S)ee.call(S,ye)&&!F.hasOwnProperty(ye)&&(ge[ye]=S[ye]);var J=arguments.length-2;if(J===1)ge.children=se;else if(1<J){for(var te=Array(J),ie=0;ie<J;ie++)te[ie]=arguments[ie+2];ge.children=te}if(_&&_.defaultProps)for(ye in J=_.defaultProps,J)ge[ye]===void 0&&(ge[ye]=J[ye]);return{$$typeof:s,type:_,key:oe,ref:Re,props:ge,_owner:Z.current}}function we(_,S){return{$$typeof:s,type:_.type,key:S,ref:_.ref,props:_.props,_owner:_._owner}}function Pe(_){return typeof _=="object"&&_!==null&&_.$$typeof===s}function Ue(_){var S={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(se){return S[se]})}var Oe=/\/+/g;function ve(_,S){return typeof _=="object"&&_!==null&&_.key!=null?Ue(""+_.key):S.toString(36)}function Ae(_,S,se,ye,ge){var oe=typeof _;(oe==="undefined"||oe==="boolean")&&(_=null);var Re=!1;if(_===null)Re=!0;else switch(oe){case"string":case"number":Re=!0;break;case"object":switch(_.$$typeof){case s:case n:Re=!0}}if(Re)return Re=_,ge=ge(Re),_=ye===""?"."+ve(Re,0):ye,q(ge)?(se="",_!=null&&(se=_.replace(Oe,"$&/")+"/"),Ae(ge,S,se,"",function(ie){return ie})):ge!=null&&(Pe(ge)&&(ge=we(ge,se+(!ge.key||Re&&Re.key===ge.key?"":(""+ge.key).replace(Oe,"$&/")+"/")+_)),S.push(ge)),1;if(Re=0,ye=ye===""?".":ye+":",q(_))for(var J=0;J<_.length;J++){oe=_[J];var te=ye+ve(oe,J);Re+=Ae(oe,S,se,te,ge)}else if(te=x(_),typeof te=="function")for(_=te.call(_),J=0;!(oe=_.next()).done;)oe=oe.value,te=ye+ve(oe,J++),Re+=Ae(oe,S,se,te,ge);else if(oe==="object")throw S=String(_),Error("Objects are not valid as a React child (found: "+(S==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":S)+"). If you meant to render a collection of children, use an array instead.");return Re}function Ee(_,S,se){if(_==null)return _;var ye=[],ge=0;return Ae(_,ye,"","",function(oe){return S.call(se,oe,ge++)}),ye}function Ie(_){if(_._status===-1){var S=_._result;S=S(),S.then(function(se){(_._status===0||_._status===-1)&&(_._status=1,_._result=se)},function(se){(_._status===0||_._status===-1)&&(_._status=2,_._result=se)}),_._status===-1&&(_._status=0,_._result=S)}if(_._status===1)return _._result.default;throw _._result}var Te={current:null},G={transition:null},ne={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:G,ReactCurrentOwner:Z};function N(){throw Error("act(...) is not supported in production builds of React.")}return Le.Children={map:Ee,forEach:function(_,S,se){Ee(_,function(){S.apply(this,arguments)},se)},count:function(_){var S=0;return Ee(_,function(){S++}),S},toArray:function(_){return Ee(_,function(S){return S})||[]},only:function(_){if(!Pe(_))throw Error("React.Children.only expected to receive a single React element child.");return _}},Le.Component=U,Le.Fragment=r,Le.Profiler=u,Le.PureComponent=W,Le.StrictMode=o,Le.Suspense=g,Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,Le.act=N,Le.cloneElement=function(_,S,se){if(_==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_+".");var ye=A({},_.props),ge=_.key,oe=_.ref,Re=_._owner;if(S!=null){if(S.ref!==void 0&&(oe=S.ref,Re=Z.current),S.key!==void 0&&(ge=""+S.key),_.type&&_.type.defaultProps)var J=_.type.defaultProps;for(te in S)ee.call(S,te)&&!F.hasOwnProperty(te)&&(ye[te]=S[te]===void 0&&J!==void 0?J[te]:S[te])}var te=arguments.length-2;if(te===1)ye.children=se;else if(1<te){J=Array(te);for(var ie=0;ie<te;ie++)J[ie]=arguments[ie+2];ye.children=J}return{$$typeof:s,type:_.type,key:ge,ref:oe,props:ye,_owner:Re}},Le.createContext=function(_){return _={$$typeof:f,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_.Provider={$$typeof:d,_context:_},_.Consumer=_},Le.createElement=_e,Le.createFactory=function(_){var S=_e.bind(null,_);return S.type=_,S},Le.createRef=function(){return{current:null}},Le.forwardRef=function(_){return{$$typeof:p,render:_}},Le.isValidElement=Pe,Le.lazy=function(_){return{$$typeof:y,_payload:{_status:-1,_result:_},_init:Ie}},Le.memo=function(_,S){return{$$typeof:v,type:_,compare:S===void 0?null:S}},Le.startTransition=function(_){var S=G.transition;G.transition={};try{_()}finally{G.transition=S}},Le.unstable_act=N,Le.useCallback=function(_,S){return Te.current.useCallback(_,S)},Le.useContext=function(_){return Te.current.useContext(_)},Le.useDebugValue=function(){},Le.useDeferredValue=function(_){return Te.current.useDeferredValue(_)},Le.useEffect=function(_,S){return Te.current.useEffect(_,S)},Le.useId=function(){return Te.current.useId()},Le.useImperativeHandle=function(_,S,se){return Te.current.useImperativeHandle(_,S,se)},Le.useInsertionEffect=function(_,S){return Te.current.useInsertionEffect(_,S)},Le.useLayoutEffect=function(_,S){return Te.current.useLayoutEffect(_,S)},Le.useMemo=function(_,S){return Te.current.useMemo(_,S)},Le.useReducer=function(_,S,se){return Te.current.useReducer(_,S,se)},Le.useRef=function(_){return Te.current.useRef(_)},Le.useState=function(_){return Te.current.useState(_)},Le.useSyncExternalStore=function(_,S,se){return Te.current.useSyncExternalStore(_,S,se)},Le.useTransition=function(){return Te.current.useTransition()},Le.version="18.3.1",Le}var hd;function Il(){return hd||(hd=1,hl.exports=fp()),hl.exports}var fd;function pp(){if(fd)return zs;fd=1;var s=Il(),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function f(p,g,v){var y,C={},x=null,b=null;v!==void 0&&(x=""+v),g.key!==void 0&&(x=""+g.key),g.ref!==void 0&&(b=g.ref);for(y in g)o.call(g,y)&&!d.hasOwnProperty(y)&&(C[y]=g[y]);if(p&&p.defaultProps)for(y in g=p.defaultProps,g)C[y]===void 0&&(C[y]=g[y]);return{$$typeof:n,type:p,key:x,ref:b,props:C,_owner:u.current}}return zs.Fragment=r,zs.jsx=f,zs.jsxs=f,zs}var pd;function mp(){return pd||(pd=1,dl.exports=pp()),dl.exports}var l=mp(),$=Il(),ca={},fl={exports:{}},Rt={},pl={exports:{}},ml={};var md;function gp(){return md||(md=1,(function(s){function n(G,ne){var N=G.length;G.push(ne);e:for(;0<N;){var _=N-1>>>1,S=G[_];if(0<u(S,ne))G[_]=ne,G[N]=S,N=_;else break e}}function r(G){return G.length===0?null:G[0]}function o(G){if(G.length===0)return null;var ne=G[0],N=G.pop();if(N!==ne){G[0]=N;e:for(var _=0,S=G.length,se=S>>>1;_<se;){var ye=2*(_+1)-1,ge=G[ye],oe=ye+1,Re=G[oe];if(0>u(ge,N))oe<S&&0>u(Re,ge)?(G[_]=Re,G[oe]=N,_=oe):(G[_]=ge,G[ye]=N,_=ye);else if(oe<S&&0>u(Re,N))G[_]=Re,G[oe]=N,_=oe;else break e}}return ne}function u(G,ne){var N=G.sortIndex-ne.sortIndex;return N!==0?N:G.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;s.unstable_now=function(){return d.now()}}else{var f=Date,p=f.now();s.unstable_now=function(){return f.now()-p}}var g=[],v=[],y=1,C=null,x=3,b=!1,A=!1,R=!1,U=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(G){for(var ne=r(v);ne!==null;){if(ne.callback===null)o(v);else if(ne.startTime<=G)o(v),ne.sortIndex=ne.expirationTime,n(g,ne);else break;ne=r(v)}}function q(G){if(R=!1,E(G),!A)if(r(g)!==null)A=!0,Ie(ee);else{var ne=r(v);ne!==null&&Te(q,ne.startTime-G)}}function ee(G,ne){A=!1,R&&(R=!1,D(_e),_e=-1),b=!0;var N=x;try{for(E(ne),C=r(g);C!==null&&(!(C.expirationTime>ne)||G&&!Ue());){var _=C.callback;if(typeof _=="function"){C.callback=null,x=C.priorityLevel;var S=_(C.expirationTime<=ne);ne=s.unstable_now(),typeof S=="function"?C.callback=S:C===r(g)&&o(g),E(ne)}else o(g);C=r(g)}if(C!==null)var se=!0;else{var ye=r(v);ye!==null&&Te(q,ye.startTime-ne),se=!1}return se}finally{C=null,x=N,b=!1}}var Z=!1,F=null,_e=-1,we=5,Pe=-1;function Ue(){return!(s.unstable_now()-Pe<we)}function Oe(){if(F!==null){var G=s.unstable_now();Pe=G;var ne=!0;try{ne=F(!0,G)}finally{ne?ve():(Z=!1,F=null)}}else Z=!1}var ve;if(typeof W=="function")ve=function(){W(Oe)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,Ee=Ae.port2;Ae.port1.onmessage=Oe,ve=function(){Ee.postMessage(null)}}else ve=function(){U(Oe,0)};function Ie(G){F=G,Z||(Z=!0,ve())}function Te(G,ne){_e=U(function(){G(s.unstable_now())},ne)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(G){G.callback=null},s.unstable_continueExecution=function(){A||b||(A=!0,Ie(ee))},s.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):we=0<G?Math.floor(1e3/G):5},s.unstable_getCurrentPriorityLevel=function(){return x},s.unstable_getFirstCallbackNode=function(){return r(g)},s.unstable_next=function(G){switch(x){case 1:case 2:case 3:var ne=3;break;default:ne=x}var N=x;x=ne;try{return G()}finally{x=N}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(G,ne){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var N=x;x=G;try{return ne()}finally{x=N}},s.unstable_scheduleCallback=function(G,ne,N){var _=s.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?_+N:_):N=_,G){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=N+S,G={id:y++,callback:ne,priorityLevel:G,startTime:N,expirationTime:S,sortIndex:-1},N>_?(G.sortIndex=N,n(v,G),r(g)===null&&G===r(v)&&(R?(D(_e),_e=-1):R=!0,Te(q,N-_))):(G.sortIndex=S,n(g,G),A||b||(A=!0,Ie(ee))),G},s.unstable_shouldYield=Ue,s.unstable_wrapCallback=function(G){var ne=x;return function(){var N=x;x=ne;try{return G.apply(this,arguments)}finally{x=N}}}})(ml)),ml}var gd;function vp(){return gd||(gd=1,pl.exports=gp()),pl.exports}var vd;function yp(){if(vd)return Rt;vd=1;var s=Il(),n=vp();function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function d(e,t){f(e,t),f(e+"Capture",t)}function f(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},C={};function x(e){return g.call(C,e)?!0:g.call(y,e)?!1:v.test(e)?C[e]=!0:(y[e]=!0,!1)}function b(e,t,i,a){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function A(e,t,i,a){if(t===null||typeof t>"u"||b(e,t,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function R(e,t,i,a,c,h,m){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=m}var U={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){U[e]=new R(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];U[t]=new R(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){U[e]=new R(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){U[e]=new R(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){U[e]=new R(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){U[e]=new R(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){U[e]=new R(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){U[e]=new R(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){U[e]=new R(e,5,!1,e.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function W(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(D,W);U[t]=new R(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(D,W);U[t]=new R(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(D,W);U[t]=new R(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){U[e]=new R(e,1,!1,e.toLowerCase(),null,!1,!1)}),U.xlinkHref=new R("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){U[e]=new R(e,1,!1,e.toLowerCase(),null,!0,!0)});function E(e,t,i,a){var c=U.hasOwnProperty(t)?U[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(A(t,i,c,a)&&(i=null),a||c===null?x(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(t=c.attributeName,a=c.attributeNamespace,i===null?e.removeAttribute(t):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,a?e.setAttributeNS(a,t,i):e.setAttribute(t,i))))}var q=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ee=Symbol.for("react.element"),Z=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),_e=Symbol.for("react.strict_mode"),we=Symbol.for("react.profiler"),Pe=Symbol.for("react.provider"),Ue=Symbol.for("react.context"),Oe=Symbol.for("react.forward_ref"),ve=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),Ee=Symbol.for("react.memo"),Ie=Symbol.for("react.lazy"),Te=Symbol.for("react.offscreen"),G=Symbol.iterator;function ne(e){return e===null||typeof e!="object"?null:(e=G&&e[G]||e["@@iterator"],typeof e=="function"?e:null)}var N=Object.assign,_;function S(e){if(_===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);_=t&&t[1]||""}return`
`+_+e}var se=!1;function ye(e,t){if(!e||se)return"";se=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(I){var a=I}Reflect.construct(e,[],t)}else{try{t.call()}catch(I){a=I}e.call(t.prototype)}else{try{throw Error()}catch(I){a=I}e()}}catch(I){if(I&&a&&typeof I.stack=="string"){for(var c=I.stack.split(`
`),h=a.stack.split(`
`),m=c.length-1,w=h.length-1;1<=m&&0<=w&&c[m]!==h[w];)w--;for(;1<=m&&0<=w;m--,w--)if(c[m]!==h[w]){if(m!==1||w!==1)do if(m--,w--,0>w||c[m]!==h[w]){var k=`
`+c[m].replace(" at new "," at ");return e.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",e.displayName)),k}while(1<=m&&0<=w);break}}}finally{se=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?S(e):""}function ge(e){switch(e.tag){case 5:return S(e.type);case 16:return S("Lazy");case 13:return S("Suspense");case 19:return S("SuspenseList");case 0:case 2:case 15:return e=ye(e.type,!1),e;case 11:return e=ye(e.type.render,!1),e;case 1:return e=ye(e.type,!0),e;default:return""}}function oe(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case F:return"Fragment";case Z:return"Portal";case we:return"Profiler";case _e:return"StrictMode";case ve:return"Suspense";case Ae:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ue:return(e.displayName||"Context")+".Consumer";case Pe:return(e._context.displayName||"Context")+".Provider";case Oe:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ee:return t=e.displayName||null,t!==null?t:oe(e.type)||"Memo";case Ie:t=e._payload,e=e._init;try{return oe(e(t))}catch{}}return null}function Re(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oe(t);case 8:return t===_e?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function J(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function te(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ie(e){var t=te(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,h=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(m){a=""+m,h.call(this,m)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(m){a=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function X(e){e._valueTracker||(e._valueTracker=ie(e))}function pe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),a="";return e&&(a=te(e)?e.checked?"true":"false":e.value),e=a,e!==i?(t.setValue(e),!0):!1}function B(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function je(e,t){var i=t.checked;return N({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function Me(e,t){var i=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;i=J(t.value!=null?t.value:i),e._wrapperState={initialChecked:a,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function gt(e,t){t=t.checked,t!=null&&E(e,"checked",t,!1)}function bt(e,t){gt(e,t);var i=J(t.value),a=t.type;if(i!=null)a==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Kt(e,t.type,i):t.hasOwnProperty("defaultValue")&&Kt(e,t.type,J(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Pt(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function Kt(e,t,i){(t!=="number"||B(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var zt=Array.isArray;function Ot(e,t,i,a){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&a&&(e[i].defaultSelected=!0)}else{for(i=""+J(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function kt(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(r(91));return N({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function fn(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(r(92));if(zt(i)){if(1<i.length)throw Error(r(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:J(i)}}function En(e,t){var i=J(t.value),a=J(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),a!=null&&(e.defaultValue=""+a)}function pn(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function mn(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function an(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?mn(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var M,ce=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,i,a,c)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(M=M||document.createElement("div"),M.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=M.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Fe(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var ot={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zn=["Webkit","ms","Moz","O"];Object.keys(ot).forEach(function(e){Zn.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ot[t]=ot[e]})});function Ht(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||ot.hasOwnProperty(e)&&ot[e]?(""+t).trim():t+"px"}function Tn(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var a=i.indexOf("--")===0,c=Ht(i,t[i],a);i==="float"&&(i="cssFloat"),a?e.setProperty(i,c):e[i]=c}}var er=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gn(e,t){if(t){if(er[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(r(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(r(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(t.style!=null&&typeof t.style!="object")throw Error(r(62))}}function Rn(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pn=null;function tr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var z=null,ke=null,De=null;function lt(e){if(e=bs(e)){if(typeof z!="function")throw Error(r(280));var t=e.stateNode;t&&(t=bi(t),z(e.stateNode,e.type,t))}}function on(e){ke?De?De.push(e):De=[e]:ke=e}function ss(){if(ke){var e=ke,t=De;if(De=ke=null,lt(e),t)for(e=0;e<t.length;e++)lt(t[e])}}function Zs(e,t){return e(t)}function O(){}var L=!1;function V(e,t,i){if(L)return e(t,i);L=!0;try{return Zs(e,t,i)}finally{L=!1,(ke!==null||De!==null)&&(O(),ss())}}function de(e,t){var i=e.stateNode;if(i===null)return null;var a=bi(i);if(a===null)return null;i=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(r(231,t,typeof i));return i}var Ge=!1;if(p)try{var Gt={};Object.defineProperty(Gt,"passive",{get:function(){Ge=!0}}),window.addEventListener("test",Gt,Gt),window.removeEventListener("test",Gt,Gt)}catch{Ge=!1}function ja(e,t,i,a,c,h,m,w,k){var I=Array.prototype.slice.call(arguments,3);try{t.apply(i,I)}catch(H){this.onError(H)}}var nr=!1,Sr=null,xr=!1,is=null,Na={onError:function(e){nr=!0,Sr=e}};function Ca(e,t,i,a,c,h,m,w,k){nr=!1,Sr=null,ja.apply(Na,arguments)}function Ea(e,t,i,a,c,h,m,w,k){if(Ca.apply(this,arguments),nr){if(nr){var I=Sr;nr=!1,Sr=null}else throw Error(r(198));xr||(xr=!0,is=I)}}function vn(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function ei(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ti(e){if(vn(e)!==e)throw Error(r(188))}function Ta(e){var t=e.alternate;if(!t){if(t=vn(e),t===null)throw Error(r(188));return t!==e?null:e}for(var i=e,a=t;;){var c=i.return;if(c===null)break;var h=c.alternate;if(h===null){if(a=c.return,a!==null){i=a;continue}break}if(c.child===h.child){for(h=c.child;h;){if(h===i)return ti(c),e;if(h===a)return ti(c),t;h=h.sibling}throw Error(r(188))}if(i.return!==a.return)i=c,a=h;else{for(var m=!1,w=c.child;w;){if(w===i){m=!0,i=c,a=h;break}if(w===a){m=!0,a=c,i=h;break}w=w.sibling}if(!m){for(w=h.child;w;){if(w===i){m=!0,i=h,a=c;break}if(w===a){m=!0,a=h,i=c;break}w=w.sibling}if(!m)throw Error(r(189))}}if(i.alternate!==a)throw Error(r(190))}if(i.tag!==3)throw Error(r(188));return i.stateNode.current===i?e:t}function ni(e){return e=Ta(e),e!==null?ri(e):null}function ri(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ri(e);if(t!==null)return t;e=e.sibling}return null}var $l=n.unstable_scheduleCallback,zl=n.unstable_cancelCallback,xh=n.unstable_shouldYield,bh=n.unstable_requestPaint,Ze=n.unstable_now,jh=n.unstable_getCurrentPriorityLevel,Ra=n.unstable_ImmediatePriority,Fl=n.unstable_UserBlockingPriority,si=n.unstable_NormalPriority,Nh=n.unstable_LowPriority,Bl=n.unstable_IdlePriority,ii=null,ln=null;function Ch(e){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(ii,e,void 0,(e.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:Rh,Eh=Math.log,Th=Math.LN2;function Rh(e){return e>>>=0,e===0?32:31-(Eh(e)/Th|0)|0}var ai=64,oi=4194304;function as(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function li(e,t){var i=e.pendingLanes;if(i===0)return 0;var a=0,c=e.suspendedLanes,h=e.pingedLanes,m=i&268435455;if(m!==0){var w=m&~c;w!==0?a=as(w):(h&=m,h!==0&&(a=as(h)))}else m=i&~c,m!==0?a=as(m):h!==0&&(a=as(h));if(a===0)return 0;if(t!==0&&t!==a&&(t&c)===0&&(c=a&-a,h=t&-t,c>=h||c===16&&(h&4194240)!==0))return t;if((a&4)!==0&&(a|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)i=31-Jt(t),c=1<<i,a|=e[i],t&=~c;return a}function Ph(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oh(e,t){for(var i=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,h=e.pendingLanes;0<h;){var m=31-Jt(h),w=1<<m,k=c[m];k===-1?((w&i)===0||(w&a)!==0)&&(c[m]=Ph(w,t)):k<=t&&(e.expiredLanes|=w),h&=~w}}function Pa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ml(){var e=ai;return ai<<=1,(ai&4194240)===0&&(ai=64),e}function Oa(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function os(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Jt(t),e[t]=i}function Ah(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<i;){var c=31-Jt(i),h=1<<c;t[c]=0,a[c]=-1,e[c]=-1,i&=~h}}function Aa(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var a=31-Jt(i),c=1<<a;c&t|e[a]&t&&(e[a]|=t),i&=~c}}var Be=0;function Wl(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var ql,Ia,Vl,Kl,Hl,La=!1,ci=[],On=null,An=null,In=null,ls=new Map,cs=new Map,Ln=[],Ih="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gl(e,t){switch(e){case"focusin":case"focusout":On=null;break;case"dragenter":case"dragleave":An=null;break;case"mouseover":case"mouseout":In=null;break;case"pointerover":case"pointerout":ls.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":cs.delete(t.pointerId)}}function us(e,t,i,a,c,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:i,eventSystemFlags:a,nativeEvent:h,targetContainers:[c]},t!==null&&(t=bs(t),t!==null&&Ia(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Lh(e,t,i,a,c){switch(t){case"focusin":return On=us(On,e,t,i,a,c),!0;case"dragenter":return An=us(An,e,t,i,a,c),!0;case"mouseover":return In=us(In,e,t,i,a,c),!0;case"pointerover":var h=c.pointerId;return ls.set(h,us(ls.get(h)||null,e,t,i,a,c)),!0;case"gotpointercapture":return h=c.pointerId,cs.set(h,us(cs.get(h)||null,e,t,i,a,c)),!0}return!1}function Jl(e){var t=rr(e.target);if(t!==null){var i=vn(t);if(i!==null){if(t=i.tag,t===13){if(t=ei(i),t!==null){e.blockedOn=t,Hl(e.priority,function(){Vl(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ui(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Da(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);Pn=a,i.target.dispatchEvent(a),Pn=null}else return t=bs(i),t!==null&&Ia(t),e.blockedOn=i,!1;t.shift()}return!0}function Ql(e,t,i){ui(e)&&i.delete(t)}function Uh(){La=!1,On!==null&&ui(On)&&(On=null),An!==null&&ui(An)&&(An=null),In!==null&&ui(In)&&(In=null),ls.forEach(Ql),cs.forEach(Ql)}function ds(e,t){e.blockedOn===t&&(e.blockedOn=null,La||(La=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Uh)))}function hs(e){function t(c){return ds(c,e)}if(0<ci.length){ds(ci[0],e);for(var i=1;i<ci.length;i++){var a=ci[i];a.blockedOn===e&&(a.blockedOn=null)}}for(On!==null&&ds(On,e),An!==null&&ds(An,e),In!==null&&ds(In,e),ls.forEach(t),cs.forEach(t),i=0;i<Ln.length;i++)a=Ln[i],a.blockedOn===e&&(a.blockedOn=null);for(;0<Ln.length&&(i=Ln[0],i.blockedOn===null);)Jl(i),i.blockedOn===null&&Ln.shift()}var br=q.ReactCurrentBatchConfig,di=!0;function Dh(e,t,i,a){var c=Be,h=br.transition;br.transition=null;try{Be=1,Ua(e,t,i,a)}finally{Be=c,br.transition=h}}function $h(e,t,i,a){var c=Be,h=br.transition;br.transition=null;try{Be=4,Ua(e,t,i,a)}finally{Be=c,br.transition=h}}function Ua(e,t,i,a){if(di){var c=Da(e,t,i,a);if(c===null)eo(e,t,a,hi,i),Gl(e,a);else if(Lh(c,e,t,i,a))a.stopPropagation();else if(Gl(e,a),t&4&&-1<Ih.indexOf(e)){for(;c!==null;){var h=bs(c);if(h!==null&&ql(h),h=Da(e,t,i,a),h===null&&eo(e,t,a,hi,i),h===c)break;c=h}c!==null&&a.stopPropagation()}else eo(e,t,a,null,i)}}var hi=null;function Da(e,t,i,a){if(hi=null,e=tr(a),e=rr(e),e!==null)if(t=vn(e),t===null)e=null;else if(i=t.tag,i===13){if(e=ei(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return hi=e,null}function Yl(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jh()){case Ra:return 1;case Fl:return 4;case si:case Nh:return 16;case Bl:return 536870912;default:return 16}default:return 16}}var Un=null,$a=null,fi=null;function Xl(){if(fi)return fi;var e,t=$a,i=t.length,a,c="value"in Un?Un.value:Un.textContent,h=c.length;for(e=0;e<i&&t[e]===c[e];e++);var m=i-e;for(a=1;a<=m&&t[i-a]===c[h-a];a++);return fi=c.slice(e,1<a?1-a:void 0)}function pi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function mi(){return!0}function Zl(){return!1}function At(e){function t(i,a,c,h,m){this._reactName=i,this._targetInst=c,this.type=a,this.nativeEvent=h,this.target=m,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(i=e[w],this[w]=i?i(h):h[w]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?mi:Zl,this.isPropagationStopped=Zl,this}return N(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=mi)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=mi)},persist:function(){},isPersistent:mi}),t}var jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},za=At(jr),fs=N({},jr,{view:0,detail:0}),zh=At(fs),Fa,Ba,ps,gi=N({},fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wa,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ps&&(ps&&e.type==="mousemove"?(Fa=e.screenX-ps.screenX,Ba=e.screenY-ps.screenY):Ba=Fa=0,ps=e),Fa)},movementY:function(e){return"movementY"in e?e.movementY:Ba}}),ec=At(gi),Fh=N({},gi,{dataTransfer:0}),Bh=At(Fh),Mh=N({},fs,{relatedTarget:0}),Ma=At(Mh),Wh=N({},jr,{animationName:0,elapsedTime:0,pseudoElement:0}),qh=At(Wh),Vh=N({},jr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Kh=At(Vh),Hh=N({},jr,{data:0}),tc=At(Hh),Gh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Qh[e])?!!t[e]:!1}function Wa(){return Yh}var Xh=N({},fs,{key:function(e){if(e.key){var t=Gh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=pi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Jh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wa,charCode:function(e){return e.type==="keypress"?pi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?pi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Zh=At(Xh),ef=N({},gi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nc=At(ef),tf=N({},fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wa}),nf=At(tf),rf=N({},jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),sf=At(rf),af=N({},gi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),of=At(af),lf=[9,13,27,32],qa=p&&"CompositionEvent"in window,ms=null;p&&"documentMode"in document&&(ms=document.documentMode);var cf=p&&"TextEvent"in window&&!ms,rc=p&&(!qa||ms&&8<ms&&11>=ms),sc=" ",ic=!1;function ac(e,t){switch(e){case"keyup":return lf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Nr=!1;function uf(e,t){switch(e){case"compositionend":return oc(t);case"keypress":return t.which!==32?null:(ic=!0,sc);case"textInput":return e=t.data,e===sc&&ic?null:e;default:return null}}function df(e,t){if(Nr)return e==="compositionend"||!qa&&ac(e,t)?(e=Xl(),fi=$a=Un=null,Nr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rc&&t.locale!=="ko"?null:t.data;default:return null}}var hf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!hf[e.type]:t==="textarea"}function cc(e,t,i,a){on(a),t=ki(t,"onChange"),0<t.length&&(i=new za("onChange","change",null,i,a),e.push({event:i,listeners:t}))}var gs=null,vs=null;function ff(e){Cc(e,0)}function vi(e){var t=Pr(e);if(pe(t))return e}function pf(e,t){if(e==="change")return t}var uc=!1;if(p){var Va;if(p){var Ka="oninput"in document;if(!Ka){var dc=document.createElement("div");dc.setAttribute("oninput","return;"),Ka=typeof dc.oninput=="function"}Va=Ka}else Va=!1;uc=Va&&(!document.documentMode||9<document.documentMode)}function hc(){gs&&(gs.detachEvent("onpropertychange",fc),vs=gs=null)}function fc(e){if(e.propertyName==="value"&&vi(vs)){var t=[];cc(t,vs,e,tr(e)),V(ff,t)}}function mf(e,t,i){e==="focusin"?(hc(),gs=t,vs=i,gs.attachEvent("onpropertychange",fc)):e==="focusout"&&hc()}function gf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return vi(vs)}function vf(e,t){if(e==="click")return vi(t)}function yf(e,t){if(e==="input"||e==="change")return vi(t)}function wf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qt=typeof Object.is=="function"?Object.is:wf;function ys(e,t){if(Qt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var c=i[a];if(!g.call(t,c)||!Qt(e[c],t[c]))return!1}return!0}function pc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function mc(e,t){var i=pc(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=t&&a>=t)return{node:i,offset:t-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=pc(i)}}function gc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?gc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function vc(){for(var e=window,t=B();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=B(e.document)}return t}function Ha(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function _f(e){var t=vc(),i=e.focusedElem,a=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&gc(i.ownerDocument.documentElement,i)){if(a!==null&&Ha(i)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=i.textContent.length,h=Math.min(a.start,c);a=a.end===void 0?h:Math.min(a.end,c),!e.extend&&h>a&&(c=a,a=h,h=c),c=mc(i,h);var m=mc(i,a);c&&m&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==m.node||e.focusOffset!==m.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),h>a?(e.addRange(t),e.extend(m.node,m.offset)):(t.setEnd(m.node,m.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var kf=p&&"documentMode"in document&&11>=document.documentMode,Cr=null,Ga=null,ws=null,Ja=!1;function yc(e,t,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Ja||Cr==null||Cr!==B(a)||(a=Cr,"selectionStart"in a&&Ha(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),ws&&ys(ws,a)||(ws=a,a=ki(Ga,"onSelect"),0<a.length&&(t=new za("onSelect","select",null,t,i),e.push({event:t,listeners:a}),t.target=Cr)))}function yi(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Er={animationend:yi("Animation","AnimationEnd"),animationiteration:yi("Animation","AnimationIteration"),animationstart:yi("Animation","AnimationStart"),transitionend:yi("Transition","TransitionEnd")},Qa={},wc={};p&&(wc=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);function wi(e){if(Qa[e])return Qa[e];if(!Er[e])return e;var t=Er[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in wc)return Qa[e]=t[i];return e}var _c=wi("animationend"),kc=wi("animationiteration"),Sc=wi("animationstart"),xc=wi("transitionend"),bc=new Map,jc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dn(e,t){bc.set(e,t),d(t,[e])}for(var Ya=0;Ya<jc.length;Ya++){var Xa=jc[Ya],Sf=Xa.toLowerCase(),xf=Xa[0].toUpperCase()+Xa.slice(1);Dn(Sf,"on"+xf)}Dn(_c,"onAnimationEnd"),Dn(kc,"onAnimationIteration"),Dn(Sc,"onAnimationStart"),Dn("dblclick","onDoubleClick"),Dn("focusin","onFocus"),Dn("focusout","onBlur"),Dn(xc,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),d("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),d("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),d("onBeforeInput",["compositionend","keypress","textInput","paste"]),d("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _s="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bf=new Set("cancel close invalid load scroll toggle".split(" ").concat(_s));function Nc(e,t,i){var a=e.type||"unknown-event";e.currentTarget=i,Ea(a,t,void 0,e),e.currentTarget=null}function Cc(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],c=a.event;a=a.listeners;e:{var h=void 0;if(t)for(var m=a.length-1;0<=m;m--){var w=a[m],k=w.instance,I=w.currentTarget;if(w=w.listener,k!==h&&c.isPropagationStopped())break e;Nc(c,w,I),h=k}else for(m=0;m<a.length;m++){if(w=a[m],k=w.instance,I=w.currentTarget,w=w.listener,k!==h&&c.isPropagationStopped())break e;Nc(c,w,I),h=k}}}if(xr)throw e=is,xr=!1,is=null,e}function Ve(e,t){var i=t[ao];i===void 0&&(i=t[ao]=new Set);var a=e+"__bubble";i.has(a)||(Ec(t,e,2,!1),i.add(a))}function Za(e,t,i){var a=0;t&&(a|=4),Ec(i,e,a,t)}var _i="_reactListening"+Math.random().toString(36).slice(2);function ks(e){if(!e[_i]){e[_i]=!0,o.forEach(function(i){i!=="selectionchange"&&(bf.has(i)||Za(i,!1,e),Za(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_i]||(t[_i]=!0,Za("selectionchange",!1,t))}}function Ec(e,t,i,a){switch(Yl(t)){case 1:var c=Dh;break;case 4:c=$h;break;default:c=Ua}i=c.bind(null,t,i,e),c=void 0,!Ge||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function eo(e,t,i,a,c){var h=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var m=a.tag;if(m===3||m===4){var w=a.stateNode.containerInfo;if(w===c||w.nodeType===8&&w.parentNode===c)break;if(m===4)for(m=a.return;m!==null;){var k=m.tag;if((k===3||k===4)&&(k=m.stateNode.containerInfo,k===c||k.nodeType===8&&k.parentNode===c))return;m=m.return}for(;w!==null;){if(m=rr(w),m===null)return;if(k=m.tag,k===5||k===6){a=h=m;continue e}w=w.parentNode}}a=a.return}V(function(){var I=h,H=tr(i),Q=[];e:{var K=bc.get(e);if(K!==void 0){var re=za,le=e;switch(e){case"keypress":if(pi(i)===0)break e;case"keydown":case"keyup":re=Zh;break;case"focusin":le="focus",re=Ma;break;case"focusout":le="blur",re=Ma;break;case"beforeblur":case"afterblur":re=Ma;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=ec;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=Bh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=nf;break;case _c:case kc:case Sc:re=qh;break;case xc:re=sf;break;case"scroll":re=zh;break;case"wheel":re=of;break;case"copy":case"cut":case"paste":re=Kh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=nc}var he=(t&4)!==0,et=!he&&e==="scroll",T=he?K!==null?K+"Capture":null:K;he=[];for(var j=I,P;j!==null;){P=j;var Y=P.stateNode;if(P.tag===5&&Y!==null&&(P=Y,T!==null&&(Y=de(j,T),Y!=null&&he.push(Ss(j,Y,P)))),et)break;j=j.return}0<he.length&&(K=new re(K,le,null,i,H),Q.push({event:K,listeners:he}))}}if((t&7)===0){e:{if(K=e==="mouseover"||e==="pointerover",re=e==="mouseout"||e==="pointerout",K&&i!==Pn&&(le=i.relatedTarget||i.fromElement)&&(rr(le)||le[yn]))break e;if((re||K)&&(K=H.window===H?H:(K=H.ownerDocument)?K.defaultView||K.parentWindow:window,re?(le=i.relatedTarget||i.toElement,re=I,le=le?rr(le):null,le!==null&&(et=vn(le),le!==et||le.tag!==5&&le.tag!==6)&&(le=null)):(re=null,le=I),re!==le)){if(he=ec,Y="onMouseLeave",T="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(he=nc,Y="onPointerLeave",T="onPointerEnter",j="pointer"),et=re==null?K:Pr(re),P=le==null?K:Pr(le),K=new he(Y,j+"leave",re,i,H),K.target=et,K.relatedTarget=P,Y=null,rr(H)===I&&(he=new he(T,j+"enter",le,i,H),he.target=P,he.relatedTarget=et,Y=he),et=Y,re&&le)t:{for(he=re,T=le,j=0,P=he;P;P=Tr(P))j++;for(P=0,Y=T;Y;Y=Tr(Y))P++;for(;0<j-P;)he=Tr(he),j--;for(;0<P-j;)T=Tr(T),P--;for(;j--;){if(he===T||T!==null&&he===T.alternate)break t;he=Tr(he),T=Tr(T)}he=null}else he=null;re!==null&&Tc(Q,K,re,he,!1),le!==null&&et!==null&&Tc(Q,et,le,he,!0)}}e:{if(K=I?Pr(I):window,re=K.nodeName&&K.nodeName.toLowerCase(),re==="select"||re==="input"&&K.type==="file")var fe=pf;else if(lc(K))if(uc)fe=yf;else{fe=gf;var Se=mf}else(re=K.nodeName)&&re.toLowerCase()==="input"&&(K.type==="checkbox"||K.type==="radio")&&(fe=vf);if(fe&&(fe=fe(e,I))){cc(Q,fe,i,H);break e}Se&&Se(e,K,I),e==="focusout"&&(Se=K._wrapperState)&&Se.controlled&&K.type==="number"&&Kt(K,"number",K.value)}switch(Se=I?Pr(I):window,e){case"focusin":(lc(Se)||Se.contentEditable==="true")&&(Cr=Se,Ga=I,ws=null);break;case"focusout":ws=Ga=Cr=null;break;case"mousedown":Ja=!0;break;case"contextmenu":case"mouseup":case"dragend":Ja=!1,yc(Q,i,H);break;case"selectionchange":if(kf)break;case"keydown":case"keyup":yc(Q,i,H)}var xe;if(qa)e:{switch(e){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else Nr?ac(e,i)&&(Ce="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Ce="onCompositionStart");Ce&&(rc&&i.locale!=="ko"&&(Nr||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&Nr&&(xe=Xl()):(Un=H,$a="value"in Un?Un.value:Un.textContent,Nr=!0)),Se=ki(I,Ce),0<Se.length&&(Ce=new tc(Ce,e,null,i,H),Q.push({event:Ce,listeners:Se}),xe?Ce.data=xe:(xe=oc(i),xe!==null&&(Ce.data=xe)))),(xe=cf?uf(e,i):df(e,i))&&(I=ki(I,"onBeforeInput"),0<I.length&&(H=new tc("onBeforeInput","beforeinput",null,i,H),Q.push({event:H,listeners:I}),H.data=xe))}Cc(Q,t)})}function Ss(e,t,i){return{instance:e,listener:t,currentTarget:i}}function ki(e,t){for(var i=t+"Capture",a=[];e!==null;){var c=e,h=c.stateNode;c.tag===5&&h!==null&&(c=h,h=de(e,i),h!=null&&a.unshift(Ss(e,h,c)),h=de(e,t),h!=null&&a.push(Ss(e,h,c))),e=e.return}return a}function Tr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Tc(e,t,i,a,c){for(var h=t._reactName,m=[];i!==null&&i!==a;){var w=i,k=w.alternate,I=w.stateNode;if(k!==null&&k===a)break;w.tag===5&&I!==null&&(w=I,c?(k=de(i,h),k!=null&&m.unshift(Ss(i,k,w))):c||(k=de(i,h),k!=null&&m.push(Ss(i,k,w)))),i=i.return}m.length!==0&&e.push({event:t,listeners:m})}var jf=/\r\n?/g,Nf=/\u0000|\uFFFD/g;function Rc(e){return(typeof e=="string"?e:""+e).replace(jf,`
`).replace(Nf,"")}function Si(e,t,i){if(t=Rc(t),Rc(e)!==t&&i)throw Error(r(425))}function xi(){}var to=null,no=null;function ro(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var so=typeof setTimeout=="function"?setTimeout:void 0,Cf=typeof clearTimeout=="function"?clearTimeout:void 0,Pc=typeof Promise=="function"?Promise:void 0,Ef=typeof queueMicrotask=="function"?queueMicrotask:typeof Pc<"u"?function(e){return Pc.resolve(null).then(e).catch(Tf)}:so;function Tf(e){setTimeout(function(){throw e})}function io(e,t){var i=t,a=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(a===0){e.removeChild(c),hs(t);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=c}while(i);hs(t)}function $n(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Oc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Rr=Math.random().toString(36).slice(2),cn="__reactFiber$"+Rr,xs="__reactProps$"+Rr,yn="__reactContainer$"+Rr,ao="__reactEvents$"+Rr,Rf="__reactListeners$"+Rr,Pf="__reactHandles$"+Rr;function rr(e){var t=e[cn];if(t)return t;for(var i=e.parentNode;i;){if(t=i[yn]||i[cn]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Oc(e);e!==null;){if(i=e[cn])return i;e=Oc(e)}return t}e=i,i=e.parentNode}return null}function bs(e){return e=e[cn]||e[yn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Pr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(r(33))}function bi(e){return e[xs]||null}var oo=[],Or=-1;function zn(e){return{current:e}}function Ke(e){0>Or||(e.current=oo[Or],oo[Or]=null,Or--)}function We(e,t){Or++,oo[Or]=e.current,e.current=t}var Fn={},vt=zn(Fn),jt=zn(!1),sr=Fn;function Ar(e,t){var i=e.type.contextTypes;if(!i)return Fn;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},h;for(h in i)c[h]=t[h];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function Nt(e){return e=e.childContextTypes,e!=null}function ji(){Ke(jt),Ke(vt)}function Ac(e,t,i){if(vt.current!==Fn)throw Error(r(168));We(vt,t),We(jt,i)}function Ic(e,t,i){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(r(108,Re(e)||"Unknown",c));return N({},i,a)}function Ni(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Fn,sr=vt.current,We(vt,e),We(jt,jt.current),!0}function Lc(e,t,i){var a=e.stateNode;if(!a)throw Error(r(169));i?(e=Ic(e,t,sr),a.__reactInternalMemoizedMergedChildContext=e,Ke(jt),Ke(vt),We(vt,e)):Ke(jt),We(jt,i)}var wn=null,Ci=!1,lo=!1;function Uc(e){wn===null?wn=[e]:wn.push(e)}function Of(e){Ci=!0,Uc(e)}function Bn(){if(!lo&&wn!==null){lo=!0;var e=0,t=Be;try{var i=wn;for(Be=1;e<i.length;e++){var a=i[e];do a=a(!0);while(a!==null)}wn=null,Ci=!1}catch(c){throw wn!==null&&(wn=wn.slice(e+1)),$l(Ra,Bn),c}finally{Be=t,lo=!1}}return null}var Ir=[],Lr=0,Ei=null,Ti=0,Ft=[],Bt=0,ir=null,_n=1,kn="";function ar(e,t){Ir[Lr++]=Ti,Ir[Lr++]=Ei,Ei=e,Ti=t}function Dc(e,t,i){Ft[Bt++]=_n,Ft[Bt++]=kn,Ft[Bt++]=ir,ir=e;var a=_n;e=kn;var c=32-Jt(a)-1;a&=~(1<<c),i+=1;var h=32-Jt(t)+c;if(30<h){var m=c-c%5;h=(a&(1<<m)-1).toString(32),a>>=m,c-=m,_n=1<<32-Jt(t)+c|i<<c|a,kn=h+e}else _n=1<<h|i<<c|a,kn=e}function co(e){e.return!==null&&(ar(e,1),Dc(e,1,0))}function uo(e){for(;e===Ei;)Ei=Ir[--Lr],Ir[Lr]=null,Ti=Ir[--Lr],Ir[Lr]=null;for(;e===ir;)ir=Ft[--Bt],Ft[Bt]=null,kn=Ft[--Bt],Ft[Bt]=null,_n=Ft[--Bt],Ft[Bt]=null}var It=null,Lt=null,He=!1,Yt=null;function $c(e,t){var i=Vt(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function zc(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,It=e,Lt=$n(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,It=e,Lt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=ir!==null?{id:_n,overflow:kn}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=Vt(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,It=e,Lt=null,!0):!1;default:return!1}}function ho(e){return(e.mode&1)!==0&&(e.flags&128)===0}function fo(e){if(He){var t=Lt;if(t){var i=t;if(!zc(e,t)){if(ho(e))throw Error(r(418));t=$n(i.nextSibling);var a=It;t&&zc(e,t)?$c(a,i):(e.flags=e.flags&-4097|2,He=!1,It=e)}}else{if(ho(e))throw Error(r(418));e.flags=e.flags&-4097|2,He=!1,It=e}}}function Fc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;It=e}function Ri(e){if(e!==It)return!1;if(!He)return Fc(e),He=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ro(e.type,e.memoizedProps)),t&&(t=Lt)){if(ho(e))throw Bc(),Error(r(418));for(;t;)$c(e,t),t=$n(t.nextSibling)}if(Fc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){Lt=$n(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}Lt=null}}else Lt=It?$n(e.stateNode.nextSibling):null;return!0}function Bc(){for(var e=Lt;e;)e=$n(e.nextSibling)}function Ur(){Lt=It=null,He=!1}function po(e){Yt===null?Yt=[e]:Yt.push(e)}var Af=q.ReactCurrentBatchConfig;function js(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(r(309));var a=i.stateNode}if(!a)throw Error(r(147,e));var c=a,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(m){var w=c.refs;m===null?delete w[h]:w[h]=m},t._stringRef=h,t)}if(typeof e!="string")throw Error(r(284));if(!i._owner)throw Error(r(290,e))}return e}function Pi(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Mc(e){var t=e._init;return t(e._payload)}function Wc(e){function t(T,j){if(e){var P=T.deletions;P===null?(T.deletions=[j],T.flags|=16):P.push(j)}}function i(T,j){if(!e)return null;for(;j!==null;)t(T,j),j=j.sibling;return null}function a(T,j){for(T=new Map;j!==null;)j.key!==null?T.set(j.key,j):T.set(j.index,j),j=j.sibling;return T}function c(T,j){return T=Jn(T,j),T.index=0,T.sibling=null,T}function h(T,j,P){return T.index=P,e?(P=T.alternate,P!==null?(P=P.index,P<j?(T.flags|=2,j):P):(T.flags|=2,j)):(T.flags|=1048576,j)}function m(T){return e&&T.alternate===null&&(T.flags|=2),T}function w(T,j,P,Y){return j===null||j.tag!==6?(j=il(P,T.mode,Y),j.return=T,j):(j=c(j,P),j.return=T,j)}function k(T,j,P,Y){var fe=P.type;return fe===F?H(T,j,P.props.children,Y,P.key):j!==null&&(j.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===Ie&&Mc(fe)===j.type)?(Y=c(j,P.props),Y.ref=js(T,j,P),Y.return=T,Y):(Y=ta(P.type,P.key,P.props,null,T.mode,Y),Y.ref=js(T,j,P),Y.return=T,Y)}function I(T,j,P,Y){return j===null||j.tag!==4||j.stateNode.containerInfo!==P.containerInfo||j.stateNode.implementation!==P.implementation?(j=al(P,T.mode,Y),j.return=T,j):(j=c(j,P.children||[]),j.return=T,j)}function H(T,j,P,Y,fe){return j===null||j.tag!==7?(j=pr(P,T.mode,Y,fe),j.return=T,j):(j=c(j,P),j.return=T,j)}function Q(T,j,P){if(typeof j=="string"&&j!==""||typeof j=="number")return j=il(""+j,T.mode,P),j.return=T,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ee:return P=ta(j.type,j.key,j.props,null,T.mode,P),P.ref=js(T,null,j),P.return=T,P;case Z:return j=al(j,T.mode,P),j.return=T,j;case Ie:var Y=j._init;return Q(T,Y(j._payload),P)}if(zt(j)||ne(j))return j=pr(j,T.mode,P,null),j.return=T,j;Pi(T,j)}return null}function K(T,j,P,Y){var fe=j!==null?j.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return fe!==null?null:w(T,j,""+P,Y);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case ee:return P.key===fe?k(T,j,P,Y):null;case Z:return P.key===fe?I(T,j,P,Y):null;case Ie:return fe=P._init,K(T,j,fe(P._payload),Y)}if(zt(P)||ne(P))return fe!==null?null:H(T,j,P,Y,null);Pi(T,P)}return null}function re(T,j,P,Y,fe){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return T=T.get(P)||null,w(j,T,""+Y,fe);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case ee:return T=T.get(Y.key===null?P:Y.key)||null,k(j,T,Y,fe);case Z:return T=T.get(Y.key===null?P:Y.key)||null,I(j,T,Y,fe);case Ie:var Se=Y._init;return re(T,j,P,Se(Y._payload),fe)}if(zt(Y)||ne(Y))return T=T.get(P)||null,H(j,T,Y,fe,null);Pi(j,Y)}return null}function le(T,j,P,Y){for(var fe=null,Se=null,xe=j,Ce=j=0,dt=null;xe!==null&&Ce<P.length;Ce++){xe.index>Ce?(dt=xe,xe=null):dt=xe.sibling;var ze=K(T,xe,P[Ce],Y);if(ze===null){xe===null&&(xe=dt);break}e&&xe&&ze.alternate===null&&t(T,xe),j=h(ze,j,Ce),Se===null?fe=ze:Se.sibling=ze,Se=ze,xe=dt}if(Ce===P.length)return i(T,xe),He&&ar(T,Ce),fe;if(xe===null){for(;Ce<P.length;Ce++)xe=Q(T,P[Ce],Y),xe!==null&&(j=h(xe,j,Ce),Se===null?fe=xe:Se.sibling=xe,Se=xe);return He&&ar(T,Ce),fe}for(xe=a(T,xe);Ce<P.length;Ce++)dt=re(xe,T,Ce,P[Ce],Y),dt!==null&&(e&&dt.alternate!==null&&xe.delete(dt.key===null?Ce:dt.key),j=h(dt,j,Ce),Se===null?fe=dt:Se.sibling=dt,Se=dt);return e&&xe.forEach(function(Qn){return t(T,Qn)}),He&&ar(T,Ce),fe}function he(T,j,P,Y){var fe=ne(P);if(typeof fe!="function")throw Error(r(150));if(P=fe.call(P),P==null)throw Error(r(151));for(var Se=fe=null,xe=j,Ce=j=0,dt=null,ze=P.next();xe!==null&&!ze.done;Ce++,ze=P.next()){xe.index>Ce?(dt=xe,xe=null):dt=xe.sibling;var Qn=K(T,xe,ze.value,Y);if(Qn===null){xe===null&&(xe=dt);break}e&&xe&&Qn.alternate===null&&t(T,xe),j=h(Qn,j,Ce),Se===null?fe=Qn:Se.sibling=Qn,Se=Qn,xe=dt}if(ze.done)return i(T,xe),He&&ar(T,Ce),fe;if(xe===null){for(;!ze.done;Ce++,ze=P.next())ze=Q(T,ze.value,Y),ze!==null&&(j=h(ze,j,Ce),Se===null?fe=ze:Se.sibling=ze,Se=ze);return He&&ar(T,Ce),fe}for(xe=a(T,xe);!ze.done;Ce++,ze=P.next())ze=re(xe,T,Ce,ze.value,Y),ze!==null&&(e&&ze.alternate!==null&&xe.delete(ze.key===null?Ce:ze.key),j=h(ze,j,Ce),Se===null?fe=ze:Se.sibling=ze,Se=ze);return e&&xe.forEach(function(hp){return t(T,hp)}),He&&ar(T,Ce),fe}function et(T,j,P,Y){if(typeof P=="object"&&P!==null&&P.type===F&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case ee:e:{for(var fe=P.key,Se=j;Se!==null;){if(Se.key===fe){if(fe=P.type,fe===F){if(Se.tag===7){i(T,Se.sibling),j=c(Se,P.props.children),j.return=T,T=j;break e}}else if(Se.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===Ie&&Mc(fe)===Se.type){i(T,Se.sibling),j=c(Se,P.props),j.ref=js(T,Se,P),j.return=T,T=j;break e}i(T,Se);break}else t(T,Se);Se=Se.sibling}P.type===F?(j=pr(P.props.children,T.mode,Y,P.key),j.return=T,T=j):(Y=ta(P.type,P.key,P.props,null,T.mode,Y),Y.ref=js(T,j,P),Y.return=T,T=Y)}return m(T);case Z:e:{for(Se=P.key;j!==null;){if(j.key===Se)if(j.tag===4&&j.stateNode.containerInfo===P.containerInfo&&j.stateNode.implementation===P.implementation){i(T,j.sibling),j=c(j,P.children||[]),j.return=T,T=j;break e}else{i(T,j);break}else t(T,j);j=j.sibling}j=al(P,T.mode,Y),j.return=T,T=j}return m(T);case Ie:return Se=P._init,et(T,j,Se(P._payload),Y)}if(zt(P))return le(T,j,P,Y);if(ne(P))return he(T,j,P,Y);Pi(T,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,j!==null&&j.tag===6?(i(T,j.sibling),j=c(j,P),j.return=T,T=j):(i(T,j),j=il(P,T.mode,Y),j.return=T,T=j),m(T)):i(T,j)}return et}var Dr=Wc(!0),qc=Wc(!1),Oi=zn(null),Ai=null,$r=null,mo=null;function go(){mo=$r=Ai=null}function vo(e){var t=Oi.current;Ke(Oi),e._currentValue=t}function yo(e,t,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===i)break;e=e.return}}function zr(e,t){Ai=e,mo=$r=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Ct=!0),e.firstContext=null)}function Mt(e){var t=e._currentValue;if(mo!==e)if(e={context:e,memoizedValue:t,next:null},$r===null){if(Ai===null)throw Error(r(308));$r=e,Ai.dependencies={lanes:0,firstContext:e}}else $r=$r.next=e;return t}var or=null;function wo(e){or===null?or=[e]:or.push(e)}function Vc(e,t,i,a){var c=t.interleaved;return c===null?(i.next=i,wo(t)):(i.next=c.next,c.next=i),t.interleaved=i,Sn(e,a)}function Sn(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Mn=!1;function _o(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function xn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Wn(e,t,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,($e&2)!==0){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,Sn(e,i)}return c=a.interleaved,c===null?(t.next=t,wo(a)):(t.next=c.next,c.next=t),a.interleaved=t,Sn(e,i)}function Ii(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,Aa(e,i)}}function Hc(e,t){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var c=null,h=null;if(i=i.firstBaseUpdate,i!==null){do{var m={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};h===null?c=h=m:h=h.next=m,i=i.next}while(i!==null);h===null?c=h=t:h=h.next=t}else c=h=t;i={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:h,shared:a.shared,effects:a.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function Li(e,t,i,a){var c=e.updateQueue;Mn=!1;var h=c.firstBaseUpdate,m=c.lastBaseUpdate,w=c.shared.pending;if(w!==null){c.shared.pending=null;var k=w,I=k.next;k.next=null,m===null?h=I:m.next=I,m=k;var H=e.alternate;H!==null&&(H=H.updateQueue,w=H.lastBaseUpdate,w!==m&&(w===null?H.firstBaseUpdate=I:w.next=I,H.lastBaseUpdate=k))}if(h!==null){var Q=c.baseState;m=0,H=I=k=null,w=h;do{var K=w.lane,re=w.eventTime;if((a&K)===K){H!==null&&(H=H.next={eventTime:re,lane:0,tag:w.tag,payload:w.payload,callback:w.callback,next:null});e:{var le=e,he=w;switch(K=t,re=i,he.tag){case 1:if(le=he.payload,typeof le=="function"){Q=le.call(re,Q,K);break e}Q=le;break e;case 3:le.flags=le.flags&-65537|128;case 0:if(le=he.payload,K=typeof le=="function"?le.call(re,Q,K):le,K==null)break e;Q=N({},Q,K);break e;case 2:Mn=!0}}w.callback!==null&&w.lane!==0&&(e.flags|=64,K=c.effects,K===null?c.effects=[w]:K.push(w))}else re={eventTime:re,lane:K,tag:w.tag,payload:w.payload,callback:w.callback,next:null},H===null?(I=H=re,k=Q):H=H.next=re,m|=K;if(w=w.next,w===null){if(w=c.shared.pending,w===null)break;K=w,w=K.next,K.next=null,c.lastBaseUpdate=K,c.shared.pending=null}}while(!0);if(H===null&&(k=Q),c.baseState=k,c.firstBaseUpdate=I,c.lastBaseUpdate=H,t=c.shared.interleaved,t!==null){c=t;do m|=c.lane,c=c.next;while(c!==t)}else h===null&&(c.shared.lanes=0);ur|=m,e.lanes=m,e.memoizedState=Q}}function Gc(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=i,typeof c!="function")throw Error(r(191,c));c.call(a)}}}var Ns={},un=zn(Ns),Cs=zn(Ns),Es=zn(Ns);function lr(e){if(e===Ns)throw Error(r(174));return e}function ko(e,t){switch(We(Es,t),We(Cs,e),We(un,Ns),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:an(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=an(t,e)}Ke(un),We(un,t)}function Fr(){Ke(un),Ke(Cs),Ke(Es)}function Jc(e){lr(Es.current);var t=lr(un.current),i=an(t,e.type);t!==i&&(We(Cs,e),We(un,i))}function So(e){Cs.current===e&&(Ke(un),Ke(Cs))}var Je=zn(0);function Ui(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xo=[];function bo(){for(var e=0;e<xo.length;e++)xo[e]._workInProgressVersionPrimary=null;xo.length=0}var Di=q.ReactCurrentDispatcher,jo=q.ReactCurrentBatchConfig,cr=0,Qe=null,rt=null,ct=null,$i=!1,Ts=!1,Rs=0,If=0;function yt(){throw Error(r(321))}function No(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Qt(e[i],t[i]))return!1;return!0}function Co(e,t,i,a,c,h){if(cr=h,Qe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Di.current=e===null||e.memoizedState===null?$f:zf,e=i(a,c),Ts){h=0;do{if(Ts=!1,Rs=0,25<=h)throw Error(r(301));h+=1,ct=rt=null,t.updateQueue=null,Di.current=Ff,e=i(a,c)}while(Ts)}if(Di.current=Bi,t=rt!==null&&rt.next!==null,cr=0,ct=rt=Qe=null,$i=!1,t)throw Error(r(300));return e}function Eo(){var e=Rs!==0;return Rs=0,e}function dn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?Qe.memoizedState=ct=e:ct=ct.next=e,ct}function Wt(){if(rt===null){var e=Qe.alternate;e=e!==null?e.memoizedState:null}else e=rt.next;var t=ct===null?Qe.memoizedState:ct.next;if(t!==null)ct=t,rt=e;else{if(e===null)throw Error(r(310));rt=e,e={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},ct===null?Qe.memoizedState=ct=e:ct=ct.next=e}return ct}function Ps(e,t){return typeof t=="function"?t(e):t}function To(e){var t=Wt(),i=t.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=e;var a=rt,c=a.baseQueue,h=i.pending;if(h!==null){if(c!==null){var m=c.next;c.next=h.next,h.next=m}a.baseQueue=c=h,i.pending=null}if(c!==null){h=c.next,a=a.baseState;var w=m=null,k=null,I=h;do{var H=I.lane;if((cr&H)===H)k!==null&&(k=k.next={lane:0,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),a=I.hasEagerState?I.eagerState:e(a,I.action);else{var Q={lane:H,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null};k===null?(w=k=Q,m=a):k=k.next=Q,Qe.lanes|=H,ur|=H}I=I.next}while(I!==null&&I!==h);k===null?m=a:k.next=w,Qt(a,t.memoizedState)||(Ct=!0),t.memoizedState=a,t.baseState=m,t.baseQueue=k,i.lastRenderedState=a}if(e=i.interleaved,e!==null){c=e;do h=c.lane,Qe.lanes|=h,ur|=h,c=c.next;while(c!==e)}else c===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function Ro(e){var t=Wt(),i=t.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=e;var a=i.dispatch,c=i.pending,h=t.memoizedState;if(c!==null){i.pending=null;var m=c=c.next;do h=e(h,m.action),m=m.next;while(m!==c);Qt(h,t.memoizedState)||(Ct=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),i.lastRenderedState=h}return[h,a]}function Qc(){}function Yc(e,t){var i=Qe,a=Wt(),c=t(),h=!Qt(a.memoizedState,c);if(h&&(a.memoizedState=c,Ct=!0),a=a.queue,Po(eu.bind(null,i,a,e),[e]),a.getSnapshot!==t||h||ct!==null&&ct.memoizedState.tag&1){if(i.flags|=2048,Os(9,Zc.bind(null,i,a,c,t),void 0,null),ut===null)throw Error(r(349));(cr&30)!==0||Xc(i,t,c)}return c}function Xc(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Qe.updateQueue,t===null?(t={lastEffect:null,stores:null},Qe.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function Zc(e,t,i,a){t.value=i,t.getSnapshot=a,tu(t)&&nu(e)}function eu(e,t,i){return i(function(){tu(t)&&nu(e)})}function tu(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Qt(e,i)}catch{return!0}}function nu(e){var t=Sn(e,1);t!==null&&tn(t,e,1,-1)}function ru(e){var t=dn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:e},t.queue=e,e=e.dispatch=Df.bind(null,Qe,e),[t.memoizedState,e]}function Os(e,t,i,a){return e={tag:e,create:t,destroy:i,deps:a,next:null},t=Qe.updateQueue,t===null?(t={lastEffect:null,stores:null},Qe.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,t.lastEffect=e)),e}function su(){return Wt().memoizedState}function zi(e,t,i,a){var c=dn();Qe.flags|=e,c.memoizedState=Os(1|t,i,void 0,a===void 0?null:a)}function Fi(e,t,i,a){var c=Wt();a=a===void 0?null:a;var h=void 0;if(rt!==null){var m=rt.memoizedState;if(h=m.destroy,a!==null&&No(a,m.deps)){c.memoizedState=Os(t,i,h,a);return}}Qe.flags|=e,c.memoizedState=Os(1|t,i,h,a)}function iu(e,t){return zi(8390656,8,e,t)}function Po(e,t){return Fi(2048,8,e,t)}function au(e,t){return Fi(4,2,e,t)}function ou(e,t){return Fi(4,4,e,t)}function lu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function cu(e,t,i){return i=i!=null?i.concat([e]):null,Fi(4,4,lu.bind(null,t,e),i)}function Oo(){}function uu(e,t){var i=Wt();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&No(t,a[1])?a[0]:(i.memoizedState=[e,t],e)}function du(e,t){var i=Wt();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&No(t,a[1])?a[0]:(e=e(),i.memoizedState=[e,t],e)}function hu(e,t,i){return(cr&21)===0?(e.baseState&&(e.baseState=!1,Ct=!0),e.memoizedState=i):(Qt(i,t)||(i=Ml(),Qe.lanes|=i,ur|=i,e.baseState=!0),t)}function Lf(e,t){var i=Be;Be=i!==0&&4>i?i:4,e(!0);var a=jo.transition;jo.transition={};try{e(!1),t()}finally{Be=i,jo.transition=a}}function fu(){return Wt().memoizedState}function Uf(e,t,i){var a=Hn(e);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},pu(e))mu(t,i);else if(i=Vc(e,t,i,a),i!==null){var c=xt();tn(i,e,a,c),gu(i,t,a)}}function Df(e,t,i){var a=Hn(e),c={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if(pu(e))mu(t,c);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var m=t.lastRenderedState,w=h(m,i);if(c.hasEagerState=!0,c.eagerState=w,Qt(w,m)){var k=t.interleaved;k===null?(c.next=c,wo(t)):(c.next=k.next,k.next=c),t.interleaved=c;return}}catch{}i=Vc(e,t,c,a),i!==null&&(c=xt(),tn(i,e,a,c),gu(i,t,a))}}function pu(e){var t=e.alternate;return e===Qe||t!==null&&t===Qe}function mu(e,t){Ts=$i=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function gu(e,t,i){if((i&4194240)!==0){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,Aa(e,i)}}var Bi={readContext:Mt,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},$f={readContext:Mt,useCallback:function(e,t){return dn().memoizedState=[e,t===void 0?null:t],e},useContext:Mt,useEffect:iu,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,zi(4194308,4,lu.bind(null,t,e),i)},useLayoutEffect:function(e,t){return zi(4194308,4,e,t)},useInsertionEffect:function(e,t){return zi(4,2,e,t)},useMemo:function(e,t){var i=dn();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var a=dn();return t=i!==void 0?i(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Uf.bind(null,Qe,e),[a.memoizedState,e]},useRef:function(e){var t=dn();return e={current:e},t.memoizedState=e},useState:ru,useDebugValue:Oo,useDeferredValue:function(e){return dn().memoizedState=e},useTransition:function(){var e=ru(!1),t=e[0];return e=Lf.bind(null,e[1]),dn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var a=Qe,c=dn();if(He){if(i===void 0)throw Error(r(407));i=i()}else{if(i=t(),ut===null)throw Error(r(349));(cr&30)!==0||Xc(a,t,i)}c.memoizedState=i;var h={value:i,getSnapshot:t};return c.queue=h,iu(eu.bind(null,a,h,e),[e]),a.flags|=2048,Os(9,Zc.bind(null,a,h,i,t),void 0,null),i},useId:function(){var e=dn(),t=ut.identifierPrefix;if(He){var i=kn,a=_n;i=(a&~(1<<32-Jt(a)-1)).toString(32)+i,t=":"+t+"R"+i,i=Rs++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=If++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},zf={readContext:Mt,useCallback:uu,useContext:Mt,useEffect:Po,useImperativeHandle:cu,useInsertionEffect:au,useLayoutEffect:ou,useMemo:du,useReducer:To,useRef:su,useState:function(){return To(Ps)},useDebugValue:Oo,useDeferredValue:function(e){var t=Wt();return hu(t,rt.memoizedState,e)},useTransition:function(){var e=To(Ps)[0],t=Wt().memoizedState;return[e,t]},useMutableSource:Qc,useSyncExternalStore:Yc,useId:fu,unstable_isNewReconciler:!1},Ff={readContext:Mt,useCallback:uu,useContext:Mt,useEffect:Po,useImperativeHandle:cu,useInsertionEffect:au,useLayoutEffect:ou,useMemo:du,useReducer:Ro,useRef:su,useState:function(){return Ro(Ps)},useDebugValue:Oo,useDeferredValue:function(e){var t=Wt();return rt===null?t.memoizedState=e:hu(t,rt.memoizedState,e)},useTransition:function(){var e=Ro(Ps)[0],t=Wt().memoizedState;return[e,t]},useMutableSource:Qc,useSyncExternalStore:Yc,useId:fu,unstable_isNewReconciler:!1};function Xt(e,t){if(e&&e.defaultProps){t=N({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}function Ao(e,t,i,a){t=e.memoizedState,i=i(a,t),i=i==null?t:N({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Mi={isMounted:function(e){return(e=e._reactInternals)?vn(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var a=xt(),c=Hn(e),h=xn(a,c);h.payload=t,i!=null&&(h.callback=i),t=Wn(e,h,c),t!==null&&(tn(t,e,c,a),Ii(t,e,c))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var a=xt(),c=Hn(e),h=xn(a,c);h.tag=1,h.payload=t,i!=null&&(h.callback=i),t=Wn(e,h,c),t!==null&&(tn(t,e,c,a),Ii(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=xt(),a=Hn(e),c=xn(i,a);c.tag=2,t!=null&&(c.callback=t),t=Wn(e,c,a),t!==null&&(tn(t,e,a,i),Ii(t,e,a))}};function vu(e,t,i,a,c,h,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,h,m):t.prototype&&t.prototype.isPureReactComponent?!ys(i,a)||!ys(c,h):!0}function yu(e,t,i){var a=!1,c=Fn,h=t.contextType;return typeof h=="object"&&h!==null?h=Mt(h):(c=Nt(t)?sr:vt.current,a=t.contextTypes,h=(a=a!=null)?Ar(e,c):Fn),t=new t(i,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Mi,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=h),t}function wu(e,t,i,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,a),t.state!==e&&Mi.enqueueReplaceState(t,t.state,null)}function Io(e,t,i,a){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs={},_o(e);var h=t.contextType;typeof h=="object"&&h!==null?c.context=Mt(h):(h=Nt(t)?sr:vt.current,c.context=Ar(e,h)),c.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(Ao(e,t,h,i),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&Mi.enqueueReplaceState(c,c.state,null),Li(e,i,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function Br(e,t){try{var i="",a=t;do i+=ge(a),a=a.return;while(a);var c=i}catch(h){c=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:c,digest:null}}function Lo(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function Uo(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var Bf=typeof WeakMap=="function"?WeakMap:Map;function _u(e,t,i){i=xn(-1,i),i.tag=3,i.payload={element:null};var a=t.value;return i.callback=function(){Ji||(Ji=!0,Yo=a),Uo(e,t)},i}function ku(e,t,i){i=xn(-1,i),i.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;i.payload=function(){return a(c)},i.callback=function(){Uo(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(i.callback=function(){Uo(e,t),typeof a!="function"&&(Vn===null?Vn=new Set([this]):Vn.add(this));var m=t.stack;this.componentDidCatch(t.value,{componentStack:m!==null?m:""})}),i}function Su(e,t,i){var a=e.pingCache;if(a===null){a=e.pingCache=new Bf;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(i)||(c.add(i),e=tp.bind(null,e,t,i),t.then(e,e))}function xu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function bu(e,t,i,a,c){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=xn(-1,1),t.tag=2,Wn(i,t,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=c,e)}var Mf=q.ReactCurrentOwner,Ct=!1;function St(e,t,i,a){t.child=e===null?qc(t,null,i,a):Dr(t,e.child,i,a)}function ju(e,t,i,a,c){i=i.render;var h=t.ref;return zr(t,c),a=Co(e,t,i,a,h,c),i=Eo(),e!==null&&!Ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,bn(e,t,c)):(He&&i&&co(t),t.flags|=1,St(e,t,a,c),t.child)}function Nu(e,t,i,a,c){if(e===null){var h=i.type;return typeof h=="function"&&!sl(h)&&h.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=h,Cu(e,t,h,a,c)):(e=ta(i.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,(e.lanes&c)===0){var m=h.memoizedProps;if(i=i.compare,i=i!==null?i:ys,i(m,a)&&e.ref===t.ref)return bn(e,t,c)}return t.flags|=1,e=Jn(h,a),e.ref=t.ref,e.return=t,t.child=e}function Cu(e,t,i,a,c){if(e!==null){var h=e.memoizedProps;if(ys(h,a)&&e.ref===t.ref)if(Ct=!1,t.pendingProps=a=h,(e.lanes&c)!==0)(e.flags&131072)!==0&&(Ct=!0);else return t.lanes=e.lanes,bn(e,t,c)}return Do(e,t,i,a,c)}function Eu(e,t,i){var a=t.pendingProps,c=a.children,h=e!==null?e.memoizedState:null;if(a.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(Wr,Ut),Ut|=i;else{if((i&1073741824)===0)return e=h!==null?h.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,We(Wr,Ut),Ut|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=h!==null?h.baseLanes:i,We(Wr,Ut),Ut|=a}else h!==null?(a=h.baseLanes|i,t.memoizedState=null):a=i,We(Wr,Ut),Ut|=a;return St(e,t,c,i),t.child}function Tu(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function Do(e,t,i,a,c){var h=Nt(i)?sr:vt.current;return h=Ar(t,h),zr(t,c),i=Co(e,t,i,a,h,c),a=Eo(),e!==null&&!Ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,bn(e,t,c)):(He&&a&&co(t),t.flags|=1,St(e,t,i,c),t.child)}function Ru(e,t,i,a,c){if(Nt(i)){var h=!0;Ni(t)}else h=!1;if(zr(t,c),t.stateNode===null)qi(e,t),yu(t,i,a),Io(t,i,a,c),a=!0;else if(e===null){var m=t.stateNode,w=t.memoizedProps;m.props=w;var k=m.context,I=i.contextType;typeof I=="object"&&I!==null?I=Mt(I):(I=Nt(i)?sr:vt.current,I=Ar(t,I));var H=i.getDerivedStateFromProps,Q=typeof H=="function"||typeof m.getSnapshotBeforeUpdate=="function";Q||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w!==a||k!==I)&&wu(t,m,a,I),Mn=!1;var K=t.memoizedState;m.state=K,Li(t,a,m,c),k=t.memoizedState,w!==a||K!==k||jt.current||Mn?(typeof H=="function"&&(Ao(t,i,H,a),k=t.memoizedState),(w=Mn||vu(t,i,w,a,K,k,I))?(Q||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=k),m.props=a,m.state=k,m.context=I,a=w):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{m=t.stateNode,Kc(e,t),w=t.memoizedProps,I=t.type===t.elementType?w:Xt(t.type,w),m.props=I,Q=t.pendingProps,K=m.context,k=i.contextType,typeof k=="object"&&k!==null?k=Mt(k):(k=Nt(i)?sr:vt.current,k=Ar(t,k));var re=i.getDerivedStateFromProps;(H=typeof re=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w!==Q||K!==k)&&wu(t,m,a,k),Mn=!1,K=t.memoizedState,m.state=K,Li(t,a,m,c);var le=t.memoizedState;w!==Q||K!==le||jt.current||Mn?(typeof re=="function"&&(Ao(t,i,re,a),le=t.memoizedState),(I=Mn||vu(t,i,I,a,K,le,k)||!1)?(H||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(a,le,k),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(a,le,k)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||w===e.memoizedProps&&K===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&K===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=le),m.props=a,m.state=le,m.context=k,a=I):(typeof m.componentDidUpdate!="function"||w===e.memoizedProps&&K===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&K===e.memoizedState||(t.flags|=1024),a=!1)}return $o(e,t,i,a,h,c)}function $o(e,t,i,a,c,h){Tu(e,t);var m=(t.flags&128)!==0;if(!a&&!m)return c&&Lc(t,i,!1),bn(e,t,h);a=t.stateNode,Mf.current=t;var w=m&&typeof i.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&m?(t.child=Dr(t,e.child,null,h),t.child=Dr(t,null,w,h)):St(e,t,w,h),t.memoizedState=a.state,c&&Lc(t,i,!0),t.child}function Pu(e){var t=e.stateNode;t.pendingContext?Ac(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ac(e,t.context,!1),ko(e,t.containerInfo)}function Ou(e,t,i,a,c){return Ur(),po(c),t.flags|=256,St(e,t,i,a),t.child}var zo={dehydrated:null,treeContext:null,retryLane:0};function Fo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Au(e,t,i){var a=t.pendingProps,c=Je.current,h=!1,m=(t.flags&128)!==0,w;if((w=m)||(w=e!==null&&e.memoizedState===null?!1:(c&2)!==0),w?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),We(Je,c&1),e===null)return fo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(m=a.children,e=a.fallback,h?(a=t.mode,h=t.child,m={mode:"hidden",children:m},(a&1)===0&&h!==null?(h.childLanes=0,h.pendingProps=m):h=na(m,a,0,null),e=pr(e,a,i,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=Fo(i),t.memoizedState=zo,e):Bo(t,m));if(c=e.memoizedState,c!==null&&(w=c.dehydrated,w!==null))return Wf(e,t,m,a,w,c,i);if(h){h=a.fallback,m=t.mode,c=e.child,w=c.sibling;var k={mode:"hidden",children:a.children};return(m&1)===0&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=k,t.deletions=null):(a=Jn(c,k),a.subtreeFlags=c.subtreeFlags&14680064),w!==null?h=Jn(w,h):(h=pr(h,m,i,null),h.flags|=2),h.return=t,a.return=t,a.sibling=h,t.child=a,a=h,h=t.child,m=e.child.memoizedState,m=m===null?Fo(i):{baseLanes:m.baseLanes|i,cachePool:null,transitions:m.transitions},h.memoizedState=m,h.childLanes=e.childLanes&~i,t.memoizedState=zo,a}return h=e.child,e=h.sibling,a=Jn(h,{mode:"visible",children:a.children}),(t.mode&1)===0&&(a.lanes=i),a.return=t,a.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=a,t.memoizedState=null,a}function Bo(e,t){return t=na({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Wi(e,t,i,a){return a!==null&&po(a),Dr(t,e.child,null,i),e=Bo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Wf(e,t,i,a,c,h,m){if(i)return t.flags&256?(t.flags&=-257,a=Lo(Error(r(422))),Wi(e,t,m,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=a.fallback,c=t.mode,a=na({mode:"visible",children:a.children},c,0,null),h=pr(h,c,m,null),h.flags|=2,a.return=t,h.return=t,a.sibling=h,t.child=a,(t.mode&1)!==0&&Dr(t,e.child,null,m),t.child.memoizedState=Fo(m),t.memoizedState=zo,h);if((t.mode&1)===0)return Wi(e,t,m,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var w=a.dgst;return a=w,h=Error(r(419)),a=Lo(h,a,void 0),Wi(e,t,m,a)}if(w=(m&e.childLanes)!==0,Ct||w){if(a=ut,a!==null){switch(m&-m){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=(c&(a.suspendedLanes|m))!==0?0:c,c!==0&&c!==h.retryLane&&(h.retryLane=c,Sn(e,c),tn(a,e,c,-1))}return rl(),a=Lo(Error(r(421))),Wi(e,t,m,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=np.bind(null,e),c._reactRetry=t,null):(e=h.treeContext,Lt=$n(c.nextSibling),It=t,He=!0,Yt=null,e!==null&&(Ft[Bt++]=_n,Ft[Bt++]=kn,Ft[Bt++]=ir,_n=e.id,kn=e.overflow,ir=t),t=Bo(t,a.children),t.flags|=4096,t)}function Iu(e,t,i){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),yo(e.return,t,i)}function Mo(e,t,i,a,c){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:c}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=a,h.tail=i,h.tailMode=c)}function Lu(e,t,i){var a=t.pendingProps,c=a.revealOrder,h=a.tail;if(St(e,t,a.children,i),a=Je.current,(a&2)!==0)a=a&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Iu(e,i,t);else if(e.tag===19)Iu(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(We(Je,a),(t.mode&1)===0)t.memoizedState=null;else switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&Ui(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),Mo(t,!1,c,i,h);break;case"backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Ui(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}Mo(t,!0,i,null,h);break;case"together":Mo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qi(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function bn(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),ur|=t.lanes,(i&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,i=Jn(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Jn(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function qf(e,t,i){switch(t.tag){case 3:Pu(t),Ur();break;case 5:Jc(t);break;case 1:Nt(t.type)&&Ni(t);break;case 4:ko(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;We(Oi,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(We(Je,Je.current&1),t.flags|=128,null):(i&t.child.childLanes)!==0?Au(e,t,i):(We(Je,Je.current&1),e=bn(e,t,i),e!==null?e.sibling:null);We(Je,Je.current&1);break;case 19:if(a=(i&t.childLanes)!==0,(e.flags&128)!==0){if(a)return Lu(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),We(Je,Je.current),a)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,i)}return bn(e,t,i)}var Uu,Wo,Du,$u;Uu=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Wo=function(){},Du=function(e,t,i,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,lr(un.current);var h=null;switch(i){case"input":c=je(e,c),a=je(e,a),h=[];break;case"select":c=N({},c,{value:void 0}),a=N({},a,{value:void 0}),h=[];break;case"textarea":c=kt(e,c),a=kt(e,a),h=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=xi)}gn(i,a);var m;i=null;for(I in c)if(!a.hasOwnProperty(I)&&c.hasOwnProperty(I)&&c[I]!=null)if(I==="style"){var w=c[I];for(m in w)w.hasOwnProperty(m)&&(i||(i={}),i[m]="")}else I!=="dangerouslySetInnerHTML"&&I!=="children"&&I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(u.hasOwnProperty(I)?h||(h=[]):(h=h||[]).push(I,null));for(I in a){var k=a[I];if(w=c?.[I],a.hasOwnProperty(I)&&k!==w&&(k!=null||w!=null))if(I==="style")if(w){for(m in w)!w.hasOwnProperty(m)||k&&k.hasOwnProperty(m)||(i||(i={}),i[m]="");for(m in k)k.hasOwnProperty(m)&&w[m]!==k[m]&&(i||(i={}),i[m]=k[m])}else i||(h||(h=[]),h.push(I,i)),i=k;else I==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,w=w?w.__html:void 0,k!=null&&w!==k&&(h=h||[]).push(I,k)):I==="children"?typeof k!="string"&&typeof k!="number"||(h=h||[]).push(I,""+k):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&(u.hasOwnProperty(I)?(k!=null&&I==="onScroll"&&Ve("scroll",e),h||w===k||(h=[])):(h=h||[]).push(I,k))}i&&(h=h||[]).push("style",i);var I=h;(t.updateQueue=I)&&(t.flags|=4)}},$u=function(e,t,i,a){i!==a&&(t.flags|=4)};function As(e,t){if(!He)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function wt(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=i,t}function Vf(e,t,i){var a=t.pendingProps;switch(uo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(t),null;case 1:return Nt(t.type)&&ji(),wt(t),null;case 3:return a=t.stateNode,Fr(),Ke(jt),Ke(vt),bo(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ri(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Yt!==null&&(el(Yt),Yt=null))),Wo(e,t),wt(t),null;case 5:So(t);var c=lr(Es.current);if(i=t.type,e!==null&&t.stateNode!=null)Du(e,t,i,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(r(166));return wt(t),null}if(e=lr(un.current),Ri(t)){a=t.stateNode,i=t.type;var h=t.memoizedProps;switch(a[cn]=t,a[xs]=h,e=(t.mode&1)!==0,i){case"dialog":Ve("cancel",a),Ve("close",a);break;case"iframe":case"object":case"embed":Ve("load",a);break;case"video":case"audio":for(c=0;c<_s.length;c++)Ve(_s[c],a);break;case"source":Ve("error",a);break;case"img":case"image":case"link":Ve("error",a),Ve("load",a);break;case"details":Ve("toggle",a);break;case"input":Me(a,h),Ve("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!h.multiple},Ve("invalid",a);break;case"textarea":fn(a,h),Ve("invalid",a)}gn(i,h),c=null;for(var m in h)if(h.hasOwnProperty(m)){var w=h[m];m==="children"?typeof w=="string"?a.textContent!==w&&(h.suppressHydrationWarning!==!0&&Si(a.textContent,w,e),c=["children",w]):typeof w=="number"&&a.textContent!==""+w&&(h.suppressHydrationWarning!==!0&&Si(a.textContent,w,e),c=["children",""+w]):u.hasOwnProperty(m)&&w!=null&&m==="onScroll"&&Ve("scroll",a)}switch(i){case"input":X(a),Pt(a,h,!0);break;case"textarea":X(a),pn(a);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(a.onclick=xi)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{m=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=mn(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=m.createElement(i,{is:a.is}):(e=m.createElement(i),i==="select"&&(m=e,a.multiple?m.multiple=!0:a.size&&(m.size=a.size))):e=m.createElementNS(e,i),e[cn]=t,e[xs]=a,Uu(e,t,!1,!1),t.stateNode=e;e:{switch(m=Rn(i,a),i){case"dialog":Ve("cancel",e),Ve("close",e),c=a;break;case"iframe":case"object":case"embed":Ve("load",e),c=a;break;case"video":case"audio":for(c=0;c<_s.length;c++)Ve(_s[c],e);c=a;break;case"source":Ve("error",e),c=a;break;case"img":case"image":case"link":Ve("error",e),Ve("load",e),c=a;break;case"details":Ve("toggle",e),c=a;break;case"input":Me(e,a),c=je(e,a),Ve("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=N({},a,{value:void 0}),Ve("invalid",e);break;case"textarea":fn(e,a),c=kt(e,a),Ve("invalid",e);break;default:c=a}gn(i,c),w=c;for(h in w)if(w.hasOwnProperty(h)){var k=w[h];h==="style"?Tn(e,k):h==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&ce(e,k)):h==="children"?typeof k=="string"?(i!=="textarea"||k!=="")&&Fe(e,k):typeof k=="number"&&Fe(e,""+k):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(u.hasOwnProperty(h)?k!=null&&h==="onScroll"&&Ve("scroll",e):k!=null&&E(e,h,k,m))}switch(i){case"input":X(e),Pt(e,a,!1);break;case"textarea":X(e),pn(e);break;case"option":a.value!=null&&e.setAttribute("value",""+J(a.value));break;case"select":e.multiple=!!a.multiple,h=a.value,h!=null?Ot(e,!!a.multiple,h,!1):a.defaultValue!=null&&Ot(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=xi)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return wt(t),null;case 6:if(e&&t.stateNode!=null)$u(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(r(166));if(i=lr(Es.current),lr(un.current),Ri(t)){if(a=t.stateNode,i=t.memoizedProps,a[cn]=t,(h=a.nodeValue!==i)&&(e=It,e!==null))switch(e.tag){case 3:Si(a.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Si(a.nodeValue,i,(e.mode&1)!==0)}h&&(t.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[cn]=t,t.stateNode=a}return wt(t),null;case 13:if(Ke(Je),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(He&&Lt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Bc(),Ur(),t.flags|=98560,h=!1;else if(h=Ri(t),a!==null&&a.dehydrated!==null){if(e===null){if(!h)throw Error(r(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[cn]=t}else Ur(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;wt(t),h=!1}else Yt!==null&&(el(Yt),Yt=null),h=!0;if(!h)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=i,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Je.current&1)!==0?st===0&&(st=3):rl())),t.updateQueue!==null&&(t.flags|=4),wt(t),null);case 4:return Fr(),Wo(e,t),e===null&&ks(t.stateNode.containerInfo),wt(t),null;case 10:return vo(t.type._context),wt(t),null;case 17:return Nt(t.type)&&ji(),wt(t),null;case 19:if(Ke(Je),h=t.memoizedState,h===null)return wt(t),null;if(a=(t.flags&128)!==0,m=h.rendering,m===null)if(a)As(h,!1);else{if(st!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(m=Ui(e),m!==null){for(t.flags|=128,As(h,!1),a=m.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=i,i=t.child;i!==null;)h=i,e=a,h.flags&=14680066,m=h.alternate,m===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=m.childLanes,h.lanes=m.lanes,h.child=m.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=m.memoizedProps,h.memoizedState=m.memoizedState,h.updateQueue=m.updateQueue,h.type=m.type,e=m.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return We(Je,Je.current&1|2),t.child}e=e.sibling}h.tail!==null&&Ze()>qr&&(t.flags|=128,a=!0,As(h,!1),t.lanes=4194304)}else{if(!a)if(e=Ui(m),e!==null){if(t.flags|=128,a=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),As(h,!0),h.tail===null&&h.tailMode==="hidden"&&!m.alternate&&!He)return wt(t),null}else 2*Ze()-h.renderingStartTime>qr&&i!==1073741824&&(t.flags|=128,a=!0,As(h,!1),t.lanes=4194304);h.isBackwards?(m.sibling=t.child,t.child=m):(i=h.last,i!==null?i.sibling=m:t.child=m,h.last=m)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=Ze(),t.sibling=null,i=Je.current,We(Je,a?i&1|2:i&1),t):(wt(t),null);case 22:case 23:return nl(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&(t.mode&1)!==0?(Ut&1073741824)!==0&&(wt(t),t.subtreeFlags&6&&(t.flags|=8192)):wt(t),null;case 24:return null;case 25:return null}throw Error(r(156,t.tag))}function Kf(e,t){switch(uo(t),t.tag){case 1:return Nt(t.type)&&ji(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fr(),Ke(jt),Ke(vt),bo(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return So(t),null;case 13:if(Ke(Je),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));Ur()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ke(Je),null;case 4:return Fr(),null;case 10:return vo(t.type._context),null;case 22:case 23:return nl(),null;case 24:return null;default:return null}}var Vi=!1,_t=!1,Hf=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Mr(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){Ye(e,t,a)}else i.current=null}function qo(e,t,i){try{i()}catch(a){Ye(e,t,a)}}var zu=!1;function Gf(e,t){if(to=di,e=vc(),Ha(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var c=a.anchorOffset,h=a.focusNode;a=a.focusOffset;try{i.nodeType,h.nodeType}catch{i=null;break e}var m=0,w=-1,k=-1,I=0,H=0,Q=e,K=null;t:for(;;){for(var re;Q!==i||c!==0&&Q.nodeType!==3||(w=m+c),Q!==h||a!==0&&Q.nodeType!==3||(k=m+a),Q.nodeType===3&&(m+=Q.nodeValue.length),(re=Q.firstChild)!==null;)K=Q,Q=re;for(;;){if(Q===e)break t;if(K===i&&++I===c&&(w=m),K===h&&++H===a&&(k=m),(re=Q.nextSibling)!==null)break;Q=K,K=Q.parentNode}Q=re}i=w===-1||k===-1?null:{start:w,end:k}}else i=null}i=i||{start:0,end:0}}else i=null;for(no={focusedElem:e,selectionRange:i},di=!1,ae=t;ae!==null;)if(t=ae,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ae=e;else for(;ae!==null;){t=ae;try{var le=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(le!==null){var he=le.memoizedProps,et=le.memoizedState,T=t.stateNode,j=T.getSnapshotBeforeUpdate(t.elementType===t.type?he:Xt(t.type,he),et);T.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var P=t.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Y){Ye(t,t.return,Y)}if(e=t.sibling,e!==null){e.return=t.return,ae=e;break}ae=t.return}return le=zu,zu=!1,le}function Is(e,t,i){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var h=c.destroy;c.destroy=void 0,h!==void 0&&qo(t,i,h)}c=c.next}while(c!==a)}}function Ki(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var a=i.create;i.destroy=a()}i=i.next}while(i!==t)}}function Vo(e){var t=e.ref;if(t!==null){var i=e.stateNode;e.tag,e=i,typeof t=="function"?t(e):t.current=e}}function Fu(e){var t=e.alternate;t!==null&&(e.alternate=null,Fu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[cn],delete t[xs],delete t[ao],delete t[Rf],delete t[Pf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Bu(e){return e.tag===5||e.tag===3||e.tag===4}function Mu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Bu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ko(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=xi));else if(a!==4&&(e=e.child,e!==null))for(Ko(e,t,i),e=e.sibling;e!==null;)Ko(e,t,i),e=e.sibling}function Ho(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Ho(e,t,i),e=e.sibling;e!==null;)Ho(e,t,i),e=e.sibling}var ht=null,Zt=!1;function qn(e,t,i){for(i=i.child;i!==null;)Wu(e,t,i),i=i.sibling}function Wu(e,t,i){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(ii,i)}catch{}switch(i.tag){case 5:_t||Mr(i,t);case 6:var a=ht,c=Zt;ht=null,qn(e,t,i),ht=a,Zt=c,ht!==null&&(Zt?(e=ht,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):ht.removeChild(i.stateNode));break;case 18:ht!==null&&(Zt?(e=ht,i=i.stateNode,e.nodeType===8?io(e.parentNode,i):e.nodeType===1&&io(e,i),hs(e)):io(ht,i.stateNode));break;case 4:a=ht,c=Zt,ht=i.stateNode.containerInfo,Zt=!0,qn(e,t,i),ht=a,Zt=c;break;case 0:case 11:case 14:case 15:if(!_t&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var h=c,m=h.destroy;h=h.tag,m!==void 0&&((h&2)!==0||(h&4)!==0)&&qo(i,t,m),c=c.next}while(c!==a)}qn(e,t,i);break;case 1:if(!_t&&(Mr(i,t),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(w){Ye(i,t,w)}qn(e,t,i);break;case 21:qn(e,t,i);break;case 22:i.mode&1?(_t=(a=_t)||i.memoizedState!==null,qn(e,t,i),_t=a):qn(e,t,i);break;default:qn(e,t,i)}}function qu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new Hf),t.forEach(function(a){var c=rp.bind(null,e,a);i.has(a)||(i.add(a),a.then(c,c))})}}function en(e,t){var i=t.deletions;if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];try{var h=e,m=t,w=m;e:for(;w!==null;){switch(w.tag){case 5:ht=w.stateNode,Zt=!1;break e;case 3:ht=w.stateNode.containerInfo,Zt=!0;break e;case 4:ht=w.stateNode.containerInfo,Zt=!0;break e}w=w.return}if(ht===null)throw Error(r(160));Wu(h,m,c),ht=null,Zt=!1;var k=c.alternate;k!==null&&(k.return=null),c.return=null}catch(I){Ye(c,t,I)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Vu(t,e),t=t.sibling}function Vu(e,t){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(en(t,e),hn(e),a&4){try{Is(3,e,e.return),Ki(3,e)}catch(he){Ye(e,e.return,he)}try{Is(5,e,e.return)}catch(he){Ye(e,e.return,he)}}break;case 1:en(t,e),hn(e),a&512&&i!==null&&Mr(i,i.return);break;case 5:if(en(t,e),hn(e),a&512&&i!==null&&Mr(i,i.return),e.flags&32){var c=e.stateNode;try{Fe(c,"")}catch(he){Ye(e,e.return,he)}}if(a&4&&(c=e.stateNode,c!=null)){var h=e.memoizedProps,m=i!==null?i.memoizedProps:h,w=e.type,k=e.updateQueue;if(e.updateQueue=null,k!==null)try{w==="input"&&h.type==="radio"&&h.name!=null&&gt(c,h),Rn(w,m);var I=Rn(w,h);for(m=0;m<k.length;m+=2){var H=k[m],Q=k[m+1];H==="style"?Tn(c,Q):H==="dangerouslySetInnerHTML"?ce(c,Q):H==="children"?Fe(c,Q):E(c,H,Q,I)}switch(w){case"input":bt(c,h);break;case"textarea":En(c,h);break;case"select":var K=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!h.multiple;var re=h.value;re!=null?Ot(c,!!h.multiple,re,!1):K!==!!h.multiple&&(h.defaultValue!=null?Ot(c,!!h.multiple,h.defaultValue,!0):Ot(c,!!h.multiple,h.multiple?[]:"",!1))}c[xs]=h}catch(he){Ye(e,e.return,he)}}break;case 6:if(en(t,e),hn(e),a&4){if(e.stateNode===null)throw Error(r(162));c=e.stateNode,h=e.memoizedProps;try{c.nodeValue=h}catch(he){Ye(e,e.return,he)}}break;case 3:if(en(t,e),hn(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{hs(t.containerInfo)}catch(he){Ye(e,e.return,he)}break;case 4:en(t,e),hn(e);break;case 13:en(t,e),hn(e),c=e.child,c.flags&8192&&(h=c.memoizedState!==null,c.stateNode.isHidden=h,!h||c.alternate!==null&&c.alternate.memoizedState!==null||(Qo=Ze())),a&4&&qu(e);break;case 22:if(H=i!==null&&i.memoizedState!==null,e.mode&1?(_t=(I=_t)||H,en(t,e),_t=I):en(t,e),hn(e),a&8192){if(I=e.memoizedState!==null,(e.stateNode.isHidden=I)&&!H&&(e.mode&1)!==0)for(ae=e,H=e.child;H!==null;){for(Q=ae=H;ae!==null;){switch(K=ae,re=K.child,K.tag){case 0:case 11:case 14:case 15:Is(4,K,K.return);break;case 1:Mr(K,K.return);var le=K.stateNode;if(typeof le.componentWillUnmount=="function"){a=K,i=K.return;try{t=a,le.props=t.memoizedProps,le.state=t.memoizedState,le.componentWillUnmount()}catch(he){Ye(a,i,he)}}break;case 5:Mr(K,K.return);break;case 22:if(K.memoizedState!==null){Gu(Q);continue}}re!==null?(re.return=K,ae=re):Gu(Q)}H=H.sibling}e:for(H=null,Q=e;;){if(Q.tag===5){if(H===null){H=Q;try{c=Q.stateNode,I?(h=c.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(w=Q.stateNode,k=Q.memoizedProps.style,m=k!=null&&k.hasOwnProperty("display")?k.display:null,w.style.display=Ht("display",m))}catch(he){Ye(e,e.return,he)}}}else if(Q.tag===6){if(H===null)try{Q.stateNode.nodeValue=I?"":Q.memoizedProps}catch(he){Ye(e,e.return,he)}}else if((Q.tag!==22&&Q.tag!==23||Q.memoizedState===null||Q===e)&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===e)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===e)break e;H===Q&&(H=null),Q=Q.return}H===Q&&(H=null),Q.sibling.return=Q.return,Q=Q.sibling}}break;case 19:en(t,e),hn(e),a&4&&qu(e);break;case 21:break;default:en(t,e),hn(e)}}function hn(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(Bu(i)){var a=i;break e}i=i.return}throw Error(r(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(Fe(c,""),a.flags&=-33);var h=Mu(e);Ho(e,h,c);break;case 3:case 4:var m=a.stateNode.containerInfo,w=Mu(e);Ko(e,w,m);break;default:throw Error(r(161))}}catch(k){Ye(e,e.return,k)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Jf(e,t,i){ae=e,Ku(e)}function Ku(e,t,i){for(var a=(e.mode&1)!==0;ae!==null;){var c=ae,h=c.child;if(c.tag===22&&a){var m=c.memoizedState!==null||Vi;if(!m){var w=c.alternate,k=w!==null&&w.memoizedState!==null||_t;w=Vi;var I=_t;if(Vi=m,(_t=k)&&!I)for(ae=c;ae!==null;)m=ae,k=m.child,m.tag===22&&m.memoizedState!==null?Ju(c):k!==null?(k.return=m,ae=k):Ju(c);for(;h!==null;)ae=h,Ku(h),h=h.sibling;ae=c,Vi=w,_t=I}Hu(e)}else(c.subtreeFlags&8772)!==0&&h!==null?(h.return=c,ae=h):Hu(e)}}function Hu(e){for(;ae!==null;){var t=ae;if((t.flags&8772)!==0){var i=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:_t||Ki(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!_t)if(i===null)a.componentDidMount();else{var c=t.elementType===t.type?i.memoizedProps:Xt(t.type,i.memoizedProps);a.componentDidUpdate(c,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&Gc(t,h,a);break;case 3:var m=t.updateQueue;if(m!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}Gc(t,m,i)}break;case 5:var w=t.stateNode;if(i===null&&t.flags&4){i=w;var k=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&i.focus();break;case"img":k.src&&(i.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var I=t.alternate;if(I!==null){var H=I.memoizedState;if(H!==null){var Q=H.dehydrated;Q!==null&&hs(Q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}_t||t.flags&512&&Vo(t)}catch(K){Ye(t,t.return,K)}}if(t===e){ae=null;break}if(i=t.sibling,i!==null){i.return=t.return,ae=i;break}ae=t.return}}function Gu(e){for(;ae!==null;){var t=ae;if(t===e){ae=null;break}var i=t.sibling;if(i!==null){i.return=t.return,ae=i;break}ae=t.return}}function Ju(e){for(;ae!==null;){var t=ae;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{Ki(4,t)}catch(k){Ye(t,i,k)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(k){Ye(t,c,k)}}var h=t.return;try{Vo(t)}catch(k){Ye(t,h,k)}break;case 5:var m=t.return;try{Vo(t)}catch(k){Ye(t,m,k)}}}catch(k){Ye(t,t.return,k)}if(t===e){ae=null;break}var w=t.sibling;if(w!==null){w.return=t.return,ae=w;break}ae=t.return}}var Qf=Math.ceil,Hi=q.ReactCurrentDispatcher,Go=q.ReactCurrentOwner,qt=q.ReactCurrentBatchConfig,$e=0,ut=null,tt=null,ft=0,Ut=0,Wr=zn(0),st=0,Ls=null,ur=0,Gi=0,Jo=0,Us=null,Et=null,Qo=0,qr=1/0,jn=null,Ji=!1,Yo=null,Vn=null,Qi=!1,Kn=null,Yi=0,Ds=0,Xo=null,Xi=-1,Zi=0;function xt(){return($e&6)!==0?Ze():Xi!==-1?Xi:Xi=Ze()}function Hn(e){return(e.mode&1)===0?1:($e&2)!==0&&ft!==0?ft&-ft:Af.transition!==null?(Zi===0&&(Zi=Ml()),Zi):(e=Be,e!==0||(e=window.event,e=e===void 0?16:Yl(e.type)),e)}function tn(e,t,i,a){if(50<Ds)throw Ds=0,Xo=null,Error(r(185));os(e,i,a),(($e&2)===0||e!==ut)&&(e===ut&&(($e&2)===0&&(Gi|=i),st===4&&Gn(e,ft)),Tt(e,a),i===1&&$e===0&&(t.mode&1)===0&&(qr=Ze()+500,Ci&&Bn()))}function Tt(e,t){var i=e.callbackNode;Oh(e,t);var a=li(e,e===ut?ft:0);if(a===0)i!==null&&zl(i),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(i!=null&&zl(i),t===1)e.tag===0?Of(Yu.bind(null,e)):Uc(Yu.bind(null,e)),Ef(function(){($e&6)===0&&Bn()}),i=null;else{switch(Wl(a)){case 1:i=Ra;break;case 4:i=Fl;break;case 16:i=si;break;case 536870912:i=Bl;break;default:i=si}i=id(i,Qu.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function Qu(e,t){if(Xi=-1,Zi=0,($e&6)!==0)throw Error(r(327));var i=e.callbackNode;if(Vr()&&e.callbackNode!==i)return null;var a=li(e,e===ut?ft:0);if(a===0)return null;if((a&30)!==0||(a&e.expiredLanes)!==0||t)t=ea(e,a);else{t=a;var c=$e;$e|=2;var h=Zu();(ut!==e||ft!==t)&&(jn=null,qr=Ze()+500,hr(e,t));do try{Zf();break}catch(w){Xu(e,w)}while(!0);go(),Hi.current=h,$e=c,tt!==null?t=0:(ut=null,ft=0,t=st)}if(t!==0){if(t===2&&(c=Pa(e),c!==0&&(a=c,t=Zo(e,c))),t===1)throw i=Ls,hr(e,0),Gn(e,a),Tt(e,Ze()),i;if(t===6)Gn(e,a);else{if(c=e.current.alternate,(a&30)===0&&!Yf(c)&&(t=ea(e,a),t===2&&(h=Pa(e),h!==0&&(a=h,t=Zo(e,h))),t===1))throw i=Ls,hr(e,0),Gn(e,a),Tt(e,Ze()),i;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(r(345));case 2:fr(e,Et,jn);break;case 3:if(Gn(e,a),(a&130023424)===a&&(t=Qo+500-Ze(),10<t)){if(li(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){xt(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=so(fr.bind(null,e,Et,jn),t);break}fr(e,Et,jn);break;case 4:if(Gn(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var m=31-Jt(a);h=1<<m,m=t[m],m>c&&(c=m),a&=~h}if(a=c,a=Ze()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Qf(a/1960))-a,10<a){e.timeoutHandle=so(fr.bind(null,e,Et,jn),a);break}fr(e,Et,jn);break;case 5:fr(e,Et,jn);break;default:throw Error(r(329))}}}return Tt(e,Ze()),e.callbackNode===i?Qu.bind(null,e):null}function Zo(e,t){var i=Us;return e.current.memoizedState.isDehydrated&&(hr(e,t).flags|=256),e=ea(e,t),e!==2&&(t=Et,Et=i,t!==null&&el(t)),e}function el(e){Et===null?Et=e:Et.push.apply(Et,e)}function Yf(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var c=i[a],h=c.getSnapshot;c=c.value;try{if(!Qt(h(),c))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Gn(e,t){for(t&=~Jo,t&=~Gi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Jt(t),a=1<<i;e[i]=-1,t&=~a}}function Yu(e){if(($e&6)!==0)throw Error(r(327));Vr();var t=li(e,0);if((t&1)===0)return Tt(e,Ze()),null;var i=ea(e,t);if(e.tag!==0&&i===2){var a=Pa(e);a!==0&&(t=a,i=Zo(e,a))}if(i===1)throw i=Ls,hr(e,0),Gn(e,t),Tt(e,Ze()),i;if(i===6)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,fr(e,Et,jn),Tt(e,Ze()),null}function tl(e,t){var i=$e;$e|=1;try{return e(t)}finally{$e=i,$e===0&&(qr=Ze()+500,Ci&&Bn())}}function dr(e){Kn!==null&&Kn.tag===0&&($e&6)===0&&Vr();var t=$e;$e|=1;var i=qt.transition,a=Be;try{if(qt.transition=null,Be=1,e)return e()}finally{Be=a,qt.transition=i,$e=t,($e&6)===0&&Bn()}}function nl(){Ut=Wr.current,Ke(Wr)}function hr(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,Cf(i)),tt!==null)for(i=tt.return;i!==null;){var a=i;switch(uo(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&ji();break;case 3:Fr(),Ke(jt),Ke(vt),bo();break;case 5:So(a);break;case 4:Fr();break;case 13:Ke(Je);break;case 19:Ke(Je);break;case 10:vo(a.type._context);break;case 22:case 23:nl()}i=i.return}if(ut=e,tt=e=Jn(e.current,null),ft=Ut=t,st=0,Ls=null,Jo=Gi=ur=0,Et=Us=null,or!==null){for(t=0;t<or.length;t++)if(i=or[t],a=i.interleaved,a!==null){i.interleaved=null;var c=a.next,h=i.pending;if(h!==null){var m=h.next;h.next=c,a.next=m}i.pending=a}or=null}return e}function Xu(e,t){do{var i=tt;try{if(go(),Di.current=Bi,$i){for(var a=Qe.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}$i=!1}if(cr=0,ct=rt=Qe=null,Ts=!1,Rs=0,Go.current=null,i===null||i.return===null){st=1,Ls=t,tt=null;break}e:{var h=e,m=i.return,w=i,k=t;if(t=ft,w.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var I=k,H=w,Q=H.tag;if((H.mode&1)===0&&(Q===0||Q===11||Q===15)){var K=H.alternate;K?(H.updateQueue=K.updateQueue,H.memoizedState=K.memoizedState,H.lanes=K.lanes):(H.updateQueue=null,H.memoizedState=null)}var re=xu(m);if(re!==null){re.flags&=-257,bu(re,m,w,h,t),re.mode&1&&Su(h,I,t),t=re,k=I;var le=t.updateQueue;if(le===null){var he=new Set;he.add(k),t.updateQueue=he}else le.add(k);break e}else{if((t&1)===0){Su(h,I,t),rl();break e}k=Error(r(426))}}else if(He&&w.mode&1){var et=xu(m);if(et!==null){(et.flags&65536)===0&&(et.flags|=256),bu(et,m,w,h,t),po(Br(k,w));break e}}h=k=Br(k,w),st!==4&&(st=2),Us===null?Us=[h]:Us.push(h),h=m;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var T=_u(h,k,t);Hc(h,T);break e;case 1:w=k;var j=h.type,P=h.stateNode;if((h.flags&128)===0&&(typeof j.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(Vn===null||!Vn.has(P)))){h.flags|=65536,t&=-t,h.lanes|=t;var Y=ku(h,w,t);Hc(h,Y);break e}}h=h.return}while(h!==null)}td(i)}catch(fe){t=fe,tt===i&&i!==null&&(tt=i=i.return);continue}break}while(!0)}function Zu(){var e=Hi.current;return Hi.current=Bi,e===null?Bi:e}function rl(){(st===0||st===3||st===2)&&(st=4),ut===null||(ur&268435455)===0&&(Gi&268435455)===0||Gn(ut,ft)}function ea(e,t){var i=$e;$e|=2;var a=Zu();(ut!==e||ft!==t)&&(jn=null,hr(e,t));do try{Xf();break}catch(c){Xu(e,c)}while(!0);if(go(),$e=i,Hi.current=a,tt!==null)throw Error(r(261));return ut=null,ft=0,st}function Xf(){for(;tt!==null;)ed(tt)}function Zf(){for(;tt!==null&&!xh();)ed(tt)}function ed(e){var t=sd(e.alternate,e,Ut);e.memoizedProps=e.pendingProps,t===null?td(e):tt=t,Go.current=null}function td(e){var t=e;do{var i=t.alternate;if(e=t.return,(t.flags&32768)===0){if(i=Vf(i,t,Ut),i!==null){tt=i;return}}else{if(i=Kf(i,t),i!==null){i.flags&=32767,tt=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{st=6,tt=null;return}}if(t=t.sibling,t!==null){tt=t;return}tt=t=e}while(t!==null);st===0&&(st=5)}function fr(e,t,i){var a=Be,c=qt.transition;try{qt.transition=null,Be=1,ep(e,t,i,a)}finally{qt.transition=c,Be=a}return null}function ep(e,t,i,a){do Vr();while(Kn!==null);if(($e&6)!==0)throw Error(r(327));i=e.finishedWork;var c=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var h=i.lanes|i.childLanes;if(Ah(e,h),e===ut&&(tt=ut=null,ft=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||Qi||(Qi=!0,id(si,function(){return Vr(),null})),h=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||h){h=qt.transition,qt.transition=null;var m=Be;Be=1;var w=$e;$e|=4,Go.current=null,Gf(e,i),Vu(i,e),_f(no),di=!!to,no=to=null,e.current=i,Jf(i),bh(),$e=w,Be=m,qt.transition=h}else e.current=i;if(Qi&&(Qi=!1,Kn=e,Yi=c),h=e.pendingLanes,h===0&&(Vn=null),Ch(i.stateNode),Tt(e,Ze()),t!==null)for(a=e.onRecoverableError,i=0;i<t.length;i++)c=t[i],a(c.value,{componentStack:c.stack,digest:c.digest});if(Ji)throw Ji=!1,e=Yo,Yo=null,e;return(Yi&1)!==0&&e.tag!==0&&Vr(),h=e.pendingLanes,(h&1)!==0?e===Xo?Ds++:(Ds=0,Xo=e):Ds=0,Bn(),null}function Vr(){if(Kn!==null){var e=Wl(Yi),t=qt.transition,i=Be;try{if(qt.transition=null,Be=16>e?16:e,Kn===null)var a=!1;else{if(e=Kn,Kn=null,Yi=0,($e&6)!==0)throw Error(r(331));var c=$e;for($e|=4,ae=e.current;ae!==null;){var h=ae,m=h.child;if((ae.flags&16)!==0){var w=h.deletions;if(w!==null){for(var k=0;k<w.length;k++){var I=w[k];for(ae=I;ae!==null;){var H=ae;switch(H.tag){case 0:case 11:case 15:Is(8,H,h)}var Q=H.child;if(Q!==null)Q.return=H,ae=Q;else for(;ae!==null;){H=ae;var K=H.sibling,re=H.return;if(Fu(H),H===I){ae=null;break}if(K!==null){K.return=re,ae=K;break}ae=re}}}var le=h.alternate;if(le!==null){var he=le.child;if(he!==null){le.child=null;do{var et=he.sibling;he.sibling=null,he=et}while(he!==null)}}ae=h}}if((h.subtreeFlags&2064)!==0&&m!==null)m.return=h,ae=m;else e:for(;ae!==null;){if(h=ae,(h.flags&2048)!==0)switch(h.tag){case 0:case 11:case 15:Is(9,h,h.return)}var T=h.sibling;if(T!==null){T.return=h.return,ae=T;break e}ae=h.return}}var j=e.current;for(ae=j;ae!==null;){m=ae;var P=m.child;if((m.subtreeFlags&2064)!==0&&P!==null)P.return=m,ae=P;else e:for(m=j;ae!==null;){if(w=ae,(w.flags&2048)!==0)try{switch(w.tag){case 0:case 11:case 15:Ki(9,w)}}catch(fe){Ye(w,w.return,fe)}if(w===m){ae=null;break e}var Y=w.sibling;if(Y!==null){Y.return=w.return,ae=Y;break e}ae=w.return}}if($e=c,Bn(),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(ii,e)}catch{}a=!0}return a}finally{Be=i,qt.transition=t}}return!1}function nd(e,t,i){t=Br(i,t),t=_u(e,t,1),e=Wn(e,t,1),t=xt(),e!==null&&(os(e,1,t),Tt(e,t))}function Ye(e,t,i){if(e.tag===3)nd(e,e,i);else for(;t!==null;){if(t.tag===3){nd(t,e,i);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Vn===null||!Vn.has(a))){e=Br(i,e),e=ku(t,e,1),t=Wn(t,e,1),e=xt(),t!==null&&(os(t,1,e),Tt(t,e));break}}t=t.return}}function tp(e,t,i){var a=e.pingCache;a!==null&&a.delete(t),t=xt(),e.pingedLanes|=e.suspendedLanes&i,ut===e&&(ft&i)===i&&(st===4||st===3&&(ft&130023424)===ft&&500>Ze()-Qo?hr(e,0):Jo|=i),Tt(e,t)}function rd(e,t){t===0&&((e.mode&1)===0?t=1:(t=oi,oi<<=1,(oi&130023424)===0&&(oi=4194304)));var i=xt();e=Sn(e,t),e!==null&&(os(e,t,i),Tt(e,i))}function np(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),rd(e,i)}function rp(e,t){var i=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(r(314))}a!==null&&a.delete(t),rd(e,i)}var sd;sd=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||jt.current)Ct=!0;else{if((e.lanes&i)===0&&(t.flags&128)===0)return Ct=!1,qf(e,t,i);Ct=(e.flags&131072)!==0}else Ct=!1,He&&(t.flags&1048576)!==0&&Dc(t,Ti,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;qi(e,t),e=t.pendingProps;var c=Ar(t,vt.current);zr(t,i),c=Co(null,t,a,e,c,i);var h=Eo();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Nt(a)?(h=!0,Ni(t)):h=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,_o(t),c.updater=Mi,t.stateNode=c,c._reactInternals=t,Io(t,a,e,i),t=$o(null,t,a,!0,h,i)):(t.tag=0,He&&h&&co(t),St(null,t,c,i),t=t.child),t;case 16:a=t.elementType;e:{switch(qi(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=ip(a),e=Xt(a,e),c){case 0:t=Do(null,t,a,e,i);break e;case 1:t=Ru(null,t,a,e,i);break e;case 11:t=ju(null,t,a,e,i);break e;case 14:t=Nu(null,t,a,Xt(a.type,e),i);break e}throw Error(r(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Xt(a,c),Do(e,t,a,c,i);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Xt(a,c),Ru(e,t,a,c,i);case 3:e:{if(Pu(t),e===null)throw Error(r(387));a=t.pendingProps,h=t.memoizedState,c=h.element,Kc(e,t),Li(t,a,null,i);var m=t.memoizedState;if(a=m.element,h.isDehydrated)if(h={element:a,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){c=Br(Error(r(423)),t),t=Ou(e,t,a,i,c);break e}else if(a!==c){c=Br(Error(r(424)),t),t=Ou(e,t,a,i,c);break e}else for(Lt=$n(t.stateNode.containerInfo.firstChild),It=t,He=!0,Yt=null,i=qc(t,null,a,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Ur(),a===c){t=bn(e,t,i);break e}St(e,t,a,i)}t=t.child}return t;case 5:return Jc(t),e===null&&fo(t),a=t.type,c=t.pendingProps,h=e!==null?e.memoizedProps:null,m=c.children,ro(a,c)?m=null:h!==null&&ro(a,h)&&(t.flags|=32),Tu(e,t),St(e,t,m,i),t.child;case 6:return e===null&&fo(t),null;case 13:return Au(e,t,i);case 4:return ko(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Dr(t,null,a,i):St(e,t,a,i),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Xt(a,c),ju(e,t,a,c,i);case 7:return St(e,t,t.pendingProps,i),t.child;case 8:return St(e,t,t.pendingProps.children,i),t.child;case 12:return St(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,h=t.memoizedProps,m=c.value,We(Oi,a._currentValue),a._currentValue=m,h!==null)if(Qt(h.value,m)){if(h.children===c.children&&!jt.current){t=bn(e,t,i);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var w=h.dependencies;if(w!==null){m=h.child;for(var k=w.firstContext;k!==null;){if(k.context===a){if(h.tag===1){k=xn(-1,i&-i),k.tag=2;var I=h.updateQueue;if(I!==null){I=I.shared;var H=I.pending;H===null?k.next=k:(k.next=H.next,H.next=k),I.pending=k}}h.lanes|=i,k=h.alternate,k!==null&&(k.lanes|=i),yo(h.return,i,t),w.lanes|=i;break}k=k.next}}else if(h.tag===10)m=h.type===t.type?null:h.child;else if(h.tag===18){if(m=h.return,m===null)throw Error(r(341));m.lanes|=i,w=m.alternate,w!==null&&(w.lanes|=i),yo(m,i,t),m=h.sibling}else m=h.child;if(m!==null)m.return=h;else for(m=h;m!==null;){if(m===t){m=null;break}if(h=m.sibling,h!==null){h.return=m.return,m=h;break}m=m.return}h=m}St(e,t,c.children,i),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,zr(t,i),c=Mt(c),a=a(c),t.flags|=1,St(e,t,a,i),t.child;case 14:return a=t.type,c=Xt(a,t.pendingProps),c=Xt(a.type,c),Nu(e,t,a,c,i);case 15:return Cu(e,t,t.type,t.pendingProps,i);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Xt(a,c),qi(e,t),t.tag=1,Nt(a)?(e=!0,Ni(t)):e=!1,zr(t,i),yu(t,a,c),Io(t,a,c,i),$o(null,t,a,!0,e,i);case 19:return Lu(e,t,i);case 22:return Eu(e,t,i)}throw Error(r(156,t.tag))};function id(e,t){return $l(e,t)}function sp(e,t,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(e,t,i,a){return new sp(e,t,i,a)}function sl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ip(e){if(typeof e=="function")return sl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Oe)return 11;if(e===Ee)return 14}return 2}function Jn(e,t){var i=e.alternate;return i===null?(i=Vt(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function ta(e,t,i,a,c,h){var m=2;if(a=e,typeof e=="function")sl(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case F:return pr(i.children,c,h,t);case _e:m=8,c|=8;break;case we:return e=Vt(12,i,t,c|2),e.elementType=we,e.lanes=h,e;case ve:return e=Vt(13,i,t,c),e.elementType=ve,e.lanes=h,e;case Ae:return e=Vt(19,i,t,c),e.elementType=Ae,e.lanes=h,e;case Te:return na(i,c,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Pe:m=10;break e;case Ue:m=9;break e;case Oe:m=11;break e;case Ee:m=14;break e;case Ie:m=16,a=null;break e}throw Error(r(130,e==null?e:typeof e,""))}return t=Vt(m,i,t,c),t.elementType=e,t.type=a,t.lanes=h,t}function pr(e,t,i,a){return e=Vt(7,e,a,t),e.lanes=i,e}function na(e,t,i,a){return e=Vt(22,e,a,t),e.elementType=Te,e.lanes=i,e.stateNode={isHidden:!1},e}function il(e,t,i){return e=Vt(6,e,null,t),e.lanes=i,e}function al(e,t,i){return t=Vt(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ap(e,t,i,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Oa(0),this.expirationTimes=Oa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oa(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function ol(e,t,i,a,c,h,m,w,k){return e=new ap(e,t,i,w,k),t===1?(t=1,h===!0&&(t|=8)):t=0,h=Vt(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},_o(h),e}function op(e,t,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z,key:a==null?null:""+a,children:e,containerInfo:t,implementation:i}}function ad(e){if(!e)return Fn;e=e._reactInternals;e:{if(vn(e)!==e||e.tag!==1)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Nt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(r(171))}if(e.tag===1){var i=e.type;if(Nt(i))return Ic(e,i,t)}return t}function od(e,t,i,a,c,h,m,w,k){return e=ol(i,a,!0,e,c,h,m,w,k),e.context=ad(null),i=e.current,a=xt(),c=Hn(i),h=xn(a,c),h.callback=t??null,Wn(i,h,c),e.current.lanes=c,os(e,c,a),Tt(e,a),e}function ra(e,t,i,a){var c=t.current,h=xt(),m=Hn(c);return i=ad(i),t.context===null?t.context=i:t.pendingContext=i,t=xn(h,m),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Wn(c,t,m),e!==null&&(tn(e,c,m,h),Ii(e,c,m)),m}function sa(e){return e=e.current,e.child?(e.child.tag===5,e.child.stateNode):null}function ld(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function ll(e,t){ld(e,t),(e=e.alternate)&&ld(e,t)}function lp(){return null}var cd=typeof reportError=="function"?reportError:function(e){console.error(e)};function cl(e){this._internalRoot=e}ia.prototype.render=cl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(r(409));ra(e,t,null,null)},ia.prototype.unmount=cl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;dr(function(){ra(null,e,null,null)}),t[yn]=null}};function ia(e){this._internalRoot=e}ia.prototype.unstable_scheduleHydration=function(e){if(e){var t=Kl();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Ln.length&&t!==0&&t<Ln[i].priority;i++);Ln.splice(i,0,e),i===0&&Jl(e)}};function ul(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function aa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ud(){}function cp(e,t,i,a,c){if(c){if(typeof a=="function"){var h=a;a=function(){var I=sa(m);h.call(I)}}var m=od(t,a,e,0,null,!1,!1,"",ud);return e._reactRootContainer=m,e[yn]=m.current,ks(e.nodeType===8?e.parentNode:e),dr(),m}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var w=a;a=function(){var I=sa(k);w.call(I)}}var k=ol(e,0,!1,null,null,!1,!1,"",ud);return e._reactRootContainer=k,e[yn]=k.current,ks(e.nodeType===8?e.parentNode:e),dr(function(){ra(t,k,i,a)}),k}function oa(e,t,i,a,c){var h=i._reactRootContainer;if(h){var m=h;if(typeof c=="function"){var w=c;c=function(){var k=sa(m);w.call(k)}}ra(t,m,e,c)}else m=cp(i,t,e,c,a);return sa(m)}ql=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=as(t.pendingLanes);i!==0&&(Aa(t,i|1),Tt(t,Ze()),($e&6)===0&&(qr=Ze()+500,Bn()))}break;case 13:dr(function(){var a=Sn(e,1);if(a!==null){var c=xt();tn(a,e,1,c)}}),ll(e,1)}},Ia=function(e){if(e.tag===13){var t=Sn(e,134217728);if(t!==null){var i=xt();tn(t,e,134217728,i)}ll(e,134217728)}},Vl=function(e){if(e.tag===13){var t=Hn(e),i=Sn(e,t);if(i!==null){var a=xt();tn(i,e,t,a)}ll(e,t)}},Kl=function(){return Be},Hl=function(e,t){var i=Be;try{return Be=e,t()}finally{Be=i}},z=function(e,t,i){switch(t){case"input":if(bt(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var a=i[t];if(a!==e&&a.form===e.form){var c=bi(a);if(!c)throw Error(r(90));pe(a),bt(a,c)}}}break;case"textarea":En(e,i);break;case"select":t=i.value,t!=null&&Ot(e,!!i.multiple,t,!1)}},Zs=tl,O=dr;var up={usingClientEntryPoint:!1,Events:[bs,Pr,bi,on,ss,tl]},$s={findFiberByHostInstance:rr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dp={bundleType:$s.bundleType,version:$s.version,rendererPackageName:$s.rendererPackageName,rendererConfig:$s.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ni(e),e===null?null:e.stateNode},findFiberByHostInstance:$s.findFiberByHostInstance||lp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var la=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!la.isDisabled&&la.supportsFiber)try{ii=la.inject(dp),ln=la}catch{}}return Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=up,Rt.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ul(t))throw Error(r(200));return op(e,t,null,i)},Rt.createRoot=function(e,t){if(!ul(e))throw Error(r(299));var i=!1,a="",c=cd;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=ol(e,1,!1,null,null,i,!1,a,c),e[yn]=t.current,ks(e.nodeType===8?e.parentNode:e),new cl(t)},Rt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=ni(t),e=e===null?null:e.stateNode,e},Rt.flushSync=function(e){return dr(e)},Rt.hydrate=function(e,t,i){if(!aa(t))throw Error(r(200));return oa(null,e,t,!0,i)},Rt.hydrateRoot=function(e,t,i){if(!ul(e))throw Error(r(405));var a=i!=null&&i.hydratedSources||null,c=!1,h="",m=cd;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(m=i.onRecoverableError)),t=od(t,null,e,1,i??null,c,!1,h,m),e[yn]=t.current,ks(e),a)for(e=0;e<a.length;e++)i=a[e],c=i._getVersion,c=c(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,c]:t.mutableSourceEagerHydrationData.push(i,c);return new ia(t)},Rt.render=function(e,t,i){if(!aa(t))throw Error(r(200));return oa(null,e,t,!1,i)},Rt.unmountComponentAtNode=function(e){if(!aa(e))throw Error(r(40));return e._reactRootContainer?(dr(function(){oa(null,null,e,!1,function(){e._reactRootContainer=null,e[yn]=null})}),!0):!1},Rt.unstable_batchedUpdates=tl,Rt.unstable_renderSubtreeIntoContainer=function(e,t,i,a){if(!aa(i))throw Error(r(200));if(e==null||e._reactInternals===void 0)throw Error(r(38));return oa(e,t,i,!1,a)},Rt.version="18.3.1-next-f1338f8080-20240426",Rt}var yd;function wp(){if(yd)return fl.exports;yd=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(n){console.error(n)}}return s(),fl.exports=yp(),fl.exports}var wd;function _p(){if(wd)return ca;wd=1;var s=wp();return ca.createRoot=s.createRoot,ca.hydrateRoot=s.hydrateRoot,ca}var kp=_p();function ka(s,n){var r={};for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&n.indexOf(o)<0&&(r[o]=s[o]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(s);u<o.length;u++)n.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(s,o[u])&&(r[o[u]]=s[o[u]]);return r}function Sp(s,n,r,o){function u(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function p(y){try{v(o.next(y))}catch(C){f(C)}}function g(y){try{v(o.throw(y))}catch(C){f(C)}}function v(y){y.done?d(y.value):u(y.value).then(p,g)}v((o=o.apply(s,n||[])).next())})}const xp=s=>s?(...n)=>s(...n):(...n)=>fetch(...n);class Ll extends Error{constructor(n,r="FunctionsError",o){super(n),this.name=r,this.context=o}}class bp extends Ll{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class _d extends Ll{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class kd extends Ll{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var xl;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(xl||(xl={}));class jp{constructor(n,{headers:r={},customFetch:o,region:u=xl.Any}={}){this.url=n,this.headers=r,this.region=u,this.fetch=xp(o)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return Sp(this,arguments,void 0,function*(r,o={}){var u;let d,f;try{const{headers:p,method:g,body:v,signal:y,timeout:C}=o;let x={},{region:b}=o;b||(b=this.region);const A=new URL(`${this.url}/${r}`);b&&b!=="any"&&(x["x-region"]=b,A.searchParams.set("forceFunctionRegion",b));let R;v&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&v instanceof Blob||v instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",R=v):typeof v=="string"?(x["Content-Type"]="text/plain",R=v):typeof FormData<"u"&&v instanceof FormData?R=v:(x["Content-Type"]="application/json",R=JSON.stringify(v)):v&&typeof v!="string"&&!(typeof Blob<"u"&&v instanceof Blob)&&!(v instanceof ArrayBuffer)&&!(typeof FormData<"u"&&v instanceof FormData)?R=JSON.stringify(v):R=v;let U=y;C&&(f=new AbortController,d=setTimeout(()=>f.abort(),C),y?(U=f.signal,y.addEventListener("abort",()=>f.abort())):U=f.signal);const D=yield this.fetch(A.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),p),body:R,signal:U}).catch(ee=>{throw new bp(ee)}),W=D.headers.get("x-relay-error");if(W&&W==="true")throw new _d(D);if(!D.ok)throw new kd(D);let E=((u=D.headers.get("Content-Type"))!==null&&u!==void 0?u:"text/plain").split(";")[0].trim(),q;return E==="application/json"?q=yield D.json():E==="application/octet-stream"||E==="application/pdf"?q=yield D.blob():E==="text/event-stream"?q=D:E==="multipart/form-data"?q=yield D.formData():q=yield D.text(),{data:q,error:null,response:D}}catch(p){return{data:null,error:p,response:p instanceof kd||p instanceof _d?p.context:void 0}}finally{d&&clearTimeout(d)}})}}var Np=class extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}},Cp=class{constructor(s){var n,r,o;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(n=s.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=s.signal,this.isMaybeSingle=(r=s.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(o=s.urlLengthLimit)!==null&&o!==void 0?o:8e3,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,n){return this.headers=new Headers(this.headers),this.headers.set(s,n),this}then(s,n){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let u=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{let f=null,p=null,g=null,v=d.status,y=d.statusText;if(d.ok){var C,x;if(r.method!=="HEAD"){var b;const D=await d.text();D===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((b=r.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?p=D:p=JSON.parse(D))}const R=(C=r.headers.get("Prefer"))===null||C===void 0?void 0:C.match(/count=(exact|planned|estimated)/),U=(x=d.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");R&&U&&U.length>1&&(g=parseInt(U[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(p)&&(p.length>1?(f={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,g=null,v=406,y="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{var A;const R=await d.text();try{f=JSON.parse(R),Array.isArray(f)&&d.status===404&&(p=[],f=null,v=200,y="OK")}catch{d.status===404&&R===""?(v=204,y="No Content"):f={message:R}}if(f&&r.isMaybeSingle&&(!(f==null||(A=f.details)===null||A===void 0)&&A.includes("0 rows"))&&(f=null,v=200,y="OK"),f&&r.shouldThrowOnError)throw new Np(f)}return{error:f,data:p,count:g,status:v,statusText:y}});return this.shouldThrowOnError||(u=u.catch(d=>{var f;let p="",g="",v="";const y=d?.cause;if(y){var C,x,b,A;const D=(C=y?.message)!==null&&C!==void 0?C:"",W=(x=y?.code)!==null&&x!==void 0?x:"";p=`${(b=d?.name)!==null&&b!==void 0?b:"FetchError"}: ${d?.message}`,p+=`

Caused by: ${(A=y?.name)!==null&&A!==void 0?A:"Error"}: ${D}`,W&&(p+=` (${W})`),y?.stack&&(p+=`
${y.stack}`)}else{var R;p=(R=d?.stack)!==null&&R!==void 0?R:""}const U=this.url.toString().length;return d?.name==="AbortError"||d?.code==="ABORT_ERR"?(v="",g="Request was aborted (timeout or manual cancellation)",U>this.urlLengthLimit&&(g+=`. Note: Your request URL is ${U} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(y?.name==="HeadersOverflowError"||y?.code==="UND_ERR_HEADERS_OVERFLOW")&&(v="",g="HTTP headers exceeded server limits (typically 16KB)",U>this.urlLengthLimit&&(g+=`. Your request URL is ${U} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(f=d?.name)!==null&&f!==void 0?f:"FetchError"}: ${d?.message}`,details:p,hint:g,code:v},data:null,count:null,status:0,statusText:""}})),u.then(s,n)}returns(){return this}overrideTypes(){return this}},Ep=class extends Cp{select(s){let n=!1;const r=(s??"*").split("").map(o=>/\s/.test(o)&&!n?"":(o==='"'&&(n=!n),o)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:n=!0,nullsFirst:r,foreignTable:o,referencedTable:u=o}={}){const d=u?`${u}.order`:"order",f=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${f?`${f},`:""}${s}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:n,referencedTable:r=n}={}){const o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${s}`),this}range(s,n,{foreignTable:r,referencedTable:o=r}={}){const u=typeof o>"u"?"offset":`${o}.offset`,d=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(u,`${s}`),this.url.searchParams.set(d,`${n-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:n=!1,settings:r=!1,buffers:o=!1,wal:u=!1,format:d="text"}={}){var f;const p=[s?"analyze":null,n?"verbose":null,r?"settings":null,o?"buffers":null,u?"wal":null].filter(Boolean).join("|"),g=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${g}"; options=${p};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};const Sd=new RegExp("[,()]");var Xr=class extends Ep{eq(s,n){return this.url.searchParams.append(s,`eq.${n}`),this}neq(s,n){return this.url.searchParams.append(s,`neq.${n}`),this}gt(s,n){return this.url.searchParams.append(s,`gt.${n}`),this}gte(s,n){return this.url.searchParams.append(s,`gte.${n}`),this}lt(s,n){return this.url.searchParams.append(s,`lt.${n}`),this}lte(s,n){return this.url.searchParams.append(s,`lte.${n}`),this}like(s,n){return this.url.searchParams.append(s,`like.${n}`),this}likeAllOf(s,n){return this.url.searchParams.append(s,`like(all).{${n.join(",")}}`),this}likeAnyOf(s,n){return this.url.searchParams.append(s,`like(any).{${n.join(",")}}`),this}ilike(s,n){return this.url.searchParams.append(s,`ilike.${n}`),this}ilikeAllOf(s,n){return this.url.searchParams.append(s,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(s,n){return this.url.searchParams.append(s,`ilike(any).{${n.join(",")}}`),this}regexMatch(s,n){return this.url.searchParams.append(s,`match.${n}`),this}regexIMatch(s,n){return this.url.searchParams.append(s,`imatch.${n}`),this}is(s,n){return this.url.searchParams.append(s,`is.${n}`),this}isDistinct(s,n){return this.url.searchParams.append(s,`isdistinct.${n}`),this}in(s,n){const r=Array.from(new Set(n)).map(o=>typeof o=="string"&&Sd.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(s,`in.(${r})`),this}notIn(s,n){const r=Array.from(new Set(n)).map(o=>typeof o=="string"&&Sd.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(s,`not.in.(${r})`),this}contains(s,n){return typeof n=="string"?this.url.searchParams.append(s,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(s,`cs.{${n.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(n)}`),this}containedBy(s,n){return typeof n=="string"?this.url.searchParams.append(s,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(s,`cd.{${n.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(n)}`),this}rangeGt(s,n){return this.url.searchParams.append(s,`sr.${n}`),this}rangeGte(s,n){return this.url.searchParams.append(s,`nxl.${n}`),this}rangeLt(s,n){return this.url.searchParams.append(s,`sl.${n}`),this}rangeLte(s,n){return this.url.searchParams.append(s,`nxr.${n}`),this}rangeAdjacent(s,n){return this.url.searchParams.append(s,`adj.${n}`),this}overlaps(s,n){return typeof n=="string"?this.url.searchParams.append(s,`ov.${n}`):this.url.searchParams.append(s,`ov.{${n.join(",")}}`),this}textSearch(s,n,{config:r,type:o}={}){let u="";o==="plain"?u="pl":o==="phrase"?u="ph":o==="websearch"&&(u="w");const d=r===void 0?"":`(${r})`;return this.url.searchParams.append(s,`${u}fts${d}.${n}`),this}match(s){return Object.entries(s).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(s,n,r){return this.url.searchParams.append(s,`not.${n}.${r}`),this}or(s,{foreignTable:n,referencedTable:r=n}={}){const o=r?`${r}.or`:"or";return this.url.searchParams.append(o,`(${s})`),this}filter(s,n,r){return this.url.searchParams.append(s,`${n}.${r}`),this}},Tp=class{constructor(s,{headers:n={},schema:r,fetch:o,urlLengthLimit:u=8e3}){this.url=s,this.headers=new Headers(n),this.schema=r,this.fetch=o,this.urlLengthLimit=u}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(s,n){const{head:r=!1,count:o}=n??{},u=r?"HEAD":"GET";let d=!1;const f=(s??"*").split("").map(v=>/\s/.test(v)&&!d?"":(v==='"'&&(d=!d),v)).join(""),{url:p,headers:g}=this.cloneRequestState();return p.searchParams.set("select",f),o&&g.append("Prefer",`count=${o}`),new Xr({method:u,url:p,headers:g,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(s,{count:n,defaultToNull:r=!0}={}){var o;const u="POST",{url:d,headers:f}=this.cloneRequestState();if(n&&f.append("Prefer",`count=${n}`),r||f.append("Prefer","missing=default"),Array.isArray(s)){const p=s.reduce((g,v)=>g.concat(Object.keys(v)),[]);if(p.length>0){const g=[...new Set(p)].map(v=>`"${v}"`);d.searchParams.set("columns",g.join(","))}}return new Xr({method:u,url:d,headers:f,schema:this.schema,body:s,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(s,{onConflict:n,ignoreDuplicates:r=!1,count:o,defaultToNull:u=!0}={}){var d;const f="POST",{url:p,headers:g}=this.cloneRequestState();if(g.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&p.searchParams.set("on_conflict",n),o&&g.append("Prefer",`count=${o}`),u||g.append("Prefer","missing=default"),Array.isArray(s)){const v=s.reduce((y,C)=>y.concat(Object.keys(C)),[]);if(v.length>0){const y=[...new Set(v)].map(C=>`"${C}"`);p.searchParams.set("columns",y.join(","))}}return new Xr({method:f,url:p,headers:g,schema:this.schema,body:s,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch,urlLengthLimit:this.urlLengthLimit})}update(s,{count:n}={}){var r;const o="PATCH",{url:u,headers:d}=this.cloneRequestState();return n&&d.append("Prefer",`count=${n}`),new Xr({method:o,url:u,headers:d,schema:this.schema,body:s,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:s}={}){var n;const r="DELETE",{url:o,headers:u}=this.cloneRequestState();return s&&u.append("Prefer",`count=${s}`),new Xr({method:r,url:o,headers:u,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}};function Vs(s){"@babel/helpers - typeof";return Vs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Vs(s)}function Rp(s,n){if(Vs(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var o=r.call(s,n);if(Vs(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(s)}function Pp(s){var n=Rp(s,"string");return Vs(n)=="symbol"?n:n+""}function Op(s,n,r){return(n=Pp(n))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r,s}function xd(s,n){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);n&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(s,u).enumerable})),r.push.apply(r,o)}return r}function ua(s){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?xd(Object(r),!0).forEach(function(o){Op(s,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):xd(Object(r)).forEach(function(o){Object.defineProperty(s,o,Object.getOwnPropertyDescriptor(r,o))})}return s}var Ap=class eh{constructor(n,{headers:r={},schema:o,fetch:u,timeout:d,urlLengthLimit:f=8e3}={}){this.url=n,this.headers=new Headers(r),this.schemaName=o,this.urlLengthLimit=f;const p=u??globalThis.fetch;d!==void 0&&d>0?this.fetch=(g,v)=>{const y=new AbortController,C=setTimeout(()=>y.abort(),d),x=v?.signal;if(x){if(x.aborted)return clearTimeout(C),p(g,v);const b=()=>{clearTimeout(C),y.abort()};return x.addEventListener("abort",b,{once:!0}),p(g,ua(ua({},v),{},{signal:y.signal})).finally(()=>{clearTimeout(C),x.removeEventListener("abort",b)})}return p(g,ua(ua({},v),{},{signal:y.signal})).finally(()=>clearTimeout(C))}:this.fetch=p}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Tp(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(n){return new eh(this.url,{headers:this.headers,schema:n,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(n,r={},{head:o=!1,get:u=!1,count:d}={}){var f;let p;const g=new URL(`${this.url}/rpc/${n}`);let v;const y=b=>b!==null&&typeof b=="object"&&(!Array.isArray(b)||b.some(y)),C=o&&Object.values(r).some(y);C?(p="POST",v=r):o||u?(p=o?"HEAD":"GET",Object.entries(r).filter(([b,A])=>A!==void 0).map(([b,A])=>[b,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([b,A])=>{g.searchParams.append(b,A)})):(p="POST",v=r);const x=new Headers(this.headers);return C?x.set("Prefer",d?`count=${d},return=minimal`:"return=minimal"):d&&x.set("Prefer",`count=${d}`),new Xr({method:p,url:g,headers:x,schema:this.schemaName,body:v,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch,urlLengthLimit:this.urlLengthLimit})}};class Ip{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const o=r.versions;if(o&&o.node){const u=o.node,d=parseInt(u.replace(/^v/,"").split(".")[0]);return d>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${d} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${d} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let r=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(r+=`

Suggested solution: ${n.workaround}`),new Error(r)}static createWebSocket(n,r){const o=this.getWebSocketConstructor();return new o(n,r)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const Lp="2.97.0",Up=`realtime-js/${Lp}`,Dp="1.0.0",th="2.0.0",bd=th,bl=1e4,$p=1e3,zp=100;var Yn;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Yn||(Yn={}));var it;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(it||(it={}));var sn;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(sn||(sn={}));var jl;(function(s){s.websocket="websocket"})(jl||(jl={}));var yr;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(yr||(yr={}));class Fp{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,r){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(n));let o=[n.join_ref,n.ref,n.topic,n.event,n.payload];return r(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(n){var r;return this._isArrayBuffer((r=n.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var r,o;const u=(o=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&o!==void 0?o:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,u)}_encodeJsonUserBroadcastPush(n){var r,o;const u=(o=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&o!==void 0?o:{},f=new TextEncoder().encode(JSON.stringify(u)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,f)}_encodeUserBroadcastPush(n,r,o){var u,d;const f=n.topic,p=(u=n.ref)!==null&&u!==void 0?u:"",g=(d=n.join_ref)!==null&&d!==void 0?d:"",v=n.payload.event,y=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},C=Object.keys(y).length===0?"":JSON.stringify(y);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`ref length ${p.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`topic length ${f.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`userEvent length ${v.length} exceeds maximum of 255`);if(C.length>255)throw new Error(`metadata length ${C.length} exceeds maximum of 255`);const x=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+p.length+f.length+v.length+C.length,b=new ArrayBuffer(this.HEADER_LENGTH+x);let A=new DataView(b),R=0;A.setUint8(R++,this.KINDS.userBroadcastPush),A.setUint8(R++,g.length),A.setUint8(R++,p.length),A.setUint8(R++,f.length),A.setUint8(R++,v.length),A.setUint8(R++,C.length),A.setUint8(R++,r),Array.from(g,D=>A.setUint8(R++,D.charCodeAt(0))),Array.from(p,D=>A.setUint8(R++,D.charCodeAt(0))),Array.from(f,D=>A.setUint8(R++,D.charCodeAt(0))),Array.from(v,D=>A.setUint8(R++,D.charCodeAt(0))),Array.from(C,D=>A.setUint8(R++,D.charCodeAt(0)));var U=new Uint8Array(b.byteLength+o.byteLength);return U.set(new Uint8Array(b),0),U.set(new Uint8Array(o),b.byteLength),U.buffer}decode(n,r){if(this._isArrayBuffer(n)){let o=this._binaryDecode(n);return r(o)}if(typeof n=="string"){const o=JSON.parse(n),[u,d,f,p,g]=o;return r({join_ref:u,ref:d,topic:f,event:p,payload:g})}return r({})}_binaryDecode(n){const r=new DataView(n),o=r.getUint8(0),u=new TextDecoder;if(o===this.KINDS.userBroadcast)return this._decodeUserBroadcast(n,r,u)}_decodeUserBroadcast(n,r,o){const u=r.getUint8(1),d=r.getUint8(2),f=r.getUint8(3),p=r.getUint8(4);let g=this.HEADER_LENGTH+4;const v=o.decode(n.slice(g,g+u));g=g+u;const y=o.decode(n.slice(g,g+d));g=g+d;const C=o.decode(n.slice(g,g+f));g=g+f;const x=n.slice(g,n.byteLength),b=p===this.JSON_ENCODING?JSON.parse(o.decode(x)):x,A={type:this.BROADCAST_EVENT,event:y,payload:b};return f>0&&(A.meta=JSON.parse(C)),{join_ref:null,ref:null,topic:v,event:this.BROADCAST_EVENT,payload:A}}_isArrayBuffer(n){var r;return n instanceof ArrayBuffer||((r=n?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(n,r){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([o])=>r.includes(o)))}}class nh{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var qe;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(qe||(qe={}));const jd=(s,n,r={})=>{var o;const u=(o=r.skipTypes)!==null&&o!==void 0?o:[];return n?Object.keys(n).reduce((d,f)=>(d[f]=Bp(f,s,n,u),d),{}):{}},Bp=(s,n,r,o)=>{const u=n.find(p=>p.name===s),d=u?.type,f=r[s];return d&&!o.includes(d)?rh(d,f):Nl(f)},rh=(s,n)=>{if(s.charAt(0)==="_"){const r=s.slice(1,s.length);return Vp(n,r)}switch(s){case qe.bool:return Mp(n);case qe.float4:case qe.float8:case qe.int2:case qe.int4:case qe.int8:case qe.numeric:case qe.oid:return Wp(n);case qe.json:case qe.jsonb:return qp(n);case qe.timestamp:return Kp(n);case qe.abstime:case qe.date:case qe.daterange:case qe.int4range:case qe.int8range:case qe.money:case qe.reltime:case qe.text:case qe.time:case qe.timestamptz:case qe.timetz:case qe.tsrange:case qe.tstzrange:return Nl(n);default:return Nl(n)}},Nl=s=>s,Mp=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},Wp=s=>{if(typeof s=="string"){const n=parseFloat(s);if(!Number.isNaN(n))return n}return s},qp=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch{return s}return s},Vp=(s,n)=>{if(typeof s!="string")return s;const r=s.length-1,o=s[r];if(s[0]==="{"&&o==="}"){let d;const f=s.slice(1,r);try{d=JSON.parse("["+f+"]")}catch{d=f?f.split(","):[]}return d.map(p=>rh(n,p))}return s},Kp=s=>typeof s=="string"?s.replace(" ","T"):s,sh=s=>{const n=new URL(s);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class gl{constructor(n,r,o={},u=bl){this.channel=n,this.event=r,this.payload=o,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var o;return this._hasReceived(n)&&r((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(o=>o.status===n).forEach(o=>o.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var Nd;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Nd||(Nd={}));class Ws{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},u=>{const{onJoin:d,onLeave:f,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ws.syncState(this.state,u,d,f),this.pendingDiffs.forEach(g=>{this.state=Ws.syncDiff(this.state,g,d,f)}),this.pendingDiffs=[],p()}),this.channel._on(o.diff,{},u=>{const{onJoin:d,onLeave:f,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=Ws.syncDiff(this.state,u,d,f),p())}),this.onJoin((u,d,f)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:d,newPresences:f})}),this.onLeave((u,d,f)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:d,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,o,u){const d=this.cloneDeep(n),f=this.transformState(r),p={},g={};return this.map(d,(v,y)=>{f[v]||(g[v]=y)}),this.map(f,(v,y)=>{const C=d[v];if(C){const x=y.map(U=>U.presence_ref),b=C.map(U=>U.presence_ref),A=y.filter(U=>b.indexOf(U.presence_ref)<0),R=C.filter(U=>x.indexOf(U.presence_ref)<0);A.length>0&&(p[v]=A),R.length>0&&(g[v]=R)}else p[v]=y}),this.syncDiff(d,{joins:p,leaves:g},o,u)}static syncDiff(n,r,o,u){const{joins:d,leaves:f}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return o||(o=()=>{}),u||(u=()=>{}),this.map(d,(p,g)=>{var v;const y=(v=n[p])!==null&&v!==void 0?v:[];if(n[p]=this.cloneDeep(g),y.length>0){const C=n[p].map(b=>b.presence_ref),x=y.filter(b=>C.indexOf(b.presence_ref)<0);n[p].unshift(...x)}o(p,y,g)}),this.map(f,(p,g)=>{let v=n[p];if(!v)return;const y=g.map(C=>C.presence_ref);v=v.filter(C=>y.indexOf(C.presence_ref)<0),n[p]=v,u(p,v,g),v.length===0&&delete n[p]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(o=>r(o,n[o]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,o)=>{const u=n[o];return"metas"in u?r[o]=u.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):r[o]=u,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Cd;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Cd||(Cd={}));var qs;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(qs||(qs={}));var Nn;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(Nn||(Nn={}));class ts{constructor(n,r={config:{}},o){var u,d;if(this.topic=n,this.params=r,this.socket=o,this.bindings={},this.state=it.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new gl(this,sn.join,this.params,this.timeout),this.rejoinTimer=new nh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=it.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=it.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=it.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=it.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=it.errored,this.rejoinTimer.scheduleTimeout())}),this._on(sn.reply,{},(f,p)=>{this._trigger(this._replyEventName(p),f)}),this.presence=new Ws(this),this.broadcastEndpointURL=sh(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((d=(u=this.params.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,r=this.timeout){var o,u,d;if(this.socket.isConnected()||this.socket.connect(),this.state==it.closed){const{config:{broadcast:f,presence:p,private:g}}=this.params,v=(u=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(b=>b.filter))!==null&&u!==void 0?u:[],y=!!this.bindings[qs.PRESENCE]&&this.bindings[qs.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,C={},x={broadcast:f,presence:Object.assign(Object.assign({},p),{enabled:y}),postgres_changes:v,private:g};this.socket.accessTokenValue&&(C.access_token=this.socket.accessTokenValue),this._onError(b=>n?.(Nn.CHANNEL_ERROR,b)),this._onClose(()=>n?.(Nn.CLOSED)),this.updateJoinPayload(Object.assign({config:x},C)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:b})=>{var A;if(this.socket._isManualToken()||this.socket.setAuth(),b===void 0){n?.(Nn.SUBSCRIBED);return}else{const R=this.bindings.postgres_changes,U=(A=R?.length)!==null&&A!==void 0?A:0,D=[];for(let W=0;W<U;W++){const E=R[W],{filter:{event:q,schema:ee,table:Z,filter:F}}=E,_e=b&&b[W];if(_e&&_e.event===q&&ts.isFilterValueEqual(_e.schema,ee)&&ts.isFilterValueEqual(_e.table,Z)&&ts.isFilterValueEqual(_e.filter,F))D.push(Object.assign(Object.assign({},E),{id:_e.id}));else{this.unsubscribe(),this.state=it.errored,n?.(Nn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=D,n&&n(Nn.SUBSCRIBED);return}}).receive("error",b=>{this.state=it.errored,n?.(Nn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{n?.(Nn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,o){return this.state===it.joined&&n===qs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,r,o)}async httpSend(n,r,o={}){var u;if(r==null)return Promise.reject("Payload is required for httpSend()");const d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:r,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(u=o.timeout)!==null&&u!==void 0?u:this.timeout);if(p.status===202)return{success:!0};let g=p.statusText;try{const v=await p.json();g=v.error||v.message||g}catch{}return Promise.reject(new Error(g))}async send(n,r={}){var o,u;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:d,payload:f}=n,p={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(p.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:p,body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:f,private:this.private}]})};try{const v=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(o=r.timeout)!==null&&o!==void 0?o:this.timeout);return await((u=v.body)===null||u===void 0?void 0:u.cancel()),v.ok?"ok":"error"}catch(v){return v.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var f,p,g;const v=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((g=(p=(f=this.params)===null||f===void 0?void 0:f.config)===null||p===void 0?void 0:p.broadcast)===null||g===void 0)&&g.ack)&&d("ok"),v.receive("ok",()=>d("ok")),v.receive("error",()=>d("error")),v.receive("timeout",()=>d("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=it.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(sn.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(u=>{o=new gl(this,sn.leave,{},n),o.receive("ok",()=>{r(),u("ok")}).receive("timeout",()=>{r(),u("timed out")}).receive("error",()=>{u("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=it.closed,this.bindings={}}async _fetchWithTimeout(n,r,o){const u=new AbortController,d=setTimeout(()=>u.abort(),o),f=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:u.signal}));return clearTimeout(d),f}_push(n,r,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new gl(this,n,r,o);return this._canPush()?u.send():this._addToPushBuffer(u),u}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>zp){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(n,r,o){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,o){var u,d;const f=n.toLocaleLowerCase(),{close:p,error:g,leave:v,join:y}=sn;if(o&&[p,g,v,y].indexOf(f)>=0&&o!==this._joinRef())return;let x=this._onMessage(f,r,o);if(r&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(b=>{var A,R,U;return((A=b.filter)===null||A===void 0?void 0:A.event)==="*"||((U=(R=b.filter)===null||R===void 0?void 0:R.event)===null||U===void 0?void 0:U.toLocaleLowerCase())===f}).map(b=>b.callback(x,o)):(d=this.bindings[f])===null||d===void 0||d.filter(b=>{var A,R,U,D,W,E;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in b){const q=b.id,ee=(A=b.filter)===null||A===void 0?void 0:A.event;return q&&((R=r.ids)===null||R===void 0?void 0:R.includes(q))&&(ee==="*"||ee?.toLocaleLowerCase()===((U=r.data)===null||U===void 0?void 0:U.type.toLocaleLowerCase()))}else{const q=(W=(D=b?.filter)===null||D===void 0?void 0:D.event)===null||W===void 0?void 0:W.toLocaleLowerCase();return q==="*"||q===((E=r?.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===f}).map(b=>{if(typeof x=="object"&&"ids"in x){const A=x.data,{schema:R,table:U,commit_timestamp:D,type:W,errors:E}=A;x=Object.assign(Object.assign({},{schema:R,table:U,commit_timestamp:D,eventType:W,new:{},old:{},errors:E}),this._getPayloadRecords(A))}b.callback(x,o)})}_isClosed(){return this.state===it.closed}_isJoined(){return this.state===it.joined}_isJoining(){return this.state===it.joining}_isLeaving(){return this.state===it.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,o){const u=n.toLocaleLowerCase(),d={type:u,filter:r,callback:o};return this.bindings[u]?this.bindings[u].push(d):this.bindings[u]=[d],this}_off(n,r){const o=n.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(u=>{var d;return!(((d=u.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===o&&ts.isEqual(u.filter,r))})),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const o in n)if(n[o]!==r[o])return!1;return!0}static isFilterValueEqual(n,r){return(n??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(sn.close,{},n)}_onError(n){this._on(sn.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=it.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=jd(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=jd(n.columns,n.old_record)),r}}const vl=()=>{},da={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Hp=[1e3,2e3,5e3,1e4],Gp=1e4,Jp=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Qp{constructor(n,r){var o;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=bl,this.transport=null,this.heartbeatIntervalMs=da.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=vl,this.ref=0,this.reconnectTimer=null,this.vsn=bd,this.logger=vl,this.conn=null,this.sendBuffer=[],this.serializer=new Fp,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=u=>u?(...d)=>u(...d):(...d)=>fetch(...d),!(!((o=r?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${n}/${jl.websocket}`,this.httpEndpoint=sh(n),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ip.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const r=n.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,o){this.logger(n,r,o)}connectionState(){switch(this.conn&&this.conn.readyState){case Yn.connecting:return yr.Connecting;case Yn.open:return yr.Open;case Yn.closing:return yr.Closing;default:return yr.Closed}}isConnected(){return this.connectionState()===yr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,r={config:{}}){const o=`realtime:${n}`,u=this.getChannels().find(d=>d.topic===o);if(u)return u;{const d=new ts(`realtime:${n}`,r,this);return this.channels.push(d),d}}push(n){const{topic:r,event:o,payload:u,ref:d}=n,f=()=>{this.encode(n,p=>{var g;(g=this.conn)===null||g===void 0||g.send(p)})};this.log("push",`${r} ${o} (${d})`,u),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close($p,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},da.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(o=>o.topic===n&&(o._isJoined()||o._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const v=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",v)}catch(y){this.log("error","error in heartbeat callback",y)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:o,event:u,payload:d,ref:f}=r,p=f?`(${f})`:"",g=d.status||"";this.log("receive",`${g} ${o} ${u} ${p}`.trim(),d),this.channels.filter(v=>v._isMember(o)).forEach(v=>v._trigger(u,d,f)),this._triggerStateCallbacks("message",r)})}_clearTimer(n){var r;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===Yn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Yn.open||this.conn.readyState===Yn.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var r;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(n=>n._trigger(sn.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const o=n.match(/\?/)?"&":"?",u=new URLSearchParams(r);return`${n}${o}${u}`}_workerObjectUrl(n){let r;if(n)r=n;else{const o=new Blob([Jp],{type:"application/javascript"});r=URL.createObjectURL(o)}return r}_setConnectionState(n,r=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(n=null){let r,o=!1;if(n)r=n,o=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(u){this.log("error","Error fetching access token from callback",u),r=this.accessTokenValue}else r=this.accessTokenValue;o?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(u=>{const d={access_token:r,version:Up};r&&u.updateJoinPayload(d),u.joinedOnce&&u._isJoined()&&u._push(sn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${n}`,r)})}_triggerStateCallbacks(n,r){try{this.stateChangeCallbacks[n].forEach(o=>{try{o(r)}catch(u){this.log("error",`error in ${n} callback`,u)}})}catch(o){this.log("error",`error triggering ${n} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new nh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},da.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var r,o,u,d,f,p,g,v,y,C,x,b;switch(this.transport=(r=n?.transport)!==null&&r!==void 0?r:null,this.timeout=(o=n?.timeout)!==null&&o!==void 0?o:bl,this.heartbeatIntervalMs=(u=n?.heartbeatIntervalMs)!==null&&u!==void 0?u:da.HEARTBEAT_INTERVAL,this.worker=(d=n?.worker)!==null&&d!==void 0?d:!1,this.accessToken=(f=n?.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(p=n?.heartbeatCallback)!==null&&p!==void 0?p:vl,this.vsn=(g=n?.vsn)!==null&&g!==void 0?g:bd,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(v=n?.reconnectAfterMs)!==null&&v!==void 0?v:(A=>Hp[A-1]||Gp),this.vsn){case Dp:this.encode=(y=n?.encode)!==null&&y!==void 0?y:((A,R)=>R(JSON.stringify(A))),this.decode=(C=n?.decode)!==null&&C!==void 0?C:((A,R)=>R(JSON.parse(A)));break;case th:this.encode=(x=n?.encode)!==null&&x!==void 0?x:this.serializer.encode.bind(this.serializer),this.decode=(b=n?.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}var Ks=class extends Error{constructor(s,n){super(s),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&n.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Yp(s,n,r){const o=new URL(n,s);if(r)for(const[u,d]of Object.entries(r))d!==void 0&&o.searchParams.set(u,d);return o.toString()}async function Xp(s){return!s||s.type==="none"?{}:s.type==="bearer"?{Authorization:`Bearer ${s.token}`}:s.type==="header"?{[s.name]:s.value}:s.type==="custom"?await s.getHeaders():{}}function Zp(s){const n=s.fetchImpl??globalThis.fetch;return{async request({method:r,path:o,query:u,body:d,headers:f}){const p=Yp(s.baseUrl,o,u),g=await Xp(s.auth),v=await n(p,{method:r,headers:{...d?{"Content-Type":"application/json"}:{},...g,...f},body:d?JSON.stringify(d):void 0}),y=await v.text(),C=(v.headers.get("content-type")||"").includes("application/json"),x=C&&y?JSON.parse(y):y;if(!v.ok){const b=C?x:void 0,A=b?.error;throw new Ks(A?.message??`Request failed with status ${v.status}`,{status:v.status,icebergType:A?.type,icebergCode:A?.code,details:b})}return{status:v.status,headers:v.headers,data:x}}}}function ha(s){return s.join("")}var em=class{constructor(s,n=""){this.client=s,this.prefix=n}async listNamespaces(s){const n=s?{parent:ha(s.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(o=>({namespace:o}))}async createNamespace(s,n){const r={namespace:s.namespace,properties:n?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ha(s.namespace)}`})}async loadNamespaceMetadata(s){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ha(s.namespace)}`})).data.properties}}async namespaceExists(s){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ha(s.namespace)}`}),!0}catch(n){if(n instanceof Ks&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(s,n){try{return await this.createNamespace(s,n)}catch(r){if(r instanceof Ks&&r.status===409)return;throw r}}};function Kr(s){return s.join("")}var tm=class{constructor(s,n="",r){this.client=s,this.prefix=n,this.accessDelegation=r}async listTables(s){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Kr(s.namespace)}/tables`})).data.identifiers}async createTable(s,n){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Kr(s.namespace)}/tables`,body:n,headers:r})).data.metadata}async updateTable(s,n){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Kr(s.namespace)}/tables/${s.name}`,body:n});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(s,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Kr(s.namespace)}/tables/${s.name}`,query:{purgeRequested:String(n?.purge??!1)}})}async loadTable(s){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Kr(s.namespace)}/tables/${s.name}`,headers:n})).data.metadata}async tableExists(s){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Kr(s.namespace)}/tables/${s.name}`,headers:n}),!0}catch(r){if(r instanceof Ks&&r.status===404)return!1;throw r}}async createTableIfNotExists(s,n){try{return await this.createTable(s,n)}catch(r){if(r instanceof Ks&&r.status===409)return await this.loadTable({namespace:s.namespace,name:n.name});throw r}}},nm=class{constructor(s){let n="v1";s.catalogName&&(n+=`/${s.catalogName}`);const r=s.baseUrl.endsWith("/")?s.baseUrl:`${s.baseUrl}/`;this.client=Zp({baseUrl:r,auth:s.auth,fetchImpl:s.fetch}),this.accessDelegation=s.accessDelegation?.join(","),this.namespaceOps=new em(this.client,n),this.tableOps=new tm(this.client,n,this.accessDelegation)}async listNamespaces(s){return this.namespaceOps.listNamespaces(s)}async createNamespace(s,n){return this.namespaceOps.createNamespace(s,n)}async dropNamespace(s){await this.namespaceOps.dropNamespace(s)}async loadNamespaceMetadata(s){return this.namespaceOps.loadNamespaceMetadata(s)}async listTables(s){return this.tableOps.listTables(s)}async createTable(s,n){return this.tableOps.createTable(s,n)}async updateTable(s,n){return this.tableOps.updateTable(s,n)}async dropTable(s,n){await this.tableOps.dropTable(s,n)}async loadTable(s){return this.tableOps.loadTable(s)}async namespaceExists(s){return this.namespaceOps.namespaceExists(s)}async tableExists(s){return this.tableOps.tableExists(s)}async createNamespaceIfNotExists(s,n){return this.namespaceOps.createNamespaceIfNotExists(s,n)}async createTableIfNotExists(s,n){return this.tableOps.createTableIfNotExists(s,n)}},Sa=class extends Error{constructor(s,n="storage",r,o){super(s),this.__isStorageError=!0,this.namespace=n,this.name=n==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=o}};function xa(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var fa=class extends Sa{constructor(s,n,r,o="storage"){super(s,o,n,r),this.name=o==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},ih=class extends Sa{constructor(s,n,r="storage"){super(s,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=n}};const rm=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),sm=s=>{if(typeof s!="object"||s===null)return!1;const n=Object.getPrototypeOf(s);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},Cl=s=>{if(Array.isArray(s))return s.map(r=>Cl(r));if(typeof s=="function"||s!==Object(s))return s;const n={};return Object.entries(s).forEach(([r,o])=>{const u=r.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));n[u]=Cl(o)}),n},im=s=>!s||typeof s!="string"||s.length===0||s.length>100||s.trim()!==s||s.includes("/")||s.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(s);function Hs(s){"@babel/helpers - typeof";return Hs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Hs(s)}function am(s,n){if(Hs(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var o=r.call(s,n);if(Hs(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(s)}function om(s){var n=am(s,"string");return Hs(n)=="symbol"?n:n+""}function lm(s,n,r){return(n=om(n))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r,s}function Ed(s,n){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);n&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(s,u).enumerable})),r.push.apply(r,o)}return r}function be(s){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Ed(Object(r),!0).forEach(function(o){lm(s,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Ed(Object(r)).forEach(function(o){Object.defineProperty(s,o,Object.getOwnPropertyDescriptor(r,o))})}return s}const Td=s=>{var n;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(n=s.error)===null||n===void 0?void 0:n.message)||JSON.stringify(s)},cm=async(s,n,r,o)=>{if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!r?.noResolveJson){const u=s,d=u.status||500;if(typeof u.json=="function")u.json().then(f=>{const p=f?.statusCode||f?.code||d+"";n(new fa(Td(f),d,p,o))}).catch(()=>{if(o==="vectors"){const f=d+"";n(new fa(u.statusText||`HTTP ${d} error`,d,f,o))}else{const f=d+"";n(new fa(u.statusText||`HTTP ${d} error`,d,f,o))}});else{const f=d+"";n(new fa(u.statusText||`HTTP ${d} error`,d,f,o))}}else n(new ih(Td(s),s,o))},um=(s,n,r,o)=>{const u={method:s,headers:n?.headers||{}};return s==="GET"||s==="HEAD"||!o?be(be({},u),r):(sm(o)?(u.headers=be({"Content-Type":"application/json"},n?.headers),u.body=JSON.stringify(o)):u.body=o,n?.duplex&&(u.duplex=n.duplex),be(be({},u),r))};async function Fs(s,n,r,o,u,d,f){return new Promise((p,g)=>{s(r,um(n,o,u,d)).then(v=>{if(!v.ok)throw v;if(o?.noResolveJson)return v;if(f==="vectors"){const y=v.headers.get("content-type");if(v.headers.get("content-length")==="0"||v.status===204)return{};if(!y||!y.includes("application/json"))return{}}return v.json()}).then(v=>p(v)).catch(v=>cm(v,g,o,f))})}function ah(s="storage"){return{get:async(n,r,o,u)=>Fs(n,"GET",r,o,u,void 0,s),post:async(n,r,o,u,d)=>Fs(n,"POST",r,u,d,o,s),put:async(n,r,o,u,d)=>Fs(n,"PUT",r,u,d,o,s),head:async(n,r,o,u)=>Fs(n,"HEAD",r,be(be({},o),{},{noResolveJson:!0}),u,void 0,s),remove:async(n,r,o,u,d)=>Fs(n,"DELETE",r,u,d,o,s)}}const dm=ah("storage"),{get:Gs,post:rn,put:El,head:hm,remove:Ul}=dm,$t=ah("vectors");var rs=class{constructor(s,n={},r,o="storage"){this.shouldThrowOnError=!1,this.url=s,this.headers=n,this.fetch=rm(r),this.namespace=o}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,n){return this.headers=be(be({},this.headers),{},{[s]:n}),this}async handleOperation(s){var n=this;try{return{data:await s(),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(xa(r))return{data:null,error:r};throw r}}},fm=class{constructor(s,n){this.downloadFn=s,this.shouldThrowOnError=n}then(s,n){return this.execute().then(s,n)}async execute(){var s=this;try{return{data:(await s.downloadFn()).body,error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(xa(n))return{data:null,error:n};throw n}}};let oh;oh=Symbol.toStringTag;var pm=class{constructor(s,n){this.downloadFn=s,this.shouldThrowOnError=n,this[oh]="BlobDownloadBuilder",this.promise=null}asStream(){return new fm(this.downloadFn,this.shouldThrowOnError)}then(s,n){return this.getPromise().then(s,n)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var s=this;try{return{data:await(await s.downloadFn()).blob(),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(xa(n))return{data:null,error:n};throw n}}};const mm={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Rd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var gm=class extends rs{constructor(s,n={},r,o){super(s,n,o,"storage"),this.bucketId=r}async uploadOrUpdate(s,n,r,o){var u=this;return u.handleOperation(async()=>{let d;const f=be(be({},Rd),o);let p=be(be({},u.headers),s==="POST"&&{"x-upsert":String(f.upsert)});const g=f.metadata;typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),g&&d.append("metadata",u.encodeMetadata(g)),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.has("cacheControl")||d.append("cacheControl",f.cacheControl),g&&!d.has("metadata")&&d.append("metadata",u.encodeMetadata(g))):(d=r,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType,g&&(p["x-metadata"]=u.toBase64(u.encodeMetadata(g))),(typeof ReadableStream<"u"&&d instanceof ReadableStream||d&&typeof d=="object"&&"pipe"in d&&typeof d.pipe=="function")&&!f.duplex&&(f.duplex="half")),o?.headers&&(p=be(be({},p),o.headers));const v=u._removeEmptyFolders(n),y=u._getFinalPath(v),C=await(s=="PUT"?El:rn)(u.fetch,`${u.url}/object/${y}`,d,be({headers:p},f?.duplex?{duplex:f.duplex}:{}));return{path:v,id:C.Id,fullPath:C.Key}})}async upload(s,n,r){return this.uploadOrUpdate("POST",s,n,r)}async uploadToSignedUrl(s,n,r,o){var u=this;const d=u._removeEmptyFolders(s),f=u._getFinalPath(d),p=new URL(u.url+`/object/upload/sign/${f}`);return p.searchParams.set("token",n),u.handleOperation(async()=>{let g;const v=be({upsert:Rd.upsert},o),y=be(be({},u.headers),{"x-upsert":String(v.upsert)});return typeof Blob<"u"&&r instanceof Blob?(g=new FormData,g.append("cacheControl",v.cacheControl),g.append("",r)):typeof FormData<"u"&&r instanceof FormData?(g=r,g.append("cacheControl",v.cacheControl)):(g=r,y["cache-control"]=`max-age=${v.cacheControl}`,y["content-type"]=v.contentType),{path:d,fullPath:(await El(u.fetch,p.toString(),g,{headers:y})).Key}})}async createSignedUploadUrl(s,n){var r=this;return r.handleOperation(async()=>{let o=r._getFinalPath(s);const u=be({},r.headers);n?.upsert&&(u["x-upsert"]="true");const d=await rn(r.fetch,`${r.url}/object/upload/sign/${o}`,{},{headers:u}),f=new URL(r.url+d.url),p=f.searchParams.get("token");if(!p)throw new Sa("No token returned by API");return{signedUrl:f.toString(),path:s,token:p}})}async update(s,n,r){return this.uploadOrUpdate("PUT",s,n,r)}async move(s,n,r){var o=this;return o.handleOperation(async()=>await rn(o.fetch,`${o.url}/object/move`,{bucketId:o.bucketId,sourceKey:s,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:o.headers}))}async copy(s,n,r){var o=this;return o.handleOperation(async()=>({path:(await rn(o.fetch,`${o.url}/object/copy`,{bucketId:o.bucketId,sourceKey:s,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:o.headers})).Key}))}async createSignedUrl(s,n,r){var o=this;return o.handleOperation(async()=>{let u=o._getFinalPath(s),d=await rn(o.fetch,`${o.url}/object/sign/${u}`,be({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:o.headers});const f=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${o.url}${d.signedURL}${f}`)}})}async createSignedUrls(s,n,r){var o=this;return o.handleOperation(async()=>{const u=await rn(o.fetch,`${o.url}/object/sign/${o.bucketId}`,{expiresIn:n,paths:s},{headers:o.headers}),d=r?.download?`&download=${r.download===!0?"":r.download}`:"";return u.map(f=>be(be({},f),{},{signedUrl:f.signedURL?encodeURI(`${o.url}${f.signedURL}${d}`):null}))})}download(s,n,r){const o=typeof n?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(n?.transform||{}),d=u?`?${u}`:"",f=this._getFinalPath(s),p=()=>Gs(this.fetch,`${this.url}/${o}/${f}${d}`,{headers:this.headers,noResolveJson:!0},r);return new pm(p,this.shouldThrowOnError)}async info(s){var n=this;const r=n._getFinalPath(s);return n.handleOperation(async()=>Cl(await Gs(n.fetch,`${n.url}/object/info/${r}`,{headers:n.headers})))}async exists(s){var n=this;const r=n._getFinalPath(s);try{return await hm(n.fetch,`${n.url}/object/${r}`,{headers:n.headers}),{data:!0,error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(xa(o)&&o instanceof ih){const u=o.originalError;if([400,404].includes(u?.status))return{data:!1,error:o}}throw o}}getPublicUrl(s,n){const r=this._getFinalPath(s),o=[],u=n?.download?`download=${n.download===!0?"":n.download}`:"";u!==""&&o.push(u);const d=typeof n?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(n?.transform||{});f!==""&&o.push(f);let p=o.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${r}${p}`)}}}async remove(s){var n=this;return n.handleOperation(async()=>await Ul(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:s},{headers:n.headers}))}async list(s,n,r){var o=this;return o.handleOperation(async()=>{const u=be(be(be({},mm),n),{},{prefix:s||""});return await rn(o.fetch,`${o.url}/object/list/${o.bucketId}`,u,{headers:o.headers},r)})}async listV2(s,n){var r=this;return r.handleOperation(async()=>{const o=be({},s);return await rn(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,o,{headers:r.headers},n)})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const n=[];return s.width&&n.push(`width=${s.width}`),s.height&&n.push(`height=${s.height}`),s.resize&&n.push(`resize=${s.resize}`),s.format&&n.push(`format=${s.format}`),s.quality&&n.push(`quality=${s.quality}`),n.join("&")}};const vm="2.97.0",Xs={"X-Client-Info":`storage-js/${vm}`};var ym=class extends rs{constructor(s,n={},r,o){const u=new URL(s);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase."));const d=u.href.replace(/\/$/,""),f=be(be({},Xs),n);super(d,f,r,"storage")}async listBuckets(s){var n=this;return n.handleOperation(async()=>{const r=n.listBucketOptionsToQueryString(s);return await Gs(n.fetch,`${n.url}/bucket${r}`,{headers:n.headers})})}async getBucket(s){var n=this;return n.handleOperation(async()=>await Gs(n.fetch,`${n.url}/bucket/${s}`,{headers:n.headers}))}async createBucket(s,n={public:!1}){var r=this;return r.handleOperation(async()=>await rn(r.fetch,`${r.url}/bucket`,{id:s,name:s,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}))}async updateBucket(s,n){var r=this;return r.handleOperation(async()=>await El(r.fetch,`${r.url}/bucket/${s}`,{id:s,name:s,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(s){var n=this;return n.handleOperation(async()=>await rn(n.fetch,`${n.url}/bucket/${s}/empty`,{},{headers:n.headers}))}async deleteBucket(s){var n=this;return n.handleOperation(async()=>await Ul(n.fetch,`${n.url}/bucket/${s}`,{},{headers:n.headers}))}listBucketOptionsToQueryString(s){const n={};return s&&("limit"in s&&(n.limit=String(s.limit)),"offset"in s&&(n.offset=String(s.offset)),s.search&&(n.search=s.search),s.sortColumn&&(n.sortColumn=s.sortColumn),s.sortOrder&&(n.sortOrder=s.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},wm=class extends rs{constructor(s,n={},r){const o=s.replace(/\/$/,""),u=be(be({},Xs),n);super(o,u,r,"storage")}async createBucket(s){var n=this;return n.handleOperation(async()=>await rn(n.fetch,`${n.url}/bucket`,{name:s},{headers:n.headers}))}async listBuckets(s){var n=this;return n.handleOperation(async()=>{const r=new URLSearchParams;s?.limit!==void 0&&r.set("limit",s.limit.toString()),s?.offset!==void 0&&r.set("offset",s.offset.toString()),s?.sortColumn&&r.set("sortColumn",s.sortColumn),s?.sortOrder&&r.set("sortOrder",s.sortOrder),s?.search&&r.set("search",s.search);const o=r.toString(),u=o?`${n.url}/bucket?${o}`:`${n.url}/bucket`;return await Gs(n.fetch,u,{headers:n.headers})})}async deleteBucket(s){var n=this;return n.handleOperation(async()=>await Ul(n.fetch,`${n.url}/bucket/${s}`,{},{headers:n.headers}))}from(s){var n=this;if(!im(s))throw new Sa("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new nm({baseUrl:this.url,catalogName:s,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),o=this.shouldThrowOnError;return new Proxy(r,{get(u,d){const f=u[d];return typeof f!="function"?f:async(...p)=>{try{return{data:await f.apply(u,p),error:null}}catch(g){if(o)throw g;return{data:null,error:g}}}}})}},_m=class extends rs{constructor(s,n={},r){const o=s.replace(/\/$/,""),u=be(be({},Xs),{},{"Content-Type":"application/json"},n);super(o,u,r,"vectors")}async createIndex(s){var n=this;return n.handleOperation(async()=>await $t.post(n.fetch,`${n.url}/CreateIndex`,s,{headers:n.headers})||{})}async getIndex(s,n){var r=this;return r.handleOperation(async()=>await $t.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:s,indexName:n},{headers:r.headers}))}async listIndexes(s){var n=this;return n.handleOperation(async()=>await $t.post(n.fetch,`${n.url}/ListIndexes`,s,{headers:n.headers}))}async deleteIndex(s,n){var r=this;return r.handleOperation(async()=>await $t.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:s,indexName:n},{headers:r.headers})||{})}},km=class extends rs{constructor(s,n={},r){const o=s.replace(/\/$/,""),u=be(be({},Xs),{},{"Content-Type":"application/json"},n);super(o,u,r,"vectors")}async putVectors(s){var n=this;if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return n.handleOperation(async()=>await $t.post(n.fetch,`${n.url}/PutVectors`,s,{headers:n.headers})||{})}async getVectors(s){var n=this;return n.handleOperation(async()=>await $t.post(n.fetch,`${n.url}/GetVectors`,s,{headers:n.headers}))}async listVectors(s){var n=this;if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return n.handleOperation(async()=>await $t.post(n.fetch,`${n.url}/ListVectors`,s,{headers:n.headers}))}async queryVectors(s){var n=this;return n.handleOperation(async()=>await $t.post(n.fetch,`${n.url}/QueryVectors`,s,{headers:n.headers}))}async deleteVectors(s){var n=this;if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return n.handleOperation(async()=>await $t.post(n.fetch,`${n.url}/DeleteVectors`,s,{headers:n.headers})||{})}},Sm=class extends rs{constructor(s,n={},r){const o=s.replace(/\/$/,""),u=be(be({},Xs),{},{"Content-Type":"application/json"},n);super(o,u,r,"vectors")}async createBucket(s){var n=this;return n.handleOperation(async()=>await $t.post(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:n.headers})||{})}async getBucket(s){var n=this;return n.handleOperation(async()=>await $t.post(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:s},{headers:n.headers}))}async listBuckets(s={}){var n=this;return n.handleOperation(async()=>await $t.post(n.fetch,`${n.url}/ListVectorBuckets`,s,{headers:n.headers}))}async deleteBucket(s){var n=this;return n.handleOperation(async()=>await $t.post(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:n.headers})||{})}},xm=class extends Sm{constructor(s,n={}){super(s,n.headers||{},n.fetch)}from(s){return new bm(this.url,this.headers,s,this.fetch)}async createBucket(s){var n=()=>super.createBucket,r=this;return n().call(r,s)}async getBucket(s){var n=()=>super.getBucket,r=this;return n().call(r,s)}async listBuckets(s={}){var n=()=>super.listBuckets,r=this;return n().call(r,s)}async deleteBucket(s){var n=()=>super.deleteBucket,r=this;return n().call(r,s)}},bm=class extends _m{constructor(s,n,r,o){super(s,n,o),this.vectorBucketName=r}async createIndex(s){var n=()=>super.createIndex,r=this;return n().call(r,be(be({},s),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(s={}){var n=()=>super.listIndexes,r=this;return n().call(r,be(be({},s),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(s){var n=()=>super.getIndex,r=this;return n().call(r,r.vectorBucketName,s)}async deleteIndex(s){var n=()=>super.deleteIndex,r=this;return n().call(r,r.vectorBucketName,s)}index(s){return new jm(this.url,this.headers,this.vectorBucketName,s,this.fetch)}},jm=class extends km{constructor(s,n,r,o,u){super(s,n,u),this.vectorBucketName=r,this.indexName=o}async putVectors(s){var n=()=>super.putVectors,r=this;return n().call(r,be(be({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(s){var n=()=>super.getVectors,r=this;return n().call(r,be(be({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(s={}){var n=()=>super.listVectors,r=this;return n().call(r,be(be({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(s){var n=()=>super.queryVectors,r=this;return n().call(r,be(be({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(s){var n=()=>super.deleteVectors,r=this;return n().call(r,be(be({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},Nm=class extends ym{constructor(s,n={},r,o){super(s,n,r,o)}from(s){return new gm(this.url,this.headers,s,this.fetch)}get vectors(){return new xm(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new wm(this.url+"/iceberg",this.headers,this.fetch)}};const lh="2.97.0",Zr=30*1e3,Tl=3,yl=Tl*Zr,Cm="http://localhost:9999",Em="supabase.auth.token",Tm={"X-Client-Info":`gotrue-js/${lh}`},Rl="X-Supabase-Api-Version",ch={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Rm=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Pm=600*1e3;class Js extends Error{constructor(n,r,o){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=o}}function me(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class Om extends Js{constructor(n,r,o){super(n,r,o),this.name="AuthApiError",this.status=r,this.code=o}}function Am(s){return me(s)&&s.name==="AuthApiError"}class wr extends Js{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class Cn extends Js{constructor(n,r,o,u){super(n,o,u),this.name=r,this.status=o}}class Dt extends Cn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function wl(s){return me(s)&&s.name==="AuthSessionMissingError"}class Hr extends Cn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class pa extends Cn{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class ma extends Cn{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Im(s){return me(s)&&s.name==="AuthImplicitGrantRedirectError"}class Pd extends Cn{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Lm extends Cn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Pl extends Cn{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function _l(s){return me(s)&&s.name==="AuthRetryableFetchError"}class Od extends Cn{constructor(n,r,o){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=o}}class Ol extends Cn{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const va="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ad=` 	
\r=`.split(""),Um=(()=>{const s=new Array(128);for(let n=0;n<s.length;n+=1)s[n]=-1;for(let n=0;n<Ad.length;n+=1)s[Ad[n].charCodeAt(0)]=-2;for(let n=0;n<va.length;n+=1)s[va[n].charCodeAt(0)]=n;return s})();function Id(s,n,r){if(s!==null)for(n.queue=n.queue<<8|s,n.queuedBits+=8;n.queuedBits>=6;){const o=n.queue>>n.queuedBits-6&63;r(va[o]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const o=n.queue>>n.queuedBits-6&63;r(va[o]),n.queuedBits-=6}}function uh(s,n,r){const o=Um[s];if(o>-1)for(n.queue=n.queue<<6|o,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function Ld(s){const n=[],r=f=>{n.push(String.fromCodePoint(f))},o={utf8seq:0,codepoint:0},u={queue:0,queuedBits:0},d=f=>{zm(f,o,r)};for(let f=0;f<s.length;f+=1)uh(s.charCodeAt(f),u,d);return n.join("")}function Dm(s,n){if(s<=127){n(s);return}else if(s<=2047){n(192|s>>6),n(128|s&63);return}else if(s<=65535){n(224|s>>12),n(128|s>>6&63),n(128|s&63);return}else if(s<=1114111){n(240|s>>18),n(128|s>>12&63),n(128|s>>6&63),n(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function $m(s,n){for(let r=0;r<s.length;r+=1){let o=s.charCodeAt(r);if(o>55295&&o<=56319){const u=(o-55296)*1024&65535;o=(s.charCodeAt(r+1)-56320&65535|u)+65536,r+=1}Dm(o,n)}}function zm(s,n,r){if(n.utf8seq===0){if(s<=127){r(s);return}for(let o=1;o<6;o+=1)if((s>>7-o&1)===0){n.utf8seq=o;break}if(n.utf8seq===2)n.codepoint=s&31;else if(n.utf8seq===3)n.codepoint=s&15;else if(n.utf8seq===4)n.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|s&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function ns(s){const n=[],r={queue:0,queuedBits:0},o=u=>{n.push(u)};for(let u=0;u<s.length;u+=1)uh(s.charCodeAt(u),r,o);return new Uint8Array(n)}function Fm(s){const n=[];return $m(s,r=>n.push(r)),new Uint8Array(n)}function _r(s){const n=[],r={queue:0,queuedBits:0},o=u=>{n.push(u)};return s.forEach(u=>Id(u,r,o)),Id(null,r,o),n.join("")}function Bm(s){return Math.round(Date.now()/1e3)+s}function Mm(){return Symbol("auth-callback")}const mt=()=>typeof window<"u"&&typeof document<"u",mr={tested:!1,writable:!1},dh=()=>{if(!mt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(mr.tested)return mr.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),mr.tested=!0,mr.writable=!0}catch{mr.tested=!0,mr.writable=!1}return mr.writable};function Wm(s){const n={},r=new URL(s);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((u,d)=>{n[d]=u})}catch{}return r.searchParams.forEach((o,u)=>{n[u]=o}),n}const hh=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),qm=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",es=async(s,n,r)=>{await s.setItem(n,JSON.stringify(r))},gr=async(s,n)=>{const r=await s.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},pt=async(s,n)=>{await s.removeItem(n)};class ba{constructor(){this.promise=new ba.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}ba.promiseConstructor=Promise;function ga(s){const n=s.split(".");if(n.length!==3)throw new Ol("Invalid JWT structure");for(let o=0;o<n.length;o++)if(!Rm.test(n[o]))throw new Ol("JWT not in base64url format");return{header:JSON.parse(Ld(n[0])),payload:JSON.parse(Ld(n[1])),signature:ns(n[2]),raw:{header:n[0],payload:n[1]}}}async function Vm(s){return await new Promise(n=>{setTimeout(()=>n(null),s)})}function Km(s,n){return new Promise((o,u)=>{(async()=>{for(let d=0;d<1/0;d++)try{const f=await s(d);if(!n(d,null,f)){o(f);return}}catch(f){if(!n(d,f)){u(f);return}}})()})}function Hm(s){return("0"+s.toString(16)).substr(-2)}function Gm(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=r.length;let u="";for(let d=0;d<56;d++)u+=r.charAt(Math.floor(Math.random()*o));return u}return crypto.getRandomValues(n),Array.from(n,Hm).join("")}async function Jm(s){const r=new TextEncoder().encode(s),o=await crypto.subtle.digest("SHA-256",r),u=new Uint8Array(o);return Array.from(u).map(d=>String.fromCharCode(d)).join("")}async function Qm(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const r=await Jm(s);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Gr(s,n,r=!1){const o=Gm();let u=o;r&&(u+="/PASSWORD_RECOVERY"),await es(s,`${n}-code-verifier`,u);const d=await Qm(o);return[d,o===d?"plain":"s256"]}const Ym=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Xm(s){const n=s.headers.get(Rl);if(!n||!n.match(Ym))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Zm(s){if(!s)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(s<=n)throw new Error("JWT has expired")}function eg(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const tg=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Jr(s){if(!tg.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function kl(){const s={};return new Proxy(s,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ng(s,n){return new Proxy(s,{get:(r,o,u)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const d=o.toString();if(d==="Symbol(Symbol.toPrimitive)"||d==="Symbol(Symbol.toStringTag)"||d==="Symbol(util.inspect.custom)"||d==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,o,u)}return!n.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(r,o,u)}})}function Ud(s){return JSON.parse(JSON.stringify(s))}const vr=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),rg=[502,503,504];async function Dd(s){var n;if(!qm(s))throw new Pl(vr(s),0);if(rg.includes(s.status))throw new Pl(vr(s),s.status);let r;try{r=await s.json()}catch(d){throw new wr(vr(d),d)}let o;const u=Xm(s);if(u&&u.getTime()>=ch["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?o=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(o=r.error_code),o){if(o==="weak_password")throw new Od(vr(r),s.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(o==="session_not_found")throw new Dt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((d,f)=>d&&typeof f=="string",!0))throw new Od(vr(r),s.status,r.weak_password.reasons);throw new Om(vr(r),s.status||500,o)}const sg=(s,n,r,o)=>{const u={method:s,headers:n?.headers||{}};return s==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),u.body=JSON.stringify(o),Object.assign(Object.assign({},u),r))};async function Ne(s,n,r,o){var u;const d=Object.assign({},o?.headers);d[Rl]||(d[Rl]=ch["2024-01-01"].name),o?.jwt&&(d.Authorization=`Bearer ${o.jwt}`);const f=(u=o?.query)!==null&&u!==void 0?u:{};o?.redirectTo&&(f.redirect_to=o.redirectTo);const p=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",g=await ig(s,n,r+p,{headers:d,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(g):{data:Object.assign({},g),error:null}}async function ig(s,n,r,o,u,d){const f=sg(n,o,u,d);let p;try{p=await s(r,Object.assign({},f))}catch(g){throw console.error(g),new Pl(vr(g),0)}if(p.ok||await Dd(p),o?.noResolveJson)return p;try{return await p.json()}catch(g){await Dd(g)}}function nn(s){var n;let r=null;lg(s)&&(r=Object.assign({},s),s.expires_at||(r.expires_at=Bm(s.expires_in)));const o=(n=s.user)!==null&&n!==void 0?n:s;return{data:{session:r,user:o},error:null}}function $d(s){const n=nn(s);return!n.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((r,o)=>r&&typeof o=="string",!0)&&(n.data.weak_password=s.weak_password),n}function Xn(s){var n;return{data:{user:(n=s.user)!==null&&n!==void 0?n:s},error:null}}function ag(s){return{data:s,error:null}}function og(s){const{action_link:n,email_otp:r,hashed_token:o,redirect_to:u,verification_type:d}=s,f=ka(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:n,email_otp:r,hashed_token:o,redirect_to:u,verification_type:d},g=Object.assign({},f);return{data:{properties:p,user:g},error:null}}function zd(s){return s}function lg(s){return s.access_token&&s.refresh_token&&s.expires_in}const Sl=["global","local","others"];class cg{constructor({url:n="",headers:r={},fetch:o}){this.url=n,this.headers=r,this.fetch=hh(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,r=Sl[0]){if(Sl.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Sl.join(", ")}`);try{return await Ne(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(o){if(me(o))return{data:null,error:o};throw o}}async inviteUserByEmail(n,r={}){try{return await Ne(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Xn})}catch(o){if(me(o))return{data:{user:null},error:o};throw o}}async generateLink(n){try{const{options:r}=n,o=ka(n,["options"]),u=Object.assign(Object.assign({},o),r);return"newEmail"in o&&(u.new_email=o?.newEmail,delete u.newEmail),await Ne(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:og,redirectTo:r?.redirectTo})}catch(r){if(me(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await Ne(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Xn})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,o,u,d,f,p,g;try{const v={nextPage:null,lastPage:0,total:0},y=await Ne(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:"",per_page:(d=(u=n?.perPage)===null||u===void 0?void 0:u.toString())!==null&&d!==void 0?d:""},xform:zd});if(y.error)throw y.error;const C=await y.json(),x=(f=y.headers.get("x-total-count"))!==null&&f!==void 0?f:0,b=(g=(p=y.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&g!==void 0?g:[];return b.length>0&&(b.forEach(A=>{const R=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),U=JSON.parse(A.split(";")[1].split("=")[1]);v[`${U}Page`]=R}),v.total=parseInt(x)),{data:Object.assign(Object.assign({},C),v),error:null}}catch(v){if(me(v))return{data:{users:[]},error:v};throw v}}async getUserById(n){Jr(n);try{return await Ne(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Xn})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){Jr(n);try{return await Ne(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:Xn})}catch(o){if(me(o))return{data:{user:null},error:o};throw o}}async deleteUser(n,r=!1){Jr(n);try{return await Ne(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:Xn})}catch(o){if(me(o))return{data:{user:null},error:o};throw o}}async _listFactors(n){Jr(n.userId);try{const{data:r,error:o}=await Ne(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:r,error:o}}catch(r){if(me(r))return{data:null,error:r};throw r}}async _deleteFactor(n){Jr(n.userId),Jr(n.id);try{return{data:await Ne(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}}async _listOAuthClients(n){var r,o,u,d,f,p,g;try{const v={nextPage:null,lastPage:0,total:0},y=await Ne(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:"",per_page:(d=(u=n?.perPage)===null||u===void 0?void 0:u.toString())!==null&&d!==void 0?d:""},xform:zd});if(y.error)throw y.error;const C=await y.json(),x=(f=y.headers.get("x-total-count"))!==null&&f!==void 0?f:0,b=(g=(p=y.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&g!==void 0?g:[];return b.length>0&&(b.forEach(A=>{const R=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),U=JSON.parse(A.split(";")[1].split("=")[1]);v[`${U}Page`]=R}),v.total=parseInt(x)),{data:Object.assign(Object.assign({},C),v),error:null}}catch(v){if(me(v))return{data:{clients:[]},error:v};throw v}}async _createOAuthClient(n){try{return await Ne(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _getOAuthClient(n){try{return await Ne(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _updateOAuthClient(n,r){try{return await Ne(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:r,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(me(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(n){try{return await Ne(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(n){try{return await Ne(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(me(r))return{data:null,error:r};throw r}}}function Fd(s={}){return{getItem:n=>s[n]||null,setItem:(n,r)=>{s[n]=r},removeItem:n=>{delete s[n]}}}const Qr={debug:!!(globalThis&&dh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class fh extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class Bd extends fh{}async function ug(s,n,r){Qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,n);const o=new globalThis.AbortController;n>0&&setTimeout(()=>{o.abort(),Qr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},n),await Promise.resolve();try{return await globalThis.navigator.locks.request(s,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async u=>{if(u){Qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,u.name);try{return await r()}finally{Qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,u.name)}}else{if(n===0)throw Qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new Bd(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(Qr.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}})}catch(u){throw u?.name==="AbortError"?new Bd(`Acquiring an exclusive Navigator LockManager lock "${s}" timed out waiting ${n}ms`):u}}function dg(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ph(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function hg(s){return parseInt(s,16)}function fg(s){const n=new TextEncoder().encode(s);return"0x"+Array.from(n,o=>o.toString(16).padStart(2,"0")).join("")}function pg(s){var n;const{chainId:r,domain:o,expirationTime:u,issuedAt:d=new Date,nonce:f,notBefore:p,requestId:g,resources:v,scheme:y,uri:C,version:x}=s;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!C)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((n=s.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const b=ph(s.address),A=y?`${y}://${o}`:o,R=s.statement?`${s.statement}
`:"",U=`${A} wants you to sign in with your Ethereum account:
${b}

${R}`;let D=`URI: ${C}
Version: ${x}
Chain ID: ${r}${f?`
Nonce: ${f}`:""}
Issued At: ${d.toISOString()}`;if(u&&(D+=`
Expiration Time: ${u.toISOString()}`),p&&(D+=`
Not Before: ${p.toISOString()}`),g&&(D+=`
Request ID: ${g}`),v){let W=`
Resources:`;for(const E of v){if(!E||typeof E!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${E}`);W+=`
- ${E}`}D+=W}return`${U}
${D}`}class nt extends Error{constructor({message:n,code:r,cause:o,name:u}){var d;super(n,{cause:o}),this.__isWebAuthnError=!0,this.name=(d=u??(o instanceof Error?o.name:void 0))!==null&&d!==void 0?d:"Unknown Error",this.code=r}}class ya extends nt{constructor(n,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:n}),this.name="WebAuthnUnknownError",this.originalError=r}}function mg({error:s,options:n}){var r,o,u;const{publicKey:d}=n;if(!d)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(n.signal instanceof AbortSignal)return new nt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((r=d.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new nt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(n.mediation==="conditional"&&((o=d.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new nt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((u=d.authenticatorSelection)===null||u===void 0?void 0:u.userVerification)==="required")return new nt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new nt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new nt({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return d.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new nt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new nt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const f=window.location.hostname;if(mh(f)){if(d.rp.id!==f)return new nt({message:`The RP ID "${d.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new nt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(d.user.id.byteLength<1||d.user.id.byteLength>64)return new nt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new nt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new nt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function gg({error:s,options:n}){const{publicKey:r}=n;if(!r)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(n.signal instanceof AbortSignal)return new nt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new nt({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const o=window.location.hostname;if(mh(o)){if(r.rpId!==o)return new nt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new nt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new nt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new nt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class vg{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const yg=new vg;function wg(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:n,user:r,excludeCredentials:o}=s,u=ka(s,["challenge","user","excludeCredentials"]),d=ns(n).buffer,f=Object.assign(Object.assign({},r),{id:ns(r.id).buffer}),p=Object.assign(Object.assign({},u),{challenge:d,user:f});if(o&&o.length>0){p.excludeCredentials=new Array(o.length);for(let g=0;g<o.length;g++){const v=o[g];p.excludeCredentials[g]=Object.assign(Object.assign({},v),{id:ns(v.id).buffer,type:v.type||"public-key",transports:v.transports})}}return p}function _g(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:n,allowCredentials:r}=s,o=ka(s,["challenge","allowCredentials"]),u=ns(n).buffer,d=Object.assign(Object.assign({},o),{challenge:u});if(r&&r.length>0){d.allowCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const p=r[f];d.allowCredentials[f]=Object.assign(Object.assign({},p),{id:ns(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return d}function kg(s){var n;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const r=s;return{id:s.id,rawId:s.id,response:{attestationObject:_r(new Uint8Array(s.response.attestationObject)),clientDataJSON:_r(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function Sg(s){var n;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const r=s,o=s.getClientExtensionResults(),u=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:_r(new Uint8Array(u.authenticatorData)),clientDataJSON:_r(new Uint8Array(u.clientDataJSON)),signature:_r(new Uint8Array(u.signature)),userHandle:u.userHandle?_r(new Uint8Array(u.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function mh(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function Md(){var s,n;return!!(mt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator?.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function xg(s){try{const n=await navigator.credentials.create(s);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new ya("Browser returned unexpected credential type",n)}:{data:null,error:new ya("Empty credential response",n)}}catch(n){return{data:null,error:mg({error:n,options:s})}}}async function bg(s){try{const n=await navigator.credentials.get(s);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new ya("Browser returned unexpected credential type",n)}:{data:null,error:new ya("Empty credential response",n)}}catch(n){return{data:null,error:gg({error:n,options:s})}}}const jg={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Ng={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function wa(...s){const n=u=>u!==null&&typeof u=="object"&&!Array.isArray(u),r=u=>u instanceof ArrayBuffer||ArrayBuffer.isView(u),o={};for(const u of s)if(u)for(const d in u){const f=u[d];if(f!==void 0)if(Array.isArray(f))o[d]=f;else if(r(f))o[d]=f;else if(n(f)){const p=o[d];n(p)?o[d]=wa(p,f):o[d]=wa(f)}else o[d]=f}return o}function Cg(s,n){return wa(jg,s,n||{})}function Eg(s,n){return wa(Ng,s,n||{})}class Tg{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:r,friendlyName:o,signal:u},d){var f;try{const{data:p,error:g}=await this.client.mfa.challenge({factorId:n,webauthn:r});if(!p)return{data:null,error:g};const v=u??yg.createNewAbortSignal();if(p.webauthn.type==="create"){const{user:y}=p.webauthn.credential_options.publicKey;if(!y.name){const C=o;if(C)y.name=`${y.id}:${C}`;else{const b=(await this.client.getUser()).data.user,A=((f=b?.user_metadata)===null||f===void 0?void 0:f.name)||b?.email||b?.id||"User";y.name=`${y.id}:${A}`}}y.displayName||(y.displayName=y.name)}switch(p.webauthn.type){case"create":{const y=Cg(p.webauthn.credential_options.publicKey,d?.create),{data:C,error:x}=await xg({publicKey:y,signal:v});return C?{data:{factorId:n,challengeId:p.id,webauthn:{type:p.webauthn.type,credential_response:C}},error:null}:{data:null,error:x}}case"request":{const y=Eg(p.webauthn.credential_options.publicKey,d?.request),{data:C,error:x}=await bg(Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:y,signal:v}));return C?{data:{factorId:n,challengeId:p.id,webauthn:{type:p.webauthn.type,credential_response:C}},error:null}:{data:null,error:x}}}}catch(p){return me(p)?{data:null,error:p}:{data:null,error:new wr("Unexpected error in challenge",p)}}}async _verify({challengeId:n,factorId:r,webauthn:o}){return this.client.mfa.verify({factorId:r,challengeId:n,webauthn:o})}async _authenticate({factorId:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},d){if(!r)return{data:null,error:new Js("rpId is required for WebAuthn authentication")};try{if(!Md())return{data:null,error:new wr("Browser does not support WebAuthn",null)};const{data:f,error:p}=await this.challenge({factorId:n,webauthn:{rpId:r,rpOrigins:o},signal:u},{request:d});if(!f)return{data:null,error:p};const{webauthn:g}=f;return this._verify({factorId:n,challengeId:f.challengeId,webauthn:{type:g.type,rpId:r,rpOrigins:o,credential_response:g.credential_response}})}catch(f){return me(f)?{data:null,error:f}:{data:null,error:new wr("Unexpected error in authenticate",f)}}}async _register({friendlyName:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},d){if(!r)return{data:null,error:new Js("rpId is required for WebAuthn registration")};try{if(!Md())return{data:null,error:new wr("Browser does not support WebAuthn",null)};const{data:f,error:p}=await this._enroll({friendlyName:n});if(!f)return await this.client.mfa.listFactors().then(y=>{var C;return(C=y.data)===null||C===void 0?void 0:C.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===n&&x.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y?.id}):void 0),{data:null,error:p};const{data:g,error:v}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:r,rpOrigins:o},signal:u},{create:d});return g?this._verify({factorId:f.id,challengeId:g.challengeId,webauthn:{rpId:r,rpOrigins:o,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:v}}catch(f){return me(f)?{data:null,error:f}:{data:null,error:new wr("Unexpected error in register",f)}}}}dg();const Rg={url:Cm,storageKey:Em,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Tm,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4,skipAutoInitialize:!1};async function Wd(s,n,r){return await r()}const Yr={};class Qs{get jwks(){var n,r;return(r=(n=Yr[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){Yr[this.storageKey]=Object.assign(Object.assign({},Yr[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=Yr[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Yr[this.storageKey]=Object.assign(Object.assign({},Yr[this.storageKey]),{cachedAt:n})}constructor(n){var r,o,u;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const d=Object.assign(Object.assign({},Rg),n);if(this.storageKey=d.storageKey,this.instanceID=(r=Qs.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Qs.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!d.debug,typeof d.debug=="function"&&(this.logger=d.debug),this.instanceID>0&&mt()){const f=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(f),this.logDebugMessages&&console.trace(f)}if(this.persistSession=d.persistSession,this.autoRefreshToken=d.autoRefreshToken,this.admin=new cg({url:d.url,headers:d.headers,fetch:d.fetch}),this.url=d.url,this.headers=d.headers,this.fetch=hh(d.fetch),this.lock=d.lock||Wd,this.detectSessionInUrl=d.detectSessionInUrl,this.flowType=d.flowType,this.hasCustomAuthorizationHeader=d.hasCustomAuthorizationHeader,this.throwOnError=d.throwOnError,this.lockAcquireTimeout=d.lockAcquireTimeout,d.lock?this.lock=d.lock:this.persistSession&&mt()&&(!((o=globalThis?.navigator)===null||o===void 0)&&o.locks)?this.lock=ug:this.lock=Wd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Tg(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(d.storage?this.storage=d.storage:dh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Fd(this.memoryStorage)),d.userStorage&&(this.userStorage=d.userStorage)):(this.memoryStorage={},this.storage=Fd(this.memoryStorage)),mt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(u=this.broadcastChannel)===null||u===void 0||u.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f);try{await this._notifyAllSubscribers(f.data.event,f.data.session,!1)}catch(p){this._debug("#broadcastChannel","error",p)}})}d.skipAutoInitialize||this.initialize().catch(f=>{this._debug("#initialize()","error",f)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${lh}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let r={},o="none";if(mt()&&(r=Wm(window.location.href),this._isImplicitGrantCallback(r)?o="implicit":await this._isPKCECallback(r)&&(o="pkce")),mt()&&this.detectSessionInUrl&&o!=="none"){const{data:u,error:d}=await this._getSessionFromURL(r,o);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),Im(d)){const g=(n=d.details)===null||n===void 0?void 0:n.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:d}}return{error:d}}const{session:f,redirectType:p}=u;return this._debug("#_initialize()","detected session in URL",f,"redirect type",p),await this._saveSession(f),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return me(r)?this._returnResult({error:r}):this._returnResult({error:new wr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,o,u;try{const d=await Ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(u=n?.options)===null||u===void 0?void 0:u.captchaToken}},xform:nn}),{data:f,error:p}=d;if(p||!f)return this._returnResult({data:{user:null,session:null},error:p});const g=f.session,v=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:v,session:g},error:null})}catch(d){if(me(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signUp(n){var r,o,u;try{let d;if("email"in n){const{email:y,password:C,options:x}=n;let b=null,A=null;this.flowType==="pkce"&&([b,A]=await Gr(this.storage,this.storageKey)),d=await Ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x?.emailRedirectTo,body:{email:y,password:C,data:(r=x?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:b,code_challenge_method:A},xform:nn})}else if("phone"in n){const{phone:y,password:C,options:x}=n;d=await Ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:C,data:(o=x?.data)!==null&&o!==void 0?o:{},channel:(u=x?.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:nn})}else throw new pa("You must provide either an email or phone number and a password");const{data:f,error:p}=d;if(p||!f)return await pt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:p});const g=f.session,v=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:v,session:g},error:null})}catch(d){if(await pt(this.storage,`${this.storageKey}-code-verifier`),me(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithPassword(n){try{let r;if("email"in n){const{email:d,password:f,options:p}=n;r=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:f,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:$d})}else if("phone"in n){const{phone:d,password:f,options:p}=n;r=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:f,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:$d})}else throw new pa("You must provide either an email or phone number and a password");const{data:o,error:u}=r;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!o||!o.session||!o.user){const d=new Hr;return this._returnResult({data:{user:null,session:null},error:d})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:u})}catch(r){if(me(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(n){var r,o,u,d;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(o=n.options)===null||o===void 0?void 0:o.scopes,queryParams:(u=n.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(d=n.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,o,u,d,f,p,g,v,y,C,x;let b,A;if("message"in n)b=n.message,A=n.signature;else{const{chain:R,wallet:U,statement:D,options:W}=n;let E;if(mt())if(typeof U=="object")E=U;else{const we=window;if("ethereum"in we&&typeof we.ethereum=="object"&&"request"in we.ethereum&&typeof we.ethereum.request=="function")E=we.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof U!="object"||!W?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=U}const q=new URL((r=W?.url)!==null&&r!==void 0?r:window.location.href),ee=await E.request({method:"eth_requestAccounts"}).then(we=>we).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ee||ee.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Z=ph(ee[0]);let F=(o=W?.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!F){const we=await E.request({method:"eth_chainId"});F=hg(we)}const _e={domain:q.host,address:Z,statement:D,uri:q.href,version:"1",chainId:F,nonce:(u=W?.signInWithEthereum)===null||u===void 0?void 0:u.nonce,issuedAt:(f=(d=W?.signInWithEthereum)===null||d===void 0?void 0:d.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(p=W?.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(g=W?.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(v=W?.signInWithEthereum)===null||v===void 0?void 0:v.requestId,resources:(y=W?.signInWithEthereum)===null||y===void 0?void 0:y.resources};b=pg(_e),A=await E.request({method:"personal_sign",params:[fg(b),Z]})}try{const{data:R,error:U}=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:A},!((C=n.options)===null||C===void 0)&&C.captchaToken?{gotrue_meta_security:{captcha_token:(x=n.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:nn});if(U)throw U;if(!R||!R.session||!R.user){const D=new Hr;return this._returnResult({data:{user:null,session:null},error:D})}return R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),this._returnResult({data:Object.assign({},R),error:U})}catch(R){if(me(R))return this._returnResult({data:{user:null,session:null},error:R});throw R}}async signInWithSolana(n){var r,o,u,d,f,p,g,v,y,C,x,b;let A,R;if("message"in n)A=n.message,R=n.signature;else{const{chain:U,wallet:D,statement:W,options:E}=n;let q;if(mt())if(typeof D=="object")q=D;else{const Z=window;if("solana"in Z&&typeof Z.solana=="object"&&("signIn"in Z.solana&&typeof Z.solana.signIn=="function"||"signMessage"in Z.solana&&typeof Z.solana.signMessage=="function"))q=Z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!E?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");q=D}const ee=new URL((r=E?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in q&&q.signIn){const Z=await q.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E?.signInWithSolana),{version:"1",domain:ee.host,uri:ee.href}),W?{statement:W}:null));let F;if(Array.isArray(Z)&&Z[0]&&typeof Z[0]=="object")F=Z[0];else if(Z&&typeof Z=="object"&&"signedMessage"in Z&&"signature"in Z)F=Z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)A=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),R=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in q)||typeof q.signMessage!="function"||!("publicKey"in q)||typeof q!="object"||!q.publicKey||!("toBase58"in q.publicKey)||typeof q.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");A=[`${ee.host} wants you to sign in with your Solana account:`,q.publicKey.toBase58(),...W?["",W,""]:[""],"Version: 1",`URI: ${ee.href}`,`Issued At: ${(u=(o=E?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&u!==void 0?u:new Date().toISOString()}`,...!((d=E?.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((f=E?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((p=E?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((g=E?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((v=E?.signInWithSolana)===null||v===void 0)&&v.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((C=(y=E?.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||C===void 0)&&C.length?["Resources",...E.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const Z=await q.signMessage(new TextEncoder().encode(A),"utf8");if(!Z||!(Z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");R=Z}}try{const{data:U,error:D}=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:A,signature:_r(R)},!((x=n.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(b=n.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:nn});if(D)throw D;if(!U||!U.session||!U.user){const W=new Hr;return this._returnResult({data:{user:null,session:null},error:W})}return U.session&&(await this._saveSession(U.session),await this._notifyAllSubscribers("SIGNED_IN",U.session)),this._returnResult({data:Object.assign({},U),error:D})}catch(U){if(me(U))return this._returnResult({data:{user:null,session:null},error:U});throw U}}async _exchangeCodeForSession(n){const r=await gr(this.storage,`${this.storageKey}-code-verifier`),[o,u]=(r??"").split("/");try{if(!o&&this.flowType==="pkce")throw new Lm;const{data:d,error:f}=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:o},xform:nn});if(await pt(this.storage,`${this.storageKey}-code-verifier`),f)throw f;if(!d||!d.session||!d.user){const p=new Hr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:Object.assign(Object.assign({},d),{redirectType:u??null}),error:f})}catch(d){if(await pt(this.storage,`${this.storageKey}-code-verifier`),me(d))return this._returnResult({data:{user:null,session:null,redirectType:null},error:d});throw d}}async signInWithIdToken(n){try{const{options:r,provider:o,token:u,access_token:d,nonce:f}=n,p=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:u,access_token:d,nonce:f,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:nn}),{data:g,error:v}=p;if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!g||!g.session||!g.user){const y=new Hr;return this._returnResult({data:{user:null,session:null},error:y})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:v})}catch(r){if(me(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(n){var r,o,u,d,f;try{if("email"in n){const{email:p,options:g}=n;let v=null,y=null;this.flowType==="pkce"&&([v,y]=await Gr(this.storage,this.storageKey));const{error:C}=await Ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(r=g?.data)!==null&&r!==void 0?r:{},create_user:(o=g?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:v,code_challenge_method:y},redirectTo:g?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:C})}if("phone"in n){const{phone:p,options:g}=n,{data:v,error:y}=await Ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(u=g?.data)!==null&&u!==void 0?u:{},create_user:(d=g?.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(f=g?.channel)!==null&&f!==void 0?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:v?.message_id},error:y})}throw new pa("You must provide either an email or phone number.")}catch(p){if(await pt(this.storage,`${this.storageKey}-code-verifier`),me(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(n){var r,o;try{let u,d;"options"in n&&(u=(r=n.options)===null||r===void 0?void 0:r.redirectTo,d=(o=n.options)===null||o===void 0?void 0:o.captchaToken);const{data:f,error:p}=await Ne(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:d}}),redirectTo:u,xform:nn});if(p)throw p;if(!f)throw new Error("An error occurred on token verification.");const g=f.session,v=f.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:v,session:g},error:null})}catch(u){if(me(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithSSO(n){var r,o,u,d,f;try{let p=null,g=null;this.flowType==="pkce"&&([p,g]=await Gr(this.storage,this.storageKey));const v=await Ne(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(o=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&o!==void 0?o:void 0}),!((u=n?.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:g}),headers:this.headers,xform:ag});return!((d=v.data)===null||d===void 0)&&d.url&&mt()&&!(!((f=n.options)===null||f===void 0)&&f.skipBrowserRedirect)&&window.location.assign(v.data.url),this._returnResult(v)}catch(p){if(await pt(this.storage,`${this.storageKey}-code-verifier`),me(p))return this._returnResult({data:null,error:p});throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:o}=n;if(o)throw o;if(!r)throw new Dt;const{error:u}=await Ne(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:u})})}catch(n){if(me(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:o,type:u,options:d}=n,{error:f}=await Ne(this.fetch,"POST",r,{headers:this.headers,body:{email:o,type:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},redirectTo:d?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}else if("phone"in n){const{phone:o,type:u,options:d}=n,{data:f,error:p}=await Ne(this.fetch,"POST",r,{headers:this.headers,body:{phone:o,type:u,gotrue_meta_security:{captcha_token:d?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:f?.message_id},error:p})}throw new pa("You must provide either an email or phone number and a type")}catch(r){if(me(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await o,await r()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=r();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await gr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const o=n.expires_at?n.expires_at*1e3-Date.now()<yl:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",n.expires_at),!o){if(this.userStorage){const f=await gr(this.userStorage,this.storageKey+"-user");f?.user?n.user=f.user:n.user=kl()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};n.user=ng(n.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:u,error:d}=await this._callRefreshToken(n.refresh_token);return d?this._returnResult({data:{session:null},error:d}):this._returnResult({data:{session:u},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(n){try{return n?await Ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Xn}):await this._useSession(async r=>{var o,u,d;const{data:f,error:p}=r;if(p)throw p;return!(!((o=f.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Dt}:await Ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0,xform:Xn})})}catch(r){if(me(r))return wl(r)&&(await this._removeSession(),await pt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async o=>{const{data:u,error:d}=o;if(d)throw d;if(!u.session)throw new Dt;const f=u.session;let p=null,g=null;this.flowType==="pkce"&&n.email!=null&&([p,g]=await Gr(this.storage,this.storageKey));const{data:v,error:y}=await Ne(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:p,code_challenge_method:g}),jwt:f.access_token,xform:Xn});if(y)throw y;return f.user=v.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(o){if(await pt(this.storage,`${this.storageKey}-code-verifier`),me(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Dt;const r=Date.now()/1e3;let o=r,u=!0,d=null;const{payload:f}=ga(n.access_token);if(f.exp&&(o=f.exp,u=o<=r),u){const{data:p,error:g}=await this._callRefreshToken(n.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!p)return{data:{user:null,session:null},error:null};d=p}else{const{data:p,error:g}=await this._getUser(n.access_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});d={access_token:n.access_token,refresh_token:n.refresh_token,user:p.user,token_type:"bearer",expires_in:o-r,expires_at:o},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return this._returnResult({data:{user:d.user,session:d},error:null})}catch(r){if(me(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var o;if(!n){const{data:f,error:p}=r;if(p)throw p;n=(o=f.session)!==null&&o!==void 0?o:void 0}if(!n?.refresh_token)throw new Dt;const{data:u,error:d}=await this._callRefreshToken(n.refresh_token);return d?this._returnResult({data:{user:null,session:null},error:d}):u?this._returnResult({data:{user:u.user,session:u},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(me(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(n,r){try{if(!mt())throw new ma("No browser detected.");if(n.error||n.error_description||n.error_code)throw new ma(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Pd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ma("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Pd("No code detected.");const{data:W,error:E}=await this._exchangeCodeForSession(n.code);if(E)throw E;const q=new URL(window.location.href);return q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",q.toString()),{data:{session:W.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:u,access_token:d,refresh_token:f,expires_in:p,expires_at:g,token_type:v}=n;if(!d||!p||!f||!v)throw new ma("No session defined in URL");const y=Math.round(Date.now()/1e3),C=parseInt(p);let x=y+C;g&&(x=parseInt(g));const b=x-y;b*1e3<=Zr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${C}s`);const A=x-C;y-A>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",A,x,y):y-A<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",A,x,y);const{data:R,error:U}=await this._getUser(d);if(U)throw U;const D={provider_token:o,provider_refresh_token:u,access_token:d,expires_in:C,expires_at:x,refresh_token:f,token_type:v,user:R.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:D,redirectType:n.type},error:null})}catch(o){if(me(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await gr(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var o;const{data:u,error:d}=r;if(d&&!wl(d))return this._returnResult({error:d});const f=(o=u.session)===null||o===void 0?void 0:o.access_token;if(f){const{error:p}=await this.admin.signOut(f,n);if(p&&!(Am(p)&&(p.status===404||p.status===401||p.status===403)||wl(p)))return this._returnResult({error:p})}return n!=="others"&&(await this._removeSession(),await pt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const r=Mm(),o={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,o),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:o}}}async _emitInitialSession(n){return await this._useSession(async r=>{var o,u;try{const{data:{session:d},error:f}=r;if(f)throw f;await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",n,"session",d)}catch(d){await((u=this.stateChangeEmitters.get(n))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",d),console.error(d)}})}async resetPasswordForEmail(n,r={}){let o=null,u=null;this.flowType==="pkce"&&([o,u]=await Gr(this.storage,this.storageKey,!0));try{return await Ne(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:o,code_challenge_method:u,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(d){if(await pt(this.storage,`${this.storageKey}-code-verifier`),me(d))return this._returnResult({data:null,error:d});throw d}}async getUserIdentities(){var n;try{const{data:r,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{const{data:o,error:u}=await this._useSession(async d=>{var f,p,g,v,y;const{data:C,error:x}=d;if(x)throw x;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(f=n.options)===null||f===void 0?void 0:f.redirectTo,scopes:(p=n.options)===null||p===void 0?void 0:p.scopes,queryParams:(g=n.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await Ne(this.fetch,"GET",b,{headers:this.headers,jwt:(y=(v=C.session)===null||v===void 0?void 0:v.access_token)!==null&&y!==void 0?y:void 0})});if(u)throw u;return mt()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(o?.url),this._returnResult({data:{provider:n.provider,url:o?.url},error:null})}catch(o){if(me(o))return this._returnResult({data:{provider:n.provider,url:null},error:o});throw o}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var o;try{const{error:u,data:{session:d}}=r;if(u)throw u;const{options:f,provider:p,token:g,access_token:v,nonce:y}=n,C=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=d?.access_token)!==null&&o!==void 0?o:void 0,body:{provider:p,id_token:g,access_token:v,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:nn}),{data:x,error:b}=C;return b?this._returnResult({data:{user:null,session:null},error:b}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new Hr}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:b}))}catch(u){if(await pt(this.storage,`${this.storageKey}-code-verifier`),me(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var o,u;const{data:d,error:f}=r;if(f)throw f;return await Ne(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(u=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0})})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const o=Date.now();return await Km(async u=>(u>0&&await Vm(200*Math.pow(2,u-1)),this._debug(r,"refreshing attempt",u),await Ne(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:nn})),(u,d)=>{const f=200*Math.pow(2,u);return d&&_l(d)&&Date.now()+f-o<Zr})}catch(o){if(this._debug(r,"error",o),me(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const o=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",o),mt()&&!r.skipBrowserRedirect&&window.location.assign(o),{data:{provider:n,url:o},error:null}}async _recoverAndRefresh(){var n,r;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const u=await gr(this.storage,this.storageKey);if(u&&this.userStorage){let f=await gr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:u.user},await es(this.userStorage,this.storageKey+"-user",f)),u.user=(n=f?.user)!==null&&n!==void 0?n:kl()}else if(u&&!u.user&&!u.user){const f=await gr(this.storage,this.storageKey+"-user");f&&f?.user?(u.user=f.user,await pt(this.storage,this.storageKey+"-user"),await es(this.storage,this.storageKey,u)):u.user=kl()}if(this._debug(o,"session from storage",u),!this._isValidSession(u)){this._debug(o,"session is not valid"),u!==null&&await this._removeSession();return}const d=((r=u.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<yl;if(this._debug(o,`session has${d?"":" not"} expired with margin of ${yl}s`),d){if(this.autoRefreshToken&&u.refresh_token){const{error:f}=await this._callRefreshToken(u.refresh_token);f&&(console.error(f),_l(f)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(u.user&&u.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:p}=await this._getUser(u.access_token);!p&&f?.user?(u.user=f.user,await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(o,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",u)}catch(u){this._debug(o,"error",u),console.error(u);return}finally{this._debug(o,"end")}}async _callRefreshToken(n){var r,o;if(!n)throw new Dt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const u=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new ba;const{data:d,error:f}=await this._refreshAccessToken(n);if(f)throw f;if(!d.session)throw new Dt;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const p={data:d.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(d){if(this._debug(u,"error",d),me(d)){const f={data:null,error:d};return _l(d)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(f),f}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(d),d}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(n,r,o=!0){const u=`#_notifyAllSubscribers(${n})`;this._debug(u,"begin",r,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:n,session:r});const d=[],f=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(n,r)}catch(g){d.push(g)}});if(await Promise.all(f),d.length>0){for(let p=0;p<d.length;p+=1)console.error(d[p]);throw d[0]}}finally{this._debug(u,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await pt(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},n),o=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&r.user&&await es(this.userStorage,this.storageKey+"-user",{user:r.user});const u=Object.assign({},r);delete u.user;const d=Ud(u);await es(this.storage,this.storageKey,d)}else{const u=Ud(r);await es(this.storage,this.storageKey,u)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await pt(this.storage,this.storageKey),await pt(this.storage,this.storageKey+"-code-verifier"),await pt(this.storage,this.storageKey+"-user"),this.userStorage&&await pt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&mt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Zr);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:o}}=r;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const u=Math.floor((o.expires_at*1e3-n)/Zr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${Zr}ms, refresh threshold is ${Tl} ticks`),u<=Tl&&await this._callRefreshToken(o.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof fh)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!mt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(n){this._debug("#visibilityChangedCallback","error",n)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,o){const u=[`provider=${encodeURIComponent(r)}`];if(o?.redirectTo&&u.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&u.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[d,f]=await Gr(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(f)}`});u.push(p.toString())}if(o?.queryParams){const d=new URLSearchParams(o.queryParams);u.push(d.toString())}return o?.skipBrowserRedirect&&u.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${n}?${u.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var o;const{data:u,error:d}=r;return d?this._returnResult({data:null,error:d}):await Ne(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token})})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(n){try{return await this._useSession(async r=>{var o,u;const{data:d,error:f}=r;if(f)return this._returnResult({data:null,error:f});const p=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:g,error:v}=await Ne(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(o=d?.session)===null||o===void 0?void 0:o.access_token});return v?this._returnResult({data:null,error:v}):(n.factorType==="totp"&&g.type==="totp"&&(!((u=g?.totp)===null||u===void 0)&&u.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var o;const{data:u,error:d}=r;if(d)return this._returnResult({data:null,error:d});const f=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?kg(n.webauthn.credential_response):Sg(n.webauthn.credential_response)})}:{code:n.code}),{data:p,error:g}=await Ne(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:f,headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:g}))})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var o;const{data:u,error:d}=r;if(d)return this._returnResult({data:null,error:d});const f=await Ne(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});if(f.error)return f;const{data:p}=f;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:wg(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:_g(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(n){const{data:r,error:o}=await this._challenge({factorId:n.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;const{data:{user:r},error:o}=await this.getUser();if(o)return{data:null,error:o};const u={all:[],phone:[],totp:[],webauthn:[]};for(const d of(n=r?.factors)!==null&&n!==void 0?n:[])u.all.push(d),d.status==="verified"&&u[d.factor_type].push(d);return{data:u,error:null}}async _getAuthenticatorAssuranceLevel(n){var r,o,u,d;if(n)try{const{payload:b}=ga(n);let A=null;b.aal&&(A=b.aal);let R=A;const{data:{user:U},error:D}=await this.getUser(n);if(D)return this._returnResult({data:null,error:D});((o=(r=U?.factors)===null||r===void 0?void 0:r.filter(q=>q.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(R="aal2");const E=b.amr||[];return{data:{currentLevel:A,nextLevel:R,currentAuthenticationMethods:E},error:null}}catch(b){if(me(b))return this._returnResult({data:null,error:b});throw b}const{data:{session:f},error:p}=await this.getSession();if(p)return this._returnResult({data:null,error:p});if(!f)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:g}=ga(f.access_token);let v=null;g.aal&&(v=g.aal);let y=v;((d=(u=f.user.factors)===null||u===void 0?void 0:u.filter(b=>b.status==="verified"))!==null&&d!==void 0?d:[]).length>0&&(y="aal2");const x=g.amr||[];return{data:{currentLevel:v,nextLevel:y,currentAuthenticationMethods:x},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async r=>{const{data:{session:o},error:u}=r;return u?this._returnResult({data:null,error:u}):o?await Ne(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:o.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new Dt})})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(n,r){try{return await this._useSession(async o=>{const{data:{session:u},error:d}=o;if(d)return this._returnResult({data:null,error:d});if(!u)return this._returnResult({data:null,error:new Dt});const f=await Ne(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return f.data&&f.data.redirect_url&&mt()&&!r?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(o){if(me(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(n,r){try{return await this._useSession(async o=>{const{data:{session:u},error:d}=o;if(d)return this._returnResult({data:null,error:d});if(!u)return this._returnResult({data:null,error:new Dt});const f=await Ne(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return f.data&&f.data.redirect_url&&mt()&&!r?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(o){if(me(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:r},error:o}=n;return o?this._returnResult({data:null,error:o}):r?await Ne(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new Dt})})}catch(n){if(me(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async r=>{const{data:{session:o},error:u}=r;return u?this._returnResult({data:null,error:u}):o?(await Ne(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Dt})})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(n,r={keys:[]}){let o=r.keys.find(p=>p.kid===n);if(o)return o;const u=Date.now();if(o=this.jwks.keys.find(p=>p.kid===n),o&&this.jwks_cached_at+Pm>u)return o;const{data:d,error:f}=await Ne(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=u,o=d.keys.find(p=>p.kid===n),!o)?null:o}async getClaims(n,r={}){try{let o=n;if(!o){const{data:b,error:A}=await this.getSession();if(A||!b.session)return this._returnResult({data:null,error:A});o=b.session.access_token}const{header:u,payload:d,signature:f,raw:{header:p,payload:g}}=ga(o);r?.allowExpired||Zm(d.exp);const v=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(u.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!v){const{error:b}=await this.getUser(o);if(b)throw b;return{data:{claims:d,header:u,signature:f},error:null}}const y=eg(u.alg),C=await crypto.subtle.importKey("jwk",v,y,!0,["verify"]);if(!await crypto.subtle.verify(y,C,f,Fm(`${p}.${g}`)))throw new Ol("Invalid JWT signature");return{data:{claims:d,header:u,signature:f},error:null}}catch(o){if(me(o))return this._returnResult({data:null,error:o});throw o}}}Qs.nextInstanceID={};const Pg=Qs,Og="2.97.0";let Ms="";typeof Deno<"u"?Ms="deno":typeof document<"u"?Ms="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ms="react-native":Ms="node";const Ag={"X-Client-Info":`supabase-js-${Ms}/${Og}`},Ig={headers:Ag},Lg={schema:"public"},Ug={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Dg={};function Ys(s){"@babel/helpers - typeof";return Ys=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ys(s)}function $g(s,n){if(Ys(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var o=r.call(s,n);if(Ys(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(s)}function zg(s){var n=$g(s,"string");return Ys(n)=="symbol"?n:n+""}function Fg(s,n,r){return(n=zg(n))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r,s}function qd(s,n){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);n&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(s,u).enumerable})),r.push.apply(r,o)}return r}function Xe(s){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?qd(Object(r),!0).forEach(function(o){Fg(s,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):qd(Object(r)).forEach(function(o){Object.defineProperty(s,o,Object.getOwnPropertyDescriptor(r,o))})}return s}const Bg=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),Mg=()=>Headers,Wg=(s,n,r)=>{const o=Bg(r),u=Mg();return async(d,f)=>{var p;const g=(p=await n())!==null&&p!==void 0?p:s;let v=new u(f?.headers);return v.has("apikey")||v.set("apikey",s),v.has("Authorization")||v.set("Authorization",`Bearer ${g}`),o(d,Xe(Xe({},f),{},{headers:v}))}};function qg(s){return s.endsWith("/")?s:s+"/"}function Vg(s,n){var r,o;const{db:u,auth:d,realtime:f,global:p}=s,{db:g,auth:v,realtime:y,global:C}=n,x={db:Xe(Xe({},g),u),auth:Xe(Xe({},v),d),realtime:Xe(Xe({},y),f),storage:{},global:Xe(Xe(Xe({},C),p),{},{headers:Xe(Xe({},(r=C?.headers)!==null&&r!==void 0?r:{}),(o=p?.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return s.accessToken?x.accessToken=s.accessToken:delete x.accessToken,x}function Kg(s){const n=s?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(qg(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Hg=class extends Pg{constructor(s){super(s)}},Gg=class{constructor(s,n,r){var o,u;this.supabaseUrl=s,this.supabaseKey=n;const d=Kg(s);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const f=`sb-${d.hostname.split(".")[0]}-auth-token`,p={db:Lg,realtime:Dg,auth:Xe(Xe({},Ug),{},{storageKey:f}),global:Ig},g=Vg(r??{},p);if(this.storageKey=(o=g.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(u=g.global.headers)!==null&&u!==void 0?u:{},g.accessToken)this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(y,C)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(C)} is not possible`)}});else{var v;this.auth=this._initSupabaseAuthClient((v=g.auth)!==null&&v!==void 0?v:{},this.headers,g.global.fetch)}this.fetch=Wg(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Xe({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(y=>this.realtime.setAuth(y)).catch(y=>console.warn("Failed to set initial Realtime auth token:",y)),this.rest=new Ap(new URL("rest/v1",d).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch,timeout:g.db.timeout,urlLengthLimit:g.db.urlLengthLimit}),this.storage=new Nm(this.storageUrl.href,this.headers,this.fetch,r?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new jp(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,n,r)}channel(s,n={config:{}}){return this.realtime.channel(s,n)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var s=this,n,r;if(s.accessToken)return await s.accessToken();const{data:o}=await s.auth.getSession();return(n=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:s.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:u,storageKey:d,flowType:f,lock:p,debug:g,throwOnError:v},y,C){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Hg({url:this.authUrl.href,headers:Xe(Xe({},x),y),storageKey:d,autoRefreshToken:s,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:u,flowType:f,lock:p,debug:g,throwOnError:v,fetch:C,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new Qp(this.realtimeUrl.href,Xe(Xe({},s),{},{params:Xe(Xe({},{apikey:this.supabaseKey}),s?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n?.access_token)})}_handleTokenChanged(s,n,r){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Jg=(s,n,r)=>new Gg(s,n,r);function Qg(){if(typeof window<"u")return!1;const s=globalThis.process;if(!s)return!1;const n=s.version;if(n==null)return!1;const r=n.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}Qg()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ue=Jg("https://dnletmkgmxiebcstwkqa.supabase.co","sb_publishable_C4Mm6r-GLilgbOoYJLUxSA_5V9naOFE"),Vd=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];function Yg(){const s=new Date,n=s.getDay(),r=s.getDate()-n+(n===0?-6:1);return new Date(s.setDate(r)).toISOString().slice(0,10)}const at=Yg();function _a(s){return{id:s.id,title:s.title,source:s.source||"Added manually",url:s.url||null,time:s.time_mins||30,tags:s.tags||[],category:s.category||"dinner",prepNote:s.prep_note||void 0,pdfUrl:s.pdf_url||void 0,ingredients:s.ingredients||[],thumbnailUrl:s.thumbnail_url||null,description:s.description||null,instructions:s.instructions||[],servings:s.servings||null,rawIngredients:s.raw_ingredients||[]}}function gh(s){return{title:s.title,source:s.source,url:s.url||null,time_mins:s.time||30,tags:s.tags||[],category:s.category||"dinner",prep_note:s.prepNote||null,pdf_url:s.pdfUrl||null,ingredients:s.ingredients||[],thumbnail_url:s.thumbnailUrl||null,description:s.description||null,instructions:s.instructions||[],servings:s.servings||null,raw_ingredients:s.rawIngredients||[]}}async function Xg(){const{data:s,error:n}=await ue.from("recipes").select("*").order("id");return n?(console.error("fetchRecipes",n),[]):s}async function Zg(s){const{data:n,error:r}=await ue.from("recipes").insert(gh(s)).select().single();if(r)throw console.error("addRecipe",r),r;return n}async function vh(s,n){const{error:r}=await ue.from("recipes").update(gh(n)).eq("id",s);r&&console.error("updateRecipe",r)}async function ev(s){const{error:n}=await ue.from("recipes").delete().eq("id",s);n&&console.error("deleteRecipe",n)}async function Kd(){const{data:s,error:n}=await ue.from("week_plan").select("*, recipe:recipes(*)").eq("week_start",at).order("day");if(n)return console.error("fetchWeekPlan",n),Vd.map(o=>({day:o,recipe:null,note:null}));const r={};return s.forEach(o=>{r[o.day]=o}),Vd.map((o,u)=>{const d=r[u],f=!d?.recipe&&!!(d?.ingredients||d?.thumbnail_url||d?.cook_time);return{day:o,recipe:d?.recipe?_a(d.recipe):null,note:d?.note||null,isRadar:f,radarIngredients:d?.ingredients||null,radarCookTime:d?.cook_time||null,radarThumbnailUrl:d?.thumbnail_url||null,radarTitle:d?.radar_title||null}})}async function Bs(s,n,r){const o={week_start:s,day:n};"recipeId"in r&&(o.recipe_id=r.recipeId),"note"in r&&(o.note=r.note),"ingredients"in r&&(o.ingredients=r.ingredients),"cookTime"in r&&(o.cook_time=r.cookTime),"thumbnailUrl"in r&&(o.thumbnail_url=r.thumbnailUrl),"radarTitle"in r&&(o.radar_title=r.radarTitle);const{error:u}=await ue.from("week_plan").upsert(o,{onConflict:"week_start,day"});u&&console.error("upsertWeekDay",u)}async function tv(s){const{error:n}=await ue.from("week_plan").delete().eq("week_start",s);n&&console.error("clearWeekPlan",n)}async function Hd(){const{data:s,error:n}=await ue.from("batch_prep").select("*, recipe:recipes(*)").eq("week_start",at);return n?(console.error("fetchBatchPrep",n),[]):s.map(r=>r.recipe?_a(r.recipe):null).filter(Boolean)}async function nv(s,n){const{error:r}=await ue.from("batch_prep").insert({week_start:s,recipe_id:n});r&&console.error("addBatchItem",r)}async function rv(s,n){const{error:r}=await ue.from("batch_prep").delete().eq("week_start",s).eq("recipe_id",n);r&&console.error("removeBatchItem",r)}async function sv(s){const{error:n}=await ue.from("batch_prep").delete().eq("week_start",s);n&&console.error("clearBatchPrep",n)}function yh(s){return{id:s.id,title:s.title,url:s.url||null,source:s.source||"",thumbnailUrl:s.thumbnail_url||null,cookTime:s.cook_time||null,ingredients:s.ingredients||[],instructions:s.instructions||[],servings:s.servings||null,scrapedAt:s.scraped_at||null}}async function iv(){const{data:s,error:n}=await ue.from("radar").select("*").order("created_at",{ascending:!1});return n?(console.error("fetchRadar",n),[]):s.map(yh)}async function av(s){const{data:n,error:r}=await ue.from("radar").insert({title:s.title,url:s.url||null,source:s.source||""}).select().single();if(r)throw console.error("addRadarItem",r),r;return yh(n)}async function ov(s,n){const r={};"title"in n&&(r.title=n.title),"thumbnailUrl"in n&&(r.thumbnail_url=n.thumbnailUrl),"cookTime"in n&&(r.cook_time=n.cookTime),"ingredients"in n&&(r.ingredients=n.ingredients),"instructions"in n&&(r.instructions=n.instructions),"servings"in n&&(r.servings=n.servings),"scrapedAt"in n&&(r.scraped_at=n.scrapedAt);const{error:o}=await ue.from("radar").update(r).eq("id",s);o&&console.error("updateRadarItem",o)}async function lv(s){const{error:n}=await ue.from("radar").delete().eq("id",s);n&&console.error("removeRadarItem",n)}async function cv(){const{data:s,error:n}=await ue.from("fridge").select("*").order("id");return n?(console.error("fetchFridge",n),[]):s.map(r=>({id:r.id,item:r.item,s:r.status}))}async function uv(s,n){const{data:r,error:o}=await ue.from("fridge").insert({item:s,status:n||"ok"}).select().single();if(o)throw console.error("addFridgeItem",o),o;return{id:r.id,item:r.item,s:r.status}}async function dv(s,n){const r={};"item"in n&&(r.item=n.item),"s"in n&&(r.status=n.s);const{error:o}=await ue.from("fridge").update(r).eq("id",s);o&&console.error("updateFridgeItem",o)}async function hv(s){const{error:n}=await ue.from("fridge").delete().eq("id",s);n&&console.error("removeFridgeItem",n)}async function fv(){const{data:s,error:n}=await ue.from("freezer").select("*").order("id");return n?(console.error("fetchFreezer",n),[]):s.map(r=>({id:r.id,item:r.item,qty:r.qty??1}))}async function pv(s,n){const{data:r,error:o}=await ue.from("freezer").insert({item:s,qty:n??1}).select().single();if(o)throw console.error("addFreezerItem",o),o;return{id:r.id,item:r.item,qty:r.qty}}async function mv(s,n){const r={};"item"in n&&(r.item=n.item),"qty"in n&&(r.qty=n.qty);const{error:o}=await ue.from("freezer").update(r).eq("id",s);o&&console.error("updateFreezerItem",o)}async function Gd(s){const{error:n}=await ue.from("freezer").delete().eq("id",s);n&&console.error("removeFreezerItem",n)}async function gv(){const{data:s,error:n}=await ue.from("staples").select("*").order("name");return n?(console.error("fetchStaples",n),[]):s.map(r=>({name:r.name,status:r.status||"ok"}))}async function vv(s){const{error:n}=await ue.from("staples").insert({name:s,status:"ok"});n&&console.error("addStaple",n)}async function yv(s,n){const{error:r}=await ue.from("staples").update({status:n}).eq("name",s);r&&console.error("updateStaple",r)}async function wv(s){const{error:n}=await ue.from("staples").delete().eq("name",s);n&&console.error("removeStaple",n)}async function _v(){const{data:s,error:n}=await ue.from("regulars").select("*").order("name");return n?(console.error("fetchRegulars",n),[]):s.map(r=>({id:r.id,name:r.name}))}async function kv(s){const{data:n,error:r}=await ue.from("regulars").insert({name:s}).select().single();if(r)throw console.error("addRegular",r),r;return{id:n.id,name:n.name}}async function Sv(s){const{error:n}=await ue.from("regulars").delete().eq("id",s);n&&console.error("removeRegular",n)}async function xv(){const{data:s,error:n}=await ue.from("prefs").select("*").single();return n?(console.error("fetchPrefs",n),{fishMin:1,vegMin:2,readyBy:"18:30"}):{fishMin:s.fish_min??1,vegMin:s.veg_min??2,readyBy:s.ready_by||"18:30"}}async function bv(s){const{error:n}=await ue.from("prefs").upsert({id:1,fish_min:s.fishMin,veg_min:s.vegMin,ready_by:s.readyBy});n&&console.error("updatePrefs",n)}async function jv(){const{data:s,error:n}=await ue.from("custom_tags").select("name").order("name");return n?(console.error("fetchCustomTags",n),[]):s.map(r=>r.name)}async function Nv(s){const{error:n}=await ue.from("custom_tags").insert({name:s});n&&console.error("addCustomTag",n)}async function Cv(s){const{error:n}=await ue.from("custom_tags").delete().eq("name",s);n&&console.error("removeCustomTag",n)}async function Ev(){const{data:s,error:n}=await ue.from("custom_categories").select("name").order("name");return n?(console.error("fetchCustomCategories",n),[]):s.map(r=>r.name)}async function Tv(s){const{error:n}=await ue.from("custom_categories").insert({name:s});n&&console.error("addCustomCategory",n)}async function Rv(s){const{error:n}=await ue.from("custom_categories").delete().eq("name",s);n&&console.error("removeCustomCategory",n)}async function Jd(){const{data:s,error:n}=await ue.from("shop_checked").select("key").eq("week_start",at);if(n)return console.error("fetchShopChecked",n),{};const r={};return s.forEach(o=>{r[o.key]=!0}),r}async function Pv(s,n,r){if(r){const{error:o}=await ue.from("shop_checked").upsert({week_start:s,key:n},{onConflict:"week_start,key"});o&&console.error("toggleShopChecked",o)}else{const{error:o}=await ue.from("shop_checked").delete().eq("week_start",s).eq("key",n);o&&console.error("toggleShopChecked",o)}}async function Ov(){const{data:s,error:n}=await ue.from("reg_checked").select("regular_id").eq("week_start",at);if(n)return console.error("fetchRegChecked",n),{};const r={};return s.forEach(o=>{r[o.regular_id]=!0}),r}async function Av(s,n,r){if(r){const{error:o}=await ue.from("reg_checked").upsert({week_start:s,regular_id:n},{onConflict:"week_start,regular_id"});o&&console.error("toggleRegChecked",o)}else{const{error:o}=await ue.from("reg_checked").delete().eq("week_start",s).eq("regular_id",n);o&&console.error("toggleRegChecked",o)}}async function Iv(){const{data:s,error:n}=await ue.from("free_shop").select("*").order("id");return n?(console.error("fetchFreeShop",n),[]):s.map(r=>({id:r.id,text:r.text,done:r.done}))}async function Lv(s){const{data:n,error:r}=await ue.from("free_shop").insert({text:s,done:!1}).select().single();if(r)throw console.error("addFreeShopItem",r),r;return{id:n.id,text:n.text,done:n.done}}async function Uv(s,n){const{error:r}=await ue.from("free_shop").update(n).eq("id",s);r&&console.error("updateFreeShopItem",r)}async function Dv(){const{data:s,error:n}=await ue.from("prep_tasks").select("*").eq("week_start",at).order("id");return n?(console.error("fetchPrepTasks",n),[]):s.map(r=>({id:r.id,task:r.task,done:r.done}))}async function $v(s,n){const{data:r,error:o}=await ue.from("prep_tasks").insert({week_start:s,task:n,done:!1}).select().single();if(o)throw console.error("addPrepTask",o),o;return{id:r.id,task:r.task,done:r.done}}async function zv(s,n){const{error:r}=await ue.from("prep_tasks").update(n).eq("id",s);r&&console.error("updatePrepTask",r)}async function Fv(){const{data:s,error:n}=await ue.from("prep_checked").select("key").eq("week_start",at);if(n)return console.error("fetchPrepChecked",n),{};const r={};return s.forEach(o=>{r[o.key]=!0}),r}async function Bv(s,n,r){if(r){const{error:o}=await ue.from("prep_checked").upsert({week_start:s,key:n},{onConflict:"week_start,key"});o&&console.error("togglePrepChecked",o)}else{const{error:o}=await ue.from("prep_checked").delete().eq("week_start",s).eq("key",n);o&&console.error("togglePrepChecked",o)}}async function wh(s,n){const r=n.name.split(".").pop(),o=`${s}.${r}`,{error:u}=await ue.storage.from("recipe-files").upload(o,n,{upsert:!0});if(u)throw console.error("uploadRecipeFile",u),u;const{data:d}=ue.storage.from("recipe-files").getPublicUrl(o);return d.publicUrl}async function _h(s,n){const r=n.split("/recipe-files/")[1];if(r){const{error:o}=await ue.storage.from("recipe-files").remove([r]);o&&console.error("removeRecipeFile",o)}}async function kr(s){try{const{data:n,error:r}=await ue.functions.invoke("fetch-thumbnail",{body:{url:s}});return r?(console.error("fetchRecipeData error:",r),{thumbnailUrl:null,scrapedData:null}):{thumbnailUrl:n?.thumbnailUrl||null,scrapedData:n?.scrapedData||null}}catch(n){return console.error("fetchRecipeData",n),{thumbnailUrl:null,scrapedData:null}}}const Mv=new Set(["cup","cups","c","tablespoon","tablespoons","tbsp","tbs","tb","teaspoon","teaspoons","tsp","ml","milliliter","milliliters","liter","liters","l","fl","oz","fluid","pound","pounds","lb","lbs","ounce","ounces","oz","g","gram","grams","kg","kilogram","kilograms","large","small","medium","whole","piece","pieces","bunch","bunches","clove","cloves","can","cans","jar","jars","package","packages","pkg","bag","bags","box","boxes","stick","sticks","head","heads","sprig","sprigs","slice","slices","pinch","dash","handful"]),Wv=/^[\d/.\s-]+/,qv=/[,;]?\s*(?:to taste|for serving|for garnish|as needed|optional|divided|plus more|or more|or less|about|approximately|roughly|freshly).*$/i;function Vv(s){let n=s.trim();n=n.replace(Wv,"").trim(),n=n.replace(/\(.*?\)/g,"").trim();const r=n.split(/\s+/);for(;r.length>1&&Mv.has(r[0].toLowerCase().replace(/[.,]/g,""));)r.shift();return n=r.join(" "),n=n.replace(/^of\s+/i,""),n=n.replace(qv,"").trim(),n=n.replace(/[,.\s]+$/,""),n||s.trim()}const Kv=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Hv="leftovers or takeout",kh=s=>{const[n,r]=s.split(":").map(Number);return n*60+r},Sh=s=>{const n=Math.floor((s%1440+1440)%1440/60),r=(s%1440+1440)%1440%60;return`${n}:${String(r).padStart(2,"0")}`},Gv=(s,n)=>Sh(kh(s)-n),Jv=s=>{const[n,r]=s.split(":").map(Number),o=n>=12?"pm":"am";return`${n>12?n-12:n}:${String(r).padStart(2,"0")} ${o}`};function Dl({tags:s}){return l.jsxs(l.Fragment,{children:[s.includes("fish")&&l.jsx("span",{className:"tag tag-fish",children:"Fish"}),s.includes("vegetarian")&&l.jsx("span",{className:"tag tag-veg",children:"Veg"})]})}function Al({recipe:s,onClose:n,onSave:r,onDelete:o,customTags:u=[],customCategories:d=[]}){const[f,p]=$.useState(!1),[g,v]=$.useState(!1),[y,C]=$.useState(s),[x,b]=$.useState(s.title),[A,R]=$.useState(s.source),[U,D]=$.useState(s.url||""),[W,E]=$.useState(String(s.time)),[q,ee]=$.useState(s.prepNote||""),[Z,F]=$.useState(s.tags||[]),[_e,we]=$.useState(s.category||""),[Pe,Ue]=$.useState(s.pdfUrl||""),[Oe,ve]=$.useState(s.ingredients||[]),[Ae,Ee]=$.useState(""),[Ie,Te]=$.useState(s.thumbnailUrl||null),[G,ne]=$.useState(s.description||null),[N,_]=$.useState(s.servings||null),[S,se]=$.useState(!1),ye=X=>F(pe=>pe.includes(X)?pe.filter(B=>B!==X):[...pe,X]),ge=X=>{const pe=X.trim().toLowerCase();pe&&!Oe.includes(pe)&&ve(B=>[...B,pe]),Ee("")},oe=X=>ve(pe=>pe.filter((B,je)=>je!==X)),Re=()=>{if(!x.trim())return;const X={...y,title:x.trim(),source:A.trim()||"Added manually",url:U.trim()||null,time:parseInt(W)||30,prepNote:q.trim()||void 0,category:_e||void 0,pdfUrl:Pe.trim()||void 0,tags:Z,ingredients:Oe,thumbnailUrl:Ie,description:G||null,instructions:y.instructions||[],servings:N||null,rawIngredients:y.rawIngredients||[]};r(X),C(X),p(!1)},J=async()=>{if(!(!y.url||g)){v(!0);try{const{thumbnailUrl:X,scrapedData:pe}=await kr(y.url),B={...y};X&&(B.thumbnailUrl=X),pe&&(pe.title&&(B.title=pe.title),pe.cookTime&&(B.time=pe.cookTime),pe.ingredients?.length&&(B.ingredients=pe.ingredients,B.rawIngredients=pe.ingredients),pe.instructions?.length&&(B.instructions=pe.instructions),pe.description&&(B.description=pe.description),pe.servings&&(B.servings=pe.servings)),r(B),C(B)}catch(X){console.error("refresh failed",X)}v(!1)}},te=()=>{b(y.title),R(y.source),D(y.url||""),we(y.category||""),Ue(y.pdfUrl||""),E(String(y.time)),ee(y.prepNote||""),F([...y.tags]),ve([...y.ingredients||[]]),Ee(""),Te(y.thumbnailUrl||null),ne(y.description||null),_(y.servings||null),p(!0)},ie=y;return l.jsxs("div",{className:"recipe-detail-view",children:[!f&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"detail-topbar",children:l.jsx("button",{className:"detail-back-btn",onClick:n,children:" Back"})}),l.jsxs("div",{className:"detail-scroll",children:[ie.thumbnailUrl&&l.jsx("img",{className:"detail-hero-img",src:ie.thumbnailUrl,alt:""}),l.jsxs("div",{className:"detail-hero",children:[l.jsx("div",{className:"detail-title",children:ie.title}),l.jsx("div",{className:"detail-source",children:ie.source}),l.jsxs("div",{className:"detail-meta-row",children:[l.jsxs("div",{className:"detail-meta-chip",children:[" ",ie.time," min"]}),ie.tags.includes("fish")&&l.jsx("div",{className:"detail-meta-chip",style:{color:"#2a6a8a",background:"#eaf4fb",borderColor:"#a8cfe0"},children:" Fish"}),ie.tags.includes("vegetarian")&&l.jsx("div",{className:"detail-meta-chip",style:{color:"#4a7a46",background:"#f0f8ee",borderColor:"#b8d4b6"},children:" Veg"}),ie.servings&&l.jsxs("div",{className:"detail-meta-chip",children:[" ",ie.servings," servings"]})]})]}),l.jsxs("div",{className:"detail-body",children:[ie.prepNote&&l.jsxs("div",{children:[l.jsx("div",{className:"detail-section-label",children:"Prep note"}),l.jsxs("div",{className:"detail-prep-note",children:[" ",ie.prepNote]})]}),ie.url&&l.jsxs("div",{children:[l.jsx("div",{className:"detail-section-label",children:"Recipe source"}),l.jsxs("a",{className:"detail-link",href:ie.url,target:"_blank",rel:"noopener noreferrer",children:[l.jsx("span",{className:"detail-link-icon",children:""}),l.jsxs("div",{className:"detail-link-text",children:[l.jsx("div",{className:"detail-link-label",children:ie.source}),l.jsx("div",{className:"detail-link-url",children:ie.url})]}),l.jsx("span",{className:"detail-link-arrow",children:""})]})]}),ie.ingredients&&ie.ingredients.length>0&&l.jsxs("div",{children:[l.jsx("div",{className:"detail-section-label",children:"Key ingredients"}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:ie.ingredients.map((X,pe)=>l.jsx("span",{className:"detail-ingredient-chip",children:X},pe))})]}),ie.rawIngredients?.length>0&&l.jsxs("div",{children:[l.jsx("div",{className:"detail-section-label",children:"Ingredients"}),l.jsx("ul",{className:"detail-ingredients",children:ie.rawIngredients.map((X,pe)=>l.jsx("li",{children:X},pe))})]}),ie.instructions?.length>0&&l.jsxs("div",{children:[l.jsx("div",{className:"detail-section-label",children:"Instructions"}),l.jsx("ol",{className:"detail-instructions",children:ie.instructions.map((X,pe)=>l.jsx("li",{children:X},pe))})]}),ie.pdfUrl&&l.jsxs("div",{children:[l.jsx("div",{className:"detail-section-label",children:"Attachment"}),/\.(jpe?g|png|gif|webp)(\?|$)/i.test(ie.pdfUrl)?l.jsx("a",{href:ie.pdfUrl,target:"_blank",rel:"noopener noreferrer",children:l.jsx("img",{src:ie.pdfUrl,alt:"Recipe",className:"detail-attachment-img"})}):l.jsxs("a",{href:ie.pdfUrl,target:"_blank",rel:"noopener noreferrer",className:"detail-link",children:[l.jsx("span",{className:"detail-link-icon",children:""}),l.jsxs("div",{className:"detail-link-text",children:[l.jsx("div",{className:"detail-link-label",children:"View PDF"}),l.jsx("div",{className:"detail-link-url",children:ie.pdfUrl})]}),l.jsx("span",{className:"detail-link-arrow",children:""})]})]})]})]}),l.jsxs("div",{className:"detail-footer",children:[l.jsx("button",{className:"sheet-btn sheet-btn-primary",style:{flex:1},onClick:te,children:"Edit"}),ie.url&&l.jsx("button",{className:"sheet-btn sheet-btn-cancel",disabled:g,onClick:J,children:g?"Refreshing":" Refresh"}),l.jsx("button",{className:"detail-delete-btn",onClick:()=>{o(ie.id),n()},children:"Delete"})]})]}),f&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"detail-topbar",children:[l.jsx("button",{className:"detail-back-btn",onClick:()=>p(!1),children:" Cancel"}),l.jsxs("div",{style:{fontFamily:"'Playfair Display',serif",fontSize:16,color:"var(--ink)"},children:["Edit ",l.jsx("em",{children:ie.title.split(" ").slice(0,3).join(" ")})]})]}),l.jsx("div",{className:"detail-scroll",children:l.jsx("div",{className:"detail-body",children:l.jsxs("div",{style:{paddingBottom:8},children:[l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"form-label",children:"Recipe name"}),l.jsx("input",{className:"form-input",value:x,onChange:X=>b(X.target.value),autoFocus:!0})]}),l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"form-label",children:"Source name"}),l.jsx("input",{className:"form-input",value:A,onChange:X=>R(X.target.value)})]}),l.jsxs("div",{className:"form-field",children:[l.jsxs("label",{className:"form-label",children:["URL ",l.jsx("span",{style:{fontWeight:400,color:"var(--ink4)"},children:"optional"})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("input",{className:"form-input",style:{flex:1},placeholder:"https://",value:U,onChange:X=>D(X.target.value),onBlur:async()=>{if(U.trim()){const{thumbnailUrl:X,scrapedData:pe}=await kr(U.trim());X&&Te(X),pe?.servings&&_(pe.servings)}}}),Ie&&l.jsx("img",{src:Ie,alt:"",style:{width:40,height:40,borderRadius:6,objectFit:"cover",flexShrink:0}})]})]}),l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"form-label",children:"Category"}),l.jsx("div",{className:"cat-select",children:[["dinner","Dinner"],["breakfast","Breakfast & Snacks"],["sweets","Sweets"],...(d||[]).map(X=>[X,X])].map(([X,pe])=>l.jsx("button",{type:"button",className:"cat-btn"+(_e===X?" active":""),onClick:()=>we(X),children:pe},X))})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"form-label",children:"Cook time (min)"}),l.jsx("input",{className:"form-input",type:"number",value:W,onChange:X=>E(X.target.value)})]}),l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"form-label",children:"Servings"}),l.jsx("input",{className:"form-input",placeholder:"e.g. 4",value:N||"",onChange:X=>_(X.target.value)})]})]}),l.jsxs("div",{className:"form-field",children:[l.jsxs("label",{className:"form-label",children:["Prep note ",l.jsx("span",{style:{fontWeight:400,color:"var(--ink4)"},children:"optional"})]}),l.jsx("input",{className:"form-input",placeholder:"e.g. Marinate overnight",value:q,onChange:X=>ee(X.target.value)})]}),l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"form-label",children:"Tags"}),l.jsx("div",{className:"tag-toggle-row",children:["fish","vegetarian",...u||[]].map(X=>l.jsx("button",{className:"tag-toggle"+(Z.includes(X)?" on":""),onClick:()=>ye(X),children:X==="fish"?" Fish":X==="vegetarian"?" Veg":X},X))})]}),l.jsxs("div",{className:"form-field",children:[l.jsxs("label",{className:"form-label",children:["Key ingredients ",l.jsx("span",{style:{fontWeight:400,color:"var(--ink4)"},children:"things to buy"})]}),l.jsxs("div",{className:"ingredient-tags",onClick:X=>X.currentTarget.querySelector("input")?.focus(),children:[Oe.map((X,pe)=>l.jsxs("span",{className:"ingredient-tag",children:[l.jsx("span",{style:{cursor:"pointer"},onClick:B=>{B.stopPropagation(),Ee(X),oe(pe)},children:X}),l.jsx("button",{className:"ingredient-tag-remove",onClick:B=>{B.stopPropagation(),oe(pe)},children:""})]},pe)),l.jsx("input",{className:"ingredient-tag-input",placeholder:Oe.length===0?"e.g. salmon fillet":"add more",value:Ae,onChange:X=>Ee(X.target.value),onKeyDown:X=>{(X.key==="Enter"||X.key===",")&&Ae.trim()?(X.preventDefault(),ge(Ae)):X.key==="Backspace"&&!Ae&&Oe.length>0&&ve(pe=>pe.slice(0,-1))},onBlur:()=>{Ae.trim()&&ge(Ae)}})]}),l.jsx("div",{className:"ingredient-tag-hint",children:"Enter or comma to add  skip pantry staples"})]}),l.jsxs("div",{className:"form-field",children:[l.jsxs("label",{className:"form-label",children:["Attachment ",l.jsx("span",{style:{fontWeight:400,color:"var(--ink4)"},children:"PDF or image"})]}),Pe&&l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:6},children:[/\.(jpe?g|png|gif|webp)(\?|$)/i.test(Pe)?l.jsx("img",{src:Pe,alt:"",style:{width:48,height:48,borderRadius:6,objectFit:"cover"}}):l.jsx("span",{style:{fontSize:13,color:"var(--ink3)"},children:" PDF attached"}),l.jsx("button",{type:"button",style:{fontSize:11,color:"var(--ink4)",background:"none",border:"1px solid var(--border)",borderRadius:6,padding:"3px 8px",cursor:"pointer"},onClick:async()=>{await _h(s.id,Pe),Ue("")},children:"Remove"})]}),l.jsxs("label",{className:"detail-upload-btn",children:[S?"Uploading":Pe?"Replace file":"Upload file",l.jsx("input",{type:"file",accept:"image/*,.pdf",style:{display:"none"},disabled:S,onChange:async X=>{const pe=X.target.files?.[0];if(pe){se(!0);try{const B=await wh(s.id,pe);Ue(B)}catch(B){console.error(B)}se(!1),X.target.value=""}}})]})]})]})})}),l.jsxs("div",{className:"detail-footer",children:[l.jsx("button",{className:"sheet-btn sheet-btn-primary",style:{flex:1},disabled:!x.trim(),onClick:Re,children:"Save changes"}),l.jsx("button",{className:"sheet-btn sheet-btn-cancel",onClick:()=>p(!1),children:"Cancel"})]})]})]})}function Qv({title:s,setTitle:n,source:r,setSource:o,url:u,setUrl:d,time:f,setTime:p,tags:g,setTags:v,ingredients:y,setIngredients:C,ingrInput:x,setIngrInput:b,category:A,setCategory:R,customTags:U=[],customCategories:D=[],thumbnailUrl:W,setThumbnailUrl:E,description:q,setDescription:ee,servings:Z,setServings:F,instructions:_e,setInstructions:we,rawIngredients:Pe,setRawIngredients:Ue,pdfUrl:Oe,setPdfUrl:ve,recipeId:Ae,setFetchLoading:Ee}){const[Ie,Te]=$.useState(!1),[G,ne]=$.useState(!1),N=J=>{Te(J),Ee&&Ee(J)},[_,S]=$.useState(!1),se=async()=>{if(!u.trim())return;N(!0),S(!1);const{thumbnailUrl:J,scrapedData:te}=await kr(u.trim());J&&E&&E(J),te&&(!s.trim()&&te.title&&n(te.title),(!f||f===""||f==="30")&&te.cookTime&&p(String(te.cookTime)),Ue&&te.ingredients&&Ue(te.ingredients),(!y||y.length===0)&&te.ingredients&&C(te.ingredients),ee&&te.description&&ee(te.description),F&&te.servings&&F(te.servings),we&&te.instructions&&we(te.instructions),S(!0)),N(!1)},ye=J=>v(te=>te.includes(J)?te.filter(ie=>ie!==J):[...te,J]),ge=J=>{const te=J.trim().toLowerCase();te&&!y.includes(te)&&C(ie=>[...ie,te]),b("")},oe=J=>C(te=>te.filter((ie,X)=>X!==J)),Re=J=>{b(y[J]),oe(J)};return l.jsxs("div",{style:{paddingBottom:8},children:[l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"form-label",children:"Recipe name"}),l.jsx("input",{className:"form-input",placeholder:"e.g. Roast chicken with lemon",value:s,onChange:J=>n(J.target.value),autoFocus:!0})]}),l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"form-label",children:"Source name"}),l.jsx("input",{className:"form-input",placeholder:"e.g. NYT Cooking, Smitten Kitchen",value:r,onChange:J=>o(J.target.value)})]}),l.jsxs("div",{className:"form-field",children:[l.jsxs("label",{className:"form-label",children:["URL ",l.jsx("span",{style:{fontWeight:400,color:"var(--ink4)"},children:"optional"})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("input",{className:"form-input",style:{flex:1},placeholder:"https://",value:u,onChange:J=>d(J.target.value),onBlur:se}),Ie&&l.jsx("span",{style:{fontSize:11,color:"var(--ink4)",flexShrink:0},children:"fetching"}),!Ie&&W&&l.jsx("img",{src:W,alt:"",style:{width:40,height:40,borderRadius:6,objectFit:"cover",flexShrink:0}})]}),_&&l.jsx("div",{style:{fontSize:10,color:"var(--sage)",marginTop:3,fontStyle:"italic"},children:"Filled from recipe page"})]}),l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"form-label",children:"Category"}),l.jsx("div",{className:"cat-select",children:[["dinner","Dinner"],["breakfast","Breakfast & Snacks"],["sweets","Sweets"],...(D||[]).map(J=>[J,J])].map(([J,te])=>l.jsx("button",{type:"button",className:"cat-btn"+(A===J?" active":""),onClick:()=>R&&R(J),children:te},J))})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"form-label",children:"Cook time (min)"}),l.jsx("input",{className:"form-input",type:"number",placeholder:"30",value:f,onChange:J=>p(J.target.value)})]}),F&&l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"form-label",children:"Servings"}),l.jsx("input",{className:"form-input",placeholder:"e.g. 4",value:Z||"",onChange:J=>F(J.target.value)})]})]}),l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"form-label",children:"Tags"}),l.jsx("div",{className:"tag-toggle-row",children:["fish","vegetarian",...U||[]].map(J=>l.jsx("button",{className:"tag-toggle"+(g.includes(J)?" on":""),onClick:()=>ye(J),children:J==="fish"?" Fish":J==="vegetarian"?" Veg":J},J))})]}),l.jsxs("div",{className:"form-field",children:[l.jsxs("label",{className:"form-label",children:["Key ingredients ",l.jsx("span",{style:{fontWeight:400,color:"var(--ink4)"},children:"things to buy, not staples"})]}),l.jsxs("div",{className:"ingredient-tags",onClick:J=>J.currentTarget.querySelector("input")?.focus(),children:[y.map((J,te)=>l.jsxs("span",{className:"ingredient-tag",children:[l.jsx("span",{style:{cursor:"pointer"},onClick:ie=>{ie.stopPropagation(),Re(te)},children:J}),l.jsx("button",{className:"ingredient-tag-remove",onClick:ie=>{ie.stopPropagation(),oe(te)},children:""})]},te)),l.jsx("input",{className:"ingredient-tag-input",placeholder:y.length===0?"e.g. salmon fillet":"add more",value:x,onChange:J=>b(J.target.value),onKeyDown:J=>{(J.key==="Enter"||J.key===",")&&x.trim()?(J.preventDefault(),ge(x)):J.key==="Backspace"&&!x&&y.length>0&&C(te=>te.slice(0,-1))},onBlur:()=>{x.trim()&&ge(x)}})]}),l.jsx("div",{className:"ingredient-tag-hint",children:"Enter or comma to add  skip staples like garlic, olive oil"})]}),ve&&Ae&&l.jsxs("div",{className:"form-field",children:[l.jsxs("label",{className:"form-label",children:["Attachment ",l.jsx("span",{style:{fontWeight:400,color:"var(--ink4)"},children:"PDF or image"})]}),Oe&&l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:6},children:[/\.(jpe?g|png|gif|webp)(\?|$)/i.test(Oe)?l.jsx("img",{src:Oe,alt:"",style:{width:48,height:48,borderRadius:6,objectFit:"cover"}}):l.jsx("span",{style:{fontSize:13,color:"var(--ink3)"},children:" PDF attached"}),l.jsx("button",{type:"button",style:{fontSize:11,color:"var(--ink4)",background:"none",border:"1px solid var(--border)",borderRadius:6,padding:"3px 8px",cursor:"pointer"},onClick:async()=>{await _h(Ae,Oe),ve("")},children:"Remove"})]}),l.jsxs("label",{className:"detail-upload-btn",children:[G?"Uploading":Oe?"Replace file":"Upload file",l.jsx("input",{type:"file",accept:"image/*,.pdf",style:{display:"none"},disabled:G,onChange:async J=>{const te=J.target.files?.[0];if(te){ne(!0);try{ve(await wh(Ae,te))}catch(ie){console.error(ie)}ne(!1),J.target.value=""}}})]})]})]})}function Qd({onClose:s,onAdd:n,prefill:r={},customTags:o=[],customCategories:u=[]}){const[d,f]=$.useState(r.title||""),[p,g]=$.useState(r.source||""),[v,y]=$.useState(r.url||""),[C,x]=$.useState(r.time?String(r.time):""),[b,A]=$.useState(r.category||"dinner"),[R,U]=$.useState(r.tags||[]),[D,W]=$.useState(r.ingredients||[]),[E,q]=$.useState(""),[ee,Z]=$.useState(r.thumbnailUrl||null),[F,_e]=$.useState(r.description||null),[we,Pe]=$.useState(r.servings||null),[Ue,Oe]=$.useState(r.instructions||[]),[ve,Ae]=$.useState(r.rawIngredients||[]),[Ee,Ie]=$.useState(r.pdfUrl||""),[Te,G]=$.useState(!1),[ne]=$.useState(()=>Date.now()),N=()=>{d.trim()&&(n({id:ne,title:d.trim(),source:p.trim()||"Added manually",url:v.trim()||null,category:b||"dinner",time:parseInt(C)||30,tags:R,ingredients:D,thumbnailUrl:ee,description:F||null,instructions:Ue,servings:we||null,rawIngredients:ve,pdfUrl:Ee||void 0}),s())};return l.jsx("div",{className:"sheet-overlay",onClick:s,children:l.jsxs("div",{className:"sheet",onClick:_=>_.stopPropagation(),children:[l.jsx("div",{className:"sheet-handle"}),l.jsxs("div",{className:"sheet-header",children:[l.jsxs("div",{className:"sheet-title",children:["New ",l.jsx("em",{children:"Recipe"})]}),l.jsx("div",{className:"sheet-subtitle",children:"Saved to your library"})]}),l.jsx("div",{className:"sheet-body",children:l.jsx(Qv,{title:d,setTitle:f,source:p,setSource:g,url:v,setUrl:y,time:C,setTime:x,category:b,setCategory:A,tags:R,setTags:U,ingredients:D,setIngredients:W,ingrInput:E,setIngrInput:q,customTags:o,customCategories:u,thumbnailUrl:ee,setThumbnailUrl:Z,description:F,setDescription:_e,servings:we,setServings:Pe,instructions:Ue,setInstructions:Oe,rawIngredients:ve,setRawIngredients:Ae,pdfUrl:Ee,setPdfUrl:Ie,recipeId:ne,setFetchLoading:G})}),l.jsxs("div",{className:"sheet-footer",children:[l.jsx("button",{className:"sheet-btn sheet-btn-primary",disabled:!d.trim()||Te,onClick:N,children:"Save to library"}),l.jsx("button",{className:"sheet-btn sheet-btn-cancel",onClick:s,children:"Cancel"})]})]})})}function Yv({onClose:s,week:n,staples:r,freezer:o,fridge:u,regulars:d,onAddRegular:f,onRemoveRegular:p,regChecked:g,onToggleRegChecked:v,shopChecked:y,onToggleShopChecked:C,freeShop:x,onAddFreeShop:b,onToggleFreeShop:A}){const[R,U]=$.useState(""),[D,W]=$.useState(""),E=S=>v(S),q=S=>p(S),ee=S=>{const se=S.trim().toLowerCase();se&&!d.find(ye=>ye.name===se)&&f(se),W("")},Z=S=>C(S),F=S=>A(S),_e=()=>{R.trim()&&(b(R.trim()),U(""))},we=r.filter(S=>S.status==="ok").map(S=>S.name.toLowerCase()),Pe=(o||[]).map(S=>S.item.toLowerCase()),Ue=(u||[]).map(S=>S.item.toLowerCase()),Oe=r.filter(S=>S.status==="restock").map(S=>({id:"staple:"+S.name,text:S.name,source:"restock"})),ve=(n||[]).filter(S=>S.recipe?.ingredients?.length).flatMap(S=>S.recipe.ingredients.map(se=>({text:se,source:S.day,id:S.day+":"+se}))).filter(S=>!we.includes(S.text.toLowerCase())&&!Pe.includes(S.text.toLowerCase())&&!Ue.includes(S.text.toLowerCase())),Ae=[],Ee={};ve.forEach(S=>{Ee[S.text]?Ee[S.text].source+=", "+S.source:(Ee[S.text]={...S},Ae.push(Ee[S.text]))});const Ie=[...Oe,...Ae,...x.map(S=>({...S,source:null}))],Te=d.filter(S=>!g[S.id]),G=d.filter(S=>g[S.id]),ne=Ie.filter(S=>!y[S.id]&&!S.done),N=Ie.filter(S=>y[S.id]||S.done),_=Te.length+ne.length;return l.jsx("div",{className:"sheet-overlay",onClick:s,children:l.jsxs("div",{className:"sheet",style:{maxHeight:"92vh"},onClick:S=>S.stopPropagation(),children:[l.jsx("div",{className:"sheet-handle"}),l.jsx("div",{className:"sheet-header",style:{paddingBottom:10},children:l.jsxs("div",{className:"sheet-title",children:["Shopping ",l.jsx("em",{children:"List"}),_>0&&l.jsx("span",{className:"shop-count-badge",children:_})]})}),l.jsxs("div",{className:"sheet-body",style:{padding:0},children:[l.jsx("div",{className:"shop-sheet-group-label",children:"Every week"}),l.jsxs("div",{className:"shop-col-grid",children:[Te.map(S=>l.jsxs("div",{className:"shop-col-item",children:[l.jsx("input",{type:"checkbox",checked:!1,onChange:()=>E(S.id)}),l.jsx("div",{style:{flex:1,minWidth:0},children:l.jsx("div",{className:"shop-col-text",children:S.name})}),l.jsx("button",{className:"pantry-row-remove",style:{opacity:.25,fontSize:13},onClick:se=>{se.stopPropagation(),q(S.id)},children:""})]},S.id)),G.map(S=>l.jsxs("div",{className:"shop-col-item done-item",children:[l.jsx("input",{type:"checkbox",checked:!0,onChange:()=>E(S.id)}),l.jsx("div",{style:{flex:1,minWidth:0,textDecoration:"line-through"},children:l.jsx("div",{className:"shop-col-text",children:S.name})})]},S.id))]}),l.jsxs("div",{style:{padding:"6px 12px 10px",borderBottom:"1px solid var(--border2)",display:"flex",gap:8},children:[l.jsx("input",{className:"pantry-add-input",placeholder:"Add to weekly regulars",value:D,style:{fontSize:11},onChange:S=>W(S.target.value),onKeyDown:S=>{S.key==="Enter"&&ee(D)}}),l.jsx("button",{className:"pantry-add-btn",disabled:!D.trim(),onClick:()=>ee(D),style:{fontSize:11,padding:"6px 10px"},children:"Add"})]}),l.jsx("div",{className:"shop-sheet-group-label",children:"This week's recipes"}),ne.length===0&&N.length===0&&x.length===0?l.jsx("div",{style:{padding:"10px 20px",color:"var(--ink4)",fontSize:12,fontStyle:"italic"},children:"Plan dinners to auto-populate ingredients here."}):l.jsxs("div",{className:"shop-col-grid",children:[ne.map(S=>l.jsxs("div",{className:"shop-col-item",children:[l.jsx("input",{type:"checkbox",checked:!1,onChange:()=>S.done!==void 0?F(S.id):Z(S.id)}),l.jsxs("div",{style:{flex:1,minWidth:0},children:[l.jsx("div",{className:"shop-col-text",children:S.text}),S.source&&l.jsx("div",{className:"shop-col-source",children:S.source})]})]},S.id)),N.map(S=>l.jsxs("div",{className:"shop-col-item done-item",children:[l.jsx("input",{type:"checkbox",checked:!0,onChange:()=>S.done!==void 0?F(S.id):Z(S.id)}),l.jsx("div",{style:{flex:1,minWidth:0,textDecoration:"line-through"},children:l.jsx("div",{className:"shop-col-text",children:S.text})})]},S.id))]}),l.jsxs("div",{style:{padding:"6px 12px 10px",display:"flex",gap:8},children:[l.jsx("input",{className:"pantry-add-input",placeholder:"Add item",value:R,style:{fontSize:11},onChange:S=>U(S.target.value),onKeyDown:S=>{S.key==="Enter"&&_e()}}),l.jsx("button",{className:"pantry-add-btn",disabled:!R.trim(),onClick:_e,style:{fontSize:11,padding:"6px 10px"},children:"Add"})]})]}),l.jsx("div",{className:"sheet-footer",children:l.jsx("button",{className:"sheet-btn sheet-btn-cancel",style:{flex:1},onClick:s,children:"Done"})})]})})}function Xv({radarItem:s,scrapedData:n,onConfirm:r,onCancel:o}){const[u,d]=$.useState(n?.title||s.title||""),[f,p]=$.useState(String(n?.cookTime||s.cookTime||"30")),[g,v]=$.useState(n?.servings||s.servings||""),y=n?.thumbnailUrl||s.thumbnailUrl||null,C=!n&&s.url,x=n?.ingredients||s.ingredients||[],[b,A]=$.useState(()=>x.map(D=>({raw:D,name:Vv(D),removed:!1}))),R=D=>{A(W=>W.map((E,q)=>q===D?{...E,removed:!E.removed}:E))},U=()=>{const D=b.filter(W=>!W.removed).map(W=>W.name);r({title:u.trim(),cookTime:parseInt(f)||30,servings:g.trim()||null,thumbnailUrl:y,ingredients:D,rawIngredients:x,instructions:n?.instructions||s.instructions||[]})};return l.jsx("div",{className:"sheet-overlay",onClick:o,children:l.jsxs("div",{className:"sheet",onClick:D=>D.stopPropagation(),children:[l.jsx("div",{className:"sheet-handle"}),l.jsx("div",{className:"sheet-header",children:l.jsxs("div",{className:"sheet-title",children:["Review  ",l.jsx("em",{children:s.title})]})}),l.jsxs("div",{className:"sheet-body",children:[y&&l.jsx("img",{src:y,alt:"",style:{width:"100%",height:120,objectFit:"cover",borderRadius:8,marginBottom:12}}),l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"form-label",children:"Title"}),l.jsx("input",{className:"form-input",value:u,onChange:D=>d(D.target.value)})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"form-label",children:"Cook time (min)"}),l.jsx("input",{className:"form-input",type:"number",value:f,onChange:D=>p(D.target.value)})]}),l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"form-label",children:"Servings"}),l.jsx("input",{className:"form-input",placeholder:"e.g. 4",value:g,onChange:D=>v(D.target.value)})]})]}),l.jsxs("div",{className:"form-field",children:[l.jsxs("label",{className:"form-label",children:["Ingredients  ",l.jsx("span",{style:{fontWeight:400,color:"var(--ink4)"},children:"tap to remove items you always have"})]}),b.length>0?l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6,marginTop:4},children:b.map((D,W)=>l.jsxs("span",{className:"radar-review-pill"+(D.removed?" removed":""),onClick:()=>R(W),children:[D.name,!D.removed&&l.jsx("span",{style:{marginLeft:4,opacity:.5},children:""})]},W))}):l.jsx("div",{style:{fontSize:12,color:"var(--ink4)",fontStyle:"italic",marginTop:4},children:C?"Couldn't scrape ingredients  add manually after saving":"No ingredients found"})]})]}),l.jsxs("div",{className:"sheet-footer",children:[l.jsx("button",{className:"sheet-btn sheet-btn-primary",style:{flex:1},disabled:!u.trim(),onClick:U,children:"Confirm"}),l.jsx("button",{className:"sheet-btn sheet-btn-cancel",onClick:o,children:"Cancel"})]})]})})}function Zv({targetDay:s,dayIndex:n,week:r,recipes:o,radar:u,onClose:d,onSlot:f,onSlotRadar:p,onRemove:g,onSlotNote:v,onAddRecipe:y,freezer:C,onAdjustFreezerQty:x,customTags:b=[],customCategories:A=[]}){const[R,U]=$.useState((s?.recipe,"pick")),[D,W]=$.useState(""),[E,q]=$.useState(""),[ee,Z]=$.useState(""),[F,_e]=$.useState("30"),[we,Pe]=$.useState([]),[Ue,Oe]=$.useState(""),[ve,Ae]=$.useState(!1),[Ee,Ie]=$.useState(""),[Te,G]=$.useState("dinner"),[ne,N]=$.useState([]),[_,S]=$.useState(""),[se,ye]=$.useState(null),[ge,oe]=$.useState(null),[Re,J]=$.useState(null),[te,ie]=$.useState([]),[X,pe]=$.useState([]),[B,je]=$.useState(null),[Me,gt]=$.useState(s?.note||""),[bt,Pt]=$.useState(!1),Kt=o.filter(M=>(M.category==="dinner"||!M.category)&&(D===""||M.title.toLowerCase().includes(D.toLowerCase()))),zt=M=>{if(!C?.length||!M.ingredients?.length)return[];const ce=Object.fromEntries(C.map(Fe=>[Fe.item.toLowerCase(),Fe]));return M.ingredients.map(Fe=>ce[Fe.toLowerCase()]).filter(Boolean).map(Fe=>({freezerItem:Fe,deduct:1}))},Ot=M=>{const ce=zt(M);ce.length?je({recipe:M,matches:ce}):(f(n,M),d())},kt=()=>{g(n),d()},fn=()=>{if(!E.trim())return;const M={id:Date.now(),title:E.trim(),source:ve&&Ee.trim()||"Added manually",url:ee.trim()||null,category:ve&&Te||"dinner",tags:ve?ne:[],time:parseInt(F)||30,ingredients:we,prepNote:_.trim()||void 0,thumbnailUrl:se,description:ge||null,instructions:te,servings:Re||null,rawIngredients:X,_unsaved:!ve};ve&&y(M);const ce=zt(M);ce.length?je({recipe:M,matches:ce}):(f(n,M),d())},En=()=>{B.matches.forEach(({freezerItem:M,deduct:ce})=>{x(M.id,-ce)}),f(n,B.recipe),d()},pn=()=>{f(n,B.recipe),d()},mn=(M,ce)=>{je(Fe=>({...Fe,matches:Fe.matches.map(ot=>ot.freezerItem.id===M?{...ot,deduct:Math.max(0,ot.deduct+ce)}:ot)}))},an=s?`${s.day}day`:"Choose a night";return B?l.jsx("div",{className:"sheet-overlay",onClick:pn,children:l.jsxs("div",{className:"sheet",onClick:M=>M.stopPropagation(),children:[l.jsx("div",{className:"sheet-handle"}),l.jsxs("div",{className:"deduct-prompt",children:[l.jsxs("div",{children:[l.jsx("div",{className:"deduct-title",children:"Using from freezer"}),l.jsx("div",{className:"deduct-subtitle",children:"How much should we deduct from your freezer stock?"})]}),B.matches.map(({freezerItem:M,deduct:ce})=>l.jsxs("div",{className:"deduct-row",children:[l.jsxs("div",{className:"deduct-row-name",children:[M.item,l.jsxs("div",{className:"deduct-row-current",children:[M.qty," lb in stock"]})]}),l.jsxs("div",{className:"fz-stepper",children:[l.jsx("button",{className:"fz-stepper-btn",onClick:()=>mn(M.id,-1),children:""}),l.jsx("span",{className:"fz-stepper-val",children:ce}),l.jsx("button",{className:"fz-stepper-btn",onClick:()=>mn(M.id,1),children:"+"}),l.jsx("span",{className:"fz-unit",children:"lb"})]})]},M.id))]}),l.jsxs("div",{className:"sheet-footer",children:[l.jsx("button",{className:"sheet-btn sheet-btn-primary",onClick:En,children:"Confirm & deduct"}),l.jsx("button",{className:"sheet-btn sheet-btn-cancel",onClick:pn,children:"Skip"})]})]})}):l.jsx("div",{className:"sheet-overlay",onClick:d,children:l.jsxs("div",{className:"sheet",onClick:M=>M.stopPropagation(),children:[l.jsx("div",{className:"sheet-handle"}),l.jsxs("div",{className:"sheet-header",children:[l.jsx("div",{className:"sheet-title",children:s?.recipe?l.jsxs(l.Fragment,{children:["Change ",l.jsx("em",{children:s.day}),"'s dinner"]}):l.jsxs(l.Fragment,{children:["Plan ",l.jsx("em",{children:s?.day??"a night"})]})}),l.jsx("div",{className:"sheet-subtitle",children:an})]}),l.jsxs("div",{className:"sheet-mode-toggle",children:[l.jsx("button",{className:"sheet-mode-btn"+(R==="pick"?" active":""),onClick:()=>U("pick"),children:"From library"}),l.jsx("button",{className:"sheet-mode-btn"+(R==="note"?" active":""),onClick:()=>U("note"),children:"Add note"}),l.jsx("button",{className:"sheet-mode-btn"+(R==="new"?" active":""),onClick:()=>U("new"),children:"New recipe"})]}),l.jsxs("div",{className:"sheet-body",children:[R==="pick"&&l.jsxs(l.Fragment,{children:[(s?.recipe||s?.note)&&l.jsxs("div",{className:"sheet-current",children:[l.jsxs("div",{children:[l.jsx("div",{className:"sheet-current-label",children:"Currently planned"}),l.jsx("div",{className:"sheet-current-title",children:s.recipe?.title??s.note})]}),l.jsx("button",{className:"sheet-remove-btn",onClick:kt,children:"Clear"})]}),l.jsx("input",{className:"pick-search",placeholder:"Search recipes",value:D,onChange:M=>W(M.target.value),autoFocus:!0}),Kt.map(M=>l.jsxs("div",{className:"pick-recipe-item",onClick:()=>Ot(M),children:[l.jsx("div",{className:"pick-thumb",children:M.title[0]}),l.jsxs("div",{style:{flex:1,minWidth:0},children:[l.jsx("div",{className:"pick-recipe-title",children:M.title}),l.jsxs("div",{className:"pick-recipe-meta",children:[M.source,"  ",M.time," min"]}),l.jsx("div",{className:"pick-tags",children:l.jsx(Dl,{tags:M.tags})})]}),l.jsx("span",{style:{color:"var(--ink4)",fontSize:20},children:""})]},M.id)),Kt.length===0&&!u?.length&&l.jsxs("div",{style:{padding:"24px 0",textAlign:"center",color:"var(--ink4)",fontSize:13,fontStyle:"italic"},children:['No recipes match "',D,'"']}),u&&u.length>0&&(()=>{const M=u.filter(ce=>D===""||ce.title.toLowerCase().includes(D.toLowerCase()));return M.length?l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{fontSize:10,letterSpacing:"0.08em",textTransform:"uppercase",color:"var(--ink4)",fontWeight:700,marginTop:12,marginBottom:6},children:"From radar"}),M.map(ce=>l.jsxs("div",{className:"pick-recipe-item",onClick:()=>{p(n,ce),d()},children:[l.jsx("div",{className:"pick-thumb",style:{background:"var(--accent-pale)",color:"var(--accent)"},children:""}),l.jsxs("div",{style:{flex:1,minWidth:0},children:[l.jsx("div",{className:"pick-recipe-title",children:ce.title}),l.jsxs("div",{className:"pick-recipe-meta",children:[ce.source||"Radar",ce.cookTime?`  ${ce.cookTime} min`:""]})]}),l.jsx("span",{style:{color:"var(--ink4)",fontSize:20},children:""})]},"radar-"+ce.id))]}):null})()]}),R==="note"&&l.jsxs("div",{style:{padding:"8px 0"},children:[l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"form-label",children:"What's the plan?"}),l.jsx("input",{className:"form-input",placeholder:"e.g. cheese omelette and salad",value:Me,autoFocus:!0,onChange:M=>gt(M.target.value),onKeyDown:M=>{M.key==="Enter"&&Me.trim()&&(v(n,Me),d())}})]}),s?.note&&l.jsxs("div",{style:{fontSize:11,color:"var(--ink4)",marginTop:4,fontStyle:"italic"},children:['Currently: "',s.note,'"']})]}),R==="new"&&l.jsxs("div",{style:{paddingBottom:8},children:[u&&u.length>0&&l.jsxs("div",{style:{marginBottom:14},children:[l.jsxs("div",{style:{fontSize:10,letterSpacing:"0.08em",textTransform:"uppercase",color:"var(--ink4)",fontWeight:700,marginBottom:6,cursor:"pointer",userSelect:"none",display:"flex",alignItems:"center",gap:4},onClick:()=>Pt(M=>!M),children:["From radar",l.jsx("span",{style:{fontSize:8,transition:"transform 0.2s",display:"inline-block",transform:bt?"rotate(0deg)":"rotate(-90deg)"},children:""})]}),bt&&u.map(M=>l.jsxs("div",{onMouseDown:ce=>{ce.preventDefault(),q(M.title),Z(M.url||"")},style:{display:"flex",alignItems:"center",gap:8,padding:"5px 0",borderBottom:"1px solid var(--border2)",cursor:"pointer"},children:[l.jsx("span",{style:{flex:1,fontSize:12,color:E===M.title?"var(--accent)":"var(--ink2)",fontWeight:E===M.title?700:400,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:M.title}),M.url&&l.jsx("span",{style:{fontSize:10,color:"var(--ink4)"},children:""})]},M.id)),bt&&l.jsx("div",{style:{height:12}})]}),l.jsx("div",{style:{fontSize:10,letterSpacing:"0.08em",textTransform:"uppercase",color:"var(--ink4)",fontWeight:700,marginBottom:8},children:"From web"}),l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"form-label",children:"Recipe name"}),l.jsx("input",{className:"form-input",placeholder:"e.g. Roast chicken with lemon",value:E,onChange:M=>q(M.target.value)})]}),l.jsxs("div",{className:"form-field",children:[l.jsxs("label",{className:"form-label",children:["URL ",l.jsx("span",{style:{fontWeight:400,color:"var(--ink4)"},children:"optional"})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("input",{className:"form-input",style:{flex:1},placeholder:"https://",value:ee,onChange:M=>Z(M.target.value),onBlur:async()=>{if(!ee.trim())return;const{thumbnailUrl:M,scrapedData:ce}=await kr(ee.trim());M&&ye(M),ce&&(!E.trim()&&ce.title&&q(ce.title),F==="30"&&ce.cookTime&&_e(String(ce.cookTime)),!we.length&&ce.ingredients&&Pe(ce.ingredients),ce.description&&oe(ce.description),ce.servings&&J(ce.servings),ce.instructions&&ie(ce.instructions),ce.ingredients&&pe(ce.ingredients))}}),se&&l.jsx("img",{src:se,alt:"",style:{width:40,height:40,borderRadius:6,objectFit:"cover",flexShrink:0}})]})]}),l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"form-label",children:"Cook time (min)"}),l.jsx("input",{className:"form-input",type:"number",value:F,onChange:M=>_e(M.target.value)})]}),l.jsxs("div",{className:"form-field",children:[l.jsxs("label",{className:"form-label",children:["Key ingredients ",l.jsx("span",{style:{fontWeight:400,color:"var(--ink4)"},children:"optional"})]}),l.jsxs("div",{className:"ingredient-tags",onClick:M=>M.currentTarget.querySelector("input")?.focus(),children:[we.map((M,ce)=>l.jsxs("span",{className:"ingredient-tag",children:[l.jsx("span",{style:{cursor:"pointer"},onClick:Fe=>{Fe.stopPropagation(),Oe(M),Pe(ot=>ot.filter((Zn,Ht)=>Ht!==ce))},children:M}),l.jsx("button",{className:"ingredient-tag-remove",onClick:Fe=>{Fe.stopPropagation(),Pe(ot=>ot.filter((Zn,Ht)=>Ht!==ce))},children:""})]},ce)),l.jsx("input",{className:"ingredient-tag-input",placeholder:we.length===0?"e.g. salmon fillet":"add more",value:Ue,onChange:M=>Oe(M.target.value),onKeyDown:M=>{const ce=Ue.trim().toLowerCase();(M.key==="Enter"||M.key===",")&&ce?(M.preventDefault(),we.includes(ce)||Pe(Fe=>[...Fe,ce]),Oe("")):M.key==="Backspace"&&!Ue&&we.length>0&&Pe(Fe=>Fe.slice(0,-1))},onBlur:()=>{const M=Ue.trim().toLowerCase();M&&!we.includes(M)&&(Pe(ce=>[...ce,M]),Oe(""))}})]}),l.jsx("div",{className:"ingredient-tag-hint",children:"Enter or comma to add"})]}),l.jsxs("div",{className:"form-field",children:[l.jsxs("label",{className:"form-label",children:["Prep note ",l.jsx("span",{style:{fontWeight:400,color:"var(--ink4)"},children:"optional"})]}),l.jsx("input",{className:"form-input",placeholder:"e.g. Marinate overnight",value:_,onChange:M=>S(M.target.value)})]}),l.jsxs("div",{style:{marginTop:12,borderTop:"1px solid var(--border2)",paddingTop:12},children:[l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,fontSize:12,color:"var(--ink3)",cursor:"pointer",marginBottom:ve?12:0},children:[l.jsx("input",{type:"checkbox",checked:ve,onChange:M=>Ae(M.target.checked),style:{accentColor:"var(--accent)"}}),l.jsx("span",{children:"Save to recipe library"})]}),ve&&l.jsxs("div",{children:[l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"form-label",children:"Source"}),l.jsx("input",{className:"form-input",placeholder:"e.g. NYT Cooking, Smitten Kitchen",value:Ee,onChange:M=>Ie(M.target.value)})]}),l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"form-label",children:"Category"}),l.jsx("div",{className:"cat-select",children:[["dinner","Dinner"],["breakfast","Breakfast & Snacks"],["sweets","Sweets"],...A.map(M=>[M,M])].map(([M,ce])=>l.jsx("button",{type:"button",className:"cat-btn"+(Te===M?" active":""),onClick:()=>G(M),children:ce},M))})]}),l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"form-label",children:"Tags"}),l.jsx("div",{className:"tag-toggle-row",children:["fish","vegetarian",...b].map(M=>l.jsx("button",{className:"tag-toggle"+(ne.includes(M)?" on":""),onClick:()=>N(ce=>ce.includes(M)?ce.filter(Fe=>Fe!==M):[...ce,M]),children:M==="fish"?" Fish":M==="vegetarian"?" Veg":M},M))})]})]})]})]})]}),l.jsxs("div",{className:"sheet-footer",children:[R==="note"&&l.jsx("button",{className:"sheet-btn sheet-btn-primary",disabled:!Me.trim(),onClick:()=>{v(n,Me),d()},children:"Save note"}),R==="new"&&l.jsxs("button",{className:"sheet-btn sheet-btn-primary",disabled:!E.trim(),onClick:fn,children:["Plan for ",s?.day??"this night"]}),l.jsx("button",{className:"sheet-btn sheet-btn-cancel",onClick:d,children:R==="note"||R==="new"?"Back":"Cancel"})]})]})})}function Yd({d:s,today:n,onClick:r,onDetail:o,readyBy:u,scraping:d}){const f=s.recipe?.time||s.radarCookTime||30,p=s.recipe?.title||s.radarTitle||"Untitled",g=s.recipe?.thumbnailUrl||s.radarThumbnailUrl||null,v=s.recipe?.source||null,y=s.recipe&&(s.recipe.pdfUrl||s.recipe.url)||null,C=Gv(u,f),x=s.isRadar&&!s.recipe;return l.jsxs("div",{className:"day-card"+(n?" today":""),onClick:()=>s.recipe?o(s.recipe):r(),children:[g&&l.jsx("img",{className:"day-card-thumb",src:g,alt:""}),d&&l.jsx("div",{className:"day-card-loading"}),l.jsx("button",{className:"day-card-swap",title:"Change recipe",onClick:b=>{b.stopPropagation(),r()},children:""}),l.jsx("div",{className:"day-name",children:s.day}),l.jsxs("div",{className:"day-recipe-block",children:[l.jsx("div",{className:"day-recipe-name",children:p}),y?l.jsxs("a",{className:"day-source linked",href:y,target:"_blank",rel:"noopener noreferrer",onClick:b=>b.stopPropagation(),children:[v,l.jsx("span",{className:"source-arrow",children:" "})]}):v?l.jsx("div",{className:"day-source",children:s.recipe?._unsaved?l.jsx("em",{style:{color:"var(--ink4)"},children:"not saved"}):v}):x?l.jsx("div",{className:"day-source",children:l.jsx("em",{style:{color:"var(--accent)"},children:"from radar"})}):null,l.jsxs("div",{className:"day-recipe-meta",children:[l.jsxs("span",{className:"day-time",children:["start ",C]}),l.jsxs("span",{className:"day-duration",children:[" ",f,"m"]})]})]})]})}function Xd({d:s,today:n,onClick:r}){return l.jsxs("div",{className:"day-stub"+(n?" today":""),onClick:r,children:[l.jsx("div",{className:"day-name",children:s.day}),l.jsx("div",{className:"day-stub-label",children:Hv})]})}function Zd({d:s,today:n,onClick:r}){return l.jsxs("div",{className:"day-note"+(n?" today":""),onClick:r,children:[l.jsx("button",{className:"day-note-swap",title:"Change plan",onClick:o=>{o.stopPropagation(),r()},children:""}),l.jsx("div",{className:"day-name",children:s.day}),l.jsx("div",{className:"day-note-text",children:s.note})]})}function ey({recipes:s,radar:n,onClose:r,onAdd:o,onAddRecipe:u,customTags:d=[],customCategories:f=[]}){const[p,g]=$.useState("pick"),[v,y]=$.useState(""),[C,x]=$.useState(""),[b,A]=$.useState(""),[R,U]=$.useState(""),[D,W]=$.useState("30"),[E,q]=$.useState([]),[ee,Z]=$.useState(""),[F,_e]=$.useState(""),[we,Pe]=$.useState("dinner"),[Ue,Oe]=$.useState([]),[ve,Ae]=$.useState(""),[Ee,Ie]=$.useState(null),[Te,G]=$.useState(null),[ne,N]=$.useState(null),[_,S]=$.useState([]),[se,ye]=$.useState([]),[ge,oe]=$.useState(!1),[Re,J]=$.useState(!1),te=s.filter(B=>v===""||B.title.toLowerCase().includes(v.toLowerCase())),ie=B=>{o(B),r()},X=()=>{if(!C.trim())return;const B={id:Date.now(),title:C.trim(),source:"Added manually",url:null,category:"dinner",tags:[],time:0,ingredients:[],_unsaved:!0};o(B),r()},pe=()=>{if(!b.trim())return;const B={id:Date.now(),title:b.trim(),source:ge&&F.trim()||"Added manually",url:R.trim()||null,category:ge&&we||"dinner",tags:ge?Ue:[],time:parseInt(D)||30,ingredients:E,prepNote:ve.trim()||void 0,thumbnailUrl:Ee,description:Te||null,instructions:_,servings:ne||null,rawIngredients:se,_unsaved:!ge};ge&&u(B),o(B),r()};return l.jsx("div",{className:"sheet-overlay",onClick:r,children:l.jsxs("div",{className:"sheet",onClick:B=>B.stopPropagation(),children:[l.jsx("div",{className:"sheet-handle"}),l.jsxs("div",{className:"sheet-header",children:[l.jsxs("div",{className:"sheet-title",children:["Weekend ",l.jsx("em",{children:"Batch"})," Prep"]}),l.jsx("div",{className:"sheet-subtitle",children:"Add a recipe to make ahead this weekend"})]}),l.jsxs("div",{className:"sheet-mode-toggle",children:[l.jsx("button",{className:"sheet-mode-btn"+(p==="pick"?" active":""),onClick:()=>g("pick"),children:"From library"}),l.jsx("button",{className:"sheet-mode-btn"+(p==="note"?" active":""),onClick:()=>g("note"),children:"Add note"}),l.jsx("button",{className:"sheet-mode-btn"+(p==="new"?" active":""),onClick:()=>g("new"),children:"New recipe"})]}),l.jsxs("div",{className:"sheet-body",children:[p==="pick"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"pick-search",placeholder:"Search recipes",value:v,onChange:B=>y(B.target.value),autoFocus:!0}),te.map(B=>l.jsxs("div",{className:"pick-recipe-item",onClick:()=>ie(B),children:[l.jsx("div",{className:"pick-thumb",children:B.title[0]}),l.jsxs("div",{style:{flex:1,minWidth:0},children:[l.jsx("div",{className:"pick-recipe-title",children:B.title}),l.jsxs("div",{className:"pick-recipe-meta",children:[B.source,"  ",B.time," min"]}),l.jsx("div",{className:"pick-tags",children:l.jsx(Dl,{tags:B.tags})})]}),l.jsx("span",{style:{color:"var(--ink4)",fontSize:20},children:""})]},B.id)),te.length===0&&l.jsxs("div",{style:{padding:"24px 0",textAlign:"center",color:"var(--ink4)",fontSize:13,fontStyle:"italic"},children:['No recipes match "',v,'"']})]}),p==="note"&&l.jsx("div",{style:{padding:"8px 0"},children:l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"form-label",children:"What's the plan?"}),l.jsx("input",{className:"form-input",placeholder:"e.g. chicken stock, granola bars",value:C,autoFocus:!0,onChange:B=>x(B.target.value),onKeyDown:B=>{B.key==="Enter"&&C.trim()&&X()}})]})}),p==="new"&&l.jsxs("div",{style:{paddingBottom:8},children:[n&&n.length>0&&l.jsxs("div",{style:{marginBottom:14},children:[l.jsxs("div",{style:{fontSize:10,letterSpacing:"0.08em",textTransform:"uppercase",color:"var(--ink4)",fontWeight:700,marginBottom:6,cursor:"pointer",userSelect:"none",display:"flex",alignItems:"center",gap:4},onClick:()=>J(B=>!B),children:["From radar",l.jsx("span",{style:{fontSize:8,transition:"transform 0.2s",display:"inline-block",transform:Re?"rotate(0deg)":"rotate(-90deg)"},children:""})]}),Re&&n.map(B=>l.jsxs("div",{onMouseDown:je=>{je.preventDefault(),A(B.title),U(B.url||"")},style:{display:"flex",alignItems:"center",gap:8,padding:"5px 0",borderBottom:"1px solid var(--border2)",cursor:"pointer"},children:[l.jsx("span",{style:{flex:1,fontSize:12,color:b===B.title?"var(--accent)":"var(--ink2)",fontWeight:b===B.title?700:400,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:B.title}),B.url&&l.jsx("span",{style:{fontSize:10,color:"var(--ink4)"},children:""})]},B.id)),Re&&l.jsx("div",{style:{height:12}})]}),l.jsx("div",{style:{fontSize:10,letterSpacing:"0.08em",textTransform:"uppercase",color:"var(--ink4)",fontWeight:700,marginBottom:8},children:"From web"}),l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"form-label",children:"Recipe name"}),l.jsx("input",{className:"form-input",placeholder:"e.g. Roast chicken with lemon",value:b,onChange:B=>A(B.target.value)})]}),l.jsxs("div",{className:"form-field",children:[l.jsxs("label",{className:"form-label",children:["URL ",l.jsx("span",{style:{fontWeight:400,color:"var(--ink4)"},children:"optional"})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("input",{className:"form-input",style:{flex:1},placeholder:"https://",value:R,onChange:B=>U(B.target.value),onBlur:async()=>{if(!R.trim())return;const{thumbnailUrl:B,scrapedData:je}=await kr(R.trim());B&&Ie(B),je&&(!b.trim()&&je.title&&A(je.title),D==="30"&&je.cookTime&&W(String(je.cookTime)),!E.length&&je.ingredients&&q(je.ingredients),je.description&&G(je.description),je.servings&&N(je.servings),je.instructions&&S(je.instructions),je.ingredients&&ye(je.ingredients))}}),Ee&&l.jsx("img",{src:Ee,alt:"",style:{width:40,height:40,borderRadius:6,objectFit:"cover",flexShrink:0}})]})]}),l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"form-label",children:"Cook time (min)"}),l.jsx("input",{className:"form-input",type:"number",value:D,onChange:B=>W(B.target.value)})]}),l.jsxs("div",{className:"form-field",children:[l.jsxs("label",{className:"form-label",children:["Key ingredients ",l.jsx("span",{style:{fontWeight:400,color:"var(--ink4)"},children:"optional"})]}),l.jsxs("div",{className:"ingredient-tags",onClick:B=>B.currentTarget.querySelector("input")?.focus(),children:[E.map((B,je)=>l.jsxs("span",{className:"ingredient-tag",children:[l.jsx("span",{style:{cursor:"pointer"},onClick:Me=>{Me.stopPropagation(),Z(B),q(gt=>gt.filter((bt,Pt)=>Pt!==je))},children:B}),l.jsx("button",{className:"ingredient-tag-remove",onClick:Me=>{Me.stopPropagation(),q(gt=>gt.filter((bt,Pt)=>Pt!==je))},children:""})]},je)),l.jsx("input",{className:"ingredient-tag-input",placeholder:E.length===0?"e.g. salmon fillet":"add more",value:ee,onChange:B=>Z(B.target.value),onKeyDown:B=>{const je=ee.trim().toLowerCase();(B.key==="Enter"||B.key===",")&&je?(B.preventDefault(),E.includes(je)||q(Me=>[...Me,je]),Z("")):B.key==="Backspace"&&!ee&&E.length>0&&q(Me=>Me.slice(0,-1))},onBlur:()=>{const B=ee.trim().toLowerCase();B&&!E.includes(B)&&(q(je=>[...je,B]),Z(""))}})]}),l.jsx("div",{className:"ingredient-tag-hint",children:"Enter or comma to add"})]}),l.jsxs("div",{className:"form-field",children:[l.jsxs("label",{className:"form-label",children:["Prep note ",l.jsx("span",{style:{fontWeight:400,color:"var(--ink4)"},children:"optional"})]}),l.jsx("input",{className:"form-input",placeholder:"e.g. Marinate overnight",value:ve,onChange:B=>Ae(B.target.value)})]}),l.jsxs("div",{style:{marginTop:12,borderTop:"1px solid var(--border2)",paddingTop:12},children:[l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,fontSize:12,color:"var(--ink3)",cursor:"pointer",marginBottom:ge?12:0},children:[l.jsx("input",{type:"checkbox",checked:ge,onChange:B=>oe(B.target.checked),style:{accentColor:"var(--accent)"}}),l.jsx("span",{children:"Save to recipe library"})]}),ge&&l.jsxs("div",{children:[l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"form-label",children:"Source"}),l.jsx("input",{className:"form-input",placeholder:"e.g. NYT Cooking, Smitten Kitchen",value:F,onChange:B=>_e(B.target.value)})]}),l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"form-label",children:"Category"}),l.jsx("div",{className:"cat-select",children:[["dinner","Dinner"],["breakfast","Breakfast & Snacks"],["sweets","Sweets"],...f.map(B=>[B,B])].map(([B,je])=>l.jsx("button",{type:"button",className:"cat-btn"+(we===B?" active":""),onClick:()=>Pe(B),children:je},B))})]}),l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"form-label",children:"Tags"}),l.jsx("div",{className:"tag-toggle-row",children:["fish","vegetarian",...d].map(B=>l.jsx("button",{className:"tag-toggle"+(Ue.includes(B)?" on":""),onClick:()=>Oe(je=>je.includes(B)?je.filter(Me=>Me!==B):[...je,B]),children:B==="fish"?" Fish":B==="vegetarian"?" Veg":B},B))})]})]})]})]})]}),l.jsxs("div",{className:"sheet-footer",children:[p==="note"&&l.jsx("button",{className:"sheet-btn sheet-btn-primary",disabled:!C.trim(),onClick:X,children:"Add"}),p==="new"&&l.jsx("button",{className:"sheet-btn sheet-btn-primary",disabled:!b.trim(),onClick:pe,children:"Add"}),l.jsx("button",{className:"sheet-btn sheet-btn-cancel",onClick:r,children:"Cancel"})]})]})})}function ty({week:s,staples:n,freezer:r,fridge:o,regulars:u,regChecked:d,onToggleRegChecked:f,shopChecked:p,onToggleShopChecked:g,freeShop:v,onAddFreeShop:y,onToggleFreeShop:C}){const[x,b]=$.useState(""),A=n.filter(F=>F.status==="ok").map(F=>F.name.toLowerCase()),R=(r||[]).map(F=>F.item.toLowerCase()),U=(o||[]).map(F=>F.item.toLowerCase()),D=n.filter(F=>F.status==="restock").map(F=>({id:"staple:"+F.name,text:F.name,source:"restock"})),W=(s||[]).filter(F=>F.recipe?.ingredients?.length||F.radarIngredients?.length).flatMap(F=>(F.recipe?.ingredients?.length?F.recipe.ingredients:F.radarIngredients||[]).map(we=>({text:we,source:F.day,id:F.day+":"+we}))).filter(F=>!A.includes(F.text.toLowerCase())&&!R.includes(F.text.toLowerCase())&&!U.includes(F.text.toLowerCase())),E=[],q={};W.forEach(F=>{q[F.text]?q[F.text].source+=", "+F.source:(q[F.text]={...F},E.push(q[F.text]))});const ee=[...D,...E,...v],Z=F=>{F.done!==void 0?C(F.id):g(F.id)};return l.jsxs("div",{className:"week-shop-section",children:[u.length>0&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"week-shop-group-label",children:"Every week"}),l.jsx("div",{className:"week-shop-pills",children:u.map(F=>l.jsx("span",{className:"shop-pill"+(d[F.id]?" done":""),onClick:()=>f(F.id),children:F.name},F.id))})]}),ee.length>0&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"week-shop-group-label",children:"This week"}),l.jsx("div",{className:"week-shop-pills",children:ee.map(F=>l.jsx("span",{className:"shop-pill"+(p[F.id]||F.done?" done":""),onClick:()=>Z(F),children:F.text},F.id))})]}),u.length===0&&ee.length===0&&l.jsx("div",{className:"week-shop-empty",children:"Plan dinners to populate your list."}),l.jsxs("div",{style:{display:"flex",gap:8,marginBottom:10},children:[l.jsx("input",{className:"pantry-add-input",placeholder:"Add item",style:{fontSize:11},value:x,onChange:F=>b(F.target.value),onKeyDown:F=>{F.key==="Enter"&&x.trim()&&(y(x.trim()),b(""))}}),l.jsx("button",{className:"pantry-add-btn",disabled:!x.trim(),style:{fontSize:11,padding:"6px 10px"},onClick:()=>{x.trim()&&(y(x.trim()),b(""))},children:"Add"})]})]})}function ny({goals:s,week:n,recipes:r,onOpenShop:o,shopCount:u,fridge:d,freezer:f,staples:p,regulars:g,regChecked:v,shopChecked:y,freeShop:C,radar:x,customTags:b,customCategories:A,batch:R,prepTasks:U,prepChecked:D,onSlot:W,onSlotRadar:E,onRemove:q,onSlotNote:ee,onAddRecipe:Z,onUpdateRecipe:F,onDeleteRecipe:_e,onWeekReset:we,onUpdateRadar:Pe,onAddBatch:Ue,onRemoveBatch:Oe,onAddPrepTask:ve,onTogglePrepTask:Ae,onTogglePrepChecked:Ee,onToggleRegChecked:Ie,onToggleShopChecked:Te,onAddFreeShop:G,onToggleFreeShop:ne,onAdjustFreezerQty:N}){const[_,S]=$.useState(!0),[se,ye]=$.useState(!0),[ge,oe]=$.useState(!1),[Re,J]=$.useState(""),[te,ie]=$.useState(null),[X,pe]=$.useState(null),[B,je]=$.useState(null),[Me,gt]=$.useState(null),[bt,Pt]=$.useState({}),Kt=n.filter(z=>z.recipe?.prepNote).map(z=>({key:z.day+z.recipe.id,task:z.recipe.prepNote,day:z.day,done:!!D[z.day+z.recipe.id]})),zt=(f||[]).map(z=>z.item.toLowerCase()),Ot=n.filter(z=>z.recipe?.ingredients?.length).flatMap(z=>z.recipe.ingredients.filter(ke=>zt.includes(ke.toLowerCase())).map(ke=>({key:"thaw:"+z.day+":"+ke,ing:ke,day:z.day,done:!!D["thaw:"+z.day+":"+ke]}))),kt=z=>ie({dayIndex:z}),fn=()=>ie(null),En=(z,ke)=>{W(z,ke)},pn=z=>{q(z)},mn=(z,ke)=>{ee(z,ke)},an=z=>{Z(z)},M=async(z,ke)=>{if(E(z,ke,{title:ke.title}),ke.scrapedAt)gt({dayIndex:z,radarItem:ke,scrapedData:null});else if(ke.url){Pt(lt=>({...lt,[z]:!0}));let De=null;try{const lt=await kr(ke.url);De={title:lt.scrapedData?.title||ke.title,cookTime:lt.scrapedData?.cookTime||null,ingredients:lt.scrapedData?.ingredients||[],instructions:lt.scrapedData?.instructions||[],servings:lt.scrapedData?.servings||null,thumbnailUrl:lt.thumbnailUrl||null}}catch(lt){console.error("radar scrape failed",lt)}Pt(lt=>{const on={...lt};return delete on[z],on}),gt({dayIndex:z,radarItem:ke,scrapedData:De})}else gt({dayIndex:z,radarItem:ke,scrapedData:null})},ce=z=>{if(!Me)return;const{dayIndex:ke,radarItem:De}=Me;E(ke,De,{title:z.title,cookTime:z.cookTime,thumbnailUrl:z.thumbnailUrl,ingredients:z.ingredients}),Pe(De.id,{thumbnailUrl:z.thumbnailUrl,cookTime:z.cookTime,ingredients:z.rawIngredients,instructions:z.instructions,servings:z.servings,scrapedAt:new Date().toISOString()}),gt(null)},Fe=()=>{Me&&q(Me.dayIndex),gt(null)},ot=z=>{Ue(z)},Zn=n.slice(0,4),Ht=n.slice(4,7),Tn=n.filter(z=>z.recipe),er=Tn.filter(z=>z.recipe.tags.includes("fish")).length,gn=Tn.filter(z=>z.recipe.tags.includes("vegetarian")).length,Rn=er>=s.fishMin,Pn=gn>=s.vegMin,tr=Rn&&Pn;return l.jsxs("div",{children:[l.jsxs("div",{className:"page-header",children:[l.jsx("div",{children:l.jsxs("div",{className:"page-title",children:["This ",l.jsx("em",{children:"Week"})]})}),l.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[ge?l.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[l.jsx("span",{style:{fontSize:11,color:"var(--ink3)"},children:"Clear everything?"}),l.jsx("button",{className:"shop-fab",style:{background:"var(--accent)",color:"#fff",borderColor:"var(--accent)",fontSize:11,padding:"6px 12px"},onClick:()=>{we(),oe(!1)},children:"Yes"}),l.jsx("button",{className:"shop-fab",style:{fontSize:11,padding:"6px 12px"},onClick:()=>oe(!1),children:"Cancel"})]}):l.jsx("button",{className:"shop-fab",style:{color:"var(--ink4)",fontSize:11,padding:"6px 12px"},onClick:()=>oe(!0),children:" New week"}),l.jsxs("button",{className:"shop-fab",onClick:o,children:[" List",u>0&&l.jsx("span",{className:"shop-count-badge",children:u})]})]})]}),l.jsxs("div",{className:"goal-strip",children:[l.jsxs("div",{className:"goal-item "+(Rn?"met":"unmet"),children:[l.jsx("div",{className:"goal-dot"})," ",er,"/",s.fishMin," fish"]}),l.jsx("div",{className:"goal-divider"}),l.jsxs("div",{className:"goal-item "+(Pn?"met":"unmet"),children:[l.jsx("div",{className:"goal-dot"})," ",gn,"/",s.vegMin," veg"]}),tr&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"goal-divider"}),l.jsxs("div",{className:"goal-item met",style:{marginLeft:"auto"},children:[l.jsx("div",{className:"goal-dot"}),"  goals met"]})]})]}),(()=>{if(!d)return null;const z=n.filter(De=>De.recipe?.ingredients?.length||De.radarIngredients?.length).flatMap(De=>(De.recipe?.ingredients?.length?De.recipe.ingredients:De.radarIngredients||[]).map(on=>on.toLowerCase())),ke=d.filter(De=>De.s==="soon"&&!z.includes(De.item.toLowerCase()));return ke.length?l.jsxs("div",{className:"use-soon-alert",children:[l.jsx("div",{className:"use-soon-alert-icon",children:""}),l.jsxs("div",{className:"use-soon-alert-body",children:[l.jsx("div",{className:"use-soon-alert-title",children:"Use soon  not in this week's recipes"}),l.jsx("div",{className:"use-soon-alert-items",children:ke.map(De=>De.item).join("  ")})]})]}):null})(),l.jsx("div",{className:"section-header",style:{cursor:"default",marginTop:4},children:l.jsxs("div",{className:"section-header-title",children:["This Week's ",l.jsx("em",{children:"Dinners"})]})}),l.jsxs("div",{className:"week-section",children:[l.jsx("div",{className:"week-row",children:Zn.map((z,ke)=>z.recipe||z.isRadar?l.jsx(Yd,{d:z,today:!1,onClick:()=>kt(ke),onDetail:De=>pe(De),readyBy:s.readyBy,scraping:bt[ke]},ke):z.note?l.jsx(Zd,{d:z,today:!1,onClick:()=>kt(ke)},ke):l.jsx(Xd,{d:z,today:!1,onClick:()=>kt(ke)},ke))}),l.jsx("div",{className:"week-row",style:{marginTop:8},children:Ht.map((z,ke)=>z.recipe||z.isRadar?l.jsx(Yd,{d:z,today:!1,onClick:()=>kt(ke+4),onDetail:De=>pe(De),readyBy:s.readyBy,scraping:bt[ke+4]},ke):z.note?l.jsx(Zd,{d:z,today:!1,onClick:()=>kt(ke+4)},ke):l.jsx(Xd,{d:z,today:!1,onClick:()=>kt(ke+4)},ke))})]}),l.jsx("div",{className:"section-header",style:{cursor:"default"},children:l.jsxs("div",{className:"section-header-title",children:["Weekend ",l.jsx("em",{children:"Batch Cooking"})]})}),l.jsx("div",{className:"batch-section",children:l.jsxs("div",{className:"batch-row",children:[R.map(z=>{if(!z)return null;const ke=z.pdfUrl||z.url||null;return l.jsxs("div",{className:"batch-recipe-card",onClick:()=>je(z),children:[l.jsx("button",{className:"batch-card-remove",onClick:De=>{De.stopPropagation(),Oe(z.id)},children:""}),l.jsxs("div",{className:"batch-card-body",children:[l.jsx("div",{className:"batch-card-title",children:z.title}),ke?l.jsxs("a",{className:"batch-card-source linked",href:ke,target:"_blank",rel:"noopener noreferrer",onClick:De=>De.stopPropagation(),children:[z.source,l.jsx("span",{className:"source-arrow",children:" "})]}):l.jsx("div",{className:"batch-card-source",children:z.source}),l.jsx("div",{className:"batch-card-meta",children:l.jsxs("span",{className:"batch-card-time",children:[z.time,"m"]})})]})]},z.id)}),l.jsxs("div",{className:"batch-add-card",onClick:()=>ie({dayIndex:-1,mode:"batch"}),children:[l.jsx("span",{className:"batch-add-card-icon",children:""}),l.jsx("span",{children:"Add batch recipe"})]})]})}),l.jsxs("div",{className:"section-header",onClick:()=>ye(z=>!z),children:[l.jsxs("div",{className:"section-header-title",children:["Weekend ",l.jsx("em",{children:"Prep"})]}),l.jsx("span",{className:"section-header-chevron"+(se?" open":""),children:""})]}),se&&l.jsxs("div",{className:"prep-section",children:[l.jsxs("div",{className:"prep-list",children:[Ot.map(z=>l.jsxs("div",{className:"prep-item",style:{opacity:z.done?.45:1},children:[l.jsx("input",{type:"checkbox",checked:z.done,onChange:()=>Ee(z.key)}),l.jsxs("span",{className:"prep-item-text",style:{textDecoration:z.done?"line-through":"none"},children:["Thaw ",z.ing]}),l.jsxs("span",{className:"prep-recipe-tag",style:{background:"#eaf4fb",color:"#2a6a8a",borderColor:"#a8cfe0"},children:[" ",z.day]})]},z.key)),Kt.map(z=>l.jsxs("div",{className:"prep-item",style:{opacity:z.done?.45:1},children:[l.jsx("input",{type:"checkbox",checked:z.done,onChange:()=>Ee(z.key)}),l.jsx("span",{className:"prep-item-text",style:{textDecoration:z.done?"line-through":"none"},children:z.task}),l.jsxs("span",{className:"prep-recipe-tag",children:["For ",z.day]})]},z.key)),U.map(z=>l.jsxs("div",{className:"prep-item",style:{opacity:z.done?.45:1},children:[l.jsx("input",{type:"checkbox",checked:z.done,onChange:()=>Ae(z.id)}),l.jsx("span",{className:"prep-item-text",style:{textDecoration:z.done?"line-through":"none"},children:z.task}),l.jsx("span",{className:"prep-recipe-tag",style:{opacity:.4},children:"custom"})]},z.id)),Ot.length===0&&Kt.length===0&&U.length===0&&l.jsx("div",{style:{padding:"14px 0",color:"var(--ink4)",fontSize:12,fontStyle:"italic"},children:"Prep tasks will appear here once dinners are planned."})]}),l.jsxs("div",{className:"prep-add-row",children:[l.jsx("input",{className:"prep-add-input",placeholder:"Add a prep task",value:Re,onChange:z=>J(z.target.value),onKeyDown:z=>{z.key==="Enter"&&Re.trim()&&(ve(Re.trim()),J(""))}}),l.jsx("button",{className:"prep-add-btn",disabled:!Re.trim(),onClick:()=>{Re.trim()&&(ve(Re.trim()),J(""))},children:"Add"})]})]}),l.jsxs("div",{className:"section-header",onClick:()=>S(z=>!z),children:[l.jsxs("div",{className:"section-header-title",children:["Shopping ",l.jsx("em",{children:"List"})]}),l.jsx("span",{className:"section-header-chevron"+(_?" open":""),children:""})]}),_&&l.jsx(ty,{week:n,staples:p,freezer:f,fridge:d,regulars:g,regChecked:v,onToggleRegChecked:Ie,shopChecked:y,onToggleShopChecked:Te,freeShop:C,onAddFreeShop:G,onToggleFreeShop:ne}),X&&l.jsx("div",{className:"sheet-overlay",children:l.jsx("div",{className:"detail-overlay-panel",onClick:z=>z.stopPropagation(),children:l.jsx(Al,{recipe:X,onClose:()=>pe(null),onSave:z=>{F(z),pe(z)},onDelete:z=>{_e(z),pe(null)},customTags:b,customCategories:A})})}),B&&l.jsx("div",{className:"sheet-overlay",children:l.jsx("div",{className:"detail-overlay-panel",onClick:z=>z.stopPropagation(),children:l.jsx(Al,{recipe:B,onClose:()=>je(null),onSave:z=>{F(z),je(z)},onDelete:z=>{_e(z),je(null)},customTags:b,customCategories:A})})}),te!==null&&te.mode!=="batch"&&l.jsx(Zv,{targetDay:n[te.dayIndex],dayIndex:te.dayIndex,week:n,recipes:r,radar:x,onClose:fn,onSlot:En,onSlotRadar:M,onRemove:pn,onAddRecipe:an,freezer:f,onAdjustFreezerQty:N,onSlotNote:mn,customTags:b,customCategories:A}),te!==null&&te.mode==="batch"&&l.jsx(ey,{recipes:r,radar:x,onClose:fn,onAdd:ot,onAddRecipe:Z,customTags:b,customCategories:A}),Me&&l.jsx(Xv,{radarItem:Me.radarItem,scrapedData:Me.scrapedData,onConfirm:ce,onCancel:Fe})]})}function ry({item:s,onClose:n,onPromote:r,onPlan:o}){return l.jsx("div",{className:"sheet-overlay",onClick:n,children:l.jsxs("div",{className:"sheet",onClick:u=>u.stopPropagation(),children:[l.jsx("div",{className:"sheet-handle"}),l.jsxs("div",{className:"sheet-header",children:[l.jsx("div",{className:"sheet-title",children:l.jsx("em",{children:s.title})}),s.source&&l.jsx("div",{className:"sheet-subtitle",children:s.source})]}),l.jsxs("div",{className:"sheet-body",children:[s.url&&l.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"detail-link",children:[l.jsx("span",{className:"detail-link-icon",children:""}),l.jsxs("div",{className:"detail-link-text",children:[l.jsx("div",{className:"detail-link-label",children:"Open recipe"}),l.jsx("div",{className:"detail-link-url",children:s.url})]}),l.jsx("span",{className:"detail-link-arrow",children:""})]}),l.jsxs("div",{className:"radar-sheet-actions",style:{marginTop:s.url?16:0},children:[l.jsx("button",{className:"sheet-btn sheet-btn-primary",onClick:r,children:"Add to recipe library"}),o&&l.jsx("button",{className:"sheet-btn",style:{background:"var(--surface2)",border:"1px solid var(--border)",color:"var(--ink2)"},onClick:o,children:"Plan for this week"})]})]}),l.jsx("div",{className:"sheet-footer",children:l.jsx("button",{className:"sheet-btn sheet-btn-cancel",onClick:n,children:"Close"})})]})})}function sy({recipes:s,onAddRecipe:n,onUpdateRecipe:r,onDeleteRecipe:o,radar:u,onAddRadar:d,onRemoveRadar:f,customTags:p=[],customCategories:g=[]}){const[v,y]=$.useState("all"),[C,x]=$.useState(null),[b,A]=$.useState(!1),[R,U]=$.useState(null),[D,W]=$.useState(!1),[E,q]=$.useState(null),[ee,Z]=$.useState(""),[F,_e]=$.useState(""),[we,Pe]=$.useState(""),[Ue,Oe]=$.useState({}),[ve,Ae]=$.useState(!1),Ee=N=>Oe(_=>({..._,[N]:!_[N]})),Ie=[{k:"all",l:"All"},{k:"fish",l:" Fish"},{k:"vegetarian",l:" Veg"}],Te=v==="all"?s:s.filter(N=>N.tags?.includes(v)),G=()=>{ee.trim()&&(d({title:ee.trim(),url:F.trim()||null,source:we.trim()||""}),Z(""),_e(""),Pe(""),W(!1))},ne=N=>{q(N),U(null)};return C?l.jsx(Al,{recipe:C,onClose:()=>x(null),onSave:N=>{r(N),x(N)},onDelete:N=>{o(N),x(null)},customTags:p,customCategories:g}):l.jsxs("div",{className:"tab-section",children:[l.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginBottom:16},children:l.jsxs("div",{children:[l.jsx("div",{className:"page-title",children:"Recipes"}),l.jsxs("div",{className:"page-date",children:[s.length," saved"]})]})}),l.jsxs("div",{className:"radar-shelf",children:[l.jsxs("div",{className:"recipe-library-header",style:{marginTop:0,paddingTop:0,borderTop:"none",marginBottom:ve?0:6,cursor:"pointer",userSelect:"none"},onClick:()=>Ae(N=>!N),children:[l.jsxs("div",{className:"recipe-library-title",children:["On the ",l.jsx("em",{children:"Radar"}),l.jsx("span",{style:{fontFamily:"'Lato',sans-serif",fontSize:10,color:"var(--ink4)",fontStyle:"normal",marginLeft:6,transition:"transform 0.2s",display:"inline-block",transform:ve?"rotate(-90deg)":"rotate(0deg)"},children:""})]}),!D&&!ve&&l.jsx("button",{style:{fontSize:11,color:"var(--ink4)",background:"none",border:"none",cursor:"pointer",padding:0,fontFamily:"inherit"},onClick:N=>{N.stopPropagation(),W(!0)},children:"+ Add"})]}),!ve&&u.length>0&&l.jsx("div",{className:"radar-list",children:u.map(N=>l.jsxs("div",{className:"radar-row",children:[N.url?l.jsx("a",{className:"radar-row-title linked",href:N.url,target:"_blank",rel:"noopener noreferrer",children:N.title}):l.jsx("span",{className:"radar-row-title",children:N.title}),l.jsx("button",{className:"radar-row-promote",onClick:()=>ne(N),title:"Add to library",children:"+ library"}),l.jsx("button",{className:"radar-row-remove",onClick:()=>f(N.id),children:""})]},N.id))}),!ve&&u.length===0&&!D&&l.jsx("div",{style:{fontSize:12,color:"var(--ink4)",fontStyle:"italic"},children:"Nothing yet  add recipes you want to try."}),!ve&&D&&l.jsxs("div",{style:{marginTop:8,display:"flex",gap:6,alignItems:"center",flexWrap:"wrap"},children:[l.jsx("input",{className:"pantry-add-input",placeholder:"Recipe name",value:ee,autoFocus:!0,style:{flex:"2 1 140px"},onChange:N=>Z(N.target.value),onKeyDown:N=>N.key==="Enter"&&G()}),l.jsx("input",{className:"pantry-add-input",placeholder:"URL (optional)",value:F,style:{flex:"3 1 180px"},onChange:N=>_e(N.target.value),onKeyDown:N=>N.key==="Enter"&&G()}),l.jsx("button",{className:"pantry-add-btn",disabled:!ee.trim(),onClick:G,children:"Add"}),l.jsx("button",{className:"sheet-btn sheet-btn-cancel",style:{padding:"6px 10px",fontSize:12},onClick:()=>{W(!1),Z(""),_e(""),Pe("")},children:"Cancel"})]})]}),l.jsxs("div",{className:"recipe-library-header",children:[l.jsxs("div",{className:"recipe-library-title",children:["Recipe ",l.jsx("em",{children:"Library"})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("div",{className:"filter-row",style:{margin:0,flex:"none"},children:Ie.map(N=>l.jsx("button",{className:"fpill"+(v===N.k?" active":""),onClick:()=>y(N.k),children:N.l},N.k))}),l.jsx("button",{className:"btn btn-primary",onClick:()=>A(!0),children:"+ Add"})]})]}),[{key:"dinner",label:"Dinner"},{key:"breakfast",label:"Breakfast & Snacks"},{key:"sweets",label:"Sweets"},...g.map(_=>({key:_,label:_})),{key:"",label:"Uncategorized"}].map(({key:_,label:S})=>{const se=_||"uncat",ye=Te.filter(oe=>_===""?!oe.category||!["dinner","breakfast","sweets"].includes(oe.category):oe.category===_);if(!ye.length)return null;const ge=Ue[se];return l.jsxs("div",{children:[l.jsxs("div",{className:"recipe-section-label",onClick:()=>Ee(se),children:[l.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[S,!ge&&l.jsx("span",{className:"recipe-section-count",children:ye.length})]}),l.jsx("span",{style:{fontSize:9,color:"var(--ink4)",transition:"transform 0.2s",display:"inline-block",transform:ge?"rotate(-90deg)":"rotate(0deg)"},children:""})]}),!ge&&l.jsx("div",{className:"rlist",children:ye.map(oe=>l.jsxs("div",{className:"rcard",onClick:()=>x(oe),children:[oe.thumbnailUrl?l.jsx("img",{className:"rcard-thumb",src:oe.thumbnailUrl,alt:""}):l.jsx("div",{className:"rcard-placeholder",children:""}),l.jsxs("div",{className:"rcard-body",children:[l.jsx("div",{className:"rl-title",children:oe.title}),l.jsxs("div",{className:"rl-meta",children:[oe.source,"  ",oe.time," min"]}),oe.tags?.length>0&&l.jsx("div",{className:"rl-tags",children:l.jsx(Dl,{tags:oe.tags})})]})]},oe.id))})]},se)}),R&&l.jsx(ry,{item:R,onClose:()=>U(null),onPromote:()=>ne(R)}),b&&l.jsx(Qd,{onClose:()=>A(!1),onAdd:N=>n(N),customTags:p,customCategories:g}),E&&l.jsx(Qd,{prefill:{title:E.title,source:E.source||"",url:E.url||""},onClose:()=>q(null),onAdd:N=>{n(N),f(E.id),q(null)},customTags:p,customCategories:g})]})}function iy({week:s,recipes:n,staples:r,onAddStaple:o,onCycleStaple:u,onRemoveStaple:d,regulars:f,onAddRegular:p,onRemoveRegular:g,fridge:v,onAddFridge:y,onCycleFridge:C,onRemoveFridge:x,freezer:b,onAddFreezer:A,onAdjustFreezerQty:R,onRemoveFreezer:U}){const[D,W]=$.useState(""),[E,q]=$.useState(""),[ee,Z]=$.useState(""),[F,_e]=$.useState(""),we=N=>g(N),Pe=N=>{const _=N.trim().toLowerCase();_&&!f.find(S=>S.name===_)&&p(_),q("")},Ue=N=>C(N),Oe=N=>x(N),ve=N=>{const _=N.trim();_&&y(_,"ok"),Z("")},Ae=(N,_)=>R(N,_),Ee=N=>U(N),Ie=N=>{const _=N.trim();_&&A(_,1),_e("")},Te=N=>u(N),G=N=>{const _=N.trim().toLowerCase();_&&!r.find(S=>S.name===_)&&o(_),W("")},ne=N=>d(N);return l.jsxs("div",{className:"tab-section",children:[l.jsxs("div",{style:{marginBottom:14},children:[l.jsx("div",{className:"page-title",children:"Pantry"}),l.jsx("div",{className:"page-date",children:"Regulars  fridge  freezer  staples"})]}),l.jsx("div",{className:"pantry-section-label",children:"Weekly regulars"}),l.jsxs("div",{className:"inv-card",style:{marginBottom:10},children:[l.jsx("div",{className:"pantry-pill-row",children:f.map(N=>l.jsxs("span",{className:"pantry-pill",children:[N.name,l.jsx("button",{className:"pp-remove",onClick:_=>{_.stopPropagation(),we(N.id)},children:""})]},N.id))}),l.jsxs("div",{className:"pantry-pill-add",children:[l.jsx("input",{className:"pantry-add-input",placeholder:"Add a weekly regular",value:E,onChange:N=>q(N.target.value),onKeyDown:N=>{N.key==="Enter"&&Pe(E)}}),l.jsx("button",{className:"pantry-add-btn",disabled:!E.trim(),onClick:()=>Pe(E),children:"Add"})]})]}),l.jsx("div",{className:"pantry-section-label",children:"Fridge"}),l.jsxs("div",{className:"inv-card",style:{marginBottom:10},children:[l.jsx("div",{className:"pantry-pill-row",children:v.map(N=>l.jsxs("span",{className:"pantry-pill fridge-"+N.s,onClick:()=>Ue(N.id),children:[N.item,l.jsx("button",{className:"pp-remove",onClick:_=>{_.stopPropagation(),Oe(N.id)},children:""})]},N.id))}),l.jsxs("div",{className:"pantry-pill-add",children:[l.jsx("input",{className:"pantry-add-input",placeholder:"Add fridge item",value:ee,onChange:N=>Z(N.target.value),onKeyDown:N=>{N.key==="Enter"&&ve(ee)}}),l.jsx("button",{className:"pantry-add-btn",disabled:!ee.trim(),onClick:()=>ve(ee),children:"Add"})]}),l.jsx("div",{style:{fontSize:10,color:"var(--ink4)",marginTop:6,fontStyle:"italic"},children:"Tap to toggle good  use soon"})]}),l.jsx("div",{className:"pantry-section-label",children:"Freezer"}),l.jsxs("div",{className:"inv-card",style:{marginBottom:10},children:[b.map(N=>l.jsxs("div",{className:"pantry-row",children:[l.jsx("span",{className:"pantry-row-name",children:N.item}),l.jsxs("div",{className:"fz-stepper",children:[l.jsx("button",{className:"fz-stepper-btn",onClick:()=>Ae(N.id,-1),children:""}),l.jsx("span",{className:"fz-stepper-val",children:N.qty}),l.jsx("button",{className:"fz-stepper-btn",onClick:()=>Ae(N.id,1),children:"+"}),l.jsx("span",{className:"fz-unit",children:"lb"})]}),l.jsx("button",{className:"pantry-row-remove",onClick:()=>Ee(N.id),children:""})]},N.id)),l.jsxs("div",{className:"pantry-add-row",children:[l.jsx("input",{className:"pantry-add-input",placeholder:"Add freezer item",value:F,onChange:N=>_e(N.target.value),onKeyDown:N=>{N.key==="Enter"&&Ie(F)}}),l.jsx("button",{className:"pantry-add-btn",disabled:!F.trim(),onClick:()=>Ie(F),children:"Add"})]})]}),l.jsx("div",{className:"pantry-section-label",children:"Staples"}),l.jsxs("div",{className:"inv-card",children:[l.jsx("div",{className:"pantry-pill-row",children:r.map(N=>l.jsxs("span",{className:"pantry-pill"+(N.status==="restock"?" fridge-soon":" fridge-ok"),onClick:()=>Te(N.name),children:[N.name,l.jsx("button",{className:"pp-remove",onClick:_=>{_.stopPropagation(),ne(N.name)},children:""})]},N.name))}),l.jsxs("div",{className:"pantry-pill-add",children:[l.jsx("input",{className:"pantry-add-input",placeholder:"Add a staple",value:D,onChange:N=>W(N.target.value),onKeyDown:N=>{N.key==="Enter"&&G(D)}}),l.jsx("button",{className:"pantry-add-btn",disabled:!D.trim(),onClick:()=>G(D),children:"Add"})]}),l.jsx("div",{style:{fontSize:10,color:"var(--ink4)",marginTop:6,fontStyle:"italic"},children:"Tap to toggle stocked  needs restock"})]})]})}function ay({goals:s,updateGoal:n,customTags:r,onAddCustomTag:o,onRemoveCustomTag:u,customCategories:d,onAddCustomCategory:f,onRemoveCustomCategory:p,recipes:g,setRecipes:v}){const[y,C]=$.useState(""),[x,b]=$.useState(""),[A,R]=$.useState(null),[U,D]=$.useState(!1),W=async()=>{const E=g.filter(ee=>ee.url&&!ee.thumbnailUrl);if(!E.length){R("All thumbnails up to date"),setTimeout(()=>R(null),2e3);return}D(!0),R(`Fetching ${E.length} thumbnail${E.length>1?"s":""}`);let q=E.length;await Promise.all(E.map(async ee=>{const{thumbnailUrl:Z}=await kr(ee.url);if(Z){const F={...ee,thumbnailUrl:Z};v(_e=>_e.map(we=>we.id===ee.id?F:we)),vh(ee.id,F)}q--,q>0&&R(`Fetching ${q} thumbnail${q>1?"s":""}`)})),D(!1),R("Done"),setTimeout(()=>R(null),2e3)};return l.jsxs("div",{className:"tab-section",children:[l.jsxs("div",{style:{marginBottom:18},children:[l.jsx("div",{className:"page-title",children:"Preferences"}),l.jsx("div",{className:"page-date",children:"Weekly goals & reminders"})]}),l.jsx("div",{style:{fontFamily:"'Playfair Display',serif",fontSize:13,fontStyle:"italic",color:"var(--ink3)",marginBottom:10},children:"Tracked automatically"}),l.jsxs("div",{className:"pref-card",style:{marginBottom:16},children:[l.jsxs("div",{className:"pref-item",children:[l.jsx("span",{className:"pi-icon",children:""}),l.jsx("span",{className:"pi-text",children:"Fish dinners per week"}),l.jsxs("div",{className:"pi-stepper",children:[l.jsx("button",{className:"pi-stepper-btn",disabled:s.fishMin<=0,onClick:()=>n("fishMin",-1),children:""}),l.jsx("div",{className:"pi-stepper-val",children:s.fishMin}),l.jsx("button",{className:"pi-stepper-btn",disabled:s.fishMin>=7,onClick:()=>n("fishMin",1),children:"+"})]})]}),l.jsxs("div",{className:"pref-item",children:[l.jsx("span",{className:"pi-icon",children:""}),l.jsx("span",{className:"pi-text",children:"Vegetarian dinners per week"}),l.jsxs("div",{className:"pi-stepper",children:[l.jsx("button",{className:"pi-stepper-btn",disabled:s.vegMin<=0,onClick:()=>n("vegMin",-1),children:""}),l.jsx("div",{className:"pi-stepper-val",children:s.vegMin}),l.jsx("button",{className:"pi-stepper-btn",disabled:s.vegMin>=7,onClick:()=>n("vegMin",1),children:"+"})]})]})]}),l.jsx("div",{style:{fontFamily:"'Playfair Display',serif",fontSize:13,fontStyle:"italic",color:"var(--ink3)",marginBottom:10},children:"Timing"}),l.jsx("div",{className:"pref-card",children:l.jsxs("div",{className:"pref-item",children:[l.jsx("span",{className:"pi-icon",children:""}),l.jsx("span",{className:"pi-text",children:"Dinner ready by"}),l.jsxs("div",{className:"pi-stepper",children:[l.jsx("button",{className:"pi-stepper-btn",onClick:()=>n("readyBy",-15),children:""}),l.jsx("div",{className:"pi-stepper-val",style:{width:42,fontSize:12},children:Jv(s.readyBy)}),l.jsx("button",{className:"pi-stepper-btn",onClick:()=>n("readyBy",15),children:"+"})]})]})}),l.jsx("div",{className:"pantry-section-label",style:{marginTop:24},children:"Tags"}),l.jsxs("div",{className:"inv-card",style:{marginBottom:12},children:[l.jsxs("div",{className:"pantry-pill-row",style:{marginBottom:r.length?8:0},children:[["fish","vegetarian"].map(E=>l.jsx("span",{className:"pantry-pill",style:{opacity:.5,cursor:"default"},children:E==="fish"?" Fish":" Veg"},E)),r.map(E=>l.jsxs("span",{className:"pantry-pill",children:[E,l.jsx("button",{className:"pp-remove",onClick:()=>u(E),children:""})]},E))]}),l.jsxs("div",{className:"pantry-pill-add",children:[l.jsx("input",{className:"pantry-add-input",placeholder:"Add a tag",value:y,onChange:E=>C(E.target.value),onKeyDown:E=>{E.key==="Enter"&&y.trim()&&!["fish","vegetarian",...r].includes(y.trim().toLowerCase())&&(o(y.trim().toLowerCase()),C(""))}}),l.jsx("button",{className:"pantry-add-btn",disabled:!y.trim(),onClick:()=>{const E=y.trim().toLowerCase();E&&!["fish","vegetarian",...r].includes(E)&&(o(E),C(""))},children:"Add"})]})]}),l.jsx("div",{className:"pantry-section-label",children:"Categories"}),l.jsxs("div",{className:"inv-card",children:[l.jsxs("div",{className:"pantry-pill-row",style:{marginBottom:d.length?8:0},children:[[["dinner","Dinner"],["breakfast","Breakfast & Snacks"],["sweets","Sweets"]].map(([E,q])=>l.jsx("span",{className:"pantry-pill",style:{opacity:.5,cursor:"default"},children:q},E)),d.map(E=>l.jsxs("span",{className:"pantry-pill",children:[E,l.jsx("button",{className:"pp-remove",onClick:()=>p(E),children:""})]},E))]}),l.jsxs("div",{className:"pantry-pill-add",children:[l.jsx("input",{className:"pantry-add-input",placeholder:"Add a category",value:x,onChange:E=>b(E.target.value),onKeyDown:E=>{const q=["dinner","breakfast","sweets"];E.key==="Enter"&&x.trim()&&!q.includes(x.trim().toLowerCase())&&!d.includes(x.trim())&&(f(x.trim()),b(""))}}),l.jsx("button",{className:"pantry-add-btn",disabled:!x.trim(),onClick:()=>{const E=["dinner","breakfast","sweets"],q=x.trim();q&&!E.includes(q.toLowerCase())&&!d.includes(q)&&(f(q),b(""))},children:"Add"})]})]}),l.jsx("div",{className:"pantry-section-label",style:{marginTop:24},children:"Thumbnails"}),l.jsxs("div",{className:"inv-card",style:{padding:"12px 14px",display:"flex",alignItems:"center",gap:10},children:[l.jsx("button",{className:"btn btn-primary",style:{fontSize:12,padding:"8px 14px"},disabled:U,onClick:W,children:"Fetch missing thumbnails"}),A&&l.jsx("span",{style:{fontSize:12,color:"var(--ink3)"},children:A})]})]})}const oy=[{id:"week",icon:"",label:"Week"},{id:"recipes",icon:"",label:"Recipes"},{id:"pantry",icon:"",label:"Pantry"},{id:"prefs",icon:"",label:"Prefs"}];function ly(){const[s,n]=$.useState(!0),[r,o]=$.useState(()=>localStorage.getItem("mp-tab")||"week"),u=O=>{o(O),localStorage.setItem("mp-tab",O)},[d,f]=$.useState({fishMin:1,vegMin:2,readyBy:"18:30"}),[p,g]=$.useState([]),[v,y]=$.useState([]),[C,x]=$.useState([]),[b,A]=$.useState([]),[R,U]=$.useState({}),[D,W]=$.useState({}),[E,q]=$.useState([]),[ee,Z]=$.useState(!1),[F,_e]=$.useState([]),[we,Pe]=$.useState([]),[Ue,Oe]=$.useState([]),[ve,Ae]=$.useState([]),[Ee,Ie]=$.useState([]),[Te,G]=$.useState([]),[ne,N]=$.useState([]),[_,S]=$.useState({});$.useEffect(()=>{async function O(){try{const[Ge,Gt,ja,nr,Sr,xr,is,Na,Ca,Ea,vn,ei,ti,Ta,ni,ri]=await Promise.all([Xg(),Kd(),Hd(),iv(),cv(),fv(),gv(),_v(),xv(),jv(),Ev(),Jd(),Ov(),Iv(),Dv(),Fv()]);y(Ge.map(_a)),g(Gt),G(ja),Pe(nr),_e(Sr),Ie(xr),x(is),A(Na),f(Ca),Oe(Ea),Ae(vn),W(ei),U(ti),q(Ta),N(ni),S(ri)}catch(Ge){console.error("loadAll failed",Ge)}n(!1)}O();const L=ue.channel("week_plan").on("postgres_changes",{event:"*",schema:"public",table:"week_plan"},()=>{Kd().then(g)}).subscribe(),V=ue.channel("batch_prep").on("postgres_changes",{event:"*",schema:"public",table:"batch_prep"},()=>{Hd().then(G)}).subscribe(),de=ue.channel("shop_checked").on("postgres_changes",{event:"*",schema:"public",table:"shop_checked"},()=>{Jd().then(W)}).subscribe();return()=>{ue.removeChannel(L),ue.removeChannel(V),ue.removeChannel(de)}},[]);const se=async O=>{try{const L=await Zg(O);y(V=>[...V,_a(L)])}catch(L){console.error(L)}},ye=async O=>{y(L=>L.map(V=>V.id===O.id?O:V));try{await vh(O.id,O)}catch(L){console.error(L)}},ge=async O=>{y(L=>L.filter(V=>V.id!==O));try{await ev(O)}catch(L){console.error(L)}},oe={isRadar:!1,radarTitle:null,radarCookTime:null,radarThumbnailUrl:null,radarIngredients:null},Re=async(O,L)=>{if(g(V=>V.map((de,Ge)=>Ge===O?{...de,recipe:L,note:null,...oe}:de)),L._unsaved)try{await Bs(at,O,{recipeId:null,note:null,radarTitle:L.title,cookTime:L.time||null,thumbnailUrl:L.thumbnailUrl||null,ingredients:L.ingredients||null})}catch(V){console.error(V)}else try{await Bs(at,O,{recipeId:L.id,note:null,radarTitle:null,cookTime:null,thumbnailUrl:null,ingredients:null})}catch(V){console.error(V)}},J=async O=>{g(L=>L.map((V,de)=>de===O?{...V,recipe:null,note:null,...oe}:V));try{await Bs(at,O,{recipeId:null,note:null,radarTitle:null,cookTime:null,thumbnailUrl:null,ingredients:null})}catch(L){console.error(L)}},te=async(O,L)=>{g(V=>V.map((de,Ge)=>Ge===O?{...de,note:L.trim()||null,recipe:null,...oe}:de));try{await Bs(at,O,{recipeId:null,note:L.trim()||null,radarTitle:null,cookTime:null,thumbnailUrl:null,ingredients:null})}catch(V){console.error(V)}},ie=async()=>{g(Kv.map(O=>({day:O,recipe:null,note:null,...oe}))),G([]),U({});try{await tv(at),await sv(at)}catch(O){console.error(O)}},X=async O=>{G(L=>[...L,O]);try{await nv(at,O.id)}catch(L){console.error(L)}},pe=async O=>{G(L=>L.filter(V=>V.id!==O));try{await rv(at,O)}catch(L){console.error(L)}},B=async O=>{try{const L=await av(O);Pe(V=>[L,...V])}catch(L){console.error(L)}},je=async O=>{Pe(L=>L.filter(V=>V.id!==O));try{await lv(O)}catch(L){console.error(L)}},Me=async(O,L,V)=>{g(de=>de.map((Ge,Gt)=>Gt===O?{...Ge,recipe:null,note:null,isRadar:!0,radarTitle:V.title||L.title,radarCookTime:V.cookTime||L.cookTime||null,radarThumbnailUrl:V.thumbnailUrl||L.thumbnailUrl||null,radarIngredients:V.ingredients||null}:Ge));try{await Bs(at,O,{recipeId:null,note:null,radarTitle:V.title||L.title,cookTime:V.cookTime||L.cookTime||null,thumbnailUrl:V.thumbnailUrl||L.thumbnailUrl||null,ingredients:V.ingredients||null})}catch(de){console.error(de)}},gt=async(O,L)=>{Pe(V=>V.map(de=>de.id===O?{...de,...L}:de));try{await ov(O,L)}catch(V){console.error(V)}},bt=(O,L)=>f(V=>{let de;if(O==="readyBy"){const Ge=kh(V.readyBy)+L,Gt=Math.max(960,Math.min(1260,Ge));de={...V,readyBy:Sh(Gt)}}else de={...V,[O]:Math.max(0,Math.min(7,V[O]+L))};return bv(de),de}),Pt=async(O,L)=>{try{const V=await uv(O,L);_e(de=>[...de,V])}catch(V){console.error(V)}},Kt=async O=>{let L;_e(V=>V.map(de=>de.id===O?(L=de.s==="ok"?"soon":"ok",{...de,s:L}):de));try{await dv(O,{s:L})}catch(V){console.error(V)}},zt=async O=>{_e(L=>L.filter(V=>V.id!==O));try{await hv(O)}catch(L){console.error(L)}},Ot=async(O,L)=>{try{const V=await pv(O,L);Ie(de=>[...de,V])}catch(V){console.error(V)}},kt=async(O,L)=>{let V;Ie(de=>de.map(Ge=>Ge.id===O?(V=Math.max(0,(Ge.qty??1)+L),{...Ge,qty:V}):Ge).filter(Ge=>Ge.qty>0));try{V===0?await Gd(O):await mv(O,{qty:V})}catch(de){console.error(de)}},fn=async O=>{Ie(L=>L.filter(V=>V.id!==O));try{await Gd(O)}catch(L){console.error(L)}},En=async O=>{x(L=>[...L,{name:O,status:"ok"}]);try{await vv(O)}catch(L){console.error(L)}},pn=async O=>{let L;x(V=>V.map(de=>de.name===O?(L=de.status==="ok"?"restock":"ok",{...de,status:L}):de));try{await yv(O,L)}catch(V){console.error(V)}},mn=async O=>{x(L=>L.filter(V=>V.name!==O));try{await wv(O)}catch(L){console.error(L)}},an=async O=>{try{const L=await kv(O);A(V=>[...V,L])}catch(L){console.error(L)}},M=async O=>{A(L=>L.filter(V=>V.id!==O));try{await Sv(O)}catch(L){console.error(L)}},ce=async O=>{Oe(L=>[...L,O]);try{await Nv(O)}catch(L){console.error(L)}},Fe=async O=>{Oe(L=>L.filter(V=>V!==O));try{await Cv(O)}catch(L){console.error(L)}},ot=async O=>{Ae(L=>[...L,O]);try{await Tv(O)}catch(L){console.error(L)}},Zn=async O=>{Ae(L=>L.filter(V=>V!==O));try{await Rv(O)}catch(L){console.error(L)}},Ht=async O=>{const L=D[O];W(V=>L?Object.fromEntries(Object.entries(V).filter(([de])=>de!==O)):{...V,[O]:!0});try{await Pv(at,O,!L)}catch(V){console.error(V)}},Tn=async O=>{const L=R[O];U(V=>L?Object.fromEntries(Object.entries(V).filter(([de])=>de!==O)):{...V,[O]:!0});try{await Av(at,O,!L)}catch(V){console.error(V)}},er=async O=>{try{const L=await Lv(O);q(V=>[...V,L])}catch(L){console.error(L)}},gn=async O=>{let L;q(V=>V.map(de=>de.id===O?(L=!de.done,{...de,done:L}):de));try{await Uv(O,{done:L})}catch(V){console.error(V)}},Rn=async O=>{try{const L=await $v(at,O);N(V=>[...V,L])}catch(L){console.error(L)}},Pn=async O=>{let L;N(V=>V.map(de=>de.id===O?(L=!de.done,{...de,done:L}):de));try{await zv(O,{done:L})}catch(V){console.error(V)}},tr=async O=>{const L=_[O];S(V=>L?Object.fromEntries(Object.entries(V).filter(([de])=>de!==O)):{...V,[O]:!0});try{await Bv(at,O,!L)}catch(V){console.error(V)}};if(s)return l.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",fontFamily:"Playfair Display,serif",fontSize:18,color:"var(--ink3)"},children:"Loading"});const z=C.filter(O=>O.status==="ok").map(O=>O.name.toLowerCase()),ke=Ee.map(O=>O.item.toLowerCase()),De=F.map(O=>O.item.toLowerCase()),lt=p.filter(O=>O.recipe?.ingredients?.length).flatMap(O=>O.recipe.ingredients).filter(O=>!z.includes(O.toLowerCase())&&!ke.includes(O.toLowerCase())&&!De.includes(O.toLowerCase())),on=C.filter(O=>O.status==="restock").length,ss=b.filter(O=>!R[O.id]).length;ss+[...new Set(lt)].filter(O=>!D["Mon:"+O]&&!D["Tue:"+O]).length+on+E.filter(O=>!O.done).length;const Zs={week:l.jsx(ny,{goals:d,week:p,recipes:v,onOpenShop:()=>Z(!0),shopCount:ss+on,fridge:F,freezer:Ee,staples:C,regulars:b,regChecked:R,shopChecked:D,freeShop:E,radar:we,customTags:Ue,customCategories:ve,batch:Te,prepTasks:ne,prepChecked:_,onSlot:Re,onSlotRadar:Me,onRemove:J,onSlotNote:te,onAddRecipe:se,onUpdateRecipe:ye,onDeleteRecipe:ge,onWeekReset:ie,onUpdateRadar:gt,onAddBatch:X,onRemoveBatch:pe,onAddPrepTask:Rn,onTogglePrepTask:Pn,onTogglePrepChecked:tr,onToggleRegChecked:Tn,onToggleShopChecked:Ht,onAddFreeShop:er,onToggleFreeShop:gn,onAdjustFreezerQty:kt}),recipes:l.jsx(sy,{recipes:v,onAddRecipe:se,onUpdateRecipe:ye,onDeleteRecipe:ge,radar:we,onAddRadar:B,onRemoveRadar:je,customTags:Ue,customCategories:ve}),pantry:l.jsx(iy,{week:p,recipes:v,staples:C,onAddStaple:En,onCycleStaple:pn,onRemoveStaple:mn,regulars:b,onAddRegular:an,onRemoveRegular:M,fridge:F,onAddFridge:Pt,onCycleFridge:Kt,onRemoveFridge:zt,freezer:Ee,onAddFreezer:Ot,onAdjustFreezerQty:kt,onRemoveFreezer:fn}),prefs:l.jsx(ay,{goals:d,updateGoal:bt,customTags:Ue,onAddCustomTag:ce,onRemoveCustomTag:Fe,customCategories:ve,onAddCustomCategory:ot,onRemoveCustomCategory:Zn,recipes:v,setRecipes:y})};return l.jsx(l.Fragment,{children:l.jsxs("div",{className:"app",children:[l.jsx("div",{className:"content",children:Zs[r]}),ee&&l.jsx(Yv,{onClose:()=>Z(!1),week:p,staples:C,freezer:Ee,fridge:F,regulars:b,onAddRegular:an,onRemoveRegular:M,regChecked:R,onToggleRegChecked:Tn,shopChecked:D,onToggleShopChecked:Ht,freeShop:E,onAddFreeShop:er,onToggleFreeShop:gn}),l.jsx("nav",{className:"tabs",children:oy.map(O=>l.jsxs("div",{className:"tab"+(r===O.id?" active":""),onClick:()=>u(O.id),children:[l.jsx("span",{className:"tab-icon",children:O.icon}),l.jsx("span",{className:"tab-label",children:O.label})]},O.id))})]})})}kp.createRoot(document.getElementById("root")).render(l.jsx($.StrictMode,{children:l.jsx(ly,{})}));
