(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const c of u)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function r(u){const c={};return u.integrity&&(c.integrity=u.integrity),u.referrerPolicy&&(c.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?c.credentials="include":u.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(u){if(u.ep)return;u.ep=!0;const c=r(u);fetch(u.href,c)}})();var il={exports:{}},Us={},al={exports:{}},ke={};var ud;function lp(){if(ud)return ke;ud=1;var i=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),C=Symbol.iterator;function k(_){return _===null||typeof _!="object"?null:(_=C&&_[C]||_["@@iterator"],typeof _=="function"?_:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,A={};function I(_,x,se){this.props=_,this.context=x,this.refs=A,this.updater=se||b}I.prototype.isReactComponent={},I.prototype.setState=function(_,x){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,x,"setState")},I.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function F(){}F.prototype=I.prototype;function q(_,x,se){this.props=_,this.context=x,this.refs=A,this.updater=se||b}var D=q.prototype=new F;D.constructor=q,R(D,I.prototype),D.isPureReactComponent=!0;var Y=Array.isArray,V=Object.prototype.hasOwnProperty,Q={current:null},U={key:!0,ref:!0,__self:!0,__source:!0};function ue(_,x,se){var le,ge={},ce=null,_e=null;if(x!=null)for(le in x.ref!==void 0&&(_e=x.ref),x.key!==void 0&&(ce=""+x.key),x)V.call(x,le)&&!U.hasOwnProperty(le)&&(ge[le]=x[le]);var xe=arguments.length-2;if(xe===1)ge.children=se;else if(1<xe){for(var Pe=Array(xe),Be=0;Be<xe;Be++)Pe[Be]=arguments[Be+2];ge.children=Pe}if(_&&_.defaultProps)for(le in xe=_.defaultProps,xe)ge[le]===void 0&&(ge[le]=xe[le]);return{$$typeof:i,type:_,key:ce,ref:_e,props:ge,_owner:Q.current}}function we(_,x){return{$$typeof:i,type:_.type,key:x,ref:_.ref,props:_.props,_owner:_._owner}}function je(_){return typeof _=="object"&&_!==null&&_.$$typeof===i}function Ie(_){var x={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(se){return x[se]})}var Ce=/\/+/g;function Se(_,x){return typeof _=="object"&&_!==null&&_.key!=null?Ie(""+_.key):x.toString(36)}function Re(_,x,se,le,ge){var ce=typeof _;(ce==="undefined"||ce==="boolean")&&(_=null);var _e=!1;if(_===null)_e=!0;else switch(ce){case"string":case"number":_e=!0;break;case"object":switch(_.$$typeof){case i:case n:_e=!0}}if(_e)return _e=_,ge=ge(_e),_=le===""?"."+Se(_e,0):le,Y(ge)?(se="",_!=null&&(se=_.replace(Ce,"$&/")+"/"),Re(ge,x,se,"",function(Be){return Be})):ge!=null&&(je(ge)&&(ge=we(ge,se+(!ge.key||_e&&_e.key===ge.key?"":(""+ge.key).replace(Ce,"$&/")+"/")+_)),x.push(ge)),1;if(_e=0,le=le===""?".":le+":",Y(_))for(var xe=0;xe<_.length;xe++){ce=_[xe];var Pe=le+Se(ce,xe);_e+=Re(ce,x,se,Pe,ge)}else if(Pe=k(_),typeof Pe=="function")for(_=Pe.call(_),xe=0;!(ce=_.next()).done;)ce=ce.value,Pe=le+Se(ce,xe++),_e+=Re(ce,x,se,Pe,ge);else if(ce==="object")throw x=String(_),Error("Objects are not valid as a React child (found: "+(x==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":x)+"). If you meant to render a collection of children, use an array instead.");return _e}function Oe(_,x,se){if(_==null)return _;var le=[],ge=0;return Re(_,le,"","",function(ce){return x.call(se,ce,ge++)}),le}function be(_){if(_._status===-1){var x=_._result;x=x(),x.then(function(se){(_._status===0||_._status===-1)&&(_._status=1,_._result=se)},function(se){(_._status===0||_._status===-1)&&(_._status=2,_._result=se)}),_._status===-1&&(_._status=0,_._result=x)}if(_._status===1)return _._result.default;throw _._result}var J={current:null},z={transition:null},Z={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:z,ReactCurrentOwner:Q};function E(){throw Error("act(...) is not supported in production builds of React.")}return ke.Children={map:Oe,forEach:function(_,x,se){Oe(_,function(){x.apply(this,arguments)},se)},count:function(_){var x=0;return Oe(_,function(){x++}),x},toArray:function(_){return Oe(_,function(x){return x})||[]},only:function(_){if(!je(_))throw Error("React.Children.only expected to receive a single React element child.");return _}},ke.Component=I,ke.Fragment=r,ke.Profiler=u,ke.PureComponent=q,ke.StrictMode=o,ke.Suspense=g,ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,ke.act=E,ke.cloneElement=function(_,x,se){if(_==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_+".");var le=R({},_.props),ge=_.key,ce=_.ref,_e=_._owner;if(x!=null){if(x.ref!==void 0&&(ce=x.ref,_e=Q.current),x.key!==void 0&&(ge=""+x.key),_.type&&_.type.defaultProps)var xe=_.type.defaultProps;for(Pe in x)V.call(x,Pe)&&!U.hasOwnProperty(Pe)&&(le[Pe]=x[Pe]===void 0&&xe!==void 0?xe[Pe]:x[Pe])}var Pe=arguments.length-2;if(Pe===1)le.children=se;else if(1<Pe){xe=Array(Pe);for(var Be=0;Be<Pe;Be++)xe[Be]=arguments[Be+2];le.children=xe}return{$$typeof:i,type:_.type,key:ge,ref:ce,props:le,_owner:_e}},ke.createContext=function(_){return _={$$typeof:f,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_.Provider={$$typeof:c,_context:_},_.Consumer=_},ke.createElement=ue,ke.createFactory=function(_){var x=ue.bind(null,_);return x.type=_,x},ke.createRef=function(){return{current:null}},ke.forwardRef=function(_){return{$$typeof:p,render:_}},ke.isValidElement=je,ke.lazy=function(_){return{$$typeof:w,_payload:{_status:-1,_result:_},_init:be}},ke.memo=function(_,x){return{$$typeof:v,type:_,compare:x===void 0?null:x}},ke.startTransition=function(_){var x=z.transition;z.transition={};try{_()}finally{z.transition=x}},ke.unstable_act=E,ke.useCallback=function(_,x){return J.current.useCallback(_,x)},ke.useContext=function(_){return J.current.useContext(_)},ke.useDebugValue=function(){},ke.useDeferredValue=function(_){return J.current.useDeferredValue(_)},ke.useEffect=function(_,x){return J.current.useEffect(_,x)},ke.useId=function(){return J.current.useId()},ke.useImperativeHandle=function(_,x,se){return J.current.useImperativeHandle(_,x,se)},ke.useInsertionEffect=function(_,x){return J.current.useInsertionEffect(_,x)},ke.useLayoutEffect=function(_,x){return J.current.useLayoutEffect(_,x)},ke.useMemo=function(_,x){return J.current.useMemo(_,x)},ke.useReducer=function(_,x,se){return J.current.useReducer(_,x,se)},ke.useRef=function(_){return J.current.useRef(_)},ke.useState=function(_){return J.current.useState(_)},ke.useSyncExternalStore=function(_,x,se){return J.current.useSyncExternalStore(_,x,se)},ke.useTransition=function(){return J.current.useTransition()},ke.version="18.3.1",ke}var cd;function Tl(){return cd||(cd=1,al.exports=lp()),al.exports}var dd;function up(){if(dd)return Us;dd=1;var i=Tl(),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function f(p,g,v){var w,C={},k=null,b=null;v!==void 0&&(k=""+v),g.key!==void 0&&(k=""+g.key),g.ref!==void 0&&(b=g.ref);for(w in g)o.call(g,w)&&!c.hasOwnProperty(w)&&(C[w]=g[w]);if(p&&p.defaultProps)for(w in g=p.defaultProps,g)C[w]===void 0&&(C[w]=g[w]);return{$$typeof:n,type:p,key:k,ref:b,props:C,_owner:u.current}}return Us.Fragment=r,Us.jsx=f,Us.jsxs=f,Us}var hd;function cp(){return hd||(hd=1,il.exports=up()),il.exports}var d=cp(),X=Tl(),ra={},ol={exports:{}},_t={},ll={exports:{}},ul={};var fd;function dp(){return fd||(fd=1,(function(i){function n(z,Z){var E=z.length;z.push(Z);e:for(;0<E;){var _=E-1>>>1,x=z[_];if(0<u(x,Z))z[_]=Z,z[E]=x,E=_;else break e}}function r(z){return z.length===0?null:z[0]}function o(z){if(z.length===0)return null;var Z=z[0],E=z.pop();if(E!==Z){z[0]=E;e:for(var _=0,x=z.length,se=x>>>1;_<se;){var le=2*(_+1)-1,ge=z[le],ce=le+1,_e=z[ce];if(0>u(ge,E))ce<x&&0>u(_e,ge)?(z[_]=_e,z[ce]=E,_=ce):(z[_]=ge,z[le]=E,_=le);else if(ce<x&&0>u(_e,E))z[_]=_e,z[ce]=E,_=ce;else break e}}return Z}function u(z,Z){var E=z.sortIndex-Z.sortIndex;return E!==0?E:z.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var f=Date,p=f.now();i.unstable_now=function(){return f.now()-p}}var g=[],v=[],w=1,C=null,k=3,b=!1,R=!1,A=!1,I=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(z){for(var Z=r(v);Z!==null;){if(Z.callback===null)o(v);else if(Z.startTime<=z)o(v),Z.sortIndex=Z.expirationTime,n(g,Z);else break;Z=r(v)}}function Y(z){if(A=!1,D(z),!R)if(r(g)!==null)R=!0,be(V);else{var Z=r(v);Z!==null&&J(Y,Z.startTime-z)}}function V(z,Z){R=!1,A&&(A=!1,F(ue),ue=-1),b=!0;var E=k;try{for(D(Z),C=r(g);C!==null&&(!(C.expirationTime>Z)||z&&!Ie());){var _=C.callback;if(typeof _=="function"){C.callback=null,k=C.priorityLevel;var x=_(C.expirationTime<=Z);Z=i.unstable_now(),typeof x=="function"?C.callback=x:C===r(g)&&o(g),D(Z)}else o(g);C=r(g)}if(C!==null)var se=!0;else{var le=r(v);le!==null&&J(Y,le.startTime-Z),se=!1}return se}finally{C=null,k=E,b=!1}}var Q=!1,U=null,ue=-1,we=5,je=-1;function Ie(){return!(i.unstable_now()-je<we)}function Ce(){if(U!==null){var z=i.unstable_now();je=z;var Z=!0;try{Z=U(!0,z)}finally{Z?Se():(Q=!1,U=null)}}else Q=!1}var Se;if(typeof q=="function")Se=function(){q(Ce)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,Oe=Re.port2;Re.port1.onmessage=Ce,Se=function(){Oe.postMessage(null)}}else Se=function(){I(Ce,0)};function be(z){U=z,Q||(Q=!0,Se())}function J(z,Z){ue=I(function(){z(i.unstable_now())},Z)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(z){z.callback=null},i.unstable_continueExecution=function(){R||b||(R=!0,be(V))},i.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):we=0<z?Math.floor(1e3/z):5},i.unstable_getCurrentPriorityLevel=function(){return k},i.unstable_getFirstCallbackNode=function(){return r(g)},i.unstable_next=function(z){switch(k){case 1:case 2:case 3:var Z=3;break;default:Z=k}var E=k;k=Z;try{return z()}finally{k=E}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(z,Z){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var E=k;k=z;try{return Z()}finally{k=E}},i.unstable_scheduleCallback=function(z,Z,E){var _=i.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?_+E:_):E=_,z){case 1:var x=-1;break;case 2:x=250;break;case 5:x=1073741823;break;case 4:x=1e4;break;default:x=5e3}return x=E+x,z={id:w++,callback:Z,priorityLevel:z,startTime:E,expirationTime:x,sortIndex:-1},E>_?(z.sortIndex=E,n(v,z),r(g)===null&&z===r(v)&&(A?(F(ue),ue=-1):A=!0,J(Y,E-_))):(z.sortIndex=x,n(g,z),R||b||(R=!0,be(V))),z},i.unstable_shouldYield=Ie,i.unstable_wrapCallback=function(z){var Z=k;return function(){var E=k;k=Z;try{return z.apply(this,arguments)}finally{k=E}}}})(ul)),ul}var pd;function hp(){return pd||(pd=1,ll.exports=dp()),ll.exports}var md;function fp(){if(md)return _t;md=1;var i=Tl(),n=hp();function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function c(e,t){f(e,t),f(e+"Capture",t)}function f(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},C={};function k(e){return g.call(C,e)?!0:g.call(w,e)?!1:v.test(e)?C[e]=!0:(w[e]=!0,!1)}function b(e,t,s,a){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function R(e,t,s,a){if(t===null||typeof t>"u"||b(e,t,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function A(e,t,s,a,l,h,m){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=l,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=m}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){I[e]=new A(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];I[t]=new A(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){I[e]=new A(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){I[e]=new A(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){I[e]=new A(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){I[e]=new A(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){I[e]=new A(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){I[e]=new A(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){I[e]=new A(e,5,!1,e.toLowerCase(),null,!1,!1)});var F=/[\-:]([a-z])/g;function q(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(F,q);I[t]=new A(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(F,q);I[t]=new A(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(F,q);I[t]=new A(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){I[e]=new A(e,1,!1,e.toLowerCase(),null,!1,!1)}),I.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){I[e]=new A(e,1,!1,e.toLowerCase(),null,!0,!0)});function D(e,t,s,a){var l=I.hasOwnProperty(t)?I[t]:null;(l!==null?l.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(R(t,s,l,a)&&(s=null),a||l===null?k(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):l.mustUseProperty?e[l.propertyName]=s===null?l.type===3?!1:"":s:(t=l.attributeName,a=l.attributeNamespace,s===null?e.removeAttribute(t):(l=l.type,s=l===3||l===4&&s===!0?"":""+s,a?e.setAttributeNS(a,t,s):e.setAttribute(t,s))))}var Y=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,V=Symbol.for("react.element"),Q=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),ue=Symbol.for("react.strict_mode"),we=Symbol.for("react.profiler"),je=Symbol.for("react.provider"),Ie=Symbol.for("react.context"),Ce=Symbol.for("react.forward_ref"),Se=Symbol.for("react.suspense"),Re=Symbol.for("react.suspense_list"),Oe=Symbol.for("react.memo"),be=Symbol.for("react.lazy"),J=Symbol.for("react.offscreen"),z=Symbol.iterator;function Z(e){return e===null||typeof e!="object"?null:(e=z&&e[z]||e["@@iterator"],typeof e=="function"?e:null)}var E=Object.assign,_;function x(e){if(_===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);_=t&&t[1]||""}return`
`+_+e}var se=!1;function le(e,t){if(!e||se)return"";se=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(P){var a=P}Reflect.construct(e,[],t)}else{try{t.call()}catch(P){a=P}e.call(t.prototype)}else{try{throw Error()}catch(P){a=P}e()}}catch(P){if(P&&a&&typeof P.stack=="string"){for(var l=P.stack.split(`
`),h=a.stack.split(`
`),m=l.length-1,y=h.length-1;1<=m&&0<=y&&l[m]!==h[y];)y--;for(;1<=m&&0<=y;m--,y--)if(l[m]!==h[y]){if(m!==1||y!==1)do if(m--,y--,0>y||l[m]!==h[y]){var S=`
`+l[m].replace(" at new "," at ");return e.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",e.displayName)),S}while(1<=m&&0<=y);break}}}finally{se=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?x(e):""}function ge(e){switch(e.tag){case 5:return x(e.type);case 16:return x("Lazy");case 13:return x("Suspense");case 19:return x("SuspenseList");case 0:case 2:case 15:return e=le(e.type,!1),e;case 11:return e=le(e.type.render,!1),e;case 1:return e=le(e.type,!0),e;default:return""}}function ce(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case U:return"Fragment";case Q:return"Portal";case we:return"Profiler";case ue:return"StrictMode";case Se:return"Suspense";case Re:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ie:return(e.displayName||"Context")+".Consumer";case je:return(e._context.displayName||"Context")+".Provider";case Ce:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Oe:return t=e.displayName||null,t!==null?t:ce(e.type)||"Memo";case be:t=e._payload,e=e._init;try{return ce(e(t))}catch{}}return null}function _e(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(t);case 8:return t===ue?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function xe(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Pe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Be(e){var t=Pe(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var l=s.get,h=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(m){a=""+m,h.call(this,m)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(m){a=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Dt(e){e._valueTracker||(e._valueTracker=Be(e))}function Nt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),a="";return e&&(a=Pe(e)?e.checked?"true":"false":e.value),e=a,e!==s?(t.setValue(e),!0):!1}function Tt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function en(e,t){var s=t.checked;return E({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function M(e,t){var s=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;s=xe(t.value!=null?t.value:s),e._wrapperState={initialChecked:a,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ye(e,t){t=t.checked,t!=null&&D(e,"checked",t,!1)}function Le(e,t){ye(e,t);var s=xe(t.value),a=t.type;if(s!=null)a==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?tn(e,t.type,s):t.hasOwnProperty("defaultValue")&&tn(e,t.type,xe(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function kt(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function tn(e,t,s){(t!=="number"||Tt(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var nn=Array.isArray;function Ht(e,t,s,a){if(e=e.options,t){t={};for(var l=0;l<s.length;l++)t["$"+s[l]]=!0;for(s=0;s<e.length;s++)l=t.hasOwnProperty("$"+e[s].value),e[s].selected!==l&&(e[s].selected=l),l&&a&&(e[s].defaultSelected=!0)}else{for(s=""+xe(s),t=null,l=0;l<e.length;l++){if(e[l].value===s){e[l].selected=!0,a&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function Bn(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(r(91));return E({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Mn(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(r(92));if(nn(s)){if(1<s.length)throw Error(r(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:xe(s)}}function Wn(e,t){var s=xe(t.value),a=xe(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),a!=null&&(e.defaultValue=""+a)}function qn(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Vn(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vn(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Vn(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var rn,yn=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,a,l){MSApp.execUnsafeLocalFunction(function(){return e(t,s,a,l)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(rn=rn||document.createElement("div"),rn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=rn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Gt(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var $={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ee=["Webkit","ms","Moz","O"];Object.keys($).forEach(function(e){Ee.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$[t]=$[e]})});function Ke(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||$.hasOwnProperty(e)&&$[e]?(""+t).trim():t+"px"}function pr(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var a=s.indexOf("--")===0,l=Ke(s,t[s],a);s==="float"&&(s="cssFloat"),a?e.setProperty(s,l):e[s]=l}}var wa=E({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xr(e,t){if(t){if(wa[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(r(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(r(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(t.style!=null&&typeof t.style!="object")throw Error(r(62))}}function Zr(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var es=null;function ts(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var mr=null,sn=null,wn=null;function O(e){if(e=Ss(e)){if(typeof mr!="function")throw Error(r(280));var t=e.stateNode;t&&(t=yi(t),mr(e.stateNode,e.type,t))}}function L(e){sn?wn?wn.push(e):wn=[e]:sn=e}function H(){if(sn){var e=sn,t=wn;if(wn=sn=null,O(e),t)for(e=0;e<t.length;e++)O(t[e])}}function fe(e,t){return e(t)}function Ye(){}var Kn=!1;function Qs(e,t,s){if(Kn)return e(t,s);Kn=!0;try{return fe(e,t,s)}finally{Kn=!1,(sn!==null||wn!==null)&&(Ye(),H())}}function Hn(e,t){var s=e.stateNode;if(s===null)return null;var a=yi(s);if(a===null)return null;s=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(r(231,t,typeof s));return s}var ns=!1;if(p)try{var Gn={};Object.defineProperty(Gn,"passive",{get:function(){ns=!0}}),window.addEventListener("test",Gn,Gn),window.removeEventListener("test",Gn,Gn)}catch{ns=!1}function _a(e,t,s,a,l,h,m,y,S){var P=Array.prototype.slice.call(arguments,3);try{t.apply(s,P)}catch(W){this.onError(W)}}var Jn=!1,gr=null,vr=!1,rs=null,ka={onError:function(e){Jn=!0,gr=e}};function Sa(e,t,s,a,l,h,m,y,S){Jn=!1,gr=null,_a.apply(ka,arguments)}function xa(e,t,s,a,l,h,m,y,S){if(Sa.apply(this,arguments),Jn){if(Jn){var P=gr;Jn=!1,gr=null}else throw Error(r(198));vr||(vr=!0,rs=P)}}function an(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function Ys(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Al(e){if(an(e)!==e)throw Error(r(188))}function vh(e){var t=e.alternate;if(!t){if(t=an(e),t===null)throw Error(r(188));return t!==e?null:e}for(var s=e,a=t;;){var l=s.return;if(l===null)break;var h=l.alternate;if(h===null){if(a=l.return,a!==null){s=a;continue}break}if(l.child===h.child){for(h=l.child;h;){if(h===s)return Al(l),e;if(h===a)return Al(l),t;h=h.sibling}throw Error(r(188))}if(s.return!==a.return)s=l,a=h;else{for(var m=!1,y=l.child;y;){if(y===s){m=!0,s=l,a=h;break}if(y===a){m=!0,a=l,s=h;break}y=y.sibling}if(!m){for(y=h.child;y;){if(y===s){m=!0,s=h,a=l;break}if(y===a){m=!0,a=h,s=l;break}y=y.sibling}if(!m)throw Error(r(189))}}if(s.alternate!==a)throw Error(r(190))}if(s.tag!==3)throw Error(r(188));return s.stateNode.current===s?e:t}function Il(e){return e=vh(e),e!==null?Ll(e):null}function Ll(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ll(e);if(t!==null)return t;e=e.sibling}return null}var Dl=n.unstable_scheduleCallback,Ul=n.unstable_cancelCallback,yh=n.unstable_shouldYield,wh=n.unstable_requestPaint,He=n.unstable_now,_h=n.unstable_getCurrentPriorityLevel,ja=n.unstable_ImmediatePriority,$l=n.unstable_UserBlockingPriority,Xs=n.unstable_NormalPriority,kh=n.unstable_LowPriority,zl=n.unstable_IdlePriority,Zs=null,Jt=null;function Sh(e){if(Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(Zs,e,void 0,(e.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:bh,xh=Math.log,jh=Math.LN2;function bh(e){return e>>>=0,e===0?32:31-(xh(e)/jh|0)|0}var ei=64,ti=4194304;function ss(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ni(e,t){var s=e.pendingLanes;if(s===0)return 0;var a=0,l=e.suspendedLanes,h=e.pingedLanes,m=s&268435455;if(m!==0){var y=m&~l;y!==0?a=ss(y):(h&=m,h!==0&&(a=ss(h)))}else m=s&~l,m!==0?a=ss(m):h!==0&&(a=ss(h));if(a===0)return 0;if(t!==0&&t!==a&&(t&l)===0&&(l=a&-a,h=t&-t,l>=h||l===16&&(h&4194240)!==0))return t;if((a&4)!==0&&(a|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)s=31-Ut(t),l=1<<s,a|=e[s],t&=~l;return a}function Eh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ch(e,t){for(var s=e.suspendedLanes,a=e.pingedLanes,l=e.expirationTimes,h=e.pendingLanes;0<h;){var m=31-Ut(h),y=1<<m,S=l[m];S===-1?((y&s)===0||(y&a)!==0)&&(l[m]=Eh(y,t)):S<=t&&(e.expiredLanes|=y),h&=~y}}function ba(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Fl(){var e=ei;return ei<<=1,(ei&4194240)===0&&(ei=64),e}function Ea(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function is(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ut(t),e[t]=s}function Nh(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<s;){var l=31-Ut(s),h=1<<l;t[l]=0,a[l]=-1,e[l]=-1,s&=~h}}function Ca(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var a=31-Ut(s),l=1<<a;l&t|e[a]&t&&(e[a]|=t),s&=~l}}var Ae=0;function Bl(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Ml,Na,Wl,ql,Vl,Ta=!1,ri=[],_n=null,kn=null,Sn=null,as=new Map,os=new Map,xn=[],Th="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kl(e,t){switch(e){case"focusin":case"focusout":_n=null;break;case"dragenter":case"dragleave":kn=null;break;case"mouseover":case"mouseout":Sn=null;break;case"pointerover":case"pointerout":as.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":os.delete(t.pointerId)}}function ls(e,t,s,a,l,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:s,eventSystemFlags:a,nativeEvent:h,targetContainers:[l]},t!==null&&(t=Ss(t),t!==null&&Na(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function Rh(e,t,s,a,l){switch(t){case"focusin":return _n=ls(_n,e,t,s,a,l),!0;case"dragenter":return kn=ls(kn,e,t,s,a,l),!0;case"mouseover":return Sn=ls(Sn,e,t,s,a,l),!0;case"pointerover":var h=l.pointerId;return as.set(h,ls(as.get(h)||null,e,t,s,a,l)),!0;case"gotpointercapture":return h=l.pointerId,os.set(h,ls(os.get(h)||null,e,t,s,a,l)),!0}return!1}function Hl(e){var t=Qn(e.target);if(t!==null){var s=an(t);if(s!==null){if(t=s.tag,t===13){if(t=Ys(s),t!==null){e.blockedOn=t,Vl(e.priority,function(){Wl(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function si(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Pa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var a=new s.constructor(s.type,s);es=a,s.target.dispatchEvent(a),es=null}else return t=Ss(s),t!==null&&Na(t),e.blockedOn=s,!1;t.shift()}return!0}function Gl(e,t,s){si(e)&&s.delete(t)}function Ph(){Ta=!1,_n!==null&&si(_n)&&(_n=null),kn!==null&&si(kn)&&(kn=null),Sn!==null&&si(Sn)&&(Sn=null),as.forEach(Gl),os.forEach(Gl)}function us(e,t){e.blockedOn===t&&(e.blockedOn=null,Ta||(Ta=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Ph)))}function cs(e){function t(l){return us(l,e)}if(0<ri.length){us(ri[0],e);for(var s=1;s<ri.length;s++){var a=ri[s];a.blockedOn===e&&(a.blockedOn=null)}}for(_n!==null&&us(_n,e),kn!==null&&us(kn,e),Sn!==null&&us(Sn,e),as.forEach(t),os.forEach(t),s=0;s<xn.length;s++)a=xn[s],a.blockedOn===e&&(a.blockedOn=null);for(;0<xn.length&&(s=xn[0],s.blockedOn===null);)Hl(s),s.blockedOn===null&&xn.shift()}var yr=Y.ReactCurrentBatchConfig,ii=!0;function Oh(e,t,s,a){var l=Ae,h=yr.transition;yr.transition=null;try{Ae=1,Ra(e,t,s,a)}finally{Ae=l,yr.transition=h}}function Ah(e,t,s,a){var l=Ae,h=yr.transition;yr.transition=null;try{Ae=4,Ra(e,t,s,a)}finally{Ae=l,yr.transition=h}}function Ra(e,t,s,a){if(ii){var l=Pa(e,t,s,a);if(l===null)Ga(e,t,a,ai,s),Kl(e,a);else if(Rh(l,e,t,s,a))a.stopPropagation();else if(Kl(e,a),t&4&&-1<Th.indexOf(e)){for(;l!==null;){var h=Ss(l);if(h!==null&&Ml(h),h=Pa(e,t,s,a),h===null&&Ga(e,t,a,ai,s),h===l)break;l=h}l!==null&&a.stopPropagation()}else Ga(e,t,a,null,s)}}var ai=null;function Pa(e,t,s,a){if(ai=null,e=ts(a),e=Qn(e),e!==null)if(t=an(e),t===null)e=null;else if(s=t.tag,s===13){if(e=Ys(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ai=e,null}function Jl(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_h()){case ja:return 1;case $l:return 4;case Xs:case kh:return 16;case zl:return 536870912;default:return 16}default:return 16}}var jn=null,Oa=null,oi=null;function Ql(){if(oi)return oi;var e,t=Oa,s=t.length,a,l="value"in jn?jn.value:jn.textContent,h=l.length;for(e=0;e<s&&t[e]===l[e];e++);var m=s-e;for(a=1;a<=m&&t[s-a]===l[h-a];a++);return oi=l.slice(e,1<a?1-a:void 0)}function li(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ui(){return!0}function Yl(){return!1}function St(e){function t(s,a,l,h,m){this._reactName=s,this._targetInst=l,this.type=a,this.nativeEvent=h,this.target=m,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(s=e[y],this[y]=s?s(h):h[y]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?ui:Yl,this.isPropagationStopped=Yl,this}return E(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ui)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ui)},persist:function(){},isPersistent:ui}),t}var wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Aa=St(wr),ds=E({},wr,{view:0,detail:0}),Ih=St(ds),Ia,La,hs,ci=E({},ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ua,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hs&&(hs&&e.type==="mousemove"?(Ia=e.screenX-hs.screenX,La=e.screenY-hs.screenY):La=Ia=0,hs=e),Ia)},movementY:function(e){return"movementY"in e?e.movementY:La}}),Xl=St(ci),Lh=E({},ci,{dataTransfer:0}),Dh=St(Lh),Uh=E({},ds,{relatedTarget:0}),Da=St(Uh),$h=E({},wr,{animationName:0,elapsedTime:0,pseudoElement:0}),zh=St($h),Fh=E({},wr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Bh=St(Fh),Mh=E({},wr,{data:0}),Zl=St(Mh),Wh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Vh[e])?!!t[e]:!1}function Ua(){return Kh}var Hh=E({},ds,{key:function(e){if(e.key){var t=Wh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=li(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?qh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ua,charCode:function(e){return e.type==="keypress"?li(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?li(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Gh=St(Hh),Jh=E({},ci,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eu=St(Jh),Qh=E({},ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ua}),Yh=St(Qh),Xh=E({},wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zh=St(Xh),ef=E({},ci,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),tf=St(ef),nf=[9,13,27,32],$a=p&&"CompositionEvent"in window,fs=null;p&&"documentMode"in document&&(fs=document.documentMode);var rf=p&&"TextEvent"in window&&!fs,tu=p&&(!$a||fs&&8<fs&&11>=fs),nu=" ",ru=!1;function su(e,t){switch(e){case"keyup":return nf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _r=!1;function sf(e,t){switch(e){case"compositionend":return iu(t);case"keypress":return t.which!==32?null:(ru=!0,nu);case"textInput":return e=t.data,e===nu&&ru?null:e;default:return null}}function af(e,t){if(_r)return e==="compositionend"||!$a&&su(e,t)?(e=Ql(),oi=Oa=jn=null,_r=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return tu&&t.locale!=="ko"?null:t.data;default:return null}}var of={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function au(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!of[e.type]:t==="textarea"}function ou(e,t,s,a){L(a),t=mi(t,"onChange"),0<t.length&&(s=new Aa("onChange","change",null,s,a),e.push({event:s,listeners:t}))}var ps=null,ms=null;function lf(e){bu(e,0)}function di(e){var t=br(e);if(Nt(t))return e}function uf(e,t){if(e==="change")return t}var lu=!1;if(p){var za;if(p){var Fa="oninput"in document;if(!Fa){var uu=document.createElement("div");uu.setAttribute("oninput","return;"),Fa=typeof uu.oninput=="function"}za=Fa}else za=!1;lu=za&&(!document.documentMode||9<document.documentMode)}function cu(){ps&&(ps.detachEvent("onpropertychange",du),ms=ps=null)}function du(e){if(e.propertyName==="value"&&di(ms)){var t=[];ou(t,ms,e,ts(e)),Qs(lf,t)}}function cf(e,t,s){e==="focusin"?(cu(),ps=t,ms=s,ps.attachEvent("onpropertychange",du)):e==="focusout"&&cu()}function df(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return di(ms)}function hf(e,t){if(e==="click")return di(t)}function ff(e,t){if(e==="input"||e==="change")return di(t)}function pf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $t=typeof Object.is=="function"?Object.is:pf;function gs(e,t){if($t(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var l=s[a];if(!g.call(t,l)||!$t(e[l],t[l]))return!1}return!0}function hu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fu(e,t){var s=hu(e);e=0;for(var a;s;){if(s.nodeType===3){if(a=e+s.textContent.length,e<=t&&a>=t)return{node:s,offset:t-e};e=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=hu(s)}}function pu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?pu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function mu(){for(var e=window,t=Tt();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Tt(e.document)}return t}function Ba(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function mf(e){var t=mu(),s=e.focusedElem,a=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&pu(s.ownerDocument.documentElement,s)){if(a!==null&&Ba(s)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=s.textContent.length,h=Math.min(a.start,l);a=a.end===void 0?h:Math.min(a.end,l),!e.extend&&h>a&&(l=a,a=h,h=l),l=fu(s,h);var m=fu(s,a);l&&m&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==m.node||e.focusOffset!==m.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),h>a?(e.addRange(t),e.extend(m.node,m.offset)):(t.setEnd(m.node,m.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gf=p&&"documentMode"in document&&11>=document.documentMode,kr=null,Ma=null,vs=null,Wa=!1;function gu(e,t,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Wa||kr==null||kr!==Tt(a)||(a=kr,"selectionStart"in a&&Ba(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),vs&&gs(vs,a)||(vs=a,a=mi(Ma,"onSelect"),0<a.length&&(t=new Aa("onSelect","select",null,t,s),e.push({event:t,listeners:a}),t.target=kr)))}function hi(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Sr={animationend:hi("Animation","AnimationEnd"),animationiteration:hi("Animation","AnimationIteration"),animationstart:hi("Animation","AnimationStart"),transitionend:hi("Transition","TransitionEnd")},qa={},vu={};p&&(vu=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);function fi(e){if(qa[e])return qa[e];if(!Sr[e])return e;var t=Sr[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in vu)return qa[e]=t[s];return e}var yu=fi("animationend"),wu=fi("animationiteration"),_u=fi("animationstart"),ku=fi("transitionend"),Su=new Map,xu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bn(e,t){Su.set(e,t),c(t,[e])}for(var Va=0;Va<xu.length;Va++){var Ka=xu[Va],vf=Ka.toLowerCase(),yf=Ka[0].toUpperCase()+Ka.slice(1);bn(vf,"on"+yf)}bn(yu,"onAnimationEnd"),bn(wu,"onAnimationIteration"),bn(_u,"onAnimationStart"),bn("dblclick","onDoubleClick"),bn("focusin","onFocus"),bn("focusout","onBlur"),bn(ku,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ys="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wf=new Set("cancel close invalid load scroll toggle".split(" ").concat(ys));function ju(e,t,s){var a=e.type||"unknown-event";e.currentTarget=s,xa(a,t,void 0,e),e.currentTarget=null}function bu(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var a=e[s],l=a.event;a=a.listeners;e:{var h=void 0;if(t)for(var m=a.length-1;0<=m;m--){var y=a[m],S=y.instance,P=y.currentTarget;if(y=y.listener,S!==h&&l.isPropagationStopped())break e;ju(l,y,P),h=S}else for(m=0;m<a.length;m++){if(y=a[m],S=y.instance,P=y.currentTarget,y=y.listener,S!==h&&l.isPropagationStopped())break e;ju(l,y,P),h=S}}}if(vr)throw e=rs,vr=!1,rs=null,e}function $e(e,t){var s=t[eo];s===void 0&&(s=t[eo]=new Set);var a=e+"__bubble";s.has(a)||(Eu(t,e,2,!1),s.add(a))}function Ha(e,t,s){var a=0;t&&(a|=4),Eu(s,e,a,t)}var pi="_reactListening"+Math.random().toString(36).slice(2);function ws(e){if(!e[pi]){e[pi]=!0,o.forEach(function(s){s!=="selectionchange"&&(wf.has(s)||Ha(s,!1,e),Ha(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[pi]||(t[pi]=!0,Ha("selectionchange",!1,t))}}function Eu(e,t,s,a){switch(Jl(t)){case 1:var l=Oh;break;case 4:l=Ah;break;default:l=Ra}s=l.bind(null,t,s,e),l=void 0,!ns||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),a?l!==void 0?e.addEventListener(t,s,{capture:!0,passive:l}):e.addEventListener(t,s,!0):l!==void 0?e.addEventListener(t,s,{passive:l}):e.addEventListener(t,s,!1)}function Ga(e,t,s,a,l){var h=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var m=a.tag;if(m===3||m===4){var y=a.stateNode.containerInfo;if(y===l||y.nodeType===8&&y.parentNode===l)break;if(m===4)for(m=a.return;m!==null;){var S=m.tag;if((S===3||S===4)&&(S=m.stateNode.containerInfo,S===l||S.nodeType===8&&S.parentNode===l))return;m=m.return}for(;y!==null;){if(m=Qn(y),m===null)return;if(S=m.tag,S===5||S===6){a=h=m;continue e}y=y.parentNode}}a=a.return}Qs(function(){var P=h,W=ts(s),K=[];e:{var B=Su.get(e);if(B!==void 0){var ee=Aa,ne=e;switch(e){case"keypress":if(li(s)===0)break e;case"keydown":case"keyup":ee=Gh;break;case"focusin":ne="focus",ee=Da;break;case"focusout":ne="blur",ee=Da;break;case"beforeblur":case"afterblur":ee=Da;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=Xl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Dh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=Yh;break;case yu:case wu:case _u:ee=zh;break;case ku:ee=Zh;break;case"scroll":ee=Ih;break;case"wheel":ee=tf;break;case"copy":case"cut":case"paste":ee=Bh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=eu}var re=(t&4)!==0,Ge=!re&&e==="scroll",N=re?B!==null?B+"Capture":null:B;re=[];for(var j=P,T;j!==null;){T=j;var G=T.stateNode;if(T.tag===5&&G!==null&&(T=G,N!==null&&(G=Hn(j,N),G!=null&&re.push(_s(j,G,T)))),Ge)break;j=j.return}0<re.length&&(B=new ee(B,ne,null,s,W),K.push({event:B,listeners:re}))}}if((t&7)===0){e:{if(B=e==="mouseover"||e==="pointerover",ee=e==="mouseout"||e==="pointerout",B&&s!==es&&(ne=s.relatedTarget||s.fromElement)&&(Qn(ne)||ne[on]))break e;if((ee||B)&&(B=W.window===W?W:(B=W.ownerDocument)?B.defaultView||B.parentWindow:window,ee?(ne=s.relatedTarget||s.toElement,ee=P,ne=ne?Qn(ne):null,ne!==null&&(Ge=an(ne),ne!==Ge||ne.tag!==5&&ne.tag!==6)&&(ne=null)):(ee=null,ne=P),ee!==ne)){if(re=Xl,G="onMouseLeave",N="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(re=eu,G="onPointerLeave",N="onPointerEnter",j="pointer"),Ge=ee==null?B:br(ee),T=ne==null?B:br(ne),B=new re(G,j+"leave",ee,s,W),B.target=Ge,B.relatedTarget=T,G=null,Qn(W)===P&&(re=new re(N,j+"enter",ne,s,W),re.target=T,re.relatedTarget=Ge,G=re),Ge=G,ee&&ne)t:{for(re=ee,N=ne,j=0,T=re;T;T=xr(T))j++;for(T=0,G=N;G;G=xr(G))T++;for(;0<j-T;)re=xr(re),j--;for(;0<T-j;)N=xr(N),T--;for(;j--;){if(re===N||N!==null&&re===N.alternate)break t;re=xr(re),N=xr(N)}re=null}else re=null;ee!==null&&Cu(K,B,ee,re,!1),ne!==null&&Ge!==null&&Cu(K,Ge,ne,re,!0)}}e:{if(B=P?br(P):window,ee=B.nodeName&&B.nodeName.toLowerCase(),ee==="select"||ee==="input"&&B.type==="file")var ie=uf;else if(au(B))if(lu)ie=ff;else{ie=df;var de=cf}else(ee=B.nodeName)&&ee.toLowerCase()==="input"&&(B.type==="checkbox"||B.type==="radio")&&(ie=hf);if(ie&&(ie=ie(e,P))){ou(K,ie,s,W);break e}de&&de(e,B,P),e==="focusout"&&(de=B._wrapperState)&&de.controlled&&B.type==="number"&&tn(B,"number",B.value)}switch(de=P?br(P):window,e){case"focusin":(au(de)||de.contentEditable==="true")&&(kr=de,Ma=P,vs=null);break;case"focusout":vs=Ma=kr=null;break;case"mousedown":Wa=!0;break;case"contextmenu":case"mouseup":case"dragend":Wa=!1,gu(K,s,W);break;case"selectionchange":if(gf)break;case"keydown":case"keyup":gu(K,s,W)}var he;if($a)e:{switch(e){case"compositionstart":var ve="onCompositionStart";break e;case"compositionend":ve="onCompositionEnd";break e;case"compositionupdate":ve="onCompositionUpdate";break e}ve=void 0}else _r?su(e,s)&&(ve="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(ve="onCompositionStart");ve&&(tu&&s.locale!=="ko"&&(_r||ve!=="onCompositionStart"?ve==="onCompositionEnd"&&_r&&(he=Ql()):(jn=W,Oa="value"in jn?jn.value:jn.textContent,_r=!0)),de=mi(P,ve),0<de.length&&(ve=new Zl(ve,e,null,s,W),K.push({event:ve,listeners:de}),he?ve.data=he:(he=iu(s),he!==null&&(ve.data=he)))),(he=rf?sf(e,s):af(e,s))&&(P=mi(P,"onBeforeInput"),0<P.length&&(W=new Zl("onBeforeInput","beforeinput",null,s,W),K.push({event:W,listeners:P}),W.data=he))}bu(K,t)})}function _s(e,t,s){return{instance:e,listener:t,currentTarget:s}}function mi(e,t){for(var s=t+"Capture",a=[];e!==null;){var l=e,h=l.stateNode;l.tag===5&&h!==null&&(l=h,h=Hn(e,s),h!=null&&a.unshift(_s(e,h,l)),h=Hn(e,t),h!=null&&a.push(_s(e,h,l))),e=e.return}return a}function xr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Cu(e,t,s,a,l){for(var h=t._reactName,m=[];s!==null&&s!==a;){var y=s,S=y.alternate,P=y.stateNode;if(S!==null&&S===a)break;y.tag===5&&P!==null&&(y=P,l?(S=Hn(s,h),S!=null&&m.unshift(_s(s,S,y))):l||(S=Hn(s,h),S!=null&&m.push(_s(s,S,y)))),s=s.return}m.length!==0&&e.push({event:t,listeners:m})}var _f=/\r\n?/g,kf=/\u0000|\uFFFD/g;function Nu(e){return(typeof e=="string"?e:""+e).replace(_f,`
`).replace(kf,"")}function gi(e,t,s){if(t=Nu(t),Nu(e)!==t&&s)throw Error(r(425))}function vi(){}var Ja=null,Qa=null;function Ya(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xa=typeof setTimeout=="function"?setTimeout:void 0,Sf=typeof clearTimeout=="function"?clearTimeout:void 0,Tu=typeof Promise=="function"?Promise:void 0,xf=typeof queueMicrotask=="function"?queueMicrotask:typeof Tu<"u"?function(e){return Tu.resolve(null).then(e).catch(jf)}:Xa;function jf(e){setTimeout(function(){throw e})}function Za(e,t){var s=t,a=0;do{var l=s.nextSibling;if(e.removeChild(s),l&&l.nodeType===8)if(s=l.data,s==="/$"){if(a===0){e.removeChild(l),cs(t);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=l}while(s);cs(t)}function En(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ru(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var jr=Math.random().toString(36).slice(2),Qt="__reactFiber$"+jr,ks="__reactProps$"+jr,on="__reactContainer$"+jr,eo="__reactEvents$"+jr,bf="__reactListeners$"+jr,Ef="__reactHandles$"+jr;function Qn(e){var t=e[Qt];if(t)return t;for(var s=e.parentNode;s;){if(t=s[on]||s[Qt]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Ru(e);e!==null;){if(s=e[Qt])return s;e=Ru(e)}return t}e=s,s=e.parentNode}return null}function Ss(e){return e=e[Qt]||e[on],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function br(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(r(33))}function yi(e){return e[ks]||null}var to=[],Er=-1;function Cn(e){return{current:e}}function ze(e){0>Er||(e.current=to[Er],to[Er]=null,Er--)}function De(e,t){Er++,to[Er]=e.current,e.current=t}var Nn={},ut=Cn(Nn),mt=Cn(!1),Yn=Nn;function Cr(e,t){var s=e.type.contextTypes;if(!s)return Nn;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var l={},h;for(h in s)l[h]=t[h];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function gt(e){return e=e.childContextTypes,e!=null}function wi(){ze(mt),ze(ut)}function Pu(e,t,s){if(ut.current!==Nn)throw Error(r(168));De(ut,t),De(mt,s)}function Ou(e,t,s){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var l in a)if(!(l in t))throw Error(r(108,_e(e)||"Unknown",l));return E({},s,a)}function _i(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Nn,Yn=ut.current,De(ut,e),De(mt,mt.current),!0}function Au(e,t,s){var a=e.stateNode;if(!a)throw Error(r(169));s?(e=Ou(e,t,Yn),a.__reactInternalMemoizedMergedChildContext=e,ze(mt),ze(ut),De(ut,e)):ze(mt),De(mt,s)}var ln=null,ki=!1,no=!1;function Iu(e){ln===null?ln=[e]:ln.push(e)}function Cf(e){ki=!0,Iu(e)}function Tn(){if(!no&&ln!==null){no=!0;var e=0,t=Ae;try{var s=ln;for(Ae=1;e<s.length;e++){var a=s[e];do a=a(!0);while(a!==null)}ln=null,ki=!1}catch(l){throw ln!==null&&(ln=ln.slice(e+1)),Dl(ja,Tn),l}finally{Ae=t,no=!1}}return null}var Nr=[],Tr=0,Si=null,xi=0,Rt=[],Pt=0,Xn=null,un=1,cn="";function Zn(e,t){Nr[Tr++]=xi,Nr[Tr++]=Si,Si=e,xi=t}function Lu(e,t,s){Rt[Pt++]=un,Rt[Pt++]=cn,Rt[Pt++]=Xn,Xn=e;var a=un;e=cn;var l=32-Ut(a)-1;a&=~(1<<l),s+=1;var h=32-Ut(t)+l;if(30<h){var m=l-l%5;h=(a&(1<<m)-1).toString(32),a>>=m,l-=m,un=1<<32-Ut(t)+l|s<<l|a,cn=h+e}else un=1<<h|s<<l|a,cn=e}function ro(e){e.return!==null&&(Zn(e,1),Lu(e,1,0))}function so(e){for(;e===Si;)Si=Nr[--Tr],Nr[Tr]=null,xi=Nr[--Tr],Nr[Tr]=null;for(;e===Xn;)Xn=Rt[--Pt],Rt[Pt]=null,cn=Rt[--Pt],Rt[Pt]=null,un=Rt[--Pt],Rt[Pt]=null}var xt=null,jt=null,Fe=!1,zt=null;function Du(e,t){var s=Lt(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function Uu(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,xt=e,jt=En(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,xt=e,jt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=Xn!==null?{id:un,overflow:cn}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=Lt(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,xt=e,jt=null,!0):!1;default:return!1}}function io(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ao(e){if(Fe){var t=jt;if(t){var s=t;if(!Uu(e,t)){if(io(e))throw Error(r(418));t=En(s.nextSibling);var a=xt;t&&Uu(e,t)?Du(a,s):(e.flags=e.flags&-4097|2,Fe=!1,xt=e)}}else{if(io(e))throw Error(r(418));e.flags=e.flags&-4097|2,Fe=!1,xt=e}}}function $u(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xt=e}function ji(e){if(e!==xt)return!1;if(!Fe)return $u(e),Fe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ya(e.type,e.memoizedProps)),t&&(t=jt)){if(io(e))throw zu(),Error(r(418));for(;t;)Du(e,t),t=En(t.nextSibling)}if($u(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){jt=En(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}jt=null}}else jt=xt?En(e.stateNode.nextSibling):null;return!0}function zu(){for(var e=jt;e;)e=En(e.nextSibling)}function Rr(){jt=xt=null,Fe=!1}function oo(e){zt===null?zt=[e]:zt.push(e)}var Nf=Y.ReactCurrentBatchConfig;function xs(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(r(309));var a=s.stateNode}if(!a)throw Error(r(147,e));var l=a,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(m){var y=l.refs;m===null?delete y[h]:y[h]=m},t._stringRef=h,t)}if(typeof e!="string")throw Error(r(284));if(!s._owner)throw Error(r(290,e))}return e}function bi(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Fu(e){var t=e._init;return t(e._payload)}function Bu(e){function t(N,j){if(e){var T=N.deletions;T===null?(N.deletions=[j],N.flags|=16):T.push(j)}}function s(N,j){if(!e)return null;for(;j!==null;)t(N,j),j=j.sibling;return null}function a(N,j){for(N=new Map;j!==null;)j.key!==null?N.set(j.key,j):N.set(j.index,j),j=j.sibling;return N}function l(N,j){return N=Un(N,j),N.index=0,N.sibling=null,N}function h(N,j,T){return N.index=T,e?(T=N.alternate,T!==null?(T=T.index,T<j?(N.flags|=2,j):T):(N.flags|=2,j)):(N.flags|=1048576,j)}function m(N){return e&&N.alternate===null&&(N.flags|=2),N}function y(N,j,T,G){return j===null||j.tag!==6?(j=Zo(T,N.mode,G),j.return=N,j):(j=l(j,T),j.return=N,j)}function S(N,j,T,G){var ie=T.type;return ie===U?W(N,j,T.props.children,G,T.key):j!==null&&(j.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===be&&Fu(ie)===j.type)?(G=l(j,T.props),G.ref=xs(N,j,T),G.return=N,G):(G=Ji(T.type,T.key,T.props,null,N.mode,G),G.ref=xs(N,j,T),G.return=N,G)}function P(N,j,T,G){return j===null||j.tag!==4||j.stateNode.containerInfo!==T.containerInfo||j.stateNode.implementation!==T.implementation?(j=el(T,N.mode,G),j.return=N,j):(j=l(j,T.children||[]),j.return=N,j)}function W(N,j,T,G,ie){return j===null||j.tag!==7?(j=or(T,N.mode,G,ie),j.return=N,j):(j=l(j,T),j.return=N,j)}function K(N,j,T){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Zo(""+j,N.mode,T),j.return=N,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case V:return T=Ji(j.type,j.key,j.props,null,N.mode,T),T.ref=xs(N,null,j),T.return=N,T;case Q:return j=el(j,N.mode,T),j.return=N,j;case be:var G=j._init;return K(N,G(j._payload),T)}if(nn(j)||Z(j))return j=or(j,N.mode,T,null),j.return=N,j;bi(N,j)}return null}function B(N,j,T,G){var ie=j!==null?j.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return ie!==null?null:y(N,j,""+T,G);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case V:return T.key===ie?S(N,j,T,G):null;case Q:return T.key===ie?P(N,j,T,G):null;case be:return ie=T._init,B(N,j,ie(T._payload),G)}if(nn(T)||Z(T))return ie!==null?null:W(N,j,T,G,null);bi(N,T)}return null}function ee(N,j,T,G,ie){if(typeof G=="string"&&G!==""||typeof G=="number")return N=N.get(T)||null,y(j,N,""+G,ie);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case V:return N=N.get(G.key===null?T:G.key)||null,S(j,N,G,ie);case Q:return N=N.get(G.key===null?T:G.key)||null,P(j,N,G,ie);case be:var de=G._init;return ee(N,j,T,de(G._payload),ie)}if(nn(G)||Z(G))return N=N.get(T)||null,W(j,N,G,ie,null);bi(j,G)}return null}function ne(N,j,T,G){for(var ie=null,de=null,he=j,ve=j=0,rt=null;he!==null&&ve<T.length;ve++){he.index>ve?(rt=he,he=null):rt=he.sibling;var Te=B(N,he,T[ve],G);if(Te===null){he===null&&(he=rt);break}e&&he&&Te.alternate===null&&t(N,he),j=h(Te,j,ve),de===null?ie=Te:de.sibling=Te,de=Te,he=rt}if(ve===T.length)return s(N,he),Fe&&Zn(N,ve),ie;if(he===null){for(;ve<T.length;ve++)he=K(N,T[ve],G),he!==null&&(j=h(he,j,ve),de===null?ie=he:de.sibling=he,de=he);return Fe&&Zn(N,ve),ie}for(he=a(N,he);ve<T.length;ve++)rt=ee(he,N,ve,T[ve],G),rt!==null&&(e&&rt.alternate!==null&&he.delete(rt.key===null?ve:rt.key),j=h(rt,j,ve),de===null?ie=rt:de.sibling=rt,de=rt);return e&&he.forEach(function($n){return t(N,$n)}),Fe&&Zn(N,ve),ie}function re(N,j,T,G){var ie=Z(T);if(typeof ie!="function")throw Error(r(150));if(T=ie.call(T),T==null)throw Error(r(151));for(var de=ie=null,he=j,ve=j=0,rt=null,Te=T.next();he!==null&&!Te.done;ve++,Te=T.next()){he.index>ve?(rt=he,he=null):rt=he.sibling;var $n=B(N,he,Te.value,G);if($n===null){he===null&&(he=rt);break}e&&he&&$n.alternate===null&&t(N,he),j=h($n,j,ve),de===null?ie=$n:de.sibling=$n,de=$n,he=rt}if(Te.done)return s(N,he),Fe&&Zn(N,ve),ie;if(he===null){for(;!Te.done;ve++,Te=T.next())Te=K(N,Te.value,G),Te!==null&&(j=h(Te,j,ve),de===null?ie=Te:de.sibling=Te,de=Te);return Fe&&Zn(N,ve),ie}for(he=a(N,he);!Te.done;ve++,Te=T.next())Te=ee(he,N,ve,Te.value,G),Te!==null&&(e&&Te.alternate!==null&&he.delete(Te.key===null?ve:Te.key),j=h(Te,j,ve),de===null?ie=Te:de.sibling=Te,de=Te);return e&&he.forEach(function(op){return t(N,op)}),Fe&&Zn(N,ve),ie}function Ge(N,j,T,G){if(typeof T=="object"&&T!==null&&T.type===U&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case V:e:{for(var ie=T.key,de=j;de!==null;){if(de.key===ie){if(ie=T.type,ie===U){if(de.tag===7){s(N,de.sibling),j=l(de,T.props.children),j.return=N,N=j;break e}}else if(de.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===be&&Fu(ie)===de.type){s(N,de.sibling),j=l(de,T.props),j.ref=xs(N,de,T),j.return=N,N=j;break e}s(N,de);break}else t(N,de);de=de.sibling}T.type===U?(j=or(T.props.children,N.mode,G,T.key),j.return=N,N=j):(G=Ji(T.type,T.key,T.props,null,N.mode,G),G.ref=xs(N,j,T),G.return=N,N=G)}return m(N);case Q:e:{for(de=T.key;j!==null;){if(j.key===de)if(j.tag===4&&j.stateNode.containerInfo===T.containerInfo&&j.stateNode.implementation===T.implementation){s(N,j.sibling),j=l(j,T.children||[]),j.return=N,N=j;break e}else{s(N,j);break}else t(N,j);j=j.sibling}j=el(T,N.mode,G),j.return=N,N=j}return m(N);case be:return de=T._init,Ge(N,j,de(T._payload),G)}if(nn(T))return ne(N,j,T,G);if(Z(T))return re(N,j,T,G);bi(N,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,j!==null&&j.tag===6?(s(N,j.sibling),j=l(j,T),j.return=N,N=j):(s(N,j),j=Zo(T,N.mode,G),j.return=N,N=j),m(N)):s(N,j)}return Ge}var Pr=Bu(!0),Mu=Bu(!1),Ei=Cn(null),Ci=null,Or=null,lo=null;function uo(){lo=Or=Ci=null}function co(e){var t=Ei.current;ze(Ei),e._currentValue=t}function ho(e,t,s){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===s)break;e=e.return}}function Ar(e,t){Ci=e,lo=Or=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(vt=!0),e.firstContext=null)}function Ot(e){var t=e._currentValue;if(lo!==e)if(e={context:e,memoizedValue:t,next:null},Or===null){if(Ci===null)throw Error(r(308));Or=e,Ci.dependencies={lanes:0,firstContext:e}}else Or=Or.next=e;return t}var er=null;function fo(e){er===null?er=[e]:er.push(e)}function Wu(e,t,s,a){var l=t.interleaved;return l===null?(s.next=s,fo(t)):(s.next=l.next,l.next=s),t.interleaved=s,dn(e,a)}function dn(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Rn=!1;function po(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function hn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pn(e,t,s){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(Ne&2)!==0){var l=a.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),a.pending=t,dn(e,s)}return l=a.interleaved,l===null?(t.next=t,fo(a)):(t.next=l.next,l.next=t),a.interleaved=t,dn(e,s)}function Ni(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,s|=a,t.lanes=s,Ca(e,s)}}function Vu(e,t){var s=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var l=null,h=null;if(s=s.firstBaseUpdate,s!==null){do{var m={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};h===null?l=h=m:h=h.next=m,s=s.next}while(s!==null);h===null?l=h=t:h=h.next=t}else l=h=t;s={baseState:a.baseState,firstBaseUpdate:l,lastBaseUpdate:h,shared:a.shared,effects:a.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function Ti(e,t,s,a){var l=e.updateQueue;Rn=!1;var h=l.firstBaseUpdate,m=l.lastBaseUpdate,y=l.shared.pending;if(y!==null){l.shared.pending=null;var S=y,P=S.next;S.next=null,m===null?h=P:m.next=P,m=S;var W=e.alternate;W!==null&&(W=W.updateQueue,y=W.lastBaseUpdate,y!==m&&(y===null?W.firstBaseUpdate=P:y.next=P,W.lastBaseUpdate=S))}if(h!==null){var K=l.baseState;m=0,W=P=S=null,y=h;do{var B=y.lane,ee=y.eventTime;if((a&B)===B){W!==null&&(W=W.next={eventTime:ee,lane:0,tag:y.tag,payload:y.payload,callback:y.callback,next:null});e:{var ne=e,re=y;switch(B=t,ee=s,re.tag){case 1:if(ne=re.payload,typeof ne=="function"){K=ne.call(ee,K,B);break e}K=ne;break e;case 3:ne.flags=ne.flags&-65537|128;case 0:if(ne=re.payload,B=typeof ne=="function"?ne.call(ee,K,B):ne,B==null)break e;K=E({},K,B);break e;case 2:Rn=!0}}y.callback!==null&&y.lane!==0&&(e.flags|=64,B=l.effects,B===null?l.effects=[y]:B.push(y))}else ee={eventTime:ee,lane:B,tag:y.tag,payload:y.payload,callback:y.callback,next:null},W===null?(P=W=ee,S=K):W=W.next=ee,m|=B;if(y=y.next,y===null){if(y=l.shared.pending,y===null)break;B=y,y=B.next,B.next=null,l.lastBaseUpdate=B,l.shared.pending=null}}while(!0);if(W===null&&(S=K),l.baseState=S,l.firstBaseUpdate=P,l.lastBaseUpdate=W,t=l.shared.interleaved,t!==null){l=t;do m|=l.lane,l=l.next;while(l!==t)}else h===null&&(l.shared.lanes=0);rr|=m,e.lanes=m,e.memoizedState=K}}function Ku(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],l=a.callback;if(l!==null){if(a.callback=null,a=s,typeof l!="function")throw Error(r(191,l));l.call(a)}}}var js={},Yt=Cn(js),bs=Cn(js),Es=Cn(js);function tr(e){if(e===js)throw Error(r(174));return e}function mo(e,t){switch(De(Es,t),De(bs,e),De(Yt,js),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:vn(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=vn(t,e)}ze(Yt),De(Yt,t)}function Ir(){ze(Yt),ze(bs),ze(Es)}function Hu(e){tr(Es.current);var t=tr(Yt.current),s=vn(t,e.type);t!==s&&(De(bs,e),De(Yt,s))}function go(e){bs.current===e&&(ze(Yt),ze(bs))}var Me=Cn(0);function Ri(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var vo=[];function yo(){for(var e=0;e<vo.length;e++)vo[e]._workInProgressVersionPrimary=null;vo.length=0}var Pi=Y.ReactCurrentDispatcher,wo=Y.ReactCurrentBatchConfig,nr=0,We=null,Xe=null,tt=null,Oi=!1,Cs=!1,Ns=0,Tf=0;function ct(){throw Error(r(321))}function _o(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!$t(e[s],t[s]))return!1;return!0}function ko(e,t,s,a,l,h){if(nr=h,We=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Pi.current=e===null||e.memoizedState===null?Af:If,e=s(a,l),Cs){h=0;do{if(Cs=!1,Ns=0,25<=h)throw Error(r(301));h+=1,tt=Xe=null,t.updateQueue=null,Pi.current=Lf,e=s(a,l)}while(Cs)}if(Pi.current=Li,t=Xe!==null&&Xe.next!==null,nr=0,tt=Xe=We=null,Oi=!1,t)throw Error(r(300));return e}function So(){var e=Ns!==0;return Ns=0,e}function Xt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?We.memoizedState=tt=e:tt=tt.next=e,tt}function At(){if(Xe===null){var e=We.alternate;e=e!==null?e.memoizedState:null}else e=Xe.next;var t=tt===null?We.memoizedState:tt.next;if(t!==null)tt=t,Xe=e;else{if(e===null)throw Error(r(310));Xe=e,e={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},tt===null?We.memoizedState=tt=e:tt=tt.next=e}return tt}function Ts(e,t){return typeof t=="function"?t(e):t}function xo(e){var t=At(),s=t.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=e;var a=Xe,l=a.baseQueue,h=s.pending;if(h!==null){if(l!==null){var m=l.next;l.next=h.next,h.next=m}a.baseQueue=l=h,s.pending=null}if(l!==null){h=l.next,a=a.baseState;var y=m=null,S=null,P=h;do{var W=P.lane;if((nr&W)===W)S!==null&&(S=S.next={lane:0,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),a=P.hasEagerState?P.eagerState:e(a,P.action);else{var K={lane:W,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null};S===null?(y=S=K,m=a):S=S.next=K,We.lanes|=W,rr|=W}P=P.next}while(P!==null&&P!==h);S===null?m=a:S.next=y,$t(a,t.memoizedState)||(vt=!0),t.memoizedState=a,t.baseState=m,t.baseQueue=S,s.lastRenderedState=a}if(e=s.interleaved,e!==null){l=e;do h=l.lane,We.lanes|=h,rr|=h,l=l.next;while(l!==e)}else l===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function jo(e){var t=At(),s=t.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=e;var a=s.dispatch,l=s.pending,h=t.memoizedState;if(l!==null){s.pending=null;var m=l=l.next;do h=e(h,m.action),m=m.next;while(m!==l);$t(h,t.memoizedState)||(vt=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),s.lastRenderedState=h}return[h,a]}function Gu(){}function Ju(e,t){var s=We,a=At(),l=t(),h=!$t(a.memoizedState,l);if(h&&(a.memoizedState=l,vt=!0),a=a.queue,bo(Xu.bind(null,s,a,e),[e]),a.getSnapshot!==t||h||tt!==null&&tt.memoizedState.tag&1){if(s.flags|=2048,Rs(9,Yu.bind(null,s,a,l,t),void 0,null),nt===null)throw Error(r(349));(nr&30)!==0||Qu(s,t,l)}return l}function Qu(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=We.updateQueue,t===null?(t={lastEffect:null,stores:null},We.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Yu(e,t,s,a){t.value=s,t.getSnapshot=a,Zu(t)&&ec(e)}function Xu(e,t,s){return s(function(){Zu(t)&&ec(e)})}function Zu(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!$t(e,s)}catch{return!0}}function ec(e){var t=dn(e,1);t!==null&&Wt(t,e,1,-1)}function tc(e){var t=Xt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:e},t.queue=e,e=e.dispatch=Of.bind(null,We,e),[t.memoizedState,e]}function Rs(e,t,s,a){return e={tag:e,create:t,destroy:s,deps:a,next:null},t=We.updateQueue,t===null?(t={lastEffect:null,stores:null},We.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,t.lastEffect=e)),e}function nc(){return At().memoizedState}function Ai(e,t,s,a){var l=Xt();We.flags|=e,l.memoizedState=Rs(1|t,s,void 0,a===void 0?null:a)}function Ii(e,t,s,a){var l=At();a=a===void 0?null:a;var h=void 0;if(Xe!==null){var m=Xe.memoizedState;if(h=m.destroy,a!==null&&_o(a,m.deps)){l.memoizedState=Rs(t,s,h,a);return}}We.flags|=e,l.memoizedState=Rs(1|t,s,h,a)}function rc(e,t){return Ai(8390656,8,e,t)}function bo(e,t){return Ii(2048,8,e,t)}function sc(e,t){return Ii(4,2,e,t)}function ic(e,t){return Ii(4,4,e,t)}function ac(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function oc(e,t,s){return s=s!=null?s.concat([e]):null,Ii(4,4,ac.bind(null,t,e),s)}function Eo(){}function lc(e,t){var s=At();t=t===void 0?null:t;var a=s.memoizedState;return a!==null&&t!==null&&_o(t,a[1])?a[0]:(s.memoizedState=[e,t],e)}function uc(e,t){var s=At();t=t===void 0?null:t;var a=s.memoizedState;return a!==null&&t!==null&&_o(t,a[1])?a[0]:(e=e(),s.memoizedState=[e,t],e)}function cc(e,t,s){return(nr&21)===0?(e.baseState&&(e.baseState=!1,vt=!0),e.memoizedState=s):($t(s,t)||(s=Fl(),We.lanes|=s,rr|=s,e.baseState=!0),t)}function Rf(e,t){var s=Ae;Ae=s!==0&&4>s?s:4,e(!0);var a=wo.transition;wo.transition={};try{e(!1),t()}finally{Ae=s,wo.transition=a}}function dc(){return At().memoizedState}function Pf(e,t,s){var a=Ln(e);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},hc(e))fc(t,s);else if(s=Wu(e,t,s,a),s!==null){var l=pt();Wt(s,e,a,l),pc(s,t,a)}}function Of(e,t,s){var a=Ln(e),l={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(hc(e))fc(t,l);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var m=t.lastRenderedState,y=h(m,s);if(l.hasEagerState=!0,l.eagerState=y,$t(y,m)){var S=t.interleaved;S===null?(l.next=l,fo(t)):(l.next=S.next,S.next=l),t.interleaved=l;return}}catch{}s=Wu(e,t,l,a),s!==null&&(l=pt(),Wt(s,e,a,l),pc(s,t,a))}}function hc(e){var t=e.alternate;return e===We||t!==null&&t===We}function fc(e,t){Cs=Oi=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function pc(e,t,s){if((s&4194240)!==0){var a=t.lanes;a&=e.pendingLanes,s|=a,t.lanes=s,Ca(e,s)}}var Li={readContext:Ot,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},Af={readContext:Ot,useCallback:function(e,t){return Xt().memoizedState=[e,t===void 0?null:t],e},useContext:Ot,useEffect:rc,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,Ai(4194308,4,ac.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Ai(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ai(4,2,e,t)},useMemo:function(e,t){var s=Xt();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var a=Xt();return t=s!==void 0?s(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Pf.bind(null,We,e),[a.memoizedState,e]},useRef:function(e){var t=Xt();return e={current:e},t.memoizedState=e},useState:tc,useDebugValue:Eo,useDeferredValue:function(e){return Xt().memoizedState=e},useTransition:function(){var e=tc(!1),t=e[0];return e=Rf.bind(null,e[1]),Xt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var a=We,l=Xt();if(Fe){if(s===void 0)throw Error(r(407));s=s()}else{if(s=t(),nt===null)throw Error(r(349));(nr&30)!==0||Qu(a,t,s)}l.memoizedState=s;var h={value:s,getSnapshot:t};return l.queue=h,rc(Xu.bind(null,a,h,e),[e]),a.flags|=2048,Rs(9,Yu.bind(null,a,h,s,t),void 0,null),s},useId:function(){var e=Xt(),t=nt.identifierPrefix;if(Fe){var s=cn,a=un;s=(a&~(1<<32-Ut(a)-1)).toString(32)+s,t=":"+t+"R"+s,s=Ns++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=Tf++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},If={readContext:Ot,useCallback:lc,useContext:Ot,useEffect:bo,useImperativeHandle:oc,useInsertionEffect:sc,useLayoutEffect:ic,useMemo:uc,useReducer:xo,useRef:nc,useState:function(){return xo(Ts)},useDebugValue:Eo,useDeferredValue:function(e){var t=At();return cc(t,Xe.memoizedState,e)},useTransition:function(){var e=xo(Ts)[0],t=At().memoizedState;return[e,t]},useMutableSource:Gu,useSyncExternalStore:Ju,useId:dc,unstable_isNewReconciler:!1},Lf={readContext:Ot,useCallback:lc,useContext:Ot,useEffect:bo,useImperativeHandle:oc,useInsertionEffect:sc,useLayoutEffect:ic,useMemo:uc,useReducer:jo,useRef:nc,useState:function(){return jo(Ts)},useDebugValue:Eo,useDeferredValue:function(e){var t=At();return Xe===null?t.memoizedState=e:cc(t,Xe.memoizedState,e)},useTransition:function(){var e=jo(Ts)[0],t=At().memoizedState;return[e,t]},useMutableSource:Gu,useSyncExternalStore:Ju,useId:dc,unstable_isNewReconciler:!1};function Ft(e,t){if(e&&e.defaultProps){t=E({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function Co(e,t,s,a){t=e.memoizedState,s=s(a,t),s=s==null?t:E({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Di={isMounted:function(e){return(e=e._reactInternals)?an(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var a=pt(),l=Ln(e),h=hn(a,l);h.payload=t,s!=null&&(h.callback=s),t=Pn(e,h,l),t!==null&&(Wt(t,e,l,a),Ni(t,e,l))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var a=pt(),l=Ln(e),h=hn(a,l);h.tag=1,h.payload=t,s!=null&&(h.callback=s),t=Pn(e,h,l),t!==null&&(Wt(t,e,l,a),Ni(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=pt(),a=Ln(e),l=hn(s,a);l.tag=2,t!=null&&(l.callback=t),t=Pn(e,l,a),t!==null&&(Wt(t,e,a,s),Ni(t,e,a))}};function mc(e,t,s,a,l,h,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,h,m):t.prototype&&t.prototype.isPureReactComponent?!gs(s,a)||!gs(l,h):!0}function gc(e,t,s){var a=!1,l=Nn,h=t.contextType;return typeof h=="object"&&h!==null?h=Ot(h):(l=gt(t)?Yn:ut.current,a=t.contextTypes,h=(a=a!=null)?Cr(e,l):Nn),t=new t(s,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Di,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=h),t}function vc(e,t,s,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,a),t.state!==e&&Di.enqueueReplaceState(t,t.state,null)}function No(e,t,s,a){var l=e.stateNode;l.props=s,l.state=e.memoizedState,l.refs={},po(e);var h=t.contextType;typeof h=="object"&&h!==null?l.context=Ot(h):(h=gt(t)?Yn:ut.current,l.context=Cr(e,h)),l.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(Co(e,t,h,s),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&Di.enqueueReplaceState(l,l.state,null),Ti(e,s,l,a),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function Lr(e,t){try{var s="",a=t;do s+=ge(a),a=a.return;while(a);var l=s}catch(h){l=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:l,digest:null}}function To(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Ro(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var Df=typeof WeakMap=="function"?WeakMap:Map;function yc(e,t,s){s=hn(-1,s),s.tag=3,s.payload={element:null};var a=t.value;return s.callback=function(){Wi||(Wi=!0,Vo=a),Ro(e,t)},s}function wc(e,t,s){s=hn(-1,s),s.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var l=t.value;s.payload=function(){return a(l)},s.callback=function(){Ro(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(s.callback=function(){Ro(e,t),typeof a!="function"&&(An===null?An=new Set([this]):An.add(this));var m=t.stack;this.componentDidCatch(t.value,{componentStack:m!==null?m:""})}),s}function _c(e,t,s){var a=e.pingCache;if(a===null){a=e.pingCache=new Df;var l=new Set;a.set(t,l)}else l=a.get(t),l===void 0&&(l=new Set,a.set(t,l));l.has(s)||(l.add(s),e=Qf.bind(null,e,t,s),t.then(e,e))}function kc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Sc(e,t,s,a,l){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=hn(-1,1),t.tag=2,Pn(s,t,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=l,e)}var Uf=Y.ReactCurrentOwner,vt=!1;function ft(e,t,s,a){t.child=e===null?Mu(t,null,s,a):Pr(t,e.child,s,a)}function xc(e,t,s,a,l){s=s.render;var h=t.ref;return Ar(t,l),a=ko(e,t,s,a,h,l),s=So(),e!==null&&!vt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,fn(e,t,l)):(Fe&&s&&ro(t),t.flags|=1,ft(e,t,a,l),t.child)}function jc(e,t,s,a,l){if(e===null){var h=s.type;return typeof h=="function"&&!Xo(h)&&h.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=h,bc(e,t,h,a,l)):(e=Ji(s.type,null,a,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,(e.lanes&l)===0){var m=h.memoizedProps;if(s=s.compare,s=s!==null?s:gs,s(m,a)&&e.ref===t.ref)return fn(e,t,l)}return t.flags|=1,e=Un(h,a),e.ref=t.ref,e.return=t,t.child=e}function bc(e,t,s,a,l){if(e!==null){var h=e.memoizedProps;if(gs(h,a)&&e.ref===t.ref)if(vt=!1,t.pendingProps=a=h,(e.lanes&l)!==0)(e.flags&131072)!==0&&(vt=!0);else return t.lanes=e.lanes,fn(e,t,l)}return Po(e,t,s,a,l)}function Ec(e,t,s){var a=t.pendingProps,l=a.children,h=e!==null?e.memoizedState:null;if(a.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(Ur,bt),bt|=s;else{if((s&1073741824)===0)return e=h!==null?h.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,De(Ur,bt),bt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=h!==null?h.baseLanes:s,De(Ur,bt),bt|=a}else h!==null?(a=h.baseLanes|s,t.memoizedState=null):a=s,De(Ur,bt),bt|=a;return ft(e,t,l,s),t.child}function Cc(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Po(e,t,s,a,l){var h=gt(s)?Yn:ut.current;return h=Cr(t,h),Ar(t,l),s=ko(e,t,s,a,h,l),a=So(),e!==null&&!vt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,fn(e,t,l)):(Fe&&a&&ro(t),t.flags|=1,ft(e,t,s,l),t.child)}function Nc(e,t,s,a,l){if(gt(s)){var h=!0;_i(t)}else h=!1;if(Ar(t,l),t.stateNode===null)$i(e,t),gc(t,s,a),No(t,s,a,l),a=!0;else if(e===null){var m=t.stateNode,y=t.memoizedProps;m.props=y;var S=m.context,P=s.contextType;typeof P=="object"&&P!==null?P=Ot(P):(P=gt(s)?Yn:ut.current,P=Cr(t,P));var W=s.getDerivedStateFromProps,K=typeof W=="function"||typeof m.getSnapshotBeforeUpdate=="function";K||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(y!==a||S!==P)&&vc(t,m,a,P),Rn=!1;var B=t.memoizedState;m.state=B,Ti(t,a,m,l),S=t.memoizedState,y!==a||B!==S||mt.current||Rn?(typeof W=="function"&&(Co(t,s,W,a),S=t.memoizedState),(y=Rn||mc(t,s,y,a,B,S,P))?(K||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=S),m.props=a,m.state=S,m.context=P,a=y):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{m=t.stateNode,qu(e,t),y=t.memoizedProps,P=t.type===t.elementType?y:Ft(t.type,y),m.props=P,K=t.pendingProps,B=m.context,S=s.contextType,typeof S=="object"&&S!==null?S=Ot(S):(S=gt(s)?Yn:ut.current,S=Cr(t,S));var ee=s.getDerivedStateFromProps;(W=typeof ee=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(y!==K||B!==S)&&vc(t,m,a,S),Rn=!1,B=t.memoizedState,m.state=B,Ti(t,a,m,l);var ne=t.memoizedState;y!==K||B!==ne||mt.current||Rn?(typeof ee=="function"&&(Co(t,s,ee,a),ne=t.memoizedState),(P=Rn||mc(t,s,P,a,B,ne,S)||!1)?(W||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(a,ne,S),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(a,ne,S)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||y===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=ne),m.props=a,m.state=ne,m.context=S,a=P):(typeof m.componentDidUpdate!="function"||y===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),a=!1)}return Oo(e,t,s,a,h,l)}function Oo(e,t,s,a,l,h){Cc(e,t);var m=(t.flags&128)!==0;if(!a&&!m)return l&&Au(t,s,!1),fn(e,t,h);a=t.stateNode,Uf.current=t;var y=m&&typeof s.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&m?(t.child=Pr(t,e.child,null,h),t.child=Pr(t,null,y,h)):ft(e,t,y,h),t.memoizedState=a.state,l&&Au(t,s,!0),t.child}function Tc(e){var t=e.stateNode;t.pendingContext?Pu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Pu(e,t.context,!1),mo(e,t.containerInfo)}function Rc(e,t,s,a,l){return Rr(),oo(l),t.flags|=256,ft(e,t,s,a),t.child}var Ao={dehydrated:null,treeContext:null,retryLane:0};function Io(e){return{baseLanes:e,cachePool:null,transitions:null}}function Pc(e,t,s){var a=t.pendingProps,l=Me.current,h=!1,m=(t.flags&128)!==0,y;if((y=m)||(y=e!==null&&e.memoizedState===null?!1:(l&2)!==0),y?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),De(Me,l&1),e===null)return ao(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(m=a.children,e=a.fallback,h?(a=t.mode,h=t.child,m={mode:"hidden",children:m},(a&1)===0&&h!==null?(h.childLanes=0,h.pendingProps=m):h=Qi(m,a,0,null),e=or(e,a,s,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=Io(s),t.memoizedState=Ao,e):Lo(t,m));if(l=e.memoizedState,l!==null&&(y=l.dehydrated,y!==null))return $f(e,t,m,a,y,l,s);if(h){h=a.fallback,m=t.mode,l=e.child,y=l.sibling;var S={mode:"hidden",children:a.children};return(m&1)===0&&t.child!==l?(a=t.child,a.childLanes=0,a.pendingProps=S,t.deletions=null):(a=Un(l,S),a.subtreeFlags=l.subtreeFlags&14680064),y!==null?h=Un(y,h):(h=or(h,m,s,null),h.flags|=2),h.return=t,a.return=t,a.sibling=h,t.child=a,a=h,h=t.child,m=e.child.memoizedState,m=m===null?Io(s):{baseLanes:m.baseLanes|s,cachePool:null,transitions:m.transitions},h.memoizedState=m,h.childLanes=e.childLanes&~s,t.memoizedState=Ao,a}return h=e.child,e=h.sibling,a=Un(h,{mode:"visible",children:a.children}),(t.mode&1)===0&&(a.lanes=s),a.return=t,a.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=a,t.memoizedState=null,a}function Lo(e,t){return t=Qi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ui(e,t,s,a){return a!==null&&oo(a),Pr(t,e.child,null,s),e=Lo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function $f(e,t,s,a,l,h,m){if(s)return t.flags&256?(t.flags&=-257,a=To(Error(r(422))),Ui(e,t,m,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=a.fallback,l=t.mode,a=Qi({mode:"visible",children:a.children},l,0,null),h=or(h,l,m,null),h.flags|=2,a.return=t,h.return=t,a.sibling=h,t.child=a,(t.mode&1)!==0&&Pr(t,e.child,null,m),t.child.memoizedState=Io(m),t.memoizedState=Ao,h);if((t.mode&1)===0)return Ui(e,t,m,null);if(l.data==="$!"){if(a=l.nextSibling&&l.nextSibling.dataset,a)var y=a.dgst;return a=y,h=Error(r(419)),a=To(h,a,void 0),Ui(e,t,m,a)}if(y=(m&e.childLanes)!==0,vt||y){if(a=nt,a!==null){switch(m&-m){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=(l&(a.suspendedLanes|m))!==0?0:l,l!==0&&l!==h.retryLane&&(h.retryLane=l,dn(e,l),Wt(a,e,l,-1))}return Yo(),a=To(Error(r(421))),Ui(e,t,m,a)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=Yf.bind(null,e),l._reactRetry=t,null):(e=h.treeContext,jt=En(l.nextSibling),xt=t,Fe=!0,zt=null,e!==null&&(Rt[Pt++]=un,Rt[Pt++]=cn,Rt[Pt++]=Xn,un=e.id,cn=e.overflow,Xn=t),t=Lo(t,a.children),t.flags|=4096,t)}function Oc(e,t,s){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),ho(e.return,t,s)}function Do(e,t,s,a,l){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:l}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=a,h.tail=s,h.tailMode=l)}function Ac(e,t,s){var a=t.pendingProps,l=a.revealOrder,h=a.tail;if(ft(e,t,a.children,s),a=Me.current,(a&2)!==0)a=a&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Oc(e,s,t);else if(e.tag===19)Oc(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(De(Me,a),(t.mode&1)===0)t.memoizedState=null;else switch(l){case"forwards":for(s=t.child,l=null;s!==null;)e=s.alternate,e!==null&&Ri(e)===null&&(l=s),s=s.sibling;s=l,s===null?(l=t.child,t.child=null):(l=s.sibling,s.sibling=null),Do(t,!1,l,s,h);break;case"backwards":for(s=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Ri(e)===null){t.child=l;break}e=l.sibling,l.sibling=s,s=l,l=e}Do(t,!0,s,null,h);break;case"together":Do(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $i(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function fn(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),rr|=t.lanes,(s&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,s=Un(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Un(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function zf(e,t,s){switch(t.tag){case 3:Tc(t),Rr();break;case 5:Hu(t);break;case 1:gt(t.type)&&_i(t);break;case 4:mo(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,l=t.memoizedProps.value;De(Ei,a._currentValue),a._currentValue=l;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(De(Me,Me.current&1),t.flags|=128,null):(s&t.child.childLanes)!==0?Pc(e,t,s):(De(Me,Me.current&1),e=fn(e,t,s),e!==null?e.sibling:null);De(Me,Me.current&1);break;case 19:if(a=(s&t.childLanes)!==0,(e.flags&128)!==0){if(a)return Ac(e,t,s);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),De(Me,Me.current),a)break;return null;case 22:case 23:return t.lanes=0,Ec(e,t,s)}return fn(e,t,s)}var Ic,Uo,Lc,Dc;Ic=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Uo=function(){},Lc=function(e,t,s,a){var l=e.memoizedProps;if(l!==a){e=t.stateNode,tr(Yt.current);var h=null;switch(s){case"input":l=en(e,l),a=en(e,a),h=[];break;case"select":l=E({},l,{value:void 0}),a=E({},a,{value:void 0}),h=[];break;case"textarea":l=Bn(e,l),a=Bn(e,a),h=[];break;default:typeof l.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=vi)}Xr(s,a);var m;s=null;for(P in l)if(!a.hasOwnProperty(P)&&l.hasOwnProperty(P)&&l[P]!=null)if(P==="style"){var y=l[P];for(m in y)y.hasOwnProperty(m)&&(s||(s={}),s[m]="")}else P!=="dangerouslySetInnerHTML"&&P!=="children"&&P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(u.hasOwnProperty(P)?h||(h=[]):(h=h||[]).push(P,null));for(P in a){var S=a[P];if(y=l?.[P],a.hasOwnProperty(P)&&S!==y&&(S!=null||y!=null))if(P==="style")if(y){for(m in y)!y.hasOwnProperty(m)||S&&S.hasOwnProperty(m)||(s||(s={}),s[m]="");for(m in S)S.hasOwnProperty(m)&&y[m]!==S[m]&&(s||(s={}),s[m]=S[m])}else s||(h||(h=[]),h.push(P,s)),s=S;else P==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,y=y?y.__html:void 0,S!=null&&y!==S&&(h=h||[]).push(P,S)):P==="children"?typeof S!="string"&&typeof S!="number"||(h=h||[]).push(P,""+S):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&(u.hasOwnProperty(P)?(S!=null&&P==="onScroll"&&$e("scroll",e),h||y===S||(h=[])):(h=h||[]).push(P,S))}s&&(h=h||[]).push("style",s);var P=h;(t.updateQueue=P)&&(t.flags|=4)}},Dc=function(e,t,s,a){s!==a&&(t.flags|=4)};function Ps(e,t){if(!Fe)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,a=0;if(t)for(var l=e.child;l!==null;)s|=l.lanes|l.childLanes,a|=l.subtreeFlags&14680064,a|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)s|=l.lanes|l.childLanes,a|=l.subtreeFlags,a|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=a,e.childLanes=s,t}function Ff(e,t,s){var a=t.pendingProps;switch(so(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(t),null;case 1:return gt(t.type)&&wi(),dt(t),null;case 3:return a=t.stateNode,Ir(),ze(mt),ze(ut),yo(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ji(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,zt!==null&&(Go(zt),zt=null))),Uo(e,t),dt(t),null;case 5:go(t);var l=tr(Es.current);if(s=t.type,e!==null&&t.stateNode!=null)Lc(e,t,s,a,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(r(166));return dt(t),null}if(e=tr(Yt.current),ji(t)){a=t.stateNode,s=t.type;var h=t.memoizedProps;switch(a[Qt]=t,a[ks]=h,e=(t.mode&1)!==0,s){case"dialog":$e("cancel",a),$e("close",a);break;case"iframe":case"object":case"embed":$e("load",a);break;case"video":case"audio":for(l=0;l<ys.length;l++)$e(ys[l],a);break;case"source":$e("error",a);break;case"img":case"image":case"link":$e("error",a),$e("load",a);break;case"details":$e("toggle",a);break;case"input":M(a,h),$e("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!h.multiple},$e("invalid",a);break;case"textarea":Mn(a,h),$e("invalid",a)}Xr(s,h),l=null;for(var m in h)if(h.hasOwnProperty(m)){var y=h[m];m==="children"?typeof y=="string"?a.textContent!==y&&(h.suppressHydrationWarning!==!0&&gi(a.textContent,y,e),l=["children",y]):typeof y=="number"&&a.textContent!==""+y&&(h.suppressHydrationWarning!==!0&&gi(a.textContent,y,e),l=["children",""+y]):u.hasOwnProperty(m)&&y!=null&&m==="onScroll"&&$e("scroll",a)}switch(s){case"input":Dt(a),kt(a,h,!0);break;case"textarea":Dt(a),qn(a);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(a.onclick=vi)}a=l,t.updateQueue=a,a!==null&&(t.flags|=4)}else{m=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Vn(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=m.createElement(s,{is:a.is}):(e=m.createElement(s),s==="select"&&(m=e,a.multiple?m.multiple=!0:a.size&&(m.size=a.size))):e=m.createElementNS(e,s),e[Qt]=t,e[ks]=a,Ic(e,t,!1,!1),t.stateNode=e;e:{switch(m=Zr(s,a),s){case"dialog":$e("cancel",e),$e("close",e),l=a;break;case"iframe":case"object":case"embed":$e("load",e),l=a;break;case"video":case"audio":for(l=0;l<ys.length;l++)$e(ys[l],e);l=a;break;case"source":$e("error",e),l=a;break;case"img":case"image":case"link":$e("error",e),$e("load",e),l=a;break;case"details":$e("toggle",e),l=a;break;case"input":M(e,a),l=en(e,a),$e("invalid",e);break;case"option":l=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},l=E({},a,{value:void 0}),$e("invalid",e);break;case"textarea":Mn(e,a),l=Bn(e,a),$e("invalid",e);break;default:l=a}Xr(s,l),y=l;for(h in y)if(y.hasOwnProperty(h)){var S=y[h];h==="style"?pr(e,S):h==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&yn(e,S)):h==="children"?typeof S=="string"?(s!=="textarea"||S!=="")&&Gt(e,S):typeof S=="number"&&Gt(e,""+S):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(u.hasOwnProperty(h)?S!=null&&h==="onScroll"&&$e("scroll",e):S!=null&&D(e,h,S,m))}switch(s){case"input":Dt(e),kt(e,a,!1);break;case"textarea":Dt(e),qn(e);break;case"option":a.value!=null&&e.setAttribute("value",""+xe(a.value));break;case"select":e.multiple=!!a.multiple,h=a.value,h!=null?Ht(e,!!a.multiple,h,!1):a.defaultValue!=null&&Ht(e,!!a.multiple,a.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=vi)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return dt(t),null;case 6:if(e&&t.stateNode!=null)Dc(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(r(166));if(s=tr(Es.current),tr(Yt.current),ji(t)){if(a=t.stateNode,s=t.memoizedProps,a[Qt]=t,(h=a.nodeValue!==s)&&(e=xt,e!==null))switch(e.tag){case 3:gi(a.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&gi(a.nodeValue,s,(e.mode&1)!==0)}h&&(t.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[Qt]=t,t.stateNode=a}return dt(t),null;case 13:if(ze(Me),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Fe&&jt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)zu(),Rr(),t.flags|=98560,h=!1;else if(h=ji(t),a!==null&&a.dehydrated!==null){if(e===null){if(!h)throw Error(r(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Qt]=t}else Rr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;dt(t),h=!1}else zt!==null&&(Go(zt),zt=null),h=!0;if(!h)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=s,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Me.current&1)!==0?Ze===0&&(Ze=3):Yo())),t.updateQueue!==null&&(t.flags|=4),dt(t),null);case 4:return Ir(),Uo(e,t),e===null&&ws(t.stateNode.containerInfo),dt(t),null;case 10:return co(t.type._context),dt(t),null;case 17:return gt(t.type)&&wi(),dt(t),null;case 19:if(ze(Me),h=t.memoizedState,h===null)return dt(t),null;if(a=(t.flags&128)!==0,m=h.rendering,m===null)if(a)Ps(h,!1);else{if(Ze!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(m=Ri(e),m!==null){for(t.flags|=128,Ps(h,!1),a=m.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=s,s=t.child;s!==null;)h=s,e=a,h.flags&=14680066,m=h.alternate,m===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=m.childLanes,h.lanes=m.lanes,h.child=m.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=m.memoizedProps,h.memoizedState=m.memoizedState,h.updateQueue=m.updateQueue,h.type=m.type,e=m.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return De(Me,Me.current&1|2),t.child}e=e.sibling}h.tail!==null&&He()>$r&&(t.flags|=128,a=!0,Ps(h,!1),t.lanes=4194304)}else{if(!a)if(e=Ri(m),e!==null){if(t.flags|=128,a=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),Ps(h,!0),h.tail===null&&h.tailMode==="hidden"&&!m.alternate&&!Fe)return dt(t),null}else 2*He()-h.renderingStartTime>$r&&s!==1073741824&&(t.flags|=128,a=!0,Ps(h,!1),t.lanes=4194304);h.isBackwards?(m.sibling=t.child,t.child=m):(s=h.last,s!==null?s.sibling=m:t.child=m,h.last=m)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=He(),t.sibling=null,s=Me.current,De(Me,a?s&1|2:s&1),t):(dt(t),null);case 22:case 23:return Qo(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&(t.mode&1)!==0?(bt&1073741824)!==0&&(dt(t),t.subtreeFlags&6&&(t.flags|=8192)):dt(t),null;case 24:return null;case 25:return null}throw Error(r(156,t.tag))}function Bf(e,t){switch(so(t),t.tag){case 1:return gt(t.type)&&wi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ir(),ze(mt),ze(ut),yo(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return go(t),null;case 13:if(ze(Me),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));Rr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ze(Me),null;case 4:return Ir(),null;case 10:return co(t.type._context),null;case 22:case 23:return Qo(),null;case 24:return null;default:return null}}var zi=!1,ht=!1,Mf=typeof WeakSet=="function"?WeakSet:Set,te=null;function Dr(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){qe(e,t,a)}else s.current=null}function $o(e,t,s){try{s()}catch(a){qe(e,t,a)}}var Uc=!1;function Wf(e,t){if(Ja=ii,e=mu(),Ba(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var l=a.anchorOffset,h=a.focusNode;a=a.focusOffset;try{s.nodeType,h.nodeType}catch{s=null;break e}var m=0,y=-1,S=-1,P=0,W=0,K=e,B=null;t:for(;;){for(var ee;K!==s||l!==0&&K.nodeType!==3||(y=m+l),K!==h||a!==0&&K.nodeType!==3||(S=m+a),K.nodeType===3&&(m+=K.nodeValue.length),(ee=K.firstChild)!==null;)B=K,K=ee;for(;;){if(K===e)break t;if(B===s&&++P===l&&(y=m),B===h&&++W===a&&(S=m),(ee=K.nextSibling)!==null)break;K=B,B=K.parentNode}K=ee}s=y===-1||S===-1?null:{start:y,end:S}}else s=null}s=s||{start:0,end:0}}else s=null;for(Qa={focusedElem:e,selectionRange:s},ii=!1,te=t;te!==null;)if(t=te,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,te=e;else for(;te!==null;){t=te;try{var ne=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(ne!==null){var re=ne.memoizedProps,Ge=ne.memoizedState,N=t.stateNode,j=N.getSnapshotBeforeUpdate(t.elementType===t.type?re:Ft(t.type,re),Ge);N.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var T=t.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(G){qe(t,t.return,G)}if(e=t.sibling,e!==null){e.return=t.return,te=e;break}te=t.return}return ne=Uc,Uc=!1,ne}function Os(e,t,s){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var l=a=a.next;do{if((l.tag&e)===e){var h=l.destroy;l.destroy=void 0,h!==void 0&&$o(t,s,h)}l=l.next}while(l!==a)}}function Fi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var a=s.create;s.destroy=a()}s=s.next}while(s!==t)}}function zo(e){var t=e.ref;if(t!==null){var s=e.stateNode;e.tag,e=s,typeof t=="function"?t(e):t.current=e}}function $c(e){var t=e.alternate;t!==null&&(e.alternate=null,$c(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Qt],delete t[ks],delete t[eo],delete t[bf],delete t[Ef])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function zc(e){return e.tag===5||e.tag===3||e.tag===4}function Fc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Fo(e,t,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=vi));else if(a!==4&&(e=e.child,e!==null))for(Fo(e,t,s),e=e.sibling;e!==null;)Fo(e,t,s),e=e.sibling}function Bo(e,t,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Bo(e,t,s),e=e.sibling;e!==null;)Bo(e,t,s),e=e.sibling}var st=null,Bt=!1;function On(e,t,s){for(s=s.child;s!==null;)Bc(e,t,s),s=s.sibling}function Bc(e,t,s){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(Zs,s)}catch{}switch(s.tag){case 5:ht||Dr(s,t);case 6:var a=st,l=Bt;st=null,On(e,t,s),st=a,Bt=l,st!==null&&(Bt?(e=st,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):st.removeChild(s.stateNode));break;case 18:st!==null&&(Bt?(e=st,s=s.stateNode,e.nodeType===8?Za(e.parentNode,s):e.nodeType===1&&Za(e,s),cs(e)):Za(st,s.stateNode));break;case 4:a=st,l=Bt,st=s.stateNode.containerInfo,Bt=!0,On(e,t,s),st=a,Bt=l;break;case 0:case 11:case 14:case 15:if(!ht&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){l=a=a.next;do{var h=l,m=h.destroy;h=h.tag,m!==void 0&&((h&2)!==0||(h&4)!==0)&&$o(s,t,m),l=l.next}while(l!==a)}On(e,t,s);break;case 1:if(!ht&&(Dr(s,t),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(y){qe(s,t,y)}On(e,t,s);break;case 21:On(e,t,s);break;case 22:s.mode&1?(ht=(a=ht)||s.memoizedState!==null,On(e,t,s),ht=a):On(e,t,s);break;default:On(e,t,s)}}function Mc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Mf),t.forEach(function(a){var l=Xf.bind(null,e,a);s.has(a)||(s.add(a),a.then(l,l))})}}function Mt(e,t){var s=t.deletions;if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];try{var h=e,m=t,y=m;e:for(;y!==null;){switch(y.tag){case 5:st=y.stateNode,Bt=!1;break e;case 3:st=y.stateNode.containerInfo,Bt=!0;break e;case 4:st=y.stateNode.containerInfo,Bt=!0;break e}y=y.return}if(st===null)throw Error(r(160));Bc(h,m,l),st=null,Bt=!1;var S=l.alternate;S!==null&&(S.return=null),l.return=null}catch(P){qe(l,t,P)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Wc(t,e),t=t.sibling}function Wc(e,t){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Mt(t,e),Zt(e),a&4){try{Os(3,e,e.return),Fi(3,e)}catch(re){qe(e,e.return,re)}try{Os(5,e,e.return)}catch(re){qe(e,e.return,re)}}break;case 1:Mt(t,e),Zt(e),a&512&&s!==null&&Dr(s,s.return);break;case 5:if(Mt(t,e),Zt(e),a&512&&s!==null&&Dr(s,s.return),e.flags&32){var l=e.stateNode;try{Gt(l,"")}catch(re){qe(e,e.return,re)}}if(a&4&&(l=e.stateNode,l!=null)){var h=e.memoizedProps,m=s!==null?s.memoizedProps:h,y=e.type,S=e.updateQueue;if(e.updateQueue=null,S!==null)try{y==="input"&&h.type==="radio"&&h.name!=null&&ye(l,h),Zr(y,m);var P=Zr(y,h);for(m=0;m<S.length;m+=2){var W=S[m],K=S[m+1];W==="style"?pr(l,K):W==="dangerouslySetInnerHTML"?yn(l,K):W==="children"?Gt(l,K):D(l,W,K,P)}switch(y){case"input":Le(l,h);break;case"textarea":Wn(l,h);break;case"select":var B=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!h.multiple;var ee=h.value;ee!=null?Ht(l,!!h.multiple,ee,!1):B!==!!h.multiple&&(h.defaultValue!=null?Ht(l,!!h.multiple,h.defaultValue,!0):Ht(l,!!h.multiple,h.multiple?[]:"",!1))}l[ks]=h}catch(re){qe(e,e.return,re)}}break;case 6:if(Mt(t,e),Zt(e),a&4){if(e.stateNode===null)throw Error(r(162));l=e.stateNode,h=e.memoizedProps;try{l.nodeValue=h}catch(re){qe(e,e.return,re)}}break;case 3:if(Mt(t,e),Zt(e),a&4&&s!==null&&s.memoizedState.isDehydrated)try{cs(t.containerInfo)}catch(re){qe(e,e.return,re)}break;case 4:Mt(t,e),Zt(e);break;case 13:Mt(t,e),Zt(e),l=e.child,l.flags&8192&&(h=l.memoizedState!==null,l.stateNode.isHidden=h,!h||l.alternate!==null&&l.alternate.memoizedState!==null||(qo=He())),a&4&&Mc(e);break;case 22:if(W=s!==null&&s.memoizedState!==null,e.mode&1?(ht=(P=ht)||W,Mt(t,e),ht=P):Mt(t,e),Zt(e),a&8192){if(P=e.memoizedState!==null,(e.stateNode.isHidden=P)&&!W&&(e.mode&1)!==0)for(te=e,W=e.child;W!==null;){for(K=te=W;te!==null;){switch(B=te,ee=B.child,B.tag){case 0:case 11:case 14:case 15:Os(4,B,B.return);break;case 1:Dr(B,B.return);var ne=B.stateNode;if(typeof ne.componentWillUnmount=="function"){a=B,s=B.return;try{t=a,ne.props=t.memoizedProps,ne.state=t.memoizedState,ne.componentWillUnmount()}catch(re){qe(a,s,re)}}break;case 5:Dr(B,B.return);break;case 22:if(B.memoizedState!==null){Kc(K);continue}}ee!==null?(ee.return=B,te=ee):Kc(K)}W=W.sibling}e:for(W=null,K=e;;){if(K.tag===5){if(W===null){W=K;try{l=K.stateNode,P?(h=l.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(y=K.stateNode,S=K.memoizedProps.style,m=S!=null&&S.hasOwnProperty("display")?S.display:null,y.style.display=Ke("display",m))}catch(re){qe(e,e.return,re)}}}else if(K.tag===6){if(W===null)try{K.stateNode.nodeValue=P?"":K.memoizedProps}catch(re){qe(e,e.return,re)}}else if((K.tag!==22&&K.tag!==23||K.memoizedState===null||K===e)&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===e)break e;for(;K.sibling===null;){if(K.return===null||K.return===e)break e;W===K&&(W=null),K=K.return}W===K&&(W=null),K.sibling.return=K.return,K=K.sibling}}break;case 19:Mt(t,e),Zt(e),a&4&&Mc(e);break;case 21:break;default:Mt(t,e),Zt(e)}}function Zt(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(zc(s)){var a=s;break e}s=s.return}throw Error(r(160))}switch(a.tag){case 5:var l=a.stateNode;a.flags&32&&(Gt(l,""),a.flags&=-33);var h=Fc(e);Bo(e,h,l);break;case 3:case 4:var m=a.stateNode.containerInfo,y=Fc(e);Fo(e,y,m);break;default:throw Error(r(161))}}catch(S){qe(e,e.return,S)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function qf(e,t,s){te=e,qc(e)}function qc(e,t,s){for(var a=(e.mode&1)!==0;te!==null;){var l=te,h=l.child;if(l.tag===22&&a){var m=l.memoizedState!==null||zi;if(!m){var y=l.alternate,S=y!==null&&y.memoizedState!==null||ht;y=zi;var P=ht;if(zi=m,(ht=S)&&!P)for(te=l;te!==null;)m=te,S=m.child,m.tag===22&&m.memoizedState!==null?Hc(l):S!==null?(S.return=m,te=S):Hc(l);for(;h!==null;)te=h,qc(h),h=h.sibling;te=l,zi=y,ht=P}Vc(e)}else(l.subtreeFlags&8772)!==0&&h!==null?(h.return=l,te=h):Vc(e)}}function Vc(e){for(;te!==null;){var t=te;if((t.flags&8772)!==0){var s=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:ht||Fi(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!ht)if(s===null)a.componentDidMount();else{var l=t.elementType===t.type?s.memoizedProps:Ft(t.type,s.memoizedProps);a.componentDidUpdate(l,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&Ku(t,h,a);break;case 3:var m=t.updateQueue;if(m!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}Ku(t,m,s)}break;case 5:var y=t.stateNode;if(s===null&&t.flags&4){s=y;var S=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":S.autoFocus&&s.focus();break;case"img":S.src&&(s.src=S.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var P=t.alternate;if(P!==null){var W=P.memoizedState;if(W!==null){var K=W.dehydrated;K!==null&&cs(K)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}ht||t.flags&512&&zo(t)}catch(B){qe(t,t.return,B)}}if(t===e){te=null;break}if(s=t.sibling,s!==null){s.return=t.return,te=s;break}te=t.return}}function Kc(e){for(;te!==null;){var t=te;if(t===e){te=null;break}var s=t.sibling;if(s!==null){s.return=t.return,te=s;break}te=t.return}}function Hc(e){for(;te!==null;){var t=te;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{Fi(4,t)}catch(S){qe(t,s,S)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var l=t.return;try{a.componentDidMount()}catch(S){qe(t,l,S)}}var h=t.return;try{zo(t)}catch(S){qe(t,h,S)}break;case 5:var m=t.return;try{zo(t)}catch(S){qe(t,m,S)}}}catch(S){qe(t,t.return,S)}if(t===e){te=null;break}var y=t.sibling;if(y!==null){y.return=t.return,te=y;break}te=t.return}}var Vf=Math.ceil,Bi=Y.ReactCurrentDispatcher,Mo=Y.ReactCurrentOwner,It=Y.ReactCurrentBatchConfig,Ne=0,nt=null,Je=null,it=0,bt=0,Ur=Cn(0),Ze=0,As=null,rr=0,Mi=0,Wo=0,Is=null,yt=null,qo=0,$r=1/0,pn=null,Wi=!1,Vo=null,An=null,qi=!1,In=null,Vi=0,Ls=0,Ko=null,Ki=-1,Hi=0;function pt(){return(Ne&6)!==0?He():Ki!==-1?Ki:Ki=He()}function Ln(e){return(e.mode&1)===0?1:(Ne&2)!==0&&it!==0?it&-it:Nf.transition!==null?(Hi===0&&(Hi=Fl()),Hi):(e=Ae,e!==0||(e=window.event,e=e===void 0?16:Jl(e.type)),e)}function Wt(e,t,s,a){if(50<Ls)throw Ls=0,Ko=null,Error(r(185));is(e,s,a),((Ne&2)===0||e!==nt)&&(e===nt&&((Ne&2)===0&&(Mi|=s),Ze===4&&Dn(e,it)),wt(e,a),s===1&&Ne===0&&(t.mode&1)===0&&($r=He()+500,ki&&Tn()))}function wt(e,t){var s=e.callbackNode;Ch(e,t);var a=ni(e,e===nt?it:0);if(a===0)s!==null&&Ul(s),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(s!=null&&Ul(s),t===1)e.tag===0?Cf(Jc.bind(null,e)):Iu(Jc.bind(null,e)),xf(function(){(Ne&6)===0&&Tn()}),s=null;else{switch(Bl(a)){case 1:s=ja;break;case 4:s=$l;break;case 16:s=Xs;break;case 536870912:s=zl;break;default:s=Xs}s=rd(s,Gc.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function Gc(e,t){if(Ki=-1,Hi=0,(Ne&6)!==0)throw Error(r(327));var s=e.callbackNode;if(zr()&&e.callbackNode!==s)return null;var a=ni(e,e===nt?it:0);if(a===0)return null;if((a&30)!==0||(a&e.expiredLanes)!==0||t)t=Gi(e,a);else{t=a;var l=Ne;Ne|=2;var h=Yc();(nt!==e||it!==t)&&(pn=null,$r=He()+500,ir(e,t));do try{Gf();break}catch(y){Qc(e,y)}while(!0);uo(),Bi.current=h,Ne=l,Je!==null?t=0:(nt=null,it=0,t=Ze)}if(t!==0){if(t===2&&(l=ba(e),l!==0&&(a=l,t=Ho(e,l))),t===1)throw s=As,ir(e,0),Dn(e,a),wt(e,He()),s;if(t===6)Dn(e,a);else{if(l=e.current.alternate,(a&30)===0&&!Kf(l)&&(t=Gi(e,a),t===2&&(h=ba(e),h!==0&&(a=h,t=Ho(e,h))),t===1))throw s=As,ir(e,0),Dn(e,a),wt(e,He()),s;switch(e.finishedWork=l,e.finishedLanes=a,t){case 0:case 1:throw Error(r(345));case 2:ar(e,yt,pn);break;case 3:if(Dn(e,a),(a&130023424)===a&&(t=qo+500-He(),10<t)){if(ni(e,0)!==0)break;if(l=e.suspendedLanes,(l&a)!==a){pt(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=Xa(ar.bind(null,e,yt,pn),t);break}ar(e,yt,pn);break;case 4:if(Dn(e,a),(a&4194240)===a)break;for(t=e.eventTimes,l=-1;0<a;){var m=31-Ut(a);h=1<<m,m=t[m],m>l&&(l=m),a&=~h}if(a=l,a=He()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Vf(a/1960))-a,10<a){e.timeoutHandle=Xa(ar.bind(null,e,yt,pn),a);break}ar(e,yt,pn);break;case 5:ar(e,yt,pn);break;default:throw Error(r(329))}}}return wt(e,He()),e.callbackNode===s?Gc.bind(null,e):null}function Ho(e,t){var s=Is;return e.current.memoizedState.isDehydrated&&(ir(e,t).flags|=256),e=Gi(e,t),e!==2&&(t=yt,yt=s,t!==null&&Go(t)),e}function Go(e){yt===null?yt=e:yt.push.apply(yt,e)}function Kf(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var l=s[a],h=l.getSnapshot;l=l.value;try{if(!$t(h(),l))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Dn(e,t){for(t&=~Wo,t&=~Mi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-Ut(t),a=1<<s;e[s]=-1,t&=~a}}function Jc(e){if((Ne&6)!==0)throw Error(r(327));zr();var t=ni(e,0);if((t&1)===0)return wt(e,He()),null;var s=Gi(e,t);if(e.tag!==0&&s===2){var a=ba(e);a!==0&&(t=a,s=Ho(e,a))}if(s===1)throw s=As,ir(e,0),Dn(e,t),wt(e,He()),s;if(s===6)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ar(e,yt,pn),wt(e,He()),null}function Jo(e,t){var s=Ne;Ne|=1;try{return e(t)}finally{Ne=s,Ne===0&&($r=He()+500,ki&&Tn())}}function sr(e){In!==null&&In.tag===0&&(Ne&6)===0&&zr();var t=Ne;Ne|=1;var s=It.transition,a=Ae;try{if(It.transition=null,Ae=1,e)return e()}finally{Ae=a,It.transition=s,Ne=t,(Ne&6)===0&&Tn()}}function Qo(){bt=Ur.current,ze(Ur)}function ir(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,Sf(s)),Je!==null)for(s=Je.return;s!==null;){var a=s;switch(so(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&wi();break;case 3:Ir(),ze(mt),ze(ut),yo();break;case 5:go(a);break;case 4:Ir();break;case 13:ze(Me);break;case 19:ze(Me);break;case 10:co(a.type._context);break;case 22:case 23:Qo()}s=s.return}if(nt=e,Je=e=Un(e.current,null),it=bt=t,Ze=0,As=null,Wo=Mi=rr=0,yt=Is=null,er!==null){for(t=0;t<er.length;t++)if(s=er[t],a=s.interleaved,a!==null){s.interleaved=null;var l=a.next,h=s.pending;if(h!==null){var m=h.next;h.next=l,a.next=m}s.pending=a}er=null}return e}function Qc(e,t){do{var s=Je;try{if(uo(),Pi.current=Li,Oi){for(var a=We.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}Oi=!1}if(nr=0,tt=Xe=We=null,Cs=!1,Ns=0,Mo.current=null,s===null||s.return===null){Ze=1,As=t,Je=null;break}e:{var h=e,m=s.return,y=s,S=t;if(t=it,y.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){var P=S,W=y,K=W.tag;if((W.mode&1)===0&&(K===0||K===11||K===15)){var B=W.alternate;B?(W.updateQueue=B.updateQueue,W.memoizedState=B.memoizedState,W.lanes=B.lanes):(W.updateQueue=null,W.memoizedState=null)}var ee=kc(m);if(ee!==null){ee.flags&=-257,Sc(ee,m,y,h,t),ee.mode&1&&_c(h,P,t),t=ee,S=P;var ne=t.updateQueue;if(ne===null){var re=new Set;re.add(S),t.updateQueue=re}else ne.add(S);break e}else{if((t&1)===0){_c(h,P,t),Yo();break e}S=Error(r(426))}}else if(Fe&&y.mode&1){var Ge=kc(m);if(Ge!==null){(Ge.flags&65536)===0&&(Ge.flags|=256),Sc(Ge,m,y,h,t),oo(Lr(S,y));break e}}h=S=Lr(S,y),Ze!==4&&(Ze=2),Is===null?Is=[h]:Is.push(h),h=m;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var N=yc(h,S,t);Vu(h,N);break e;case 1:y=S;var j=h.type,T=h.stateNode;if((h.flags&128)===0&&(typeof j.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(An===null||!An.has(T)))){h.flags|=65536,t&=-t,h.lanes|=t;var G=wc(h,y,t);Vu(h,G);break e}}h=h.return}while(h!==null)}Zc(s)}catch(ie){t=ie,Je===s&&s!==null&&(Je=s=s.return);continue}break}while(!0)}function Yc(){var e=Bi.current;return Bi.current=Li,e===null?Li:e}function Yo(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),nt===null||(rr&268435455)===0&&(Mi&268435455)===0||Dn(nt,it)}function Gi(e,t){var s=Ne;Ne|=2;var a=Yc();(nt!==e||it!==t)&&(pn=null,ir(e,t));do try{Hf();break}catch(l){Qc(e,l)}while(!0);if(uo(),Ne=s,Bi.current=a,Je!==null)throw Error(r(261));return nt=null,it=0,Ze}function Hf(){for(;Je!==null;)Xc(Je)}function Gf(){for(;Je!==null&&!yh();)Xc(Je)}function Xc(e){var t=nd(e.alternate,e,bt);e.memoizedProps=e.pendingProps,t===null?Zc(e):Je=t,Mo.current=null}function Zc(e){var t=e;do{var s=t.alternate;if(e=t.return,(t.flags&32768)===0){if(s=Ff(s,t,bt),s!==null){Je=s;return}}else{if(s=Bf(s,t),s!==null){s.flags&=32767,Je=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ze=6,Je=null;return}}if(t=t.sibling,t!==null){Je=t;return}Je=t=e}while(t!==null);Ze===0&&(Ze=5)}function ar(e,t,s){var a=Ae,l=It.transition;try{It.transition=null,Ae=1,Jf(e,t,s,a)}finally{It.transition=l,Ae=a}return null}function Jf(e,t,s,a){do zr();while(In!==null);if((Ne&6)!==0)throw Error(r(327));s=e.finishedWork;var l=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var h=s.lanes|s.childLanes;if(Nh(e,h),e===nt&&(Je=nt=null,it=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||qi||(qi=!0,rd(Xs,function(){return zr(),null})),h=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||h){h=It.transition,It.transition=null;var m=Ae;Ae=1;var y=Ne;Ne|=4,Mo.current=null,Wf(e,s),Wc(s,e),mf(Qa),ii=!!Ja,Qa=Ja=null,e.current=s,qf(s),wh(),Ne=y,Ae=m,It.transition=h}else e.current=s;if(qi&&(qi=!1,In=e,Vi=l),h=e.pendingLanes,h===0&&(An=null),Sh(s.stateNode),wt(e,He()),t!==null)for(a=e.onRecoverableError,s=0;s<t.length;s++)l=t[s],a(l.value,{componentStack:l.stack,digest:l.digest});if(Wi)throw Wi=!1,e=Vo,Vo=null,e;return(Vi&1)!==0&&e.tag!==0&&zr(),h=e.pendingLanes,(h&1)!==0?e===Ko?Ls++:(Ls=0,Ko=e):Ls=0,Tn(),null}function zr(){if(In!==null){var e=Bl(Vi),t=It.transition,s=Ae;try{if(It.transition=null,Ae=16>e?16:e,In===null)var a=!1;else{if(e=In,In=null,Vi=0,(Ne&6)!==0)throw Error(r(331));var l=Ne;for(Ne|=4,te=e.current;te!==null;){var h=te,m=h.child;if((te.flags&16)!==0){var y=h.deletions;if(y!==null){for(var S=0;S<y.length;S++){var P=y[S];for(te=P;te!==null;){var W=te;switch(W.tag){case 0:case 11:case 15:Os(8,W,h)}var K=W.child;if(K!==null)K.return=W,te=K;else for(;te!==null;){W=te;var B=W.sibling,ee=W.return;if($c(W),W===P){te=null;break}if(B!==null){B.return=ee,te=B;break}te=ee}}}var ne=h.alternate;if(ne!==null){var re=ne.child;if(re!==null){ne.child=null;do{var Ge=re.sibling;re.sibling=null,re=Ge}while(re!==null)}}te=h}}if((h.subtreeFlags&2064)!==0&&m!==null)m.return=h,te=m;else e:for(;te!==null;){if(h=te,(h.flags&2048)!==0)switch(h.tag){case 0:case 11:case 15:Os(9,h,h.return)}var N=h.sibling;if(N!==null){N.return=h.return,te=N;break e}te=h.return}}var j=e.current;for(te=j;te!==null;){m=te;var T=m.child;if((m.subtreeFlags&2064)!==0&&T!==null)T.return=m,te=T;else e:for(m=j;te!==null;){if(y=te,(y.flags&2048)!==0)try{switch(y.tag){case 0:case 11:case 15:Fi(9,y)}}catch(ie){qe(y,y.return,ie)}if(y===m){te=null;break e}var G=y.sibling;if(G!==null){G.return=y.return,te=G;break e}te=y.return}}if(Ne=l,Tn(),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(Zs,e)}catch{}a=!0}return a}finally{Ae=s,It.transition=t}}return!1}function ed(e,t,s){t=Lr(s,t),t=yc(e,t,1),e=Pn(e,t,1),t=pt(),e!==null&&(is(e,1,t),wt(e,t))}function qe(e,t,s){if(e.tag===3)ed(e,e,s);else for(;t!==null;){if(t.tag===3){ed(t,e,s);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(An===null||!An.has(a))){e=Lr(s,e),e=wc(t,e,1),t=Pn(t,e,1),e=pt(),t!==null&&(is(t,1,e),wt(t,e));break}}t=t.return}}function Qf(e,t,s){var a=e.pingCache;a!==null&&a.delete(t),t=pt(),e.pingedLanes|=e.suspendedLanes&s,nt===e&&(it&s)===s&&(Ze===4||Ze===3&&(it&130023424)===it&&500>He()-qo?ir(e,0):Wo|=s),wt(e,t)}function td(e,t){t===0&&((e.mode&1)===0?t=1:(t=ti,ti<<=1,(ti&130023424)===0&&(ti=4194304)));var s=pt();e=dn(e,t),e!==null&&(is(e,t,s),wt(e,s))}function Yf(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),td(e,s)}function Xf(e,t){var s=0;switch(e.tag){case 13:var a=e.stateNode,l=e.memoizedState;l!==null&&(s=l.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(r(314))}a!==null&&a.delete(t),td(e,s)}var nd;nd=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||mt.current)vt=!0;else{if((e.lanes&s)===0&&(t.flags&128)===0)return vt=!1,zf(e,t,s);vt=(e.flags&131072)!==0}else vt=!1,Fe&&(t.flags&1048576)!==0&&Lu(t,xi,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;$i(e,t),e=t.pendingProps;var l=Cr(t,ut.current);Ar(t,s),l=ko(null,t,a,e,l,s);var h=So();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,gt(a)?(h=!0,_i(t)):h=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,po(t),l.updater=Di,t.stateNode=l,l._reactInternals=t,No(t,a,e,s),t=Oo(null,t,a,!0,h,s)):(t.tag=0,Fe&&h&&ro(t),ft(null,t,l,s),t=t.child),t;case 16:a=t.elementType;e:{switch($i(e,t),e=t.pendingProps,l=a._init,a=l(a._payload),t.type=a,l=t.tag=ep(a),e=Ft(a,e),l){case 0:t=Po(null,t,a,e,s);break e;case 1:t=Nc(null,t,a,e,s);break e;case 11:t=xc(null,t,a,e,s);break e;case 14:t=jc(null,t,a,Ft(a.type,e),s);break e}throw Error(r(306,a,""))}return t;case 0:return a=t.type,l=t.pendingProps,l=t.elementType===a?l:Ft(a,l),Po(e,t,a,l,s);case 1:return a=t.type,l=t.pendingProps,l=t.elementType===a?l:Ft(a,l),Nc(e,t,a,l,s);case 3:e:{if(Tc(t),e===null)throw Error(r(387));a=t.pendingProps,h=t.memoizedState,l=h.element,qu(e,t),Ti(t,a,null,s);var m=t.memoizedState;if(a=m.element,h.isDehydrated)if(h={element:a,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){l=Lr(Error(r(423)),t),t=Rc(e,t,a,s,l);break e}else if(a!==l){l=Lr(Error(r(424)),t),t=Rc(e,t,a,s,l);break e}else for(jt=En(t.stateNode.containerInfo.firstChild),xt=t,Fe=!0,zt=null,s=Mu(t,null,a,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Rr(),a===l){t=fn(e,t,s);break e}ft(e,t,a,s)}t=t.child}return t;case 5:return Hu(t),e===null&&ao(t),a=t.type,l=t.pendingProps,h=e!==null?e.memoizedProps:null,m=l.children,Ya(a,l)?m=null:h!==null&&Ya(a,h)&&(t.flags|=32),Cc(e,t),ft(e,t,m,s),t.child;case 6:return e===null&&ao(t),null;case 13:return Pc(e,t,s);case 4:return mo(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Pr(t,null,a,s):ft(e,t,a,s),t.child;case 11:return a=t.type,l=t.pendingProps,l=t.elementType===a?l:Ft(a,l),xc(e,t,a,l,s);case 7:return ft(e,t,t.pendingProps,s),t.child;case 8:return ft(e,t,t.pendingProps.children,s),t.child;case 12:return ft(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(a=t.type._context,l=t.pendingProps,h=t.memoizedProps,m=l.value,De(Ei,a._currentValue),a._currentValue=m,h!==null)if($t(h.value,m)){if(h.children===l.children&&!mt.current){t=fn(e,t,s);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var y=h.dependencies;if(y!==null){m=h.child;for(var S=y.firstContext;S!==null;){if(S.context===a){if(h.tag===1){S=hn(-1,s&-s),S.tag=2;var P=h.updateQueue;if(P!==null){P=P.shared;var W=P.pending;W===null?S.next=S:(S.next=W.next,W.next=S),P.pending=S}}h.lanes|=s,S=h.alternate,S!==null&&(S.lanes|=s),ho(h.return,s,t),y.lanes|=s;break}S=S.next}}else if(h.tag===10)m=h.type===t.type?null:h.child;else if(h.tag===18){if(m=h.return,m===null)throw Error(r(341));m.lanes|=s,y=m.alternate,y!==null&&(y.lanes|=s),ho(m,s,t),m=h.sibling}else m=h.child;if(m!==null)m.return=h;else for(m=h;m!==null;){if(m===t){m=null;break}if(h=m.sibling,h!==null){h.return=m.return,m=h;break}m=m.return}h=m}ft(e,t,l.children,s),t=t.child}return t;case 9:return l=t.type,a=t.pendingProps.children,Ar(t,s),l=Ot(l),a=a(l),t.flags|=1,ft(e,t,a,s),t.child;case 14:return a=t.type,l=Ft(a,t.pendingProps),l=Ft(a.type,l),jc(e,t,a,l,s);case 15:return bc(e,t,t.type,t.pendingProps,s);case 17:return a=t.type,l=t.pendingProps,l=t.elementType===a?l:Ft(a,l),$i(e,t),t.tag=1,gt(a)?(e=!0,_i(t)):e=!1,Ar(t,s),gc(t,a,l),No(t,a,l,s),Oo(null,t,a,!0,e,s);case 19:return Ac(e,t,s);case 22:return Ec(e,t,s)}throw Error(r(156,t.tag))};function rd(e,t){return Dl(e,t)}function Zf(e,t,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(e,t,s,a){return new Zf(e,t,s,a)}function Xo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ep(e){if(typeof e=="function")return Xo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ce)return 11;if(e===Oe)return 14}return 2}function Un(e,t){var s=e.alternate;return s===null?(s=Lt(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Ji(e,t,s,a,l,h){var m=2;if(a=e,typeof e=="function")Xo(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case U:return or(s.children,l,h,t);case ue:m=8,l|=8;break;case we:return e=Lt(12,s,t,l|2),e.elementType=we,e.lanes=h,e;case Se:return e=Lt(13,s,t,l),e.elementType=Se,e.lanes=h,e;case Re:return e=Lt(19,s,t,l),e.elementType=Re,e.lanes=h,e;case J:return Qi(s,l,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case je:m=10;break e;case Ie:m=9;break e;case Ce:m=11;break e;case Oe:m=14;break e;case be:m=16,a=null;break e}throw Error(r(130,e==null?e:typeof e,""))}return t=Lt(m,s,t,l),t.elementType=e,t.type=a,t.lanes=h,t}function or(e,t,s,a){return e=Lt(7,e,a,t),e.lanes=s,e}function Qi(e,t,s,a){return e=Lt(22,e,a,t),e.elementType=J,e.lanes=s,e.stateNode={isHidden:!1},e}function Zo(e,t,s){return e=Lt(6,e,null,t),e.lanes=s,e}function el(e,t,s){return t=Lt(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function tp(e,t,s,a,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ea(0),this.expirationTimes=Ea(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ea(0),this.identifierPrefix=a,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function tl(e,t,s,a,l,h,m,y,S){return e=new tp(e,t,s,y,S),t===1?(t=1,h===!0&&(t|=8)):t=0,h=Lt(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},po(h),e}function np(e,t,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Q,key:a==null?null:""+a,children:e,containerInfo:t,implementation:s}}function sd(e){if(!e)return Nn;e=e._reactInternals;e:{if(an(e)!==e||e.tag!==1)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(gt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(r(171))}if(e.tag===1){var s=e.type;if(gt(s))return Ou(e,s,t)}return t}function id(e,t,s,a,l,h,m,y,S){return e=tl(s,a,!0,e,l,h,m,y,S),e.context=sd(null),s=e.current,a=pt(),l=Ln(s),h=hn(a,l),h.callback=t??null,Pn(s,h,l),e.current.lanes=l,is(e,l,a),wt(e,a),e}function Yi(e,t,s,a){var l=t.current,h=pt(),m=Ln(l);return s=sd(s),t.context===null?t.context=s:t.pendingContext=s,t=hn(h,m),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Pn(l,t,m),e!==null&&(Wt(e,l,m,h),Ni(e,l,m)),m}function Xi(e){return e=e.current,e.child?(e.child.tag===5,e.child.stateNode):null}function ad(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function nl(e,t){ad(e,t),(e=e.alternate)&&ad(e,t)}function rp(){return null}var od=typeof reportError=="function"?reportError:function(e){console.error(e)};function rl(e){this._internalRoot=e}Zi.prototype.render=rl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(r(409));Yi(e,t,null,null)},Zi.prototype.unmount=rl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;sr(function(){Yi(null,e,null,null)}),t[on]=null}};function Zi(e){this._internalRoot=e}Zi.prototype.unstable_scheduleHydration=function(e){if(e){var t=ql();e={blockedOn:null,target:e,priority:t};for(var s=0;s<xn.length&&t!==0&&t<xn[s].priority;s++);xn.splice(s,0,e),s===0&&Hl(e)}};function sl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ea(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ld(){}function sp(e,t,s,a,l){if(l){if(typeof a=="function"){var h=a;a=function(){var P=Xi(m);h.call(P)}}var m=id(t,a,e,0,null,!1,!1,"",ld);return e._reactRootContainer=m,e[on]=m.current,ws(e.nodeType===8?e.parentNode:e),sr(),m}for(;l=e.lastChild;)e.removeChild(l);if(typeof a=="function"){var y=a;a=function(){var P=Xi(S);y.call(P)}}var S=tl(e,0,!1,null,null,!1,!1,"",ld);return e._reactRootContainer=S,e[on]=S.current,ws(e.nodeType===8?e.parentNode:e),sr(function(){Yi(t,S,s,a)}),S}function ta(e,t,s,a,l){var h=s._reactRootContainer;if(h){var m=h;if(typeof l=="function"){var y=l;l=function(){var S=Xi(m);y.call(S)}}Yi(t,m,e,l)}else m=sp(s,t,e,l,a);return Xi(m)}Ml=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=ss(t.pendingLanes);s!==0&&(Ca(t,s|1),wt(t,He()),(Ne&6)===0&&($r=He()+500,Tn()))}break;case 13:sr(function(){var a=dn(e,1);if(a!==null){var l=pt();Wt(a,e,1,l)}}),nl(e,1)}},Na=function(e){if(e.tag===13){var t=dn(e,134217728);if(t!==null){var s=pt();Wt(t,e,134217728,s)}nl(e,134217728)}},Wl=function(e){if(e.tag===13){var t=Ln(e),s=dn(e,t);if(s!==null){var a=pt();Wt(s,e,t,a)}nl(e,t)}},ql=function(){return Ae},Vl=function(e,t){var s=Ae;try{return Ae=e,t()}finally{Ae=s}},mr=function(e,t,s){switch(t){case"input":if(Le(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var a=s[t];if(a!==e&&a.form===e.form){var l=yi(a);if(!l)throw Error(r(90));Nt(a),Le(a,l)}}}break;case"textarea":Wn(e,s);break;case"select":t=s.value,t!=null&&Ht(e,!!s.multiple,t,!1)}},fe=Jo,Ye=sr;var ip={usingClientEntryPoint:!1,Events:[Ss,br,yi,L,H,Jo]},Ds={findFiberByHostInstance:Qn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ap={bundleType:Ds.bundleType,version:Ds.version,rendererPackageName:Ds.rendererPackageName,rendererConfig:Ds.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Il(e),e===null?null:e.stateNode},findFiberByHostInstance:Ds.findFiberByHostInstance||rp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var na=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!na.isDisabled&&na.supportsFiber)try{Zs=na.inject(ap),Jt=na}catch{}}return _t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ip,_t.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sl(t))throw Error(r(200));return np(e,t,null,s)},_t.createRoot=function(e,t){if(!sl(e))throw Error(r(299));var s=!1,a="",l=od;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=tl(e,1,!1,null,null,s,!1,a,l),e[on]=t.current,ws(e.nodeType===8?e.parentNode:e),new rl(t)},_t.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=Il(t),e=e===null?null:e.stateNode,e},_t.flushSync=function(e){return sr(e)},_t.hydrate=function(e,t,s){if(!ea(t))throw Error(r(200));return ta(null,e,t,!0,s)},_t.hydrateRoot=function(e,t,s){if(!sl(e))throw Error(r(405));var a=s!=null&&s.hydratedSources||null,l=!1,h="",m=od;if(s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(m=s.onRecoverableError)),t=id(t,null,e,1,s??null,l,!1,h,m),e[on]=t.current,ws(e),a)for(e=0;e<a.length;e++)s=a[e],l=s._getVersion,l=l(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,l]:t.mutableSourceEagerHydrationData.push(s,l);return new Zi(t)},_t.render=function(e,t,s){if(!ea(t))throw Error(r(200));return ta(null,e,t,!1,s)},_t.unmountComponentAtNode=function(e){if(!ea(e))throw Error(r(40));return e._reactRootContainer?(sr(function(){ta(null,null,e,!1,function(){e._reactRootContainer=null,e[on]=null})}),!0):!1},_t.unstable_batchedUpdates=Jo,_t.unstable_renderSubtreeIntoContainer=function(e,t,s,a){if(!ea(s))throw Error(r(200));if(e==null||e._reactInternals===void 0)throw Error(r(38));return ta(e,t,s,!1,a)},_t.version="18.3.1-next-f1338f8080-20240426",_t}var gd;function pp(){if(gd)return ol.exports;gd=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),ol.exports=fp(),ol.exports}var vd;function mp(){if(vd)return ra;vd=1;var i=pp();return ra.createRoot=i.createRoot,ra.hydrateRoot=i.hydrateRoot,ra}var gp=mp();function ma(i,n){var r={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&n.indexOf(o)<0&&(r[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(i);u<o.length;u++)n.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(i,o[u])&&(r[o[u]]=i[o[u]]);return r}function vp(i,n,r,o){function u(c){return c instanceof r?c:new r(function(f){f(c)})}return new(r||(r=Promise))(function(c,f){function p(w){try{v(o.next(w))}catch(C){f(C)}}function g(w){try{v(o.throw(w))}catch(C){f(C)}}function v(w){w.done?c(w.value):u(w.value).then(p,g)}v((o=o.apply(i,n||[])).next())})}const yp=i=>i?(...n)=>i(...n):(...n)=>fetch(...n);class Rl extends Error{constructor(n,r="FunctionsError",o){super(n),this.name=r,this.context=o}}class wp extends Rl{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class yd extends Rl{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class wd extends Rl{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var yl;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(yl||(yl={}));class _p{constructor(n,{headers:r={},customFetch:o,region:u=yl.Any}={}){this.url=n,this.headers=r,this.region=u,this.fetch=yp(o)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return vp(this,arguments,void 0,function*(r,o={}){var u;let c,f;try{const{headers:p,method:g,body:v,signal:w,timeout:C}=o;let k={},{region:b}=o;b||(b=this.region);const R=new URL(`${this.url}/${r}`);b&&b!=="any"&&(k["x-region"]=b,R.searchParams.set("forceFunctionRegion",b));let A;v&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&v instanceof Blob||v instanceof ArrayBuffer?(k["Content-Type"]="application/octet-stream",A=v):typeof v=="string"?(k["Content-Type"]="text/plain",A=v):typeof FormData<"u"&&v instanceof FormData?A=v:(k["Content-Type"]="application/json",A=JSON.stringify(v)):v&&typeof v!="string"&&!(typeof Blob<"u"&&v instanceof Blob)&&!(v instanceof ArrayBuffer)&&!(typeof FormData<"u"&&v instanceof FormData)?A=JSON.stringify(v):A=v;let I=w;C&&(f=new AbortController,c=setTimeout(()=>f.abort(),C),w?(I=f.signal,w.addEventListener("abort",()=>f.abort())):I=f.signal);const F=yield this.fetch(R.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},k),this.headers),p),body:A,signal:I}).catch(V=>{throw new wp(V)}),q=F.headers.get("x-relay-error");if(q&&q==="true")throw new yd(F);if(!F.ok)throw new wd(F);let D=((u=F.headers.get("Content-Type"))!==null&&u!==void 0?u:"text/plain").split(";")[0].trim(),Y;return D==="application/json"?Y=yield F.json():D==="application/octet-stream"||D==="application/pdf"?Y=yield F.blob():D==="text/event-stream"?Y=F:D==="multipart/form-data"?Y=yield F.formData():Y=yield F.text(),{data:Y,error:null,response:F}}catch(p){return{data:null,error:p,response:p instanceof wd||p instanceof yd?p.context:void 0}}finally{c&&clearTimeout(c)}})}}var kp=class extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}},Sp=class{constructor(i){var n,r,o;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(n=i.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=i.signal,this.isMaybeSingle=(r=i.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(o=i.urlLengthLimit)!==null&&o!==void 0?o:8e3,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,n){return this.headers=new Headers(this.headers),this.headers.set(i,n),this}then(i,n){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let u=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{let f=null,p=null,g=null,v=c.status,w=c.statusText;if(c.ok){var C,k;if(r.method!=="HEAD"){var b;const F=await c.text();F===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((b=r.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?p=F:p=JSON.parse(F))}const A=(C=r.headers.get("Prefer"))===null||C===void 0?void 0:C.match(/count=(exact|planned|estimated)/),I=(k=c.headers.get("content-range"))===null||k===void 0?void 0:k.split("/");A&&I&&I.length>1&&(g=parseInt(I[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(p)&&(p.length>1?(f={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,g=null,v=406,w="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{var R;const A=await c.text();try{f=JSON.parse(A),Array.isArray(f)&&c.status===404&&(p=[],f=null,v=200,w="OK")}catch{c.status===404&&A===""?(v=204,w="No Content"):f={message:A}}if(f&&r.isMaybeSingle&&(!(f==null||(R=f.details)===null||R===void 0)&&R.includes("0 rows"))&&(f=null,v=200,w="OK"),f&&r.shouldThrowOnError)throw new kp(f)}return{error:f,data:p,count:g,status:v,statusText:w}});return this.shouldThrowOnError||(u=u.catch(c=>{var f;let p="",g="",v="";const w=c?.cause;if(w){var C,k,b,R;const F=(C=w?.message)!==null&&C!==void 0?C:"",q=(k=w?.code)!==null&&k!==void 0?k:"";p=`${(b=c?.name)!==null&&b!==void 0?b:"FetchError"}: ${c?.message}`,p+=`

Caused by: ${(R=w?.name)!==null&&R!==void 0?R:"Error"}: ${F}`,q&&(p+=` (${q})`),w?.stack&&(p+=`
${w.stack}`)}else{var A;p=(A=c?.stack)!==null&&A!==void 0?A:""}const I=this.url.toString().length;return c?.name==="AbortError"||c?.code==="ABORT_ERR"?(v="",g="Request was aborted (timeout or manual cancellation)",I>this.urlLengthLimit&&(g+=`. Note: Your request URL is ${I} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(w?.name==="HeadersOverflowError"||w?.code==="UND_ERR_HEADERS_OVERFLOW")&&(v="",g="HTTP headers exceeded server limits (typically 16KB)",I>this.urlLengthLimit&&(g+=`. Your request URL is ${I} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(f=c?.name)!==null&&f!==void 0?f:"FetchError"}: ${c?.message}`,details:p,hint:g,code:v},data:null,count:null,status:0,statusText:""}})),u.then(i,n)}returns(){return this}overrideTypes(){return this}},xp=class extends Sp{select(i){let n=!1;const r=(i??"*").split("").map(o=>/\s/.test(o)&&!n?"":(o==='"'&&(n=!n),o)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:n=!0,nullsFirst:r,foreignTable:o,referencedTable:u=o}={}){const c=u?`${u}.order`:"order",f=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${f?`${f},`:""}${i}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:n,referencedTable:r=n}={}){const o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${i}`),this}range(i,n,{foreignTable:r,referencedTable:o=r}={}){const u=typeof o>"u"?"offset":`${o}.offset`,c=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(u,`${i}`),this.url.searchParams.set(c,`${n-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:n=!1,settings:r=!1,buffers:o=!1,wal:u=!1,format:c="text"}={}){var f;const p=[i?"analyze":null,n?"verbose":null,r?"settings":null,o?"buffers":null,u?"wal":null].filter(Boolean).join("|"),g=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${g}"; options=${p};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};const _d=new RegExp("[,()]");var Kr=class extends xp{eq(i,n){return this.url.searchParams.append(i,`eq.${n}`),this}neq(i,n){return this.url.searchParams.append(i,`neq.${n}`),this}gt(i,n){return this.url.searchParams.append(i,`gt.${n}`),this}gte(i,n){return this.url.searchParams.append(i,`gte.${n}`),this}lt(i,n){return this.url.searchParams.append(i,`lt.${n}`),this}lte(i,n){return this.url.searchParams.append(i,`lte.${n}`),this}like(i,n){return this.url.searchParams.append(i,`like.${n}`),this}likeAllOf(i,n){return this.url.searchParams.append(i,`like(all).{${n.join(",")}}`),this}likeAnyOf(i,n){return this.url.searchParams.append(i,`like(any).{${n.join(",")}}`),this}ilike(i,n){return this.url.searchParams.append(i,`ilike.${n}`),this}ilikeAllOf(i,n){return this.url.searchParams.append(i,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(i,n){return this.url.searchParams.append(i,`ilike(any).{${n.join(",")}}`),this}regexMatch(i,n){return this.url.searchParams.append(i,`match.${n}`),this}regexIMatch(i,n){return this.url.searchParams.append(i,`imatch.${n}`),this}is(i,n){return this.url.searchParams.append(i,`is.${n}`),this}isDistinct(i,n){return this.url.searchParams.append(i,`isdistinct.${n}`),this}in(i,n){const r=Array.from(new Set(n)).map(o=>typeof o=="string"&&_d.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(i,`in.(${r})`),this}notIn(i,n){const r=Array.from(new Set(n)).map(o=>typeof o=="string"&&_d.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(i,`not.in.(${r})`),this}contains(i,n){return typeof n=="string"?this.url.searchParams.append(i,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(i,`cs.{${n.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(n)}`),this}containedBy(i,n){return typeof n=="string"?this.url.searchParams.append(i,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(i,`cd.{${n.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(n)}`),this}rangeGt(i,n){return this.url.searchParams.append(i,`sr.${n}`),this}rangeGte(i,n){return this.url.searchParams.append(i,`nxl.${n}`),this}rangeLt(i,n){return this.url.searchParams.append(i,`sl.${n}`),this}rangeLte(i,n){return this.url.searchParams.append(i,`nxr.${n}`),this}rangeAdjacent(i,n){return this.url.searchParams.append(i,`adj.${n}`),this}overlaps(i,n){return typeof n=="string"?this.url.searchParams.append(i,`ov.${n}`):this.url.searchParams.append(i,`ov.{${n.join(",")}}`),this}textSearch(i,n,{config:r,type:o}={}){let u="";o==="plain"?u="pl":o==="phrase"?u="ph":o==="websearch"&&(u="w");const c=r===void 0?"":`(${r})`;return this.url.searchParams.append(i,`${u}fts${c}.${n}`),this}match(i){return Object.entries(i).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(i,n,r){return this.url.searchParams.append(i,`not.${n}.${r}`),this}or(i,{foreignTable:n,referencedTable:r=n}={}){const o=r?`${r}.or`:"or";return this.url.searchParams.append(o,`(${i})`),this}filter(i,n,r){return this.url.searchParams.append(i,`${n}.${r}`),this}},jp=class{constructor(i,{headers:n={},schema:r,fetch:o,urlLengthLimit:u=8e3}){this.url=i,this.headers=new Headers(n),this.schema=r,this.fetch=o,this.urlLengthLimit=u}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(i,n){const{head:r=!1,count:o}=n??{},u=r?"HEAD":"GET";let c=!1;const f=(i??"*").split("").map(v=>/\s/.test(v)&&!c?"":(v==='"'&&(c=!c),v)).join(""),{url:p,headers:g}=this.cloneRequestState();return p.searchParams.set("select",f),o&&g.append("Prefer",`count=${o}`),new Kr({method:u,url:p,headers:g,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(i,{count:n,defaultToNull:r=!0}={}){var o;const u="POST",{url:c,headers:f}=this.cloneRequestState();if(n&&f.append("Prefer",`count=${n}`),r||f.append("Prefer","missing=default"),Array.isArray(i)){const p=i.reduce((g,v)=>g.concat(Object.keys(v)),[]);if(p.length>0){const g=[...new Set(p)].map(v=>`"${v}"`);c.searchParams.set("columns",g.join(","))}}return new Kr({method:u,url:c,headers:f,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(i,{onConflict:n,ignoreDuplicates:r=!1,count:o,defaultToNull:u=!0}={}){var c;const f="POST",{url:p,headers:g}=this.cloneRequestState();if(g.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&p.searchParams.set("on_conflict",n),o&&g.append("Prefer",`count=${o}`),u||g.append("Prefer","missing=default"),Array.isArray(i)){const v=i.reduce((w,C)=>w.concat(Object.keys(C)),[]);if(v.length>0){const w=[...new Set(v)].map(C=>`"${C}"`);p.searchParams.set("columns",w.join(","))}}return new Kr({method:f,url:p,headers:g,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch,urlLengthLimit:this.urlLengthLimit})}update(i,{count:n}={}){var r;const o="PATCH",{url:u,headers:c}=this.cloneRequestState();return n&&c.append("Prefer",`count=${n}`),new Kr({method:o,url:u,headers:c,schema:this.schema,body:i,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:i}={}){var n;const r="DELETE",{url:o,headers:u}=this.cloneRequestState();return i&&u.append("Prefer",`count=${i}`),new Kr({method:r,url:o,headers:u,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}};function Ms(i){"@babel/helpers - typeof";return Ms=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ms(i)}function bp(i,n){if(Ms(i)!="object"||!i)return i;var r=i[Symbol.toPrimitive];if(r!==void 0){var o=r.call(i,n);if(Ms(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(i)}function Ep(i){var n=bp(i,"string");return Ms(n)=="symbol"?n:n+""}function Cp(i,n,r){return(n=Ep(n))in i?Object.defineProperty(i,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[n]=r,i}function kd(i,n){var r=Object.keys(i);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);n&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(i,u).enumerable})),r.push.apply(r,o)}return r}function sa(i){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?kd(Object(r),!0).forEach(function(o){Cp(i,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):kd(Object(r)).forEach(function(o){Object.defineProperty(i,o,Object.getOwnPropertyDescriptor(r,o))})}return i}var Np=class Xd{constructor(n,{headers:r={},schema:o,fetch:u,timeout:c,urlLengthLimit:f=8e3}={}){this.url=n,this.headers=new Headers(r),this.schemaName=o,this.urlLengthLimit=f;const p=u??globalThis.fetch;c!==void 0&&c>0?this.fetch=(g,v)=>{const w=new AbortController,C=setTimeout(()=>w.abort(),c),k=v?.signal;if(k){if(k.aborted)return clearTimeout(C),p(g,v);const b=()=>{clearTimeout(C),w.abort()};return k.addEventListener("abort",b,{once:!0}),p(g,sa(sa({},v),{},{signal:w.signal})).finally(()=>{clearTimeout(C),k.removeEventListener("abort",b)})}return p(g,sa(sa({},v),{},{signal:w.signal})).finally(()=>clearTimeout(C))}:this.fetch=p}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new jp(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(n){return new Xd(this.url,{headers:this.headers,schema:n,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(n,r={},{head:o=!1,get:u=!1,count:c}={}){var f;let p;const g=new URL(`${this.url}/rpc/${n}`);let v;const w=b=>b!==null&&typeof b=="object"&&(!Array.isArray(b)||b.some(w)),C=o&&Object.values(r).some(w);C?(p="POST",v=r):o||u?(p=o?"HEAD":"GET",Object.entries(r).filter(([b,R])=>R!==void 0).map(([b,R])=>[b,Array.isArray(R)?`{${R.join(",")}}`:`${R}`]).forEach(([b,R])=>{g.searchParams.append(b,R)})):(p="POST",v=r);const k=new Headers(this.headers);return C?k.set("Prefer",c?`count=${c},return=minimal`:"return=minimal"):c&&k.set("Prefer",`count=${c}`),new Kr({method:p,url:g,headers:k,schema:this.schemaName,body:v,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch,urlLengthLimit:this.urlLengthLimit})}};class Tp{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const o=r.versions;if(o&&o.node){const u=o.node,c=parseInt(u.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let r=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(r+=`

Suggested solution: ${n.workaround}`),new Error(r)}static createWebSocket(n,r){const o=this.getWebSocketConstructor();return new o(n,r)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const Rp="2.97.0",Pp=`realtime-js/${Rp}`,Op="1.0.0",Zd="2.0.0",Sd=Zd,wl=1e4,Ap=1e3,Ip=100;var zn;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(zn||(zn={}));var et;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(et||(et={}));var Kt;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(Kt||(Kt={}));var _l;(function(i){i.websocket="websocket"})(_l||(_l={}));var dr;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(dr||(dr={}));class Lp{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,r){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(n));let o=[n.join_ref,n.ref,n.topic,n.event,n.payload];return r(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(n){var r;return this._isArrayBuffer((r=n.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var r,o;const u=(o=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&o!==void 0?o:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,u)}_encodeJsonUserBroadcastPush(n){var r,o;const u=(o=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&o!==void 0?o:{},f=new TextEncoder().encode(JSON.stringify(u)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,f)}_encodeUserBroadcastPush(n,r,o){var u,c;const f=n.topic,p=(u=n.ref)!==null&&u!==void 0?u:"",g=(c=n.join_ref)!==null&&c!==void 0?c:"",v=n.payload.event,w=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},C=Object.keys(w).length===0?"":JSON.stringify(w);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`ref length ${p.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`topic length ${f.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`userEvent length ${v.length} exceeds maximum of 255`);if(C.length>255)throw new Error(`metadata length ${C.length} exceeds maximum of 255`);const k=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+p.length+f.length+v.length+C.length,b=new ArrayBuffer(this.HEADER_LENGTH+k);let R=new DataView(b),A=0;R.setUint8(A++,this.KINDS.userBroadcastPush),R.setUint8(A++,g.length),R.setUint8(A++,p.length),R.setUint8(A++,f.length),R.setUint8(A++,v.length),R.setUint8(A++,C.length),R.setUint8(A++,r),Array.from(g,F=>R.setUint8(A++,F.charCodeAt(0))),Array.from(p,F=>R.setUint8(A++,F.charCodeAt(0))),Array.from(f,F=>R.setUint8(A++,F.charCodeAt(0))),Array.from(v,F=>R.setUint8(A++,F.charCodeAt(0))),Array.from(C,F=>R.setUint8(A++,F.charCodeAt(0)));var I=new Uint8Array(b.byteLength+o.byteLength);return I.set(new Uint8Array(b),0),I.set(new Uint8Array(o),b.byteLength),I.buffer}decode(n,r){if(this._isArrayBuffer(n)){let o=this._binaryDecode(n);return r(o)}if(typeof n=="string"){const o=JSON.parse(n),[u,c,f,p,g]=o;return r({join_ref:u,ref:c,topic:f,event:p,payload:g})}return r({})}_binaryDecode(n){const r=new DataView(n),o=r.getUint8(0),u=new TextDecoder;if(o===this.KINDS.userBroadcast)return this._decodeUserBroadcast(n,r,u)}_decodeUserBroadcast(n,r,o){const u=r.getUint8(1),c=r.getUint8(2),f=r.getUint8(3),p=r.getUint8(4);let g=this.HEADER_LENGTH+4;const v=o.decode(n.slice(g,g+u));g=g+u;const w=o.decode(n.slice(g,g+c));g=g+c;const C=o.decode(n.slice(g,g+f));g=g+f;const k=n.slice(g,n.byteLength),b=p===this.JSON_ENCODING?JSON.parse(o.decode(k)):k,R={type:this.BROADCAST_EVENT,event:w,payload:b};return f>0&&(R.meta=JSON.parse(C)),{join_ref:null,ref:null,topic:v,event:this.BROADCAST_EVENT,payload:R}}_isArrayBuffer(n){var r;return n instanceof ArrayBuffer||((r=n?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(n,r){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([o])=>r.includes(o)))}}class eh{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ue;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(Ue||(Ue={}));const xd=(i,n,r={})=>{var o;const u=(o=r.skipTypes)!==null&&o!==void 0?o:[];return n?Object.keys(n).reduce((c,f)=>(c[f]=Dp(f,i,n,u),c),{}):{}},Dp=(i,n,r,o)=>{const u=n.find(p=>p.name===i),c=u?.type,f=r[i];return c&&!o.includes(c)?th(c,f):kl(f)},th=(i,n)=>{if(i.charAt(0)==="_"){const r=i.slice(1,i.length);return Fp(n,r)}switch(i){case Ue.bool:return Up(n);case Ue.float4:case Ue.float8:case Ue.int2:case Ue.int4:case Ue.int8:case Ue.numeric:case Ue.oid:return $p(n);case Ue.json:case Ue.jsonb:return zp(n);case Ue.timestamp:return Bp(n);case Ue.abstime:case Ue.date:case Ue.daterange:case Ue.int4range:case Ue.int8range:case Ue.money:case Ue.reltime:case Ue.text:case Ue.time:case Ue.timestamptz:case Ue.timetz:case Ue.tsrange:case Ue.tstzrange:return kl(n);default:return kl(n)}},kl=i=>i,Up=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},$p=i=>{if(typeof i=="string"){const n=parseFloat(i);if(!Number.isNaN(n))return n}return i},zp=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch{return i}return i},Fp=(i,n)=>{if(typeof i!="string")return i;const r=i.length-1,o=i[r];if(i[0]==="{"&&o==="}"){let c;const f=i.slice(1,r);try{c=JSON.parse("["+f+"]")}catch{c=f?f.split(","):[]}return c.map(p=>th(n,p))}return i},Bp=i=>typeof i=="string"?i.replace(" ","T"):i,nh=i=>{const n=new URL(i);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class cl{constructor(n,r,o={},u=wl){this.channel=n,this.event=r,this.payload=o,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var o;return this._hasReceived(n)&&r((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(o=>o.status===n).forEach(o=>o.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var jd;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(jd||(jd={}));class Fs{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},u=>{const{onJoin:c,onLeave:f,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Fs.syncState(this.state,u,c,f),this.pendingDiffs.forEach(g=>{this.state=Fs.syncDiff(this.state,g,c,f)}),this.pendingDiffs=[],p()}),this.channel._on(o.diff,{},u=>{const{onJoin:c,onLeave:f,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=Fs.syncDiff(this.state,u,c,f),p())}),this.onJoin((u,c,f)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:c,newPresences:f})}),this.onLeave((u,c,f)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:c,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,o,u){const c=this.cloneDeep(n),f=this.transformState(r),p={},g={};return this.map(c,(v,w)=>{f[v]||(g[v]=w)}),this.map(f,(v,w)=>{const C=c[v];if(C){const k=w.map(I=>I.presence_ref),b=C.map(I=>I.presence_ref),R=w.filter(I=>b.indexOf(I.presence_ref)<0),A=C.filter(I=>k.indexOf(I.presence_ref)<0);R.length>0&&(p[v]=R),A.length>0&&(g[v]=A)}else p[v]=w}),this.syncDiff(c,{joins:p,leaves:g},o,u)}static syncDiff(n,r,o,u){const{joins:c,leaves:f}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return o||(o=()=>{}),u||(u=()=>{}),this.map(c,(p,g)=>{var v;const w=(v=n[p])!==null&&v!==void 0?v:[];if(n[p]=this.cloneDeep(g),w.length>0){const C=n[p].map(b=>b.presence_ref),k=w.filter(b=>C.indexOf(b.presence_ref)<0);n[p].unshift(...k)}o(p,w,g)}),this.map(f,(p,g)=>{let v=n[p];if(!v)return;const w=g.map(C=>C.presence_ref);v=v.filter(C=>w.indexOf(C.presence_ref)<0),n[p]=v,u(p,v,g),v.length===0&&delete n[p]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(o=>r(o,n[o]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,o)=>{const u=n[o];return"metas"in u?r[o]=u.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):r[o]=u,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var bd;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(bd||(bd={}));var Bs;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(Bs||(Bs={}));var mn;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(mn||(mn={}));class Jr{constructor(n,r={config:{}},o){var u,c;if(this.topic=n,this.params=r,this.socket=o,this.bindings={},this.state=et.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new cl(this,Kt.join,this.params,this.timeout),this.rejoinTimer=new eh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=et.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=et.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Kt.reply,{},(f,p)=>{this._trigger(this._replyEventName(p),f)}),this.presence=new Fs(this),this.broadcastEndpointURL=nh(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(u=this.params.config)===null||u===void 0?void 0:u.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,r=this.timeout){var o,u,c;if(this.socket.isConnected()||this.socket.connect(),this.state==et.closed){const{config:{broadcast:f,presence:p,private:g}}=this.params,v=(u=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(b=>b.filter))!==null&&u!==void 0?u:[],w=!!this.bindings[Bs.PRESENCE]&&this.bindings[Bs.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,C={},k={broadcast:f,presence:Object.assign(Object.assign({},p),{enabled:w}),postgres_changes:v,private:g};this.socket.accessTokenValue&&(C.access_token=this.socket.accessTokenValue),this._onError(b=>n?.(mn.CHANNEL_ERROR,b)),this._onClose(()=>n?.(mn.CLOSED)),this.updateJoinPayload(Object.assign({config:k},C)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:b})=>{var R;if(this.socket._isManualToken()||this.socket.setAuth(),b===void 0){n?.(mn.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,I=(R=A?.length)!==null&&R!==void 0?R:0,F=[];for(let q=0;q<I;q++){const D=A[q],{filter:{event:Y,schema:V,table:Q,filter:U}}=D,ue=b&&b[q];if(ue&&ue.event===Y&&Jr.isFilterValueEqual(ue.schema,V)&&Jr.isFilterValueEqual(ue.table,Q)&&Jr.isFilterValueEqual(ue.filter,U))F.push(Object.assign(Object.assign({},D),{id:ue.id}));else{this.unsubscribe(),this.state=et.errored,n?.(mn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=F,n&&n(mn.SUBSCRIBED);return}}).receive("error",b=>{this.state=et.errored,n?.(mn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{n?.(mn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,o){return this.state===et.joined&&n===Bs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,r,o)}async httpSend(n,r,o={}){var u;if(r==null)return Promise.reject("Payload is required for httpSend()");const c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:r,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(u=o.timeout)!==null&&u!==void 0?u:this.timeout);if(p.status===202)return{success:!0};let g=p.statusText;try{const v=await p.json();g=v.error||v.message||g}catch{}return Promise.reject(new Error(g))}async send(n,r={}){var o,u;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:f}=n,p={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(p.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:p,body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:f,private:this.private}]})};try{const v=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(o=r.timeout)!==null&&o!==void 0?o:this.timeout);return await((u=v.body)===null||u===void 0?void 0:u.cancel()),v.ok?"ok":"error"}catch(v){return v.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var f,p,g;const v=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((g=(p=(f=this.params)===null||f===void 0?void 0:f.config)===null||p===void 0?void 0:p.broadcast)===null||g===void 0)&&g.ack)&&c("ok"),v.receive("ok",()=>c("ok")),v.receive("error",()=>c("error")),v.receive("timeout",()=>c("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=et.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Kt.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(u=>{o=new cl(this,Kt.leave,{},n),o.receive("ok",()=>{r(),u("ok")}).receive("timeout",()=>{r(),u("timed out")}).receive("error",()=>{u("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=et.closed,this.bindings={}}async _fetchWithTimeout(n,r,o){const u=new AbortController,c=setTimeout(()=>u.abort(),o),f=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:u.signal}));return clearTimeout(c),f}_push(n,r,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new cl(this,n,r,o);return this._canPush()?u.send():this._addToPushBuffer(u),u}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>Ip){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(n,r,o){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,o){var u,c;const f=n.toLocaleLowerCase(),{close:p,error:g,leave:v,join:w}=Kt;if(o&&[p,g,v,w].indexOf(f)>=0&&o!==this._joinRef())return;let k=this._onMessage(f,r,o);if(r&&!k)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(b=>{var R,A,I;return((R=b.filter)===null||R===void 0?void 0:R.event)==="*"||((I=(A=b.filter)===null||A===void 0?void 0:A.event)===null||I===void 0?void 0:I.toLocaleLowerCase())===f}).map(b=>b.callback(k,o)):(c=this.bindings[f])===null||c===void 0||c.filter(b=>{var R,A,I,F,q,D;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in b){const Y=b.id,V=(R=b.filter)===null||R===void 0?void 0:R.event;return Y&&((A=r.ids)===null||A===void 0?void 0:A.includes(Y))&&(V==="*"||V?.toLocaleLowerCase()===((I=r.data)===null||I===void 0?void 0:I.type.toLocaleLowerCase()))}else{const Y=(q=(F=b?.filter)===null||F===void 0?void 0:F.event)===null||q===void 0?void 0:q.toLocaleLowerCase();return Y==="*"||Y===((D=r?.event)===null||D===void 0?void 0:D.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===f}).map(b=>{if(typeof k=="object"&&"ids"in k){const R=k.data,{schema:A,table:I,commit_timestamp:F,type:q,errors:D}=R;k=Object.assign(Object.assign({},{schema:A,table:I,commit_timestamp:F,eventType:q,new:{},old:{},errors:D}),this._getPayloadRecords(R))}b.callback(k,o)})}_isClosed(){return this.state===et.closed}_isJoined(){return this.state===et.joined}_isJoining(){return this.state===et.joining}_isLeaving(){return this.state===et.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,o){const u=n.toLocaleLowerCase(),c={type:u,filter:r,callback:o};return this.bindings[u]?this.bindings[u].push(c):this.bindings[u]=[c],this}_off(n,r){const o=n.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(u=>{var c;return!(((c=u.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===o&&Jr.isEqual(u.filter,r))})),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const o in n)if(n[o]!==r[o])return!1;return!0}static isFilterValueEqual(n,r){return(n??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Kt.close,{},n)}_onError(n){this._on(Kt.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=et.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=xd(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=xd(n.columns,n.old_record)),r}}const dl=()=>{},ia={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Mp=[1e3,2e3,5e3,1e4],Wp=1e4,qp=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Vp{constructor(n,r){var o;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=wl,this.transport=null,this.heartbeatIntervalMs=ia.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=dl,this.ref=0,this.reconnectTimer=null,this.vsn=Sd,this.logger=dl,this.conn=null,this.sendBuffer=[],this.serializer=new Lp,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=u=>u?(...c)=>u(...c):(...c)=>fetch(...c),!(!((o=r?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${n}/${_l.websocket}`,this.httpEndpoint=nh(n),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Tp.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const r=n.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,o){this.logger(n,r,o)}connectionState(){switch(this.conn&&this.conn.readyState){case zn.connecting:return dr.Connecting;case zn.open:return dr.Open;case zn.closing:return dr.Closing;default:return dr.Closed}}isConnected(){return this.connectionState()===dr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,r={config:{}}){const o=`realtime:${n}`,u=this.getChannels().find(c=>c.topic===o);if(u)return u;{const c=new Jr(`realtime:${n}`,r,this);return this.channels.push(c),c}}push(n){const{topic:r,event:o,payload:u,ref:c}=n,f=()=>{this.encode(n,p=>{var g;(g=this.conn)===null||g===void 0||g.send(p)})};this.log("push",`${r} ${o} (${c})`,u),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(Ap,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ia.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(o=>o.topic===n&&(o._isJoined()||o._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const v=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",v)}catch(w){this.log("error","error in heartbeat callback",w)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:o,event:u,payload:c,ref:f}=r,p=f?`(${f})`:"",g=c.status||"";this.log("receive",`${g} ${o} ${u} ${p}`.trim(),c),this.channels.filter(v=>v._isMember(o)).forEach(v=>v._trigger(u,c,f)),this._triggerStateCallbacks("message",r)})}_clearTimer(n){var r;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===zn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===zn.open||this.conn.readyState===zn.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var r;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(n=>n._trigger(Kt.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const o=n.match(/\?/)?"&":"?",u=new URLSearchParams(r);return`${n}${o}${u}`}_workerObjectUrl(n){let r;if(n)r=n;else{const o=new Blob([qp],{type:"application/javascript"});r=URL.createObjectURL(o)}return r}_setConnectionState(n,r=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(n=null){let r,o=!1;if(n)r=n,o=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(u){this.log("error","Error fetching access token from callback",u),r=this.accessTokenValue}else r=this.accessTokenValue;o?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(u=>{const c={access_token:r,version:Pp};r&&u.updateJoinPayload(c),u.joinedOnce&&u._isJoined()&&u._push(Kt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${n}`,r)})}_triggerStateCallbacks(n,r){try{this.stateChangeCallbacks[n].forEach(o=>{try{o(r)}catch(u){this.log("error",`error in ${n} callback`,u)}})}catch(o){this.log("error",`error triggering ${n} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new eh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ia.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var r,o,u,c,f,p,g,v,w,C,k,b;switch(this.transport=(r=n?.transport)!==null&&r!==void 0?r:null,this.timeout=(o=n?.timeout)!==null&&o!==void 0?o:wl,this.heartbeatIntervalMs=(u=n?.heartbeatIntervalMs)!==null&&u!==void 0?u:ia.HEARTBEAT_INTERVAL,this.worker=(c=n?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(f=n?.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(p=n?.heartbeatCallback)!==null&&p!==void 0?p:dl,this.vsn=(g=n?.vsn)!==null&&g!==void 0?g:Sd,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(v=n?.reconnectAfterMs)!==null&&v!==void 0?v:(R=>Mp[R-1]||Wp),this.vsn){case Op:this.encode=(w=n?.encode)!==null&&w!==void 0?w:((R,A)=>A(JSON.stringify(R))),this.decode=(C=n?.decode)!==null&&C!==void 0?C:((R,A)=>A(JSON.parse(R)));break;case Zd:this.encode=(k=n?.encode)!==null&&k!==void 0?k:this.serializer.encode.bind(this.serializer),this.decode=(b=n?.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}var Ws=class extends Error{constructor(i,n){super(i),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&n.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Kp(i,n,r){const o=new URL(n,i);if(r)for(const[u,c]of Object.entries(r))c!==void 0&&o.searchParams.set(u,c);return o.toString()}async function Hp(i){return!i||i.type==="none"?{}:i.type==="bearer"?{Authorization:`Bearer ${i.token}`}:i.type==="header"?{[i.name]:i.value}:i.type==="custom"?await i.getHeaders():{}}function Gp(i){const n=i.fetchImpl??globalThis.fetch;return{async request({method:r,path:o,query:u,body:c,headers:f}){const p=Kp(i.baseUrl,o,u),g=await Hp(i.auth),v=await n(p,{method:r,headers:{...c?{"Content-Type":"application/json"}:{},...g,...f},body:c?JSON.stringify(c):void 0}),w=await v.text(),C=(v.headers.get("content-type")||"").includes("application/json"),k=C&&w?JSON.parse(w):w;if(!v.ok){const b=C?k:void 0,R=b?.error;throw new Ws(R?.message??`Request failed with status ${v.status}`,{status:v.status,icebergType:R?.type,icebergCode:R?.code,details:b})}return{status:v.status,headers:v.headers,data:k}}}}function aa(i){return i.join("")}var Jp=class{constructor(i,n=""){this.client=i,this.prefix=n}async listNamespaces(i){const n=i?{parent:aa(i.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(o=>({namespace:o}))}async createNamespace(i,n){const r={namespace:i.namespace,properties:n?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(i){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${aa(i.namespace)}`})}async loadNamespaceMetadata(i){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${aa(i.namespace)}`})).data.properties}}async namespaceExists(i){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${aa(i.namespace)}`}),!0}catch(n){if(n instanceof Ws&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(i,n){try{return await this.createNamespace(i,n)}catch(r){if(r instanceof Ws&&r.status===409)return;throw r}}};function Fr(i){return i.join("")}var Qp=class{constructor(i,n="",r){this.client=i,this.prefix=n,this.accessDelegation=r}async listTables(i){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fr(i.namespace)}/tables`})).data.identifiers}async createTable(i,n){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Fr(i.namespace)}/tables`,body:n,headers:r})).data.metadata}async updateTable(i,n){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Fr(i.namespace)}/tables/${i.name}`,body:n});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(i,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Fr(i.namespace)}/tables/${i.name}`,query:{purgeRequested:String(n?.purge??!1)}})}async loadTable(i){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fr(i.namespace)}/tables/${i.name}`,headers:n})).data.metadata}async tableExists(i){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Fr(i.namespace)}/tables/${i.name}`,headers:n}),!0}catch(r){if(r instanceof Ws&&r.status===404)return!1;throw r}}async createTableIfNotExists(i,n){try{return await this.createTable(i,n)}catch(r){if(r instanceof Ws&&r.status===409)return await this.loadTable({namespace:i.namespace,name:n.name});throw r}}},Yp=class{constructor(i){let n="v1";i.catalogName&&(n+=`/${i.catalogName}`);const r=i.baseUrl.endsWith("/")?i.baseUrl:`${i.baseUrl}/`;this.client=Gp({baseUrl:r,auth:i.auth,fetchImpl:i.fetch}),this.accessDelegation=i.accessDelegation?.join(","),this.namespaceOps=new Jp(this.client,n),this.tableOps=new Qp(this.client,n,this.accessDelegation)}async listNamespaces(i){return this.namespaceOps.listNamespaces(i)}async createNamespace(i,n){return this.namespaceOps.createNamespace(i,n)}async dropNamespace(i){await this.namespaceOps.dropNamespace(i)}async loadNamespaceMetadata(i){return this.namespaceOps.loadNamespaceMetadata(i)}async listTables(i){return this.tableOps.listTables(i)}async createTable(i,n){return this.tableOps.createTable(i,n)}async updateTable(i,n){return this.tableOps.updateTable(i,n)}async dropTable(i,n){await this.tableOps.dropTable(i,n)}async loadTable(i){return this.tableOps.loadTable(i)}async namespaceExists(i){return this.namespaceOps.namespaceExists(i)}async tableExists(i){return this.tableOps.tableExists(i)}async createNamespaceIfNotExists(i,n){return this.namespaceOps.createNamespaceIfNotExists(i,n)}async createTableIfNotExists(i,n){return this.tableOps.createTableIfNotExists(i,n)}},ga=class extends Error{constructor(i,n="storage",r,o){super(i),this.__isStorageError=!0,this.namespace=n,this.name=n==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=o}};function va(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}var oa=class extends ga{constructor(i,n,r,o="storage"){super(i,o,n,r),this.name=o==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},rh=class extends ga{constructor(i,n,r="storage"){super(i,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=n}};const Xp=i=>i?(...n)=>i(...n):(...n)=>fetch(...n),Zp=i=>{if(typeof i!="object"||i===null)return!1;const n=Object.getPrototypeOf(i);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},Sl=i=>{if(Array.isArray(i))return i.map(r=>Sl(r));if(typeof i=="function"||i!==Object(i))return i;const n={};return Object.entries(i).forEach(([r,o])=>{const u=r.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));n[u]=Sl(o)}),n},em=i=>!i||typeof i!="string"||i.length===0||i.length>100||i.trim()!==i||i.includes("/")||i.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(i);function qs(i){"@babel/helpers - typeof";return qs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},qs(i)}function tm(i,n){if(qs(i)!="object"||!i)return i;var r=i[Symbol.toPrimitive];if(r!==void 0){var o=r.call(i,n);if(qs(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(i)}function nm(i){var n=tm(i,"string");return qs(n)=="symbol"?n:n+""}function rm(i,n,r){return(n=nm(n))in i?Object.defineProperty(i,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[n]=r,i}function Ed(i,n){var r=Object.keys(i);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);n&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(i,u).enumerable})),r.push.apply(r,o)}return r}function pe(i){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Ed(Object(r),!0).forEach(function(o){rm(i,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):Ed(Object(r)).forEach(function(o){Object.defineProperty(i,o,Object.getOwnPropertyDescriptor(r,o))})}return i}const Cd=i=>{var n;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(n=i.error)===null||n===void 0?void 0:n.message)||JSON.stringify(i)},sm=async(i,n,r,o)=>{if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!r?.noResolveJson){const u=i,c=u.status||500;if(typeof u.json=="function")u.json().then(f=>{const p=f?.statusCode||f?.code||c+"";n(new oa(Cd(f),c,p,o))}).catch(()=>{if(o==="vectors"){const f=c+"";n(new oa(u.statusText||`HTTP ${c} error`,c,f,o))}else{const f=c+"";n(new oa(u.statusText||`HTTP ${c} error`,c,f,o))}});else{const f=c+"";n(new oa(u.statusText||`HTTP ${c} error`,c,f,o))}}else n(new rh(Cd(i),i,o))},im=(i,n,r,o)=>{const u={method:i,headers:n?.headers||{}};return i==="GET"||i==="HEAD"||!o?pe(pe({},u),r):(Zp(o)?(u.headers=pe({"Content-Type":"application/json"},n?.headers),u.body=JSON.stringify(o)):u.body=o,n?.duplex&&(u.duplex=n.duplex),pe(pe({},u),r))};async function $s(i,n,r,o,u,c,f){return new Promise((p,g)=>{i(r,im(n,o,u,c)).then(v=>{if(!v.ok)throw v;if(o?.noResolveJson)return v;if(f==="vectors"){const w=v.headers.get("content-type");if(v.headers.get("content-length")==="0"||v.status===204)return{};if(!w||!w.includes("application/json"))return{}}return v.json()}).then(v=>p(v)).catch(v=>sm(v,g,o,f))})}function sh(i="storage"){return{get:async(n,r,o,u)=>$s(n,"GET",r,o,u,void 0,i),post:async(n,r,o,u,c)=>$s(n,"POST",r,u,c,o,i),put:async(n,r,o,u,c)=>$s(n,"PUT",r,u,c,o,i),head:async(n,r,o,u)=>$s(n,"HEAD",r,pe(pe({},o),{},{noResolveJson:!0}),u,void 0,i),remove:async(n,r,o,u,c)=>$s(n,"DELETE",r,u,c,o,i)}}const am=sh("storage"),{get:Vs,post:Vt,put:xl,head:om,remove:Pl}=am,Ct=sh("vectors");var Yr=class{constructor(i,n={},r,o="storage"){this.shouldThrowOnError=!1,this.url=i,this.headers=n,this.fetch=Xp(r),this.namespace=o}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,n){return this.headers=pe(pe({},this.headers),{},{[i]:n}),this}async handleOperation(i){var n=this;try{return{data:await i(),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(va(r))return{data:null,error:r};throw r}}},lm=class{constructor(i,n){this.downloadFn=i,this.shouldThrowOnError=n}then(i,n){return this.execute().then(i,n)}async execute(){var i=this;try{return{data:(await i.downloadFn()).body,error:null}}catch(n){if(i.shouldThrowOnError)throw n;if(va(n))return{data:null,error:n};throw n}}};let ih;ih=Symbol.toStringTag;var um=class{constructor(i,n){this.downloadFn=i,this.shouldThrowOnError=n,this[ih]="BlobDownloadBuilder",this.promise=null}asStream(){return new lm(this.downloadFn,this.shouldThrowOnError)}then(i,n){return this.getPromise().then(i,n)}catch(i){return this.getPromise().catch(i)}finally(i){return this.getPromise().finally(i)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var i=this;try{return{data:await(await i.downloadFn()).blob(),error:null}}catch(n){if(i.shouldThrowOnError)throw n;if(va(n))return{data:null,error:n};throw n}}};const cm={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Nd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var dm=class extends Yr{constructor(i,n={},r,o){super(i,n,o,"storage"),this.bucketId=r}async uploadOrUpdate(i,n,r,o){var u=this;return u.handleOperation(async()=>{let c;const f=pe(pe({},Nd),o);let p=pe(pe({},u.headers),i==="POST"&&{"x-upsert":String(f.upsert)});const g=f.metadata;typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",f.cacheControl),g&&c.append("metadata",u.encodeMetadata(g)),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.has("cacheControl")||c.append("cacheControl",f.cacheControl),g&&!c.has("metadata")&&c.append("metadata",u.encodeMetadata(g))):(c=r,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType,g&&(p["x-metadata"]=u.toBase64(u.encodeMetadata(g))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!f.duplex&&(f.duplex="half")),o?.headers&&(p=pe(pe({},p),o.headers));const v=u._removeEmptyFolders(n),w=u._getFinalPath(v),C=await(i=="PUT"?xl:Vt)(u.fetch,`${u.url}/object/${w}`,c,pe({headers:p},f?.duplex?{duplex:f.duplex}:{}));return{path:v,id:C.Id,fullPath:C.Key}})}async upload(i,n,r){return this.uploadOrUpdate("POST",i,n,r)}async uploadToSignedUrl(i,n,r,o){var u=this;const c=u._removeEmptyFolders(i),f=u._getFinalPath(c),p=new URL(u.url+`/object/upload/sign/${f}`);return p.searchParams.set("token",n),u.handleOperation(async()=>{let g;const v=pe({upsert:Nd.upsert},o),w=pe(pe({},u.headers),{"x-upsert":String(v.upsert)});return typeof Blob<"u"&&r instanceof Blob?(g=new FormData,g.append("cacheControl",v.cacheControl),g.append("",r)):typeof FormData<"u"&&r instanceof FormData?(g=r,g.append("cacheControl",v.cacheControl)):(g=r,w["cache-control"]=`max-age=${v.cacheControl}`,w["content-type"]=v.contentType),{path:c,fullPath:(await xl(u.fetch,p.toString(),g,{headers:w})).Key}})}async createSignedUploadUrl(i,n){var r=this;return r.handleOperation(async()=>{let o=r._getFinalPath(i);const u=pe({},r.headers);n?.upsert&&(u["x-upsert"]="true");const c=await Vt(r.fetch,`${r.url}/object/upload/sign/${o}`,{},{headers:u}),f=new URL(r.url+c.url),p=f.searchParams.get("token");if(!p)throw new ga("No token returned by API");return{signedUrl:f.toString(),path:i,token:p}})}async update(i,n,r){return this.uploadOrUpdate("PUT",i,n,r)}async move(i,n,r){var o=this;return o.handleOperation(async()=>await Vt(o.fetch,`${o.url}/object/move`,{bucketId:o.bucketId,sourceKey:i,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:o.headers}))}async copy(i,n,r){var o=this;return o.handleOperation(async()=>({path:(await Vt(o.fetch,`${o.url}/object/copy`,{bucketId:o.bucketId,sourceKey:i,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:o.headers})).Key}))}async createSignedUrl(i,n,r){var o=this;return o.handleOperation(async()=>{let u=o._getFinalPath(i),c=await Vt(o.fetch,`${o.url}/object/sign/${u}`,pe({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:o.headers});const f=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${o.url}${c.signedURL}${f}`)}})}async createSignedUrls(i,n,r){var o=this;return o.handleOperation(async()=>{const u=await Vt(o.fetch,`${o.url}/object/sign/${o.bucketId}`,{expiresIn:n,paths:i},{headers:o.headers}),c=r?.download?`&download=${r.download===!0?"":r.download}`:"";return u.map(f=>pe(pe({},f),{},{signedUrl:f.signedURL?encodeURI(`${o.url}${f.signedURL}${c}`):null}))})}download(i,n,r){const o=typeof n?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(n?.transform||{}),c=u?`?${u}`:"",f=this._getFinalPath(i),p=()=>Vs(this.fetch,`${this.url}/${o}/${f}${c}`,{headers:this.headers,noResolveJson:!0},r);return new um(p,this.shouldThrowOnError)}async info(i){var n=this;const r=n._getFinalPath(i);return n.handleOperation(async()=>Sl(await Vs(n.fetch,`${n.url}/object/info/${r}`,{headers:n.headers})))}async exists(i){var n=this;const r=n._getFinalPath(i);try{return await om(n.fetch,`${n.url}/object/${r}`,{headers:n.headers}),{data:!0,error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(va(o)&&o instanceof rh){const u=o.originalError;if([400,404].includes(u?.status))return{data:!1,error:o}}throw o}}getPublicUrl(i,n){const r=this._getFinalPath(i),o=[],u=n?.download?`download=${n.download===!0?"":n.download}`:"";u!==""&&o.push(u);const c=typeof n?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(n?.transform||{});f!==""&&o.push(f);let p=o.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${p}`)}}}async remove(i){var n=this;return n.handleOperation(async()=>await Pl(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:i},{headers:n.headers}))}async list(i,n,r){var o=this;return o.handleOperation(async()=>{const u=pe(pe(pe({},cm),n),{},{prefix:i||""});return await Vt(o.fetch,`${o.url}/object/list/${o.bucketId}`,u,{headers:o.headers},r)})}async listV2(i,n){var r=this;return r.handleOperation(async()=>{const o=pe({},i);return await Vt(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,o,{headers:r.headers},n)})}encodeMetadata(i){return JSON.stringify(i)}toBase64(i){return typeof Buffer<"u"?Buffer.from(i).toString("base64"):btoa(i)}_getFinalPath(i){return`${this.bucketId}/${i.replace(/^\/+/,"")}`}_removeEmptyFolders(i){return i.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(i){const n=[];return i.width&&n.push(`width=${i.width}`),i.height&&n.push(`height=${i.height}`),i.resize&&n.push(`resize=${i.resize}`),i.format&&n.push(`format=${i.format}`),i.quality&&n.push(`quality=${i.quality}`),n.join("&")}};const hm="2.97.0",Js={"X-Client-Info":`storage-js/${hm}`};var fm=class extends Yr{constructor(i,n={},r,o){const u=new URL(i);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase."));const c=u.href.replace(/\/$/,""),f=pe(pe({},Js),n);super(c,f,r,"storage")}async listBuckets(i){var n=this;return n.handleOperation(async()=>{const r=n.listBucketOptionsToQueryString(i);return await Vs(n.fetch,`${n.url}/bucket${r}`,{headers:n.headers})})}async getBucket(i){var n=this;return n.handleOperation(async()=>await Vs(n.fetch,`${n.url}/bucket/${i}`,{headers:n.headers}))}async createBucket(i,n={public:!1}){var r=this;return r.handleOperation(async()=>await Vt(r.fetch,`${r.url}/bucket`,{id:i,name:i,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}))}async updateBucket(i,n){var r=this;return r.handleOperation(async()=>await xl(r.fetch,`${r.url}/bucket/${i}`,{id:i,name:i,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(i){var n=this;return n.handleOperation(async()=>await Vt(n.fetch,`${n.url}/bucket/${i}/empty`,{},{headers:n.headers}))}async deleteBucket(i){var n=this;return n.handleOperation(async()=>await Pl(n.fetch,`${n.url}/bucket/${i}`,{},{headers:n.headers}))}listBucketOptionsToQueryString(i){const n={};return i&&("limit"in i&&(n.limit=String(i.limit)),"offset"in i&&(n.offset=String(i.offset)),i.search&&(n.search=i.search),i.sortColumn&&(n.sortColumn=i.sortColumn),i.sortOrder&&(n.sortOrder=i.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},pm=class extends Yr{constructor(i,n={},r){const o=i.replace(/\/$/,""),u=pe(pe({},Js),n);super(o,u,r,"storage")}async createBucket(i){var n=this;return n.handleOperation(async()=>await Vt(n.fetch,`${n.url}/bucket`,{name:i},{headers:n.headers}))}async listBuckets(i){var n=this;return n.handleOperation(async()=>{const r=new URLSearchParams;i?.limit!==void 0&&r.set("limit",i.limit.toString()),i?.offset!==void 0&&r.set("offset",i.offset.toString()),i?.sortColumn&&r.set("sortColumn",i.sortColumn),i?.sortOrder&&r.set("sortOrder",i.sortOrder),i?.search&&r.set("search",i.search);const o=r.toString(),u=o?`${n.url}/bucket?${o}`:`${n.url}/bucket`;return await Vs(n.fetch,u,{headers:n.headers})})}async deleteBucket(i){var n=this;return n.handleOperation(async()=>await Pl(n.fetch,`${n.url}/bucket/${i}`,{},{headers:n.headers}))}from(i){var n=this;if(!em(i))throw new ga("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new Yp({baseUrl:this.url,catalogName:i,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),o=this.shouldThrowOnError;return new Proxy(r,{get(u,c){const f=u[c];return typeof f!="function"?f:async(...p)=>{try{return{data:await f.apply(u,p),error:null}}catch(g){if(o)throw g;return{data:null,error:g}}}}})}},mm=class extends Yr{constructor(i,n={},r){const o=i.replace(/\/$/,""),u=pe(pe({},Js),{},{"Content-Type":"application/json"},n);super(o,u,r,"vectors")}async createIndex(i){var n=this;return n.handleOperation(async()=>await Ct.post(n.fetch,`${n.url}/CreateIndex`,i,{headers:n.headers})||{})}async getIndex(i,n){var r=this;return r.handleOperation(async()=>await Ct.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:i,indexName:n},{headers:r.headers}))}async listIndexes(i){var n=this;return n.handleOperation(async()=>await Ct.post(n.fetch,`${n.url}/ListIndexes`,i,{headers:n.headers}))}async deleteIndex(i,n){var r=this;return r.handleOperation(async()=>await Ct.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:i,indexName:n},{headers:r.headers})||{})}},gm=class extends Yr{constructor(i,n={},r){const o=i.replace(/\/$/,""),u=pe(pe({},Js),{},{"Content-Type":"application/json"},n);super(o,u,r,"vectors")}async putVectors(i){var n=this;if(i.vectors.length<1||i.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return n.handleOperation(async()=>await Ct.post(n.fetch,`${n.url}/PutVectors`,i,{headers:n.headers})||{})}async getVectors(i){var n=this;return n.handleOperation(async()=>await Ct.post(n.fetch,`${n.url}/GetVectors`,i,{headers:n.headers}))}async listVectors(i){var n=this;if(i.segmentCount!==void 0){if(i.segmentCount<1||i.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(i.segmentIndex!==void 0&&(i.segmentIndex<0||i.segmentIndex>=i.segmentCount))throw new Error(`segmentIndex must be between 0 and ${i.segmentCount-1}`)}return n.handleOperation(async()=>await Ct.post(n.fetch,`${n.url}/ListVectors`,i,{headers:n.headers}))}async queryVectors(i){var n=this;return n.handleOperation(async()=>await Ct.post(n.fetch,`${n.url}/QueryVectors`,i,{headers:n.headers}))}async deleteVectors(i){var n=this;if(i.keys.length<1||i.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return n.handleOperation(async()=>await Ct.post(n.fetch,`${n.url}/DeleteVectors`,i,{headers:n.headers})||{})}},vm=class extends Yr{constructor(i,n={},r){const o=i.replace(/\/$/,""),u=pe(pe({},Js),{},{"Content-Type":"application/json"},n);super(o,u,r,"vectors")}async createBucket(i){var n=this;return n.handleOperation(async()=>await Ct.post(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:i},{headers:n.headers})||{})}async getBucket(i){var n=this;return n.handleOperation(async()=>await Ct.post(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:i},{headers:n.headers}))}async listBuckets(i={}){var n=this;return n.handleOperation(async()=>await Ct.post(n.fetch,`${n.url}/ListVectorBuckets`,i,{headers:n.headers}))}async deleteBucket(i){var n=this;return n.handleOperation(async()=>await Ct.post(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:i},{headers:n.headers})||{})}},ym=class extends vm{constructor(i,n={}){super(i,n.headers||{},n.fetch)}from(i){return new wm(this.url,this.headers,i,this.fetch)}async createBucket(i){var n=()=>super.createBucket,r=this;return n().call(r,i)}async getBucket(i){var n=()=>super.getBucket,r=this;return n().call(r,i)}async listBuckets(i={}){var n=()=>super.listBuckets,r=this;return n().call(r,i)}async deleteBucket(i){var n=()=>super.deleteBucket,r=this;return n().call(r,i)}},wm=class extends mm{constructor(i,n,r,o){super(i,n,o),this.vectorBucketName=r}async createIndex(i){var n=()=>super.createIndex,r=this;return n().call(r,pe(pe({},i),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(i={}){var n=()=>super.listIndexes,r=this;return n().call(r,pe(pe({},i),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(i){var n=()=>super.getIndex,r=this;return n().call(r,r.vectorBucketName,i)}async deleteIndex(i){var n=()=>super.deleteIndex,r=this;return n().call(r,r.vectorBucketName,i)}index(i){return new _m(this.url,this.headers,this.vectorBucketName,i,this.fetch)}},_m=class extends gm{constructor(i,n,r,o,u){super(i,n,u),this.vectorBucketName=r,this.indexName=o}async putVectors(i){var n=()=>super.putVectors,r=this;return n().call(r,pe(pe({},i),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(i){var n=()=>super.getVectors,r=this;return n().call(r,pe(pe({},i),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(i={}){var n=()=>super.listVectors,r=this;return n().call(r,pe(pe({},i),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(i){var n=()=>super.queryVectors,r=this;return n().call(r,pe(pe({},i),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(i){var n=()=>super.deleteVectors,r=this;return n().call(r,pe(pe({},i),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},km=class extends fm{constructor(i,n={},r,o){super(i,n,r,o)}from(i){return new dm(this.url,this.headers,i,this.fetch)}get vectors(){return new ym(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new pm(this.url+"/iceberg",this.headers,this.fetch)}};const ah="2.97.0",Hr=30*1e3,jl=3,hl=jl*Hr,Sm="http://localhost:9999",xm="supabase.auth.token",jm={"X-Client-Info":`gotrue-js/${ah}`},bl="X-Supabase-Api-Version",oh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},bm=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Em=600*1e3;class Ks extends Error{constructor(n,r,o){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=o}}function ae(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class Cm extends Ks{constructor(n,r,o){super(n,r,o),this.name="AuthApiError",this.status=r,this.code=o}}function Nm(i){return ae(i)&&i.name==="AuthApiError"}class hr extends Ks{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class gn extends Ks{constructor(n,r,o,u){super(n,o,u),this.name=r,this.status=o}}class Et extends gn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function fl(i){return ae(i)&&i.name==="AuthSessionMissingError"}class Br extends gn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class la extends gn{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class ua extends gn{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Tm(i){return ae(i)&&i.name==="AuthImplicitGrantRedirectError"}class Td extends gn{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Rm extends gn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class El extends gn{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function pl(i){return ae(i)&&i.name==="AuthRetryableFetchError"}class Rd extends gn{constructor(n,r,o){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=o}}class Cl extends gn{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const da="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Pd=` 	
\r=`.split(""),Pm=(()=>{const i=new Array(128);for(let n=0;n<i.length;n+=1)i[n]=-1;for(let n=0;n<Pd.length;n+=1)i[Pd[n].charCodeAt(0)]=-2;for(let n=0;n<da.length;n+=1)i[da[n].charCodeAt(0)]=n;return i})();function Od(i,n,r){if(i!==null)for(n.queue=n.queue<<8|i,n.queuedBits+=8;n.queuedBits>=6;){const o=n.queue>>n.queuedBits-6&63;r(da[o]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const o=n.queue>>n.queuedBits-6&63;r(da[o]),n.queuedBits-=6}}function lh(i,n,r){const o=Pm[i];if(o>-1)for(n.queue=n.queue<<6|o,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function Ad(i){const n=[],r=f=>{n.push(String.fromCodePoint(f))},o={utf8seq:0,codepoint:0},u={queue:0,queuedBits:0},c=f=>{Im(f,o,r)};for(let f=0;f<i.length;f+=1)lh(i.charCodeAt(f),u,c);return n.join("")}function Om(i,n){if(i<=127){n(i);return}else if(i<=2047){n(192|i>>6),n(128|i&63);return}else if(i<=65535){n(224|i>>12),n(128|i>>6&63),n(128|i&63);return}else if(i<=1114111){n(240|i>>18),n(128|i>>12&63),n(128|i>>6&63),n(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function Am(i,n){for(let r=0;r<i.length;r+=1){let o=i.charCodeAt(r);if(o>55295&&o<=56319){const u=(o-55296)*1024&65535;o=(i.charCodeAt(r+1)-56320&65535|u)+65536,r+=1}Om(o,n)}}function Im(i,n,r){if(n.utf8seq===0){if(i<=127){r(i);return}for(let o=1;o<6;o+=1)if((i>>7-o&1)===0){n.utf8seq=o;break}if(n.utf8seq===2)n.codepoint=i&31;else if(n.utf8seq===3)n.codepoint=i&15;else if(n.utf8seq===4)n.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|i&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function Qr(i){const n=[],r={queue:0,queuedBits:0},o=u=>{n.push(u)};for(let u=0;u<i.length;u+=1)lh(i.charCodeAt(u),r,o);return new Uint8Array(n)}function Lm(i){const n=[];return Am(i,r=>n.push(r)),new Uint8Array(n)}function fr(i){const n=[],r={queue:0,queuedBits:0},o=u=>{n.push(u)};return i.forEach(u=>Od(u,r,o)),Od(null,r,o),n.join("")}function Dm(i){return Math.round(Date.now()/1e3)+i}function Um(){return Symbol("auth-callback")}const ot=()=>typeof window<"u"&&typeof document<"u",lr={tested:!1,writable:!1},uh=()=>{if(!ot())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(lr.tested)return lr.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),lr.tested=!0,lr.writable=!0}catch{lr.tested=!0,lr.writable=!1}return lr.writable};function $m(i){const n={},r=new URL(i);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((u,c)=>{n[c]=u})}catch{}return r.searchParams.forEach((o,u)=>{n[u]=o}),n}const ch=i=>i?(...n)=>i(...n):(...n)=>fetch(...n),zm=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",Gr=async(i,n,r)=>{await i.setItem(n,JSON.stringify(r))},ur=async(i,n)=>{const r=await i.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},at=async(i,n)=>{await i.removeItem(n)};class ya{constructor(){this.promise=new ya.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}ya.promiseConstructor=Promise;function ca(i){const n=i.split(".");if(n.length!==3)throw new Cl("Invalid JWT structure");for(let o=0;o<n.length;o++)if(!bm.test(n[o]))throw new Cl("JWT not in base64url format");return{header:JSON.parse(Ad(n[0])),payload:JSON.parse(Ad(n[1])),signature:Qr(n[2]),raw:{header:n[0],payload:n[1]}}}async function Fm(i){return await new Promise(n=>{setTimeout(()=>n(null),i)})}function Bm(i,n){return new Promise((o,u)=>{(async()=>{for(let c=0;c<1/0;c++)try{const f=await i(c);if(!n(c,null,f)){o(f);return}}catch(f){if(!n(c,f)){u(f);return}}})()})}function Mm(i){return("0"+i.toString(16)).substr(-2)}function Wm(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=r.length;let u="";for(let c=0;c<56;c++)u+=r.charAt(Math.floor(Math.random()*o));return u}return crypto.getRandomValues(n),Array.from(n,Mm).join("")}async function qm(i){const r=new TextEncoder().encode(i),o=await crypto.subtle.digest("SHA-256",r),u=new Uint8Array(o);return Array.from(u).map(c=>String.fromCharCode(c)).join("")}async function Vm(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const r=await qm(i);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Mr(i,n,r=!1){const o=Wm();let u=o;r&&(u+="/PASSWORD_RECOVERY"),await Gr(i,`${n}-code-verifier`,u);const c=await Vm(o);return[c,o===c?"plain":"s256"]}const Km=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Hm(i){const n=i.headers.get(bl);if(!n||!n.match(Km))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Gm(i){if(!i)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(i<=n)throw new Error("JWT has expired")}function Jm(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Qm=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Wr(i){if(!Qm.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ml(){const i={};return new Proxy(i,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ym(i,n){return new Proxy(i,{get:(r,o,u)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const c=o.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,o,u)}return!n.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(r,o,u)}})}function Id(i){return JSON.parse(JSON.stringify(i))}const cr=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Xm=[502,503,504];async function Ld(i){var n;if(!zm(i))throw new El(cr(i),0);if(Xm.includes(i.status))throw new El(cr(i),i.status);let r;try{r=await i.json()}catch(c){throw new hr(cr(c),c)}let o;const u=Hm(i);if(u&&u.getTime()>=oh["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?o=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(o=r.error_code),o){if(o==="weak_password")throw new Rd(cr(r),i.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(o==="session_not_found")throw new Et}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((c,f)=>c&&typeof f=="string",!0))throw new Rd(cr(r),i.status,r.weak_password.reasons);throw new Cm(cr(r),i.status||500,o)}const Zm=(i,n,r,o)=>{const u={method:i,headers:n?.headers||{}};return i==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),u.body=JSON.stringify(o),Object.assign(Object.assign({},u),r))};async function me(i,n,r,o){var u;const c=Object.assign({},o?.headers);c[bl]||(c[bl]=oh["2024-01-01"].name),o?.jwt&&(c.Authorization=`Bearer ${o.jwt}`);const f=(u=o?.query)!==null&&u!==void 0?u:{};o?.redirectTo&&(f.redirect_to=o.redirectTo);const p=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",g=await eg(i,n,r+p,{headers:c,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(g):{data:Object.assign({},g),error:null}}async function eg(i,n,r,o,u,c){const f=Zm(n,o,u,c);let p;try{p=await i(r,Object.assign({},f))}catch(g){throw console.error(g),new El(cr(g),0)}if(p.ok||await Ld(p),o?.noResolveJson)return p;try{return await p.json()}catch(g){await Ld(g)}}function qt(i){var n;let r=null;rg(i)&&(r=Object.assign({},i),i.expires_at||(r.expires_at=Dm(i.expires_in)));const o=(n=i.user)!==null&&n!==void 0?n:i;return{data:{session:r,user:o},error:null}}function Dd(i){const n=qt(i);return!n.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((r,o)=>r&&typeof o=="string",!0)&&(n.data.weak_password=i.weak_password),n}function Fn(i){var n;return{data:{user:(n=i.user)!==null&&n!==void 0?n:i},error:null}}function tg(i){return{data:i,error:null}}function ng(i){const{action_link:n,email_otp:r,hashed_token:o,redirect_to:u,verification_type:c}=i,f=ma(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:n,email_otp:r,hashed_token:o,redirect_to:u,verification_type:c},g=Object.assign({},f);return{data:{properties:p,user:g},error:null}}function Ud(i){return i}function rg(i){return i.access_token&&i.refresh_token&&i.expires_in}const gl=["global","local","others"];class sg{constructor({url:n="",headers:r={},fetch:o}){this.url=n,this.headers=r,this.fetch=ch(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,r=gl[0]){if(gl.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${gl.join(", ")}`);try{return await me(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(o){if(ae(o))return{data:null,error:o};throw o}}async inviteUserByEmail(n,r={}){try{return await me(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Fn})}catch(o){if(ae(o))return{data:{user:null},error:o};throw o}}async generateLink(n){try{const{options:r}=n,o=ma(n,["options"]),u=Object.assign(Object.assign({},o),r);return"newEmail"in o&&(u.new_email=o?.newEmail,delete u.newEmail),await me(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:ng,redirectTo:r?.redirectTo})}catch(r){if(ae(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await me(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Fn})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,o,u,c,f,p,g;try{const v={nextPage:null,lastPage:0,total:0},w=await me(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:"",per_page:(c=(u=n?.perPage)===null||u===void 0?void 0:u.toString())!==null&&c!==void 0?c:""},xform:Ud});if(w.error)throw w.error;const C=await w.json(),k=(f=w.headers.get("x-total-count"))!==null&&f!==void 0?f:0,b=(g=(p=w.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&g!==void 0?g:[];return b.length>0&&(b.forEach(R=>{const A=parseInt(R.split(";")[0].split("=")[1].substring(0,1)),I=JSON.parse(R.split(";")[1].split("=")[1]);v[`${I}Page`]=A}),v.total=parseInt(k)),{data:Object.assign(Object.assign({},C),v),error:null}}catch(v){if(ae(v))return{data:{users:[]},error:v};throw v}}async getUserById(n){Wr(n);try{return await me(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Fn})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){Wr(n);try{return await me(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:Fn})}catch(o){if(ae(o))return{data:{user:null},error:o};throw o}}async deleteUser(n,r=!1){Wr(n);try{return await me(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:Fn})}catch(o){if(ae(o))return{data:{user:null},error:o};throw o}}async _listFactors(n){Wr(n.userId);try{const{data:r,error:o}=await me(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:r,error:o}}catch(r){if(ae(r))return{data:null,error:r};throw r}}async _deleteFactor(n){Wr(n.userId),Wr(n.id);try{return{data:await me(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(ae(r))return{data:null,error:r};throw r}}async _listOAuthClients(n){var r,o,u,c,f,p,g;try{const v={nextPage:null,lastPage:0,total:0},w=await me(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:"",per_page:(c=(u=n?.perPage)===null||u===void 0?void 0:u.toString())!==null&&c!==void 0?c:""},xform:Ud});if(w.error)throw w.error;const C=await w.json(),k=(f=w.headers.get("x-total-count"))!==null&&f!==void 0?f:0,b=(g=(p=w.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&g!==void 0?g:[];return b.length>0&&(b.forEach(R=>{const A=parseInt(R.split(";")[0].split("=")[1].substring(0,1)),I=JSON.parse(R.split(";")[1].split("=")[1]);v[`${I}Page`]=A}),v.total=parseInt(k)),{data:Object.assign(Object.assign({},C),v),error:null}}catch(v){if(ae(v))return{data:{clients:[]},error:v};throw v}}async _createOAuthClient(n){try{return await me(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ae(r))return{data:null,error:r};throw r}}async _getOAuthClient(n){try{return await me(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ae(r))return{data:null,error:r};throw r}}async _updateOAuthClient(n,r){try{return await me(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:r,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(ae(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(n){try{return await me(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ae(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(n){try{return await me(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ae(r))return{data:null,error:r};throw r}}}function $d(i={}){return{getItem:n=>i[n]||null,setItem:(n,r)=>{i[n]=r},removeItem:n=>{delete i[n]}}}const qr={debug:!!(globalThis&&uh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class dh extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class zd extends dh{}async function ig(i,n,r){qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,n);const o=new globalThis.AbortController;n>0&&setTimeout(()=>{o.abort(),qr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},n),await Promise.resolve();try{return await globalThis.navigator.locks.request(i,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async u=>{if(u){qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,u.name);try{return await r()}finally{qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,u.name)}}else{if(n===0)throw qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new zd(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(qr.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}})}catch(u){throw u?.name==="AbortError"?new zd(`Acquiring an exclusive Navigator LockManager lock "${i}" timed out waiting ${n}ms`):u}}function ag(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function hh(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function og(i){return parseInt(i,16)}function lg(i){const n=new TextEncoder().encode(i);return"0x"+Array.from(n,o=>o.toString(16).padStart(2,"0")).join("")}function ug(i){var n;const{chainId:r,domain:o,expirationTime:u,issuedAt:c=new Date,nonce:f,notBefore:p,requestId:g,resources:v,scheme:w,uri:C,version:k}=i;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!C)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(k!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${k}`);if(!((n=i.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const b=hh(i.address),R=w?`${w}://${o}`:o,A=i.statement?`${i.statement}
`:"",I=`${R} wants you to sign in with your Ethereum account:
${b}

${A}`;let F=`URI: ${C}
Version: ${k}
Chain ID: ${r}${f?`
Nonce: ${f}`:""}
Issued At: ${c.toISOString()}`;if(u&&(F+=`
Expiration Time: ${u.toISOString()}`),p&&(F+=`
Not Before: ${p.toISOString()}`),g&&(F+=`
Request ID: ${g}`),v){let q=`
Resources:`;for(const D of v){if(!D||typeof D!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${D}`);q+=`
- ${D}`}F+=q}return`${I}
${F}`}class Qe extends Error{constructor({message:n,code:r,cause:o,name:u}){var c;super(n,{cause:o}),this.__isWebAuthnError=!0,this.name=(c=u??(o instanceof Error?o.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=r}}class ha extends Qe{constructor(n,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:n}),this.name="WebAuthnUnknownError",this.originalError=r}}function cg({error:i,options:n}){var r,o,u;const{publicKey:c}=n;if(!c)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Qe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((r=c.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Qe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(n.mediation==="conditional"&&((o=c.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Qe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((u=c.authenticatorSelection)===null||u===void 0?void 0:u.userVerification)==="required")return new Qe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new Qe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new Qe({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return c.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new Qe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new Qe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const f=window.location.hostname;if(fh(f)){if(c.rp.id!==f)return new Qe({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new Qe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new Qe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new Qe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new Qe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function dg({error:i,options:n}){const{publicKey:r}=n;if(!r)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Qe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new Qe({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const o=window.location.hostname;if(fh(o)){if(r.rpId!==o)return new Qe({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new Qe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new Qe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new Qe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class hg{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const fg=new hg;function pg(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:n,user:r,excludeCredentials:o}=i,u=ma(i,["challenge","user","excludeCredentials"]),c=Qr(n).buffer,f=Object.assign(Object.assign({},r),{id:Qr(r.id).buffer}),p=Object.assign(Object.assign({},u),{challenge:c,user:f});if(o&&o.length>0){p.excludeCredentials=new Array(o.length);for(let g=0;g<o.length;g++){const v=o[g];p.excludeCredentials[g]=Object.assign(Object.assign({},v),{id:Qr(v.id).buffer,type:v.type||"public-key",transports:v.transports})}}return p}function mg(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:n,allowCredentials:r}=i,o=ma(i,["challenge","allowCredentials"]),u=Qr(n).buffer,c=Object.assign(Object.assign({},o),{challenge:u});if(r&&r.length>0){c.allowCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const p=r[f];c.allowCredentials[f]=Object.assign(Object.assign({},p),{id:Qr(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return c}function gg(i){var n;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const r=i;return{id:i.id,rawId:i.id,response:{attestationObject:fr(new Uint8Array(i.response.attestationObject)),clientDataJSON:fr(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function vg(i){var n;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const r=i,o=i.getClientExtensionResults(),u=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:fr(new Uint8Array(u.authenticatorData)),clientDataJSON:fr(new Uint8Array(u.clientDataJSON)),signature:fr(new Uint8Array(u.signature)),userHandle:u.userHandle?fr(new Uint8Array(u.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function fh(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function Fd(){var i,n;return!!(ot()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator?.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function yg(i){try{const n=await navigator.credentials.create(i);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new ha("Browser returned unexpected credential type",n)}:{data:null,error:new ha("Empty credential response",n)}}catch(n){return{data:null,error:cg({error:n,options:i})}}}async function wg(i){try{const n=await navigator.credentials.get(i);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new ha("Browser returned unexpected credential type",n)}:{data:null,error:new ha("Empty credential response",n)}}catch(n){return{data:null,error:dg({error:n,options:i})}}}const _g={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},kg={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function fa(...i){const n=u=>u!==null&&typeof u=="object"&&!Array.isArray(u),r=u=>u instanceof ArrayBuffer||ArrayBuffer.isView(u),o={};for(const u of i)if(u)for(const c in u){const f=u[c];if(f!==void 0)if(Array.isArray(f))o[c]=f;else if(r(f))o[c]=f;else if(n(f)){const p=o[c];n(p)?o[c]=fa(p,f):o[c]=fa(f)}else o[c]=f}return o}function Sg(i,n){return fa(_g,i,n||{})}function xg(i,n){return fa(kg,i,n||{})}class jg{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:r,friendlyName:o,signal:u},c){var f;try{const{data:p,error:g}=await this.client.mfa.challenge({factorId:n,webauthn:r});if(!p)return{data:null,error:g};const v=u??fg.createNewAbortSignal();if(p.webauthn.type==="create"){const{user:w}=p.webauthn.credential_options.publicKey;if(!w.name){const C=o;if(C)w.name=`${w.id}:${C}`;else{const b=(await this.client.getUser()).data.user,R=((f=b?.user_metadata)===null||f===void 0?void 0:f.name)||b?.email||b?.id||"User";w.name=`${w.id}:${R}`}}w.displayName||(w.displayName=w.name)}switch(p.webauthn.type){case"create":{const w=Sg(p.webauthn.credential_options.publicKey,c?.create),{data:C,error:k}=await yg({publicKey:w,signal:v});return C?{data:{factorId:n,challengeId:p.id,webauthn:{type:p.webauthn.type,credential_response:C}},error:null}:{data:null,error:k}}case"request":{const w=xg(p.webauthn.credential_options.publicKey,c?.request),{data:C,error:k}=await wg(Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:w,signal:v}));return C?{data:{factorId:n,challengeId:p.id,webauthn:{type:p.webauthn.type,credential_response:C}},error:null}:{data:null,error:k}}}}catch(p){return ae(p)?{data:null,error:p}:{data:null,error:new hr("Unexpected error in challenge",p)}}}async _verify({challengeId:n,factorId:r,webauthn:o}){return this.client.mfa.verify({factorId:r,challengeId:n,webauthn:o})}async _authenticate({factorId:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},c){if(!r)return{data:null,error:new Ks("rpId is required for WebAuthn authentication")};try{if(!Fd())return{data:null,error:new hr("Browser does not support WebAuthn",null)};const{data:f,error:p}=await this.challenge({factorId:n,webauthn:{rpId:r,rpOrigins:o},signal:u},{request:c});if(!f)return{data:null,error:p};const{webauthn:g}=f;return this._verify({factorId:n,challengeId:f.challengeId,webauthn:{type:g.type,rpId:r,rpOrigins:o,credential_response:g.credential_response}})}catch(f){return ae(f)?{data:null,error:f}:{data:null,error:new hr("Unexpected error in authenticate",f)}}}async _register({friendlyName:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},c){if(!r)return{data:null,error:new Ks("rpId is required for WebAuthn registration")};try{if(!Fd())return{data:null,error:new hr("Browser does not support WebAuthn",null)};const{data:f,error:p}=await this._enroll({friendlyName:n});if(!f)return await this.client.mfa.listFactors().then(w=>{var C;return(C=w.data)===null||C===void 0?void 0:C.all.find(k=>k.factor_type==="webauthn"&&k.friendly_name===n&&k.status!=="unverified")}).then(w=>w?this.client.mfa.unenroll({factorId:w?.id}):void 0),{data:null,error:p};const{data:g,error:v}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:r,rpOrigins:o},signal:u},{create:c});return g?this._verify({factorId:f.id,challengeId:g.challengeId,webauthn:{rpId:r,rpOrigins:o,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:v}}catch(f){return ae(f)?{data:null,error:f}:{data:null,error:new hr("Unexpected error in register",f)}}}}ag();const bg={url:Sm,storageKey:xm,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:jm,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4,skipAutoInitialize:!1};async function Bd(i,n,r){return await r()}const Vr={};class Hs{get jwks(){var n,r;return(r=(n=Vr[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){Vr[this.storageKey]=Object.assign(Object.assign({},Vr[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=Vr[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Vr[this.storageKey]=Object.assign(Object.assign({},Vr[this.storageKey]),{cachedAt:n})}constructor(n){var r,o,u;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},bg),n);if(this.storageKey=c.storageKey,this.instanceID=(r=Hs.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Hs.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&ot()){const f=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(f),this.logDebugMessages&&console.trace(f)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new sg({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=ch(c.fetch),this.lock=c.lock||Bd,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,this.lockAcquireTimeout=c.lockAcquireTimeout,c.lock?this.lock=c.lock:this.persistSession&&ot()&&(!((o=globalThis?.navigator)===null||o===void 0)&&o.locks)?this.lock=ig:this.lock=Bd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new jg(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:uh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=$d(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=$d(this.memoryStorage)),ot()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(u=this.broadcastChannel)===null||u===void 0||u.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f);try{await this._notifyAllSubscribers(f.data.event,f.data.session,!1)}catch(p){this._debug("#broadcastChannel","error",p)}})}c.skipAutoInitialize||this.initialize().catch(f=>{this._debug("#initialize()","error",f)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${ah}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let r={},o="none";if(ot()&&(r=$m(window.location.href),this._isImplicitGrantCallback(r)?o="implicit":await this._isPKCECallback(r)&&(o="pkce")),ot()&&this.detectSessionInUrl&&o!=="none"){const{data:u,error:c}=await this._getSessionFromURL(r,o);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),Tm(c)){const g=(n=c.details)===null||n===void 0?void 0:n.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:c}}return{error:c}}const{session:f,redirectType:p}=u;return this._debug("#_initialize()","detected session in URL",f,"redirect type",p),await this._saveSession(f),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ae(r)?this._returnResult({error:r}):this._returnResult({error:new hr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,o,u;try{const c=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(u=n?.options)===null||u===void 0?void 0:u.captchaToken}},xform:qt}),{data:f,error:p}=c;if(p||!f)return this._returnResult({data:{user:null,session:null},error:p});const g=f.session,v=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:v,session:g},error:null})}catch(c){if(ae(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(n){var r,o,u;try{let c;if("email"in n){const{email:w,password:C,options:k}=n;let b=null,R=null;this.flowType==="pkce"&&([b,R]=await Mr(this.storage,this.storageKey)),c=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:k?.emailRedirectTo,body:{email:w,password:C,data:(r=k?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:k?.captchaToken},code_challenge:b,code_challenge_method:R},xform:qt})}else if("phone"in n){const{phone:w,password:C,options:k}=n;c=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:w,password:C,data:(o=k?.data)!==null&&o!==void 0?o:{},channel:(u=k?.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:k?.captchaToken}},xform:qt})}else throw new la("You must provide either an email or phone number and a password");const{data:f,error:p}=c;if(p||!f)return await at(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:p});const g=f.session,v=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:v,session:g},error:null})}catch(c){if(await at(this.storage,`${this.storageKey}-code-verifier`),ae(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(n){try{let r;if("email"in n){const{email:c,password:f,options:p}=n;r=await me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:f,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Dd})}else if("phone"in n){const{phone:c,password:f,options:p}=n;r=await me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:f,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Dd})}else throw new la("You must provide either an email or phone number and a password");const{data:o,error:u}=r;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!o||!o.session||!o.user){const c=new Br;return this._returnResult({data:{user:null,session:null},error:c})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:u})}catch(r){if(ae(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(n){var r,o,u,c;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(o=n.options)===null||o===void 0?void 0:o.scopes,queryParams:(u=n.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(c=n.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,o,u,c,f,p,g,v,w,C,k;let b,R;if("message"in n)b=n.message,R=n.signature;else{const{chain:A,wallet:I,statement:F,options:q}=n;let D;if(ot())if(typeof I=="object")D=I;else{const we=window;if("ethereum"in we&&typeof we.ethereum=="object"&&"request"in we.ethereum&&typeof we.ethereum.request=="function")D=we.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof I!="object"||!q?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=I}const Y=new URL((r=q?.url)!==null&&r!==void 0?r:window.location.href),V=await D.request({method:"eth_requestAccounts"}).then(we=>we).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!V||V.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Q=hh(V[0]);let U=(o=q?.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!U){const we=await D.request({method:"eth_chainId"});U=og(we)}const ue={domain:Y.host,address:Q,statement:F,uri:Y.href,version:"1",chainId:U,nonce:(u=q?.signInWithEthereum)===null||u===void 0?void 0:u.nonce,issuedAt:(f=(c=q?.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(p=q?.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(g=q?.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(v=q?.signInWithEthereum)===null||v===void 0?void 0:v.requestId,resources:(w=q?.signInWithEthereum)===null||w===void 0?void 0:w.resources};b=ug(ue),R=await D.request({method:"personal_sign",params:[lg(b),Q]})}try{const{data:A,error:I}=await me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:R},!((C=n.options)===null||C===void 0)&&C.captchaToken?{gotrue_meta_security:{captcha_token:(k=n.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:qt});if(I)throw I;if(!A||!A.session||!A.user){const F=new Br;return this._returnResult({data:{user:null,session:null},error:F})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:I})}catch(A){if(ae(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async signInWithSolana(n){var r,o,u,c,f,p,g,v,w,C,k,b;let R,A;if("message"in n)R=n.message,A=n.signature;else{const{chain:I,wallet:F,statement:q,options:D}=n;let Y;if(ot())if(typeof F=="object")Y=F;else{const Q=window;if("solana"in Q&&typeof Q.solana=="object"&&("signIn"in Q.solana&&typeof Q.solana.signIn=="function"||"signMessage"in Q.solana&&typeof Q.solana.signMessage=="function"))Y=Q.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof F!="object"||!D?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Y=F}const V=new URL((r=D?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in Y&&Y.signIn){const Q=await Y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},D?.signInWithSolana),{version:"1",domain:V.host,uri:V.href}),q?{statement:q}:null));let U;if(Array.isArray(Q)&&Q[0]&&typeof Q[0]=="object")U=Q[0];else if(Q&&typeof Q=="object"&&"signedMessage"in Q&&"signature"in Q)U=Q;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)R=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),A=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Y)||typeof Y.signMessage!="function"||!("publicKey"in Y)||typeof Y!="object"||!Y.publicKey||!("toBase58"in Y.publicKey)||typeof Y.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");R=[`${V.host} wants you to sign in with your Solana account:`,Y.publicKey.toBase58(),...q?["",q,""]:[""],"Version: 1",`URI: ${V.href}`,`Issued At: ${(u=(o=D?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&u!==void 0?u:new Date().toISOString()}`,...!((c=D?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${D.signInWithSolana.notBefore}`]:[],...!((f=D?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${D.signInWithSolana.expirationTime}`]:[],...!((p=D?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${D.signInWithSolana.chainId}`]:[],...!((g=D?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${D.signInWithSolana.nonce}`]:[],...!((v=D?.signInWithSolana)===null||v===void 0)&&v.requestId?[`Request ID: ${D.signInWithSolana.requestId}`]:[],...!((C=(w=D?.signInWithSolana)===null||w===void 0?void 0:w.resources)===null||C===void 0)&&C.length?["Resources",...D.signInWithSolana.resources.map(U=>`- ${U}`)]:[]].join(`
`);const Q=await Y.signMessage(new TextEncoder().encode(R),"utf8");if(!Q||!(Q instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=Q}}try{const{data:I,error:F}=await me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:R,signature:fr(A)},!((k=n.options)===null||k===void 0)&&k.captchaToken?{gotrue_meta_security:{captcha_token:(b=n.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:qt});if(F)throw F;if(!I||!I.session||!I.user){const q=new Br;return this._returnResult({data:{user:null,session:null},error:q})}return I.session&&(await this._saveSession(I.session),await this._notifyAllSubscribers("SIGNED_IN",I.session)),this._returnResult({data:Object.assign({},I),error:F})}catch(I){if(ae(I))return this._returnResult({data:{user:null,session:null},error:I});throw I}}async _exchangeCodeForSession(n){const r=await ur(this.storage,`${this.storageKey}-code-verifier`),[o,u]=(r??"").split("/");try{if(!o&&this.flowType==="pkce")throw new Rm;const{data:c,error:f}=await me(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:o},xform:qt});if(await at(this.storage,`${this.storageKey}-code-verifier`),f)throw f;if(!c||!c.session||!c.user){const p=new Br;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:u??null}),error:f})}catch(c){if(await at(this.storage,`${this.storageKey}-code-verifier`),ae(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(n){try{const{options:r,provider:o,token:u,access_token:c,nonce:f}=n,p=await me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:u,access_token:c,nonce:f,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:qt}),{data:g,error:v}=p;if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!g||!g.session||!g.user){const w=new Br;return this._returnResult({data:{user:null,session:null},error:w})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:v})}catch(r){if(ae(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(n){var r,o,u,c,f;try{if("email"in n){const{email:p,options:g}=n;let v=null,w=null;this.flowType==="pkce"&&([v,w]=await Mr(this.storage,this.storageKey));const{error:C}=await me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(r=g?.data)!==null&&r!==void 0?r:{},create_user:(o=g?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:v,code_challenge_method:w},redirectTo:g?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:C})}if("phone"in n){const{phone:p,options:g}=n,{data:v,error:w}=await me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(u=g?.data)!==null&&u!==void 0?u:{},create_user:(c=g?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(f=g?.channel)!==null&&f!==void 0?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:v?.message_id},error:w})}throw new la("You must provide either an email or phone number.")}catch(p){if(await at(this.storage,`${this.storageKey}-code-verifier`),ae(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(n){var r,o;try{let u,c;"options"in n&&(u=(r=n.options)===null||r===void 0?void 0:r.redirectTo,c=(o=n.options)===null||o===void 0?void 0:o.captchaToken);const{data:f,error:p}=await me(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:c}}),redirectTo:u,xform:qt});if(p)throw p;if(!f)throw new Error("An error occurred on token verification.");const g=f.session,v=f.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:v,session:g},error:null})}catch(u){if(ae(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithSSO(n){var r,o,u,c,f;try{let p=null,g=null;this.flowType==="pkce"&&([p,g]=await Mr(this.storage,this.storageKey));const v=await me(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(o=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&o!==void 0?o:void 0}),!((u=n?.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:g}),headers:this.headers,xform:tg});return!((c=v.data)===null||c===void 0)&&c.url&&ot()&&!(!((f=n.options)===null||f===void 0)&&f.skipBrowserRedirect)&&window.location.assign(v.data.url),this._returnResult(v)}catch(p){if(await at(this.storage,`${this.storageKey}-code-verifier`),ae(p))return this._returnResult({data:null,error:p});throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:o}=n;if(o)throw o;if(!r)throw new Et;const{error:u}=await me(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:u})})}catch(n){if(ae(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:o,type:u,options:c}=n,{error:f}=await me(this.fetch,"POST",r,{headers:this.headers,body:{email:o,type:u,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}else if("phone"in n){const{phone:o,type:u,options:c}=n,{data:f,error:p}=await me(this.fetch,"POST",r,{headers:this.headers,body:{phone:o,type:u,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:f?.message_id},error:p})}throw new la("You must provide either an email or phone number and a type")}catch(r){if(ae(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await o,await r()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=r();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await ur(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const o=n.expires_at?n.expires_at*1e3-Date.now()<hl:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",n.expires_at),!o){if(this.userStorage){const f=await ur(this.userStorage,this.storageKey+"-user");f?.user?n.user=f.user:n.user=ml()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};n.user=Ym(n.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:u,error:c}=await this._callRefreshToken(n.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:u},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(n){try{return n?await me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Fn}):await this._useSession(async r=>{var o,u,c;const{data:f,error:p}=r;if(p)throw p;return!(!((o=f.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Et}:await me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0,xform:Fn})})}catch(r){if(ae(r))return fl(r)&&(await this._removeSession(),await at(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async o=>{const{data:u,error:c}=o;if(c)throw c;if(!u.session)throw new Et;const f=u.session;let p=null,g=null;this.flowType==="pkce"&&n.email!=null&&([p,g]=await Mr(this.storage,this.storageKey));const{data:v,error:w}=await me(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:p,code_challenge_method:g}),jwt:f.access_token,xform:Fn});if(w)throw w;return f.user=v.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(o){if(await at(this.storage,`${this.storageKey}-code-verifier`),ae(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Et;const r=Date.now()/1e3;let o=r,u=!0,c=null;const{payload:f}=ca(n.access_token);if(f.exp&&(o=f.exp,u=o<=r),u){const{data:p,error:g}=await this._callRefreshToken(n.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!p)return{data:{user:null,session:null},error:null};c=p}else{const{data:p,error:g}=await this._getUser(n.access_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});c={access_token:n.access_token,refresh_token:n.refresh_token,user:p.user,token_type:"bearer",expires_in:o-r,expires_at:o},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(r){if(ae(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var o;if(!n){const{data:f,error:p}=r;if(p)throw p;n=(o=f.session)!==null&&o!==void 0?o:void 0}if(!n?.refresh_token)throw new Et;const{data:u,error:c}=await this._callRefreshToken(n.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):u?this._returnResult({data:{user:u.user,session:u},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(ae(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(n,r){try{if(!ot())throw new ua("No browser detected.");if(n.error||n.error_description||n.error_code)throw new ua(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Td("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ua("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Td("No code detected.");const{data:q,error:D}=await this._exchangeCodeForSession(n.code);if(D)throw D;const Y=new URL(window.location.href);return Y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Y.toString()),{data:{session:q.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:u,access_token:c,refresh_token:f,expires_in:p,expires_at:g,token_type:v}=n;if(!c||!p||!f||!v)throw new ua("No session defined in URL");const w=Math.round(Date.now()/1e3),C=parseInt(p);let k=w+C;g&&(k=parseInt(g));const b=k-w;b*1e3<=Hr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${C}s`);const R=k-C;w-R>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",R,k,w):w-R<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",R,k,w);const{data:A,error:I}=await this._getUser(c);if(I)throw I;const F={provider_token:o,provider_refresh_token:u,access_token:c,expires_in:C,expires_at:k,refresh_token:f,token_type:v,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:F,redirectType:n.type},error:null})}catch(o){if(ae(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await ur(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var o;const{data:u,error:c}=r;if(c&&!fl(c))return this._returnResult({error:c});const f=(o=u.session)===null||o===void 0?void 0:o.access_token;if(f){const{error:p}=await this.admin.signOut(f,n);if(p&&!(Nm(p)&&(p.status===404||p.status===401||p.status===403)||fl(p)))return this._returnResult({error:p})}return n!=="others"&&(await this._removeSession(),await at(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const r=Um(),o={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,o),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:o}}}async _emitInitialSession(n){return await this._useSession(async r=>{var o,u;try{const{data:{session:c},error:f}=r;if(f)throw f;await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",n,"session",c)}catch(c){await((u=this.stateChangeEmitters.get(n))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",c),console.error(c)}})}async resetPasswordForEmail(n,r={}){let o=null,u=null;this.flowType==="pkce"&&([o,u]=await Mr(this.storage,this.storageKey,!0));try{return await me(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:o,code_challenge_method:u,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(c){if(await at(this.storage,`${this.storageKey}-code-verifier`),ae(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var n;try{const{data:r,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(ae(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{const{data:o,error:u}=await this._useSession(async c=>{var f,p,g,v,w;const{data:C,error:k}=c;if(k)throw k;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(f=n.options)===null||f===void 0?void 0:f.redirectTo,scopes:(p=n.options)===null||p===void 0?void 0:p.scopes,queryParams:(g=n.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await me(this.fetch,"GET",b,{headers:this.headers,jwt:(w=(v=C.session)===null||v===void 0?void 0:v.access_token)!==null&&w!==void 0?w:void 0})});if(u)throw u;return ot()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(o?.url),this._returnResult({data:{provider:n.provider,url:o?.url},error:null})}catch(o){if(ae(o))return this._returnResult({data:{provider:n.provider,url:null},error:o});throw o}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var o;try{const{error:u,data:{session:c}}=r;if(u)throw u;const{options:f,provider:p,token:g,access_token:v,nonce:w}=n,C=await me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=c?.access_token)!==null&&o!==void 0?o:void 0,body:{provider:p,id_token:g,access_token:v,nonce:w,link_identity:!0,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:qt}),{data:k,error:b}=C;return b?this._returnResult({data:{user:null,session:null},error:b}):!k||!k.session||!k.user?this._returnResult({data:{user:null,session:null},error:new Br}):(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("USER_UPDATED",k.session)),this._returnResult({data:k,error:b}))}catch(u){if(await at(this.storage,`${this.storageKey}-code-verifier`),ae(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var o,u;const{data:c,error:f}=r;if(f)throw f;return await me(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(u=(o=c.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0})})}catch(r){if(ae(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const o=Date.now();return await Bm(async u=>(u>0&&await Fm(200*Math.pow(2,u-1)),this._debug(r,"refreshing attempt",u),await me(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:qt})),(u,c)=>{const f=200*Math.pow(2,u);return c&&pl(c)&&Date.now()+f-o<Hr})}catch(o){if(this._debug(r,"error",o),ae(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const o=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",o),ot()&&!r.skipBrowserRedirect&&window.location.assign(o),{data:{provider:n,url:o},error:null}}async _recoverAndRefresh(){var n,r;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const u=await ur(this.storage,this.storageKey);if(u&&this.userStorage){let f=await ur(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:u.user},await Gr(this.userStorage,this.storageKey+"-user",f)),u.user=(n=f?.user)!==null&&n!==void 0?n:ml()}else if(u&&!u.user&&!u.user){const f=await ur(this.storage,this.storageKey+"-user");f&&f?.user?(u.user=f.user,await at(this.storage,this.storageKey+"-user"),await Gr(this.storage,this.storageKey,u)):u.user=ml()}if(this._debug(o,"session from storage",u),!this._isValidSession(u)){this._debug(o,"session is not valid"),u!==null&&await this._removeSession();return}const c=((r=u.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<hl;if(this._debug(o,`session has${c?"":" not"} expired with margin of ${hl}s`),c){if(this.autoRefreshToken&&u.refresh_token){const{error:f}=await this._callRefreshToken(u.refresh_token);f&&(console.error(f),pl(f)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(u.user&&u.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:p}=await this._getUser(u.access_token);!p&&f?.user?(u.user=f.user,await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(o,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",u)}catch(u){this._debug(o,"error",u),console.error(u);return}finally{this._debug(o,"end")}}async _callRefreshToken(n){var r,o;if(!n)throw new Et;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const u=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new ya;const{data:c,error:f}=await this._refreshAccessToken(n);if(f)throw f;if(!c.session)throw new Et;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const p={data:c.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(c){if(this._debug(u,"error",c),ae(c)){const f={data:null,error:c};return pl(c)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(f),f}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(c),c}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(n,r,o=!0){const u=`#_notifyAllSubscribers(${n})`;this._debug(u,"begin",r,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:n,session:r});const c=[],f=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(n,r)}catch(g){c.push(g)}});if(await Promise.all(f),c.length>0){for(let p=0;p<c.length;p+=1)console.error(c[p]);throw c[0]}}finally{this._debug(u,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await at(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},n),o=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&r.user&&await Gr(this.userStorage,this.storageKey+"-user",{user:r.user});const u=Object.assign({},r);delete u.user;const c=Id(u);await Gr(this.storage,this.storageKey,c)}else{const u=Id(r);await Gr(this.storage,this.storageKey,u)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await at(this.storage,this.storageKey),await at(this.storage,this.storageKey+"-code-verifier"),await at(this.storage,this.storageKey+"-user"),this.userStorage&&await at(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&ot()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Hr);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:o}}=r;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const u=Math.floor((o.expires_at*1e3-n)/Hr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${Hr}ms, refresh threshold is ${jl} ticks`),u<=jl&&await this._callRefreshToken(o.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof dh)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ot()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(n){this._debug("#visibilityChangedCallback","error",n)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,o){const u=[`provider=${encodeURIComponent(r)}`];if(o?.redirectTo&&u.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&u.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[c,f]=await Mr(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(f)}`});u.push(p.toString())}if(o?.queryParams){const c=new URLSearchParams(o.queryParams);u.push(c.toString())}return o?.skipBrowserRedirect&&u.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${n}?${u.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var o;const{data:u,error:c}=r;return c?this._returnResult({data:null,error:c}):await me(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token})})}catch(r){if(ae(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(n){try{return await this._useSession(async r=>{var o,u;const{data:c,error:f}=r;if(f)return this._returnResult({data:null,error:f});const p=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:g,error:v}=await me(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(o=c?.session)===null||o===void 0?void 0:o.access_token});return v?this._returnResult({data:null,error:v}):(n.factorType==="totp"&&g.type==="totp"&&(!((u=g?.totp)===null||u===void 0)&&u.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(r){if(ae(r))return this._returnResult({data:null,error:r});throw r}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var o;const{data:u,error:c}=r;if(c)return this._returnResult({data:null,error:c});const f=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?gg(n.webauthn.credential_response):vg(n.webauthn.credential_response)})}:{code:n.code}),{data:p,error:g}=await me(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:f,headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:g}))})}catch(r){if(ae(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var o;const{data:u,error:c}=r;if(c)return this._returnResult({data:null,error:c});const f=await me(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});if(f.error)return f;const{data:p}=f;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:pg(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:mg(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(ae(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(n){const{data:r,error:o}=await this._challenge({factorId:n.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;const{data:{user:r},error:o}=await this.getUser();if(o)return{data:null,error:o};const u={all:[],phone:[],totp:[],webauthn:[]};for(const c of(n=r?.factors)!==null&&n!==void 0?n:[])u.all.push(c),c.status==="verified"&&u[c.factor_type].push(c);return{data:u,error:null}}async _getAuthenticatorAssuranceLevel(n){var r,o,u,c;if(n)try{const{payload:b}=ca(n);let R=null;b.aal&&(R=b.aal);let A=R;const{data:{user:I},error:F}=await this.getUser(n);if(F)return this._returnResult({data:null,error:F});((o=(r=I?.factors)===null||r===void 0?void 0:r.filter(Y=>Y.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(A="aal2");const D=b.amr||[];return{data:{currentLevel:R,nextLevel:A,currentAuthenticationMethods:D},error:null}}catch(b){if(ae(b))return this._returnResult({data:null,error:b});throw b}const{data:{session:f},error:p}=await this.getSession();if(p)return this._returnResult({data:null,error:p});if(!f)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:g}=ca(f.access_token);let v=null;g.aal&&(v=g.aal);let w=v;((c=(u=f.user.factors)===null||u===void 0?void 0:u.filter(b=>b.status==="verified"))!==null&&c!==void 0?c:[]).length>0&&(w="aal2");const k=g.amr||[];return{data:{currentLevel:v,nextLevel:w,currentAuthenticationMethods:k},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async r=>{const{data:{session:o},error:u}=r;return u?this._returnResult({data:null,error:u}):o?await me(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:o.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new Et})})}catch(r){if(ae(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(n,r){try{return await this._useSession(async o=>{const{data:{session:u},error:c}=o;if(c)return this._returnResult({data:null,error:c});if(!u)return this._returnResult({data:null,error:new Et});const f=await me(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return f.data&&f.data.redirect_url&&ot()&&!r?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(o){if(ae(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(n,r){try{return await this._useSession(async o=>{const{data:{session:u},error:c}=o;if(c)return this._returnResult({data:null,error:c});if(!u)return this._returnResult({data:null,error:new Et});const f=await me(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return f.data&&f.data.redirect_url&&ot()&&!r?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(o){if(ae(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:r},error:o}=n;return o?this._returnResult({data:null,error:o}):r?await me(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new Et})})}catch(n){if(ae(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async r=>{const{data:{session:o},error:u}=r;return u?this._returnResult({data:null,error:u}):o?(await me(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Et})})}catch(r){if(ae(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(n,r={keys:[]}){let o=r.keys.find(p=>p.kid===n);if(o)return o;const u=Date.now();if(o=this.jwks.keys.find(p=>p.kid===n),o&&this.jwks_cached_at+Em>u)return o;const{data:c,error:f}=await me(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=u,o=c.keys.find(p=>p.kid===n),!o)?null:o}async getClaims(n,r={}){try{let o=n;if(!o){const{data:b,error:R}=await this.getSession();if(R||!b.session)return this._returnResult({data:null,error:R});o=b.session.access_token}const{header:u,payload:c,signature:f,raw:{header:p,payload:g}}=ca(o);r?.allowExpired||Gm(c.exp);const v=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(u.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!v){const{error:b}=await this.getUser(o);if(b)throw b;return{data:{claims:c,header:u,signature:f},error:null}}const w=Jm(u.alg),C=await crypto.subtle.importKey("jwk",v,w,!0,["verify"]);if(!await crypto.subtle.verify(w,C,f,Lm(`${p}.${g}`)))throw new Cl("Invalid JWT signature");return{data:{claims:c,header:u,signature:f},error:null}}catch(o){if(ae(o))return this._returnResult({data:null,error:o});throw o}}}Hs.nextInstanceID={};const Eg=Hs,Cg="2.97.0";let zs="";typeof Deno<"u"?zs="deno":typeof document<"u"?zs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?zs="react-native":zs="node";const Ng={"X-Client-Info":`supabase-js-${zs}/${Cg}`},Tg={headers:Ng},Rg={schema:"public"},Pg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Og={};function Gs(i){"@babel/helpers - typeof";return Gs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Gs(i)}function Ag(i,n){if(Gs(i)!="object"||!i)return i;var r=i[Symbol.toPrimitive];if(r!==void 0){var o=r.call(i,n);if(Gs(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(i)}function Ig(i){var n=Ag(i,"string");return Gs(n)=="symbol"?n:n+""}function Lg(i,n,r){return(n=Ig(n))in i?Object.defineProperty(i,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[n]=r,i}function Md(i,n){var r=Object.keys(i);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);n&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(i,u).enumerable})),r.push.apply(r,o)}return r}function Ve(i){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Md(Object(r),!0).forEach(function(o){Lg(i,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):Md(Object(r)).forEach(function(o){Object.defineProperty(i,o,Object.getOwnPropertyDescriptor(r,o))})}return i}const Dg=i=>i?(...n)=>i(...n):(...n)=>fetch(...n),Ug=()=>Headers,$g=(i,n,r)=>{const o=Dg(r),u=Ug();return async(c,f)=>{var p;const g=(p=await n())!==null&&p!==void 0?p:i;let v=new u(f?.headers);return v.has("apikey")||v.set("apikey",i),v.has("Authorization")||v.set("Authorization",`Bearer ${g}`),o(c,Ve(Ve({},f),{},{headers:v}))}};function zg(i){return i.endsWith("/")?i:i+"/"}function Fg(i,n){var r,o;const{db:u,auth:c,realtime:f,global:p}=i,{db:g,auth:v,realtime:w,global:C}=n,k={db:Ve(Ve({},g),u),auth:Ve(Ve({},v),c),realtime:Ve(Ve({},w),f),storage:{},global:Ve(Ve(Ve({},C),p),{},{headers:Ve(Ve({},(r=C?.headers)!==null&&r!==void 0?r:{}),(o=p?.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return i.accessToken?k.accessToken=i.accessToken:delete k.accessToken,k}function Bg(i){const n=i?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(zg(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Mg=class extends Eg{constructor(i){super(i)}},Wg=class{constructor(i,n,r){var o,u;this.supabaseUrl=i,this.supabaseKey=n;const c=Bg(i);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const f=`sb-${c.hostname.split(".")[0]}-auth-token`,p={db:Rg,realtime:Og,auth:Ve(Ve({},Pg),{},{storageKey:f}),global:Tg},g=Fg(r??{},p);if(this.storageKey=(o=g.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(u=g.global.headers)!==null&&u!==void 0?u:{},g.accessToken)this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(w,C)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(C)} is not possible`)}});else{var v;this.auth=this._initSupabaseAuthClient((v=g.auth)!==null&&v!==void 0?v:{},this.headers,g.global.fetch)}this.fetch=$g(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Ve({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(w=>this.realtime.setAuth(w)).catch(w=>console.warn("Failed to set initial Realtime auth token:",w)),this.rest=new Np(new URL("rest/v1",c).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch,timeout:g.db.timeout,urlLengthLimit:g.db.urlLengthLimit}),this.storage=new km(this.storageUrl.href,this.headers,this.fetch,r?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new _p(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(i){return this.rest.from(i)}schema(i){return this.rest.schema(i)}rpc(i,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(i,n,r)}channel(i,n={config:{}}){return this.realtime.channel(i,n)}getChannels(){return this.realtime.getChannels()}removeChannel(i){return this.realtime.removeChannel(i)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var i=this,n,r;if(i.accessToken)return await i.accessToken();const{data:o}=await i.auth.getSession();return(n=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:i.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:i,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:u,storageKey:c,flowType:f,lock:p,debug:g,throwOnError:v},w,C){const k={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Mg({url:this.authUrl.href,headers:Ve(Ve({},k),w),storageKey:c,autoRefreshToken:i,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:u,flowType:f,lock:p,debug:g,throwOnError:v,fetch:C,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(i){return new Vp(this.realtimeUrl.href,Ve(Ve({},i),{},{params:Ve(Ve({},{apikey:this.supabaseKey}),i?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,n)=>{this._handleTokenChanged(i,"CLIENT",n?.access_token)})}_handleTokenChanged(i,n,r){(i==="TOKEN_REFRESHED"||i==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):i==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const qg=(i,n,r)=>new Wg(i,n,r);function Vg(){if(typeof window<"u")return!1;const i=globalThis.process;if(!i)return!1;const n=i.version;if(n==null)return!1;const r=n.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}Vg()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const oe=qg("https://dnletmkgmxiebcstwkqa.supabase.co","sb_publishable_C4Mm6r-GLilgbOoYJLUxSA_5V9naOFE"),Wd=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];function Kg(){const i=new Date,n=i.getDay(),r=i.getDate()-n+(n===0?-6:1);return new Date(i.setDate(r)).toISOString().slice(0,10)}const lt=Kg();function pa(i){return{id:i.id,title:i.title,source:i.source||"Added manually",url:i.url||null,time:i.time_mins||30,tags:i.tags||[],category:i.category||"dinner",prepNote:i.prep_note||void 0,pdfUrl:i.pdf_url||void 0,ingredients:i.ingredients||[]}}function ph(i){return{title:i.title,source:i.source,url:i.url||null,time_mins:i.time||30,tags:i.tags||[],category:i.category||"dinner",prep_note:i.prepNote||null,pdf_url:i.pdfUrl||null,ingredients:i.ingredients||[]}}async function Hg(){const{data:i,error:n}=await oe.from("recipes").select("*").order("id");return n?(console.error("fetchRecipes",n),[]):i}async function Gg(i){const{data:n,error:r}=await oe.from("recipes").insert(ph(i)).select().single();if(r)throw console.error("addRecipe",r),r;return n}async function Jg(i,n){const{error:r}=await oe.from("recipes").update(ph(n)).eq("id",i);r&&console.error("updateRecipe",r)}async function Qg(i){const{error:n}=await oe.from("recipes").delete().eq("id",i);n&&console.error("deleteRecipe",n)}async function qd(){const{data:i,error:n}=await oe.from("week_plan").select("*, recipe:recipes(*)").eq("week_start",lt).order("day");if(n)return console.error("fetchWeekPlan",n),Wd.map(o=>({day:o,recipe:null,note:null}));const r={};return i.forEach(o=>{r[o.day]=o}),Wd.map((o,u)=>{const c=r[u];return{day:o,recipe:c?.recipe?pa(c.recipe):null,note:c?.note||null}})}async function vl(i,n,r){const o={week_start:i,day:n};"recipeId"in r&&(o.recipe_id=r.recipeId),"note"in r&&(o.note=r.note);const{error:u}=await oe.from("week_plan").upsert(o,{onConflict:"week_start,day"});u&&console.error("upsertWeekDay",u)}async function Yg(i){const{error:n}=await oe.from("week_plan").delete().eq("week_start",i);n&&console.error("clearWeekPlan",n)}async function Vd(){const{data:i,error:n}=await oe.from("batch_prep").select("*, recipe:recipes(*)").eq("week_start",lt);return n?(console.error("fetchBatchPrep",n),[]):i.map(r=>r.recipe?pa(r.recipe):null).filter(Boolean)}async function Xg(i,n){const{error:r}=await oe.from("batch_prep").insert({week_start:i,recipe_id:n});r&&console.error("addBatchItem",r)}async function Zg(i,n){const{error:r}=await oe.from("batch_prep").delete().eq("week_start",i).eq("recipe_id",n);r&&console.error("removeBatchItem",r)}async function ev(i){const{error:n}=await oe.from("batch_prep").delete().eq("week_start",i);n&&console.error("clearBatchPrep",n)}async function tv(){const{data:i,error:n}=await oe.from("radar").select("*").order("created_at",{ascending:!1});return n?(console.error("fetchRadar",n),[]):i.map(r=>({id:r.id,title:r.title,url:r.url||null,source:r.source||""}))}async function nv(i){const{data:n,error:r}=await oe.from("radar").insert({title:i.title,url:i.url||null,source:i.source||""}).select().single();if(r)throw console.error("addRadarItem",r),r;return{id:n.id,title:n.title,url:n.url,source:n.source}}async function rv(i){const{error:n}=await oe.from("radar").delete().eq("id",i);n&&console.error("removeRadarItem",n)}async function sv(){const{data:i,error:n}=await oe.from("fridge").select("*").order("id");return n?(console.error("fetchFridge",n),[]):i.map(r=>({id:r.id,item:r.item,s:r.status}))}async function iv(i,n){const{data:r,error:o}=await oe.from("fridge").insert({item:i,status:n||"ok"}).select().single();if(o)throw console.error("addFridgeItem",o),o;return{id:r.id,item:r.item,s:r.status}}async function av(i,n){const r={};"item"in n&&(r.item=n.item),"s"in n&&(r.status=n.s);const{error:o}=await oe.from("fridge").update(r).eq("id",i);o&&console.error("updateFridgeItem",o)}async function ov(i){const{error:n}=await oe.from("fridge").delete().eq("id",i);n&&console.error("removeFridgeItem",n)}async function lv(){const{data:i,error:n}=await oe.from("freezer").select("*").order("id");return n?(console.error("fetchFreezer",n),[]):i.map(r=>({id:r.id,item:r.item,qty:r.qty??1}))}async function uv(i,n){const{data:r,error:o}=await oe.from("freezer").insert({item:i,qty:n??1}).select().single();if(o)throw console.error("addFreezerItem",o),o;return{id:r.id,item:r.item,qty:r.qty}}async function cv(i,n){const r={};"item"in n&&(r.item=n.item),"qty"in n&&(r.qty=n.qty);const{error:o}=await oe.from("freezer").update(r).eq("id",i);o&&console.error("updateFreezerItem",o)}async function Kd(i){const{error:n}=await oe.from("freezer").delete().eq("id",i);n&&console.error("removeFreezerItem",n)}async function dv(){const{data:i,error:n}=await oe.from("staples").select("*").order("name");return n?(console.error("fetchStaples",n),[]):i.map(r=>({name:r.name,status:r.status||"ok"}))}async function hv(i){const{error:n}=await oe.from("staples").insert({name:i,status:"ok"});n&&console.error("addStaple",n)}async function fv(i,n){const{error:r}=await oe.from("staples").update({status:n}).eq("name",i);r&&console.error("updateStaple",r)}async function pv(i){const{error:n}=await oe.from("staples").delete().eq("name",i);n&&console.error("removeStaple",n)}async function mv(){const{data:i,error:n}=await oe.from("regulars").select("*").order("name");return n?(console.error("fetchRegulars",n),[]):i.map(r=>({id:r.id,name:r.name}))}async function gv(i){const{data:n,error:r}=await oe.from("regulars").insert({name:i}).select().single();if(r)throw console.error("addRegular",r),r;return{id:n.id,name:n.name}}async function vv(i){const{error:n}=await oe.from("regulars").delete().eq("id",i);n&&console.error("removeRegular",n)}async function yv(){const{data:i,error:n}=await oe.from("prefs").select("*").single();return n?(console.error("fetchPrefs",n),{fishMin:1,vegMin:2,readyBy:"18:30"}):{fishMin:i.fish_min??1,vegMin:i.veg_min??2,readyBy:i.ready_by||"18:30"}}async function wv(i){const{error:n}=await oe.from("prefs").upsert({id:1,fish_min:i.fishMin,veg_min:i.vegMin,ready_by:i.readyBy});n&&console.error("updatePrefs",n)}async function _v(){const{data:i,error:n}=await oe.from("custom_tags").select("name").order("name");return n?(console.error("fetchCustomTags",n),[]):i.map(r=>r.name)}async function kv(i){const{error:n}=await oe.from("custom_tags").insert({name:i});n&&console.error("addCustomTag",n)}async function Sv(i){const{error:n}=await oe.from("custom_tags").delete().eq("name",i);n&&console.error("removeCustomTag",n)}async function xv(){const{data:i,error:n}=await oe.from("custom_categories").select("name").order("name");return n?(console.error("fetchCustomCategories",n),[]):i.map(r=>r.name)}async function jv(i){const{error:n}=await oe.from("custom_categories").insert({name:i});n&&console.error("addCustomCategory",n)}async function bv(i){const{error:n}=await oe.from("custom_categories").delete().eq("name",i);n&&console.error("removeCustomCategory",n)}async function Hd(){const{data:i,error:n}=await oe.from("shop_checked").select("key").eq("week_start",lt);if(n)return console.error("fetchShopChecked",n),{};const r={};return i.forEach(o=>{r[o.key]=!0}),r}async function Ev(i,n,r){if(r){const{error:o}=await oe.from("shop_checked").upsert({week_start:i,key:n},{onConflict:"week_start,key"});o&&console.error("toggleShopChecked",o)}else{const{error:o}=await oe.from("shop_checked").delete().eq("week_start",i).eq("key",n);o&&console.error("toggleShopChecked",o)}}async function Cv(){const{data:i,error:n}=await oe.from("reg_checked").select("regular_id").eq("week_start",lt);if(n)return console.error("fetchRegChecked",n),{};const r={};return i.forEach(o=>{r[o.regular_id]=!0}),r}async function Nv(i,n,r){if(r){const{error:o}=await oe.from("reg_checked").upsert({week_start:i,regular_id:n},{onConflict:"week_start,regular_id"});o&&console.error("toggleRegChecked",o)}else{const{error:o}=await oe.from("reg_checked").delete().eq("week_start",i).eq("regular_id",n);o&&console.error("toggleRegChecked",o)}}async function Tv(){const{data:i,error:n}=await oe.from("free_shop").select("*").order("id");return n?(console.error("fetchFreeShop",n),[]):i.map(r=>({id:r.id,text:r.text,done:r.done}))}async function Rv(i){const{data:n,error:r}=await oe.from("free_shop").insert({text:i,done:!1}).select().single();if(r)throw console.error("addFreeShopItem",r),r;return{id:n.id,text:n.text,done:n.done}}async function Pv(i,n){const{error:r}=await oe.from("free_shop").update(n).eq("id",i);r&&console.error("updateFreeShopItem",r)}async function Ov(){const{data:i,error:n}=await oe.from("prep_tasks").select("*").eq("week_start",lt).order("id");return n?(console.error("fetchPrepTasks",n),[]):i.map(r=>({id:r.id,task:r.task,done:r.done}))}async function Av(i,n){const{data:r,error:o}=await oe.from("prep_tasks").insert({week_start:i,task:n,done:!1}).select().single();if(o)throw console.error("addPrepTask",o),o;return{id:r.id,task:r.task,done:r.done}}async function Iv(i,n){const{error:r}=await oe.from("prep_tasks").update(n).eq("id",i);r&&console.error("updatePrepTask",r)}async function Lv(){const{data:i,error:n}=await oe.from("prep_checked").select("key").eq("week_start",lt);if(n)return console.error("fetchPrepChecked",n),{};const r={};return i.forEach(o=>{r[o.key]=!0}),r}async function Dv(i,n,r){if(r){const{error:o}=await oe.from("prep_checked").upsert({week_start:i,key:n},{onConflict:"week_start,key"});o&&console.error("togglePrepChecked",o)}else{const{error:o}=await oe.from("prep_checked").delete().eq("week_start",i).eq("key",n);o&&console.error("togglePrepChecked",o)}}const Uv=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],$v="leftovers or takeout",mh=i=>{const[n,r]=i.split(":").map(Number);return n*60+r},gh=i=>{const n=Math.floor((i%1440+1440)%1440/60),r=(i%1440+1440)%1440%60;return`${n}:${String(r).padStart(2,"0")}`},zv=(i,n)=>gh(mh(i)-n),Fv=i=>{const[n,r]=i.split(":").map(Number),o=n>=12?"pm":"am";return`${n>12?n-12:n}:${String(r).padStart(2,"0")} ${o}`};function Ol({tags:i}){return d.jsxs(d.Fragment,{children:[i.includes("fish")&&d.jsx("span",{className:"tag tag-fish",children:"Fish"}),i.includes("vegetarian")&&d.jsx("span",{className:"tag tag-veg",children:"Veg"})]})}function Nl({recipe:i,onClose:n,onSave:r,onDelete:o,customTags:u=[],customCategories:c=[]}){const[f,p]=X.useState(!1),[g,v]=X.useState(i.title),[w,C]=X.useState(i.source),[k,b]=X.useState(i.url||""),[R,A]=X.useState(String(i.time)),[I,F]=X.useState(i.prepNote||""),[q,D]=X.useState(i.tags||[]),[Y,V]=X.useState(i.category||""),[Q,U]=X.useState(i.pdfUrl||""),[ue,we]=X.useState(i.ingredients||[]),[je,Ie]=X.useState(""),Ce=J=>D(z=>z.includes(J)?z.filter(Z=>Z!==J):[...z,J]),Se=J=>{const z=J.trim().toLowerCase();z&&!ue.includes(z)&&we(Z=>[...Z,z]),Ie("")},Re=J=>we(z=>z.filter((Z,E)=>E!==J)),Oe=()=>{g.trim()&&(r({...i,title:g.trim(),source:w.trim()||"Added manually",url:k.trim()||null,time:parseInt(R)||30,prepNote:I.trim()||void 0,category:Y||void 0,pdfUrl:Q.trim()||void 0,tags:q,ingredients:ue}),p(!1),n())},be=()=>{v(i.title),C(i.source),b(i.url||""),V(i.category||""),U(i.pdfUrl||""),A(String(i.time)),F(i.prepNote||""),D([...i.tags]),we([...i.ingredients||[]]),Ie(""),p(!0)};return d.jsx("div",{className:"sheet-overlay",onClick:n,children:d.jsxs("div",{className:"sheet",onClick:J=>J.stopPropagation(),children:[d.jsx("div",{className:"sheet-handle"}),!f&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"detail-hero",children:[d.jsx("div",{className:"detail-title",children:i.title}),d.jsx("div",{className:"detail-source",children:i.source}),d.jsxs("div",{className:"detail-meta-row",children:[d.jsxs("div",{className:"detail-meta-chip",children:[" ",i.time," min"]}),i.tags.includes("fish")&&d.jsx("div",{className:"detail-meta-chip",style:{color:"#2a6a8a",background:"#eaf4fb",borderColor:"#a8cfe0"},children:" Fish"}),i.tags.includes("vegetarian")&&d.jsx("div",{className:"detail-meta-chip",style:{color:"#4a7a46",background:"#f0f8ee",borderColor:"#b8d4b6"},children:" Veg"})]})]}),d.jsxs("div",{className:"detail-body",children:[i.prepNote&&d.jsxs("div",{children:[d.jsx("div",{className:"detail-section-label",children:"Prep note"}),d.jsxs("div",{className:"detail-prep-note",children:[" ",i.prepNote]})]}),d.jsxs("div",{children:[d.jsx("div",{className:"detail-section-label",children:"Recipe source"}),i.url?d.jsxs("a",{className:"detail-link",href:i.url,target:"_blank",rel:"noopener noreferrer",children:[d.jsx("span",{className:"detail-link-icon",children:""}),d.jsxs("div",{className:"detail-link-text",children:[d.jsx("div",{className:"detail-link-label",children:i.source}),d.jsx("div",{className:"detail-link-url",children:i.url})]}),d.jsx("span",{className:"detail-link-arrow",children:""})]}):d.jsxs("div",{className:"detail-pdf-placeholder",style:{opacity:.5,cursor:"pointer"},onClick:be,children:[d.jsx("span",{style:{fontSize:18},children:""}),d.jsx("span",{children:"No URL saved yet  tap Edit to add one"})]})]}),i.ingredients&&i.ingredients.length>0?d.jsxs("div",{children:[d.jsx("div",{className:"detail-section-label",children:"Key ingredients"}),d.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:i.ingredients.map((J,z)=>d.jsx("span",{style:{padding:"3px 10px",borderRadius:14,background:"var(--surface2)",border:"1px solid var(--border2)",fontSize:12,color:"var(--ink2)"},children:J},z))})]}):d.jsxs("div",{children:[d.jsx("div",{className:"detail-section-label",children:"Key ingredients"}),d.jsxs("div",{className:"detail-pdf-placeholder",style:{opacity:.5,cursor:"pointer"},onClick:be,children:[d.jsx("span",{style:{fontSize:18},children:""}),d.jsx("span",{children:"No ingredients yet  tap Edit to add them"})]})]}),d.jsxs("div",{children:[d.jsx("div",{className:"detail-section-label",children:"PDF"}),i.pdfUrl?d.jsxs("a",{href:i.pdfUrl,target:"_blank",rel:"noopener noreferrer",className:"detail-link",children:[d.jsx("span",{className:"detail-link-icon",children:""}),d.jsxs("div",{className:"detail-link-text",children:[d.jsx("div",{className:"detail-link-label",children:"View PDF"}),d.jsx("div",{className:"detail-link-url",children:i.pdfUrl})]}),d.jsx("span",{className:"detail-link-arrow",children:""})]}):d.jsxs("div",{className:"detail-pdf-placeholder",style:{opacity:.5,cursor:"pointer"},onClick:be,children:[d.jsx("span",{style:{fontSize:18},children:""}),d.jsx("span",{children:"No PDF yet  tap Edit to add a link"})]})]})]}),d.jsxs("div",{className:"detail-footer",children:[d.jsx("button",{className:"sheet-btn sheet-btn-primary",style:{flex:1},onClick:be,children:"Edit recipe"}),d.jsx("button",{className:"sheet-btn sheet-btn-cancel",onClick:n,children:"Close"}),d.jsx("button",{className:"detail-delete-btn",onClick:()=>{o(i.id),n()},children:"Delete"})]})]}),f&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"sheet-header",children:d.jsxs("div",{className:"sheet-title",children:["Edit ",d.jsx("em",{children:i.title.split(" ").slice(0,3).join(" ")})]})}),d.jsx("div",{className:"sheet-body",children:d.jsxs("div",{style:{paddingBottom:8},children:[d.jsxs("div",{className:"form-field",children:[d.jsx("label",{className:"form-label",children:"Recipe name"}),d.jsx("input",{className:"form-input",value:g,onChange:J=>v(J.target.value),autoFocus:!0})]}),d.jsxs("div",{className:"form-field",children:[d.jsx("label",{className:"form-label",children:"Source name"}),d.jsx("input",{className:"form-input",value:w,onChange:J=>C(J.target.value)})]}),d.jsxs("div",{className:"form-field",children:[d.jsxs("label",{className:"form-label",children:["URL ",d.jsx("span",{style:{fontWeight:400,color:"var(--ink4)"},children:"optional"})]}),d.jsx("input",{className:"form-input",placeholder:"https://",value:k,onChange:J=>b(J.target.value)})]}),d.jsxs("div",{className:"form-field",children:[d.jsx("label",{className:"form-label",children:"Category"}),d.jsx("div",{className:"cat-select",children:[["dinner","Dinner"],["breakfast","Breakfast & Snacks"],["sweets","Sweets"],...(c||[]).map(J=>[J,J])].map(([J,z])=>d.jsx("button",{type:"button",className:"cat-btn"+(Y===J?" active":""),onClick:()=>V(J),children:z},J))})]}),d.jsx("div",{className:"form-row",children:d.jsxs("div",{className:"form-field",children:[d.jsx("label",{className:"form-label",children:"Cook time (min)"}),d.jsx("input",{className:"form-input",type:"number",value:R,onChange:J=>A(J.target.value)})]})}),d.jsxs("div",{className:"form-field",children:[d.jsxs("label",{className:"form-label",children:["Prep note ",d.jsx("span",{style:{fontWeight:400,color:"var(--ink4)"},children:"optional"})]}),d.jsx("input",{className:"form-input",placeholder:"e.g. Marinate overnight",value:I,onChange:J=>F(J.target.value)})]}),d.jsxs("div",{className:"form-field",children:[d.jsx("label",{className:"form-label",children:"Tags"}),d.jsx("div",{className:"tag-toggle-row",children:["fish","vegetarian",...u||[]].map(J=>d.jsx("button",{className:"tag-toggle"+(q.includes(J)?" on":""),onClick:()=>Ce(J),children:J==="fish"?" Fish":J==="vegetarian"?" Veg":J},J))})]}),d.jsxs("div",{className:"form-field",children:[d.jsxs("label",{className:"form-label",children:["Key ingredients ",d.jsx("span",{style:{fontWeight:400,color:"var(--ink4)"},children:"things to buy"})]}),d.jsxs("div",{className:"ingredient-tags",onClick:J=>J.currentTarget.querySelector("input")?.focus(),children:[ue.map((J,z)=>d.jsxs("span",{className:"ingredient-tag",children:[J,d.jsx("button",{className:"ingredient-tag-remove",onClick:()=>Re(z),children:""})]},z)),d.jsx("input",{className:"ingredient-tag-input",placeholder:ue.length===0?"e.g. salmon fillet":"add more",value:je,onChange:J=>Ie(J.target.value),onKeyDown:J=>{(J.key==="Enter"||J.key===",")&&je.trim()?(J.preventDefault(),Se(je)):J.key==="Backspace"&&!je&&ue.length>0&&we(z=>z.slice(0,-1))},onBlur:()=>{je.trim()&&Se(je)}})]}),d.jsx("div",{className:"ingredient-tag-hint",children:"Enter or comma to add  skip pantry staples"})]}),d.jsxs("div",{className:"form-field",children:[d.jsxs("label",{className:"form-label",children:["PDF link ",d.jsx("span",{style:{fontWeight:400,color:"var(--ink4)"},children:"optional"})]}),d.jsx("input",{className:"form-input",placeholder:"https:// or Google Drive link",value:Q,onChange:J=>U(J.target.value)})]})]})}),d.jsxs("div",{className:"sheet-footer",children:[d.jsx("button",{className:"sheet-btn sheet-btn-primary",disabled:!g.trim(),onClick:Oe,children:"Save changes"}),d.jsx("button",{className:"sheet-btn sheet-btn-cancel",onClick:()=>p(!1),children:"Cancel"})]})]})]})})}function Bv({title:i,setTitle:n,source:r,setSource:o,url:u,setUrl:c,time:f,setTime:p,tags:g,setTags:v,ingredients:w,setIngredients:C,ingrInput:k,setIngrInput:b,category:R,setCategory:A,customTags:I=[],customCategories:F=[]}){const q=V=>v(Q=>Q.includes(V)?Q.filter(U=>U!==V):[...Q,V]),D=V=>{const Q=V.trim().toLowerCase();Q&&!w.includes(Q)&&C(U=>[...U,Q]),b("")},Y=V=>C(Q=>Q.filter((U,ue)=>ue!==V));return d.jsxs("div",{style:{paddingBottom:8},children:[d.jsxs("div",{className:"form-field",children:[d.jsx("label",{className:"form-label",children:"Recipe name"}),d.jsx("input",{className:"form-input",placeholder:"e.g. Roast chicken with lemon",value:i,onChange:V=>n(V.target.value),autoFocus:!0})]}),d.jsxs("div",{className:"form-field",children:[d.jsx("label",{className:"form-label",children:"Source name"}),d.jsx("input",{className:"form-input",placeholder:"e.g. NYT Cooking, Smitten Kitchen",value:r,onChange:V=>o(V.target.value)})]}),d.jsxs("div",{className:"form-field",children:[d.jsxs("label",{className:"form-label",children:["URL ",d.jsx("span",{style:{fontWeight:400,color:"var(--ink4)"},children:"optional"})]}),d.jsx("input",{className:"form-input",placeholder:"https://",value:u,onChange:V=>c(V.target.value)})]}),d.jsxs("div",{className:"form-field",children:[d.jsx("label",{className:"form-label",children:"Category"}),d.jsx("div",{className:"cat-select",children:[["dinner","Dinner"],["breakfast","Breakfast & Snacks"],["sweets","Sweets"],...(F||[]).map(V=>[V,V])].map(([V,Q])=>d.jsx("button",{type:"button",className:"cat-btn"+(R===V?" active":""),onClick:()=>A&&A(V),children:Q},V))})]}),d.jsx("div",{className:"form-row",children:d.jsxs("div",{className:"form-field",children:[d.jsx("label",{className:"form-label",children:"Cook time (min)"}),d.jsx("input",{className:"form-input",type:"number",placeholder:"30",value:f,onChange:V=>p(V.target.value)})]})}),d.jsxs("div",{className:"form-field",children:[d.jsx("label",{className:"form-label",children:"Tags"}),d.jsx("div",{className:"tag-toggle-row",children:["fish","vegetarian",...I||[]].map(V=>d.jsx("button",{className:"tag-toggle"+(g.includes(V)?" on":""),onClick:()=>q(V),children:V==="fish"?" Fish":V==="vegetarian"?" Veg":V},V))})]}),d.jsxs("div",{className:"form-field",children:[d.jsxs("label",{className:"form-label",children:["Key ingredients ",d.jsx("span",{style:{fontWeight:400,color:"var(--ink4)"},children:"things to buy, not staples"})]}),d.jsxs("div",{className:"ingredient-tags",onClick:V=>V.currentTarget.querySelector("input")?.focus(),children:[w.map((V,Q)=>d.jsxs("span",{className:"ingredient-tag",children:[V,d.jsx("button",{className:"ingredient-tag-remove",onClick:()=>Y(Q),children:""})]},Q)),d.jsx("input",{className:"ingredient-tag-input",placeholder:w.length===0?"e.g. salmon fillet":"add more",value:k,onChange:V=>b(V.target.value),onKeyDown:V=>{(V.key==="Enter"||V.key===",")&&k.trim()?(V.preventDefault(),D(k)):V.key==="Backspace"&&!k&&w.length>0&&C(Q=>Q.slice(0,-1))},onBlur:()=>{k.trim()&&D(k)}})]}),d.jsx("div",{className:"ingredient-tag-hint",children:"Enter or comma to add  skip staples like garlic, olive oil"})]})]})}function Gd({onClose:i,onAdd:n,prefill:r={},customTags:o=[],customCategories:u=[]}){const[c,f]=X.useState(r.title||""),[p,g]=X.useState(r.source||""),[v,w]=X.useState(r.url||""),[C,k]=X.useState(r.time?String(r.time):""),[b,R]=X.useState(r.category||"dinner"),[A,I]=X.useState(r.tags||[]),[F,q]=X.useState(r.ingredients||[]),[D,Y]=X.useState(""),V=()=>{c.trim()&&(n({id:Date.now(),title:c.trim(),source:p.trim()||"Added manually",url:v.trim()||null,category:b||"dinner",time:parseInt(C)||30,tags:A,ingredients:F}),i())};return d.jsx("div",{className:"sheet-overlay",onClick:i,children:d.jsxs("div",{className:"sheet",onClick:Q=>Q.stopPropagation(),children:[d.jsx("div",{className:"sheet-handle"}),d.jsxs("div",{className:"sheet-header",children:[d.jsxs("div",{className:"sheet-title",children:["New ",d.jsx("em",{children:"Recipe"})]}),d.jsx("div",{className:"sheet-subtitle",children:"Saved to your library"})]}),d.jsx("div",{className:"sheet-body",children:d.jsx(Bv,{title:c,setTitle:f,source:p,setSource:g,url:v,setUrl:w,time:C,setTime:k,category:b,setCategory:R,tags:A,setTags:I,ingredients:F,setIngredients:q,ingrInput:D,setIngrInput:Y,customTags:o,customCategories:u})}),d.jsxs("div",{className:"sheet-footer",children:[d.jsx("button",{className:"sheet-btn sheet-btn-primary",disabled:!c.trim(),onClick:V,children:"Save to library"}),d.jsx("button",{className:"sheet-btn sheet-btn-cancel",onClick:i,children:"Cancel"})]})]})})}function Mv({onClose:i,week:n,staples:r,freezer:o,fridge:u,regulars:c,onAddRegular:f,onRemoveRegular:p,regChecked:g,onToggleRegChecked:v,shopChecked:w,onToggleShopChecked:C,freeShop:k,onAddFreeShop:b,onToggleFreeShop:R}){const[A,I]=X.useState(""),[F,q]=X.useState(""),D=x=>v(x),Y=x=>p(x),V=x=>{const se=x.trim().toLowerCase();se&&!c.find(le=>le.name===se)&&f(se),q("")},Q=x=>C(x),U=x=>R(x),ue=()=>{A.trim()&&(b(A.trim()),I(""))},we=r.filter(x=>x.status==="ok").map(x=>x.name.toLowerCase()),je=(o||[]).map(x=>x.item.toLowerCase()),Ie=(u||[]).map(x=>x.item.toLowerCase()),Ce=r.filter(x=>x.status==="restock").map(x=>({id:"staple:"+x.name,text:x.name,source:"restock"})),Se=(n||[]).filter(x=>x.recipe?.ingredients?.length).flatMap(x=>x.recipe.ingredients.map(se=>({text:se,source:x.day,id:x.day+":"+se}))).filter(x=>!we.includes(x.text.toLowerCase())&&!je.includes(x.text.toLowerCase())&&!Ie.includes(x.text.toLowerCase())),Re=[],Oe={};Se.forEach(x=>{Oe[x.text]?Oe[x.text].source+=", "+x.source:(Oe[x.text]={...x},Re.push(Oe[x.text]))});const be=[...Ce,...Re,...k.map(x=>({...x,source:null}))],J=c.filter(x=>!g[x.id]),z=c.filter(x=>g[x.id]),Z=be.filter(x=>!w[x.id]&&!x.done),E=be.filter(x=>w[x.id]||x.done),_=J.length+Z.length;return d.jsx("div",{className:"sheet-overlay",onClick:i,children:d.jsxs("div",{className:"sheet",style:{maxHeight:"92vh"},onClick:x=>x.stopPropagation(),children:[d.jsx("div",{className:"sheet-handle"}),d.jsx("div",{className:"sheet-header",style:{paddingBottom:10},children:d.jsxs("div",{className:"sheet-title",children:["Shopping ",d.jsx("em",{children:"List"}),_>0&&d.jsx("span",{className:"shop-count-badge",children:_})]})}),d.jsxs("div",{className:"sheet-body",style:{padding:0},children:[d.jsx("div",{className:"shop-sheet-group-label",children:"Every week"}),d.jsxs("div",{className:"shop-col-grid",children:[J.map(x=>d.jsxs("div",{className:"shop-col-item",children:[d.jsx("input",{type:"checkbox",checked:!1,onChange:()=>D(x.id)}),d.jsx("div",{style:{flex:1,minWidth:0},children:d.jsx("div",{className:"shop-col-text",children:x.name})}),d.jsx("button",{className:"pantry-row-remove",style:{opacity:.25,fontSize:13},onClick:se=>{se.stopPropagation(),Y(x.id)},children:""})]},x.id)),z.map(x=>d.jsxs("div",{className:"shop-col-item done-item",children:[d.jsx("input",{type:"checkbox",checked:!0,onChange:()=>D(x.id)}),d.jsx("div",{style:{flex:1,minWidth:0,textDecoration:"line-through"},children:d.jsx("div",{className:"shop-col-text",children:x.name})})]},x.id))]}),d.jsxs("div",{style:{padding:"6px 12px 10px",borderBottom:"1px solid var(--border2)",display:"flex",gap:8},children:[d.jsx("input",{className:"pantry-add-input",placeholder:"Add to weekly regulars",value:F,style:{fontSize:11},onChange:x=>q(x.target.value),onKeyDown:x=>{x.key==="Enter"&&V(F)}}),d.jsx("button",{className:"pantry-add-btn",disabled:!F.trim(),onClick:()=>V(F),style:{fontSize:11,padding:"6px 10px"},children:"Add"})]}),d.jsx("div",{className:"shop-sheet-group-label",children:"This week's recipes"}),Z.length===0&&E.length===0&&k.length===0?d.jsx("div",{style:{padding:"10px 20px",color:"var(--ink4)",fontSize:12,fontStyle:"italic"},children:"Plan dinners to auto-populate ingredients here."}):d.jsxs("div",{className:"shop-col-grid",children:[Z.map(x=>d.jsxs("div",{className:"shop-col-item",children:[d.jsx("input",{type:"checkbox",checked:!1,onChange:()=>x.done!==void 0?U(x.id):Q(x.id)}),d.jsxs("div",{style:{flex:1,minWidth:0},children:[d.jsx("div",{className:"shop-col-text",children:x.text}),x.source&&d.jsx("div",{className:"shop-col-source",children:x.source})]})]},x.id)),E.map(x=>d.jsxs("div",{className:"shop-col-item done-item",children:[d.jsx("input",{type:"checkbox",checked:!0,onChange:()=>x.done!==void 0?U(x.id):Q(x.id)}),d.jsx("div",{style:{flex:1,minWidth:0,textDecoration:"line-through"},children:d.jsx("div",{className:"shop-col-text",children:x.text})})]},x.id))]}),d.jsxs("div",{style:{padding:"6px 12px 10px",display:"flex",gap:8},children:[d.jsx("input",{className:"pantry-add-input",placeholder:"Add item",value:A,style:{fontSize:11},onChange:x=>I(x.target.value),onKeyDown:x=>{x.key==="Enter"&&ue()}}),d.jsx("button",{className:"pantry-add-btn",disabled:!A.trim(),onClick:ue,style:{fontSize:11,padding:"6px 10px"},children:"Add"})]})]}),d.jsx("div",{className:"sheet-footer",children:d.jsx("button",{className:"sheet-btn sheet-btn-cancel",style:{flex:1},onClick:i,children:"Done"})})]})})}function Wv({targetDay:i,dayIndex:n,week:r,recipes:o,radar:u,onClose:c,onSlot:f,onRemove:p,onSlotNote:g,onAddRecipe:v,freezer:w,onAdjustFreezerQty:C,customTags:k=[],customCategories:b=[]}){const[R,A]=X.useState((i?.recipe,"pick")),[I,F]=X.useState(""),[q,D]=X.useState(""),[Y,V]=X.useState(""),[Q,U]=X.useState("30"),[ue,we]=X.useState([]),[je,Ie]=X.useState(""),[Ce,Se]=X.useState(!1),[Re,Oe]=X.useState(""),[be,J]=X.useState("dinner"),[z,Z]=X.useState([]),[E,_]=X.useState(""),[x,se]=X.useState(null),[le,ge]=X.useState(i?.note||""),ce=o.filter(M=>(M.category==="dinner"||!M.category)&&(I===""||M.title.toLowerCase().includes(I.toLowerCase()))),_e=M=>{if(!w?.length||!M.ingredients?.length)return[];const ye=Object.fromEntries(w.map(Le=>[Le.item.toLowerCase(),Le]));return M.ingredients.map(Le=>ye[Le.toLowerCase()]).filter(Boolean).map(Le=>({freezerItem:Le,deduct:1}))},xe=M=>{const ye=_e(M);ye.length?se({recipe:M,matches:ye}):(f(n,M),c())},Pe=()=>{p(n),c()},Be=()=>{if(!q.trim())return;const M={id:Date.now(),title:q.trim(),source:Ce&&Re.trim()||"Added manually",url:Y.trim()||null,category:Ce&&be||"dinner",tags:Ce?z:[],time:parseInt(Q)||30,ingredients:ue,prepNote:E.trim()||void 0,_unsaved:!Ce};Ce&&v(M);const ye=_e(M);ye.length?se({recipe:M,matches:ye}):(f(n,M),c())},Dt=()=>{x.matches.forEach(({freezerItem:M,deduct:ye})=>{C(M.id,-ye)}),f(n,x.recipe),c()},Nt=()=>{f(n,x.recipe),c()},Tt=(M,ye)=>{se(Le=>({...Le,matches:Le.matches.map(kt=>kt.freezerItem.id===M?{...kt,deduct:Math.max(0,kt.deduct+ye)}:kt)}))},en=i?`${i.day}day`:"Choose a night";return x?d.jsx("div",{className:"sheet-overlay",onClick:Nt,children:d.jsxs("div",{className:"sheet",onClick:M=>M.stopPropagation(),children:[d.jsx("div",{className:"sheet-handle"}),d.jsxs("div",{className:"deduct-prompt",children:[d.jsxs("div",{children:[d.jsx("div",{className:"deduct-title",children:"Using from freezer"}),d.jsx("div",{className:"deduct-subtitle",children:"How much should we deduct from your freezer stock?"})]}),x.matches.map(({freezerItem:M,deduct:ye})=>d.jsxs("div",{className:"deduct-row",children:[d.jsxs("div",{className:"deduct-row-name",children:[M.item,d.jsxs("div",{className:"deduct-row-current",children:[M.qty," lb in stock"]})]}),d.jsxs("div",{className:"fz-stepper",children:[d.jsx("button",{className:"fz-stepper-btn",onClick:()=>Tt(M.id,-1),children:""}),d.jsx("span",{className:"fz-stepper-val",children:ye}),d.jsx("button",{className:"fz-stepper-btn",onClick:()=>Tt(M.id,1),children:"+"}),d.jsx("span",{className:"fz-unit",children:"lb"})]})]},M.id))]}),d.jsxs("div",{className:"sheet-footer",children:[d.jsx("button",{className:"sheet-btn sheet-btn-primary",onClick:Dt,children:"Confirm & deduct"}),d.jsx("button",{className:"sheet-btn sheet-btn-cancel",onClick:Nt,children:"Skip"})]})]})}):d.jsx("div",{className:"sheet-overlay",onClick:c,children:d.jsxs("div",{className:"sheet",onClick:M=>M.stopPropagation(),children:[d.jsx("div",{className:"sheet-handle"}),d.jsxs("div",{className:"sheet-header",children:[d.jsx("div",{className:"sheet-title",children:i?.recipe?d.jsxs(d.Fragment,{children:["Change ",d.jsx("em",{children:i.day}),"'s dinner"]}):d.jsxs(d.Fragment,{children:["Plan ",d.jsx("em",{children:i?.day??"a night"})]})}),d.jsx("div",{className:"sheet-subtitle",children:en})]}),d.jsxs("div",{className:"sheet-mode-toggle",children:[d.jsx("button",{className:"sheet-mode-btn"+(R==="pick"?" active":""),onClick:()=>A("pick"),children:"Choose recipe"}),d.jsx("button",{className:"sheet-mode-btn"+(R==="note"?" active":""),onClick:()=>A("note"),children:"Add non-recipe"}),d.jsx("button",{className:"sheet-mode-btn"+(R==="new"?" active":""),onClick:()=>A("new"),children:"New recipe"})]}),d.jsxs("div",{className:"sheet-body",children:[R==="pick"&&d.jsxs(d.Fragment,{children:[(i?.recipe||i?.note)&&d.jsxs("div",{className:"sheet-current",children:[d.jsxs("div",{children:[d.jsx("div",{className:"sheet-current-label",children:"Currently planned"}),d.jsx("div",{className:"sheet-current-title",children:i.recipe?.title??i.note})]}),d.jsx("button",{className:"sheet-remove-btn",onClick:Pe,children:"Clear"})]}),d.jsx("input",{className:"pick-search",placeholder:"Search recipes",value:I,onChange:M=>F(M.target.value),autoFocus:!0}),ce.map(M=>d.jsxs("div",{className:"pick-recipe-item",onClick:()=>xe(M),children:[d.jsx("div",{className:"pick-thumb",children:M.title[0]}),d.jsxs("div",{style:{flex:1,minWidth:0},children:[d.jsx("div",{className:"pick-recipe-title",children:M.title}),d.jsxs("div",{className:"pick-recipe-meta",children:[M.source,"  ",M.time," min"]}),d.jsx("div",{className:"pick-tags",children:d.jsx(Ol,{tags:M.tags})})]}),d.jsx("span",{style:{color:"var(--ink4)",fontSize:20},children:""})]},M.id)),ce.length===0&&d.jsxs("div",{style:{padding:"24px 0",textAlign:"center",color:"var(--ink4)",fontSize:13,fontStyle:"italic"},children:['No recipes match "',I,'"']})]}),R==="note"&&d.jsxs("div",{style:{padding:"8px 0"},children:[d.jsxs("div",{className:"form-field",children:[d.jsx("label",{className:"form-label",children:"What's for dinner?"}),d.jsx("input",{className:"form-input",placeholder:"e.g. cheese omelette and salad",value:le,autoFocus:!0,onChange:M=>ge(M.target.value),onKeyDown:M=>{M.key==="Enter"&&le.trim()&&(g(n,le),c())}})]}),i?.note&&d.jsxs("div",{style:{fontSize:11,color:"var(--ink4)",marginTop:4,fontStyle:"italic"},children:['Currently: "',i.note,'"']})]}),R==="new"&&d.jsxs("div",{style:{paddingBottom:8},children:[u&&u.length>0&&d.jsxs("div",{style:{marginBottom:14},children:[d.jsx("div",{style:{fontSize:10,letterSpacing:"0.08em",textTransform:"uppercase",color:"var(--ink4)",fontWeight:700,marginBottom:6},children:"From radar"}),u.map(M=>d.jsxs("div",{onMouseDown:ye=>{ye.preventDefault(),D(M.title),V(M.url||"")},style:{display:"flex",alignItems:"center",gap:8,padding:"5px 0",borderBottom:"1px solid var(--border2)",cursor:"pointer"},children:[d.jsx("span",{style:{flex:1,fontSize:12,color:q===M.title?"var(--accent)":"var(--ink2)",fontWeight:q===M.title?700:400,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:M.title}),M.url&&d.jsx("span",{style:{fontSize:10,color:"var(--ink4)"},children:""})]},M.id)),d.jsx("div",{style:{height:12}})]}),d.jsxs("div",{className:"form-field",children:[d.jsx("label",{className:"form-label",children:"Recipe name"}),d.jsx("input",{className:"form-input",placeholder:"e.g. Roast chicken with lemon",value:q,onChange:M=>D(M.target.value)})]}),d.jsxs("div",{className:"form-field",children:[d.jsxs("label",{className:"form-label",children:["URL ",d.jsx("span",{style:{fontWeight:400,color:"var(--ink4)"},children:"optional"})]}),d.jsx("input",{className:"form-input",placeholder:"https://",value:Y,onChange:M=>V(M.target.value)})]}),d.jsxs("div",{className:"form-field",children:[d.jsx("label",{className:"form-label",children:"Cook time (min)"}),d.jsx("input",{className:"form-input",type:"number",value:Q,onChange:M=>U(M.target.value)})]}),d.jsxs("div",{className:"form-field",children:[d.jsxs("label",{className:"form-label",children:["Key ingredients ",d.jsx("span",{style:{fontWeight:400,color:"var(--ink4)"},children:"optional"})]}),d.jsxs("div",{className:"ingredient-tags",onClick:M=>M.currentTarget.querySelector("input")?.focus(),children:[ue.map((M,ye)=>d.jsxs("span",{className:"ingredient-tag",children:[M,d.jsx("button",{className:"ingredient-tag-remove",onClick:()=>we(Le=>Le.filter((kt,tn)=>tn!==ye)),children:""})]},ye)),d.jsx("input",{className:"ingredient-tag-input",placeholder:ue.length===0?"e.g. salmon fillet":"add more",value:je,onChange:M=>Ie(M.target.value),onKeyDown:M=>{const ye=je.trim().toLowerCase();(M.key==="Enter"||M.key===",")&&ye?(M.preventDefault(),ue.includes(ye)||we(Le=>[...Le,ye]),Ie("")):M.key==="Backspace"&&!je&&ue.length>0&&we(Le=>Le.slice(0,-1))},onBlur:()=>{const M=je.trim().toLowerCase();M&&!ue.includes(M)&&(we(ye=>[...ye,M]),Ie(""))}})]}),d.jsx("div",{className:"ingredient-tag-hint",children:"Enter or comma to add"})]}),d.jsxs("div",{className:"form-field",children:[d.jsxs("label",{className:"form-label",children:["Prep note ",d.jsx("span",{style:{fontWeight:400,color:"var(--ink4)"},children:"optional"})]}),d.jsx("input",{className:"form-input",placeholder:"e.g. Marinate overnight",value:E,onChange:M=>_(M.target.value)})]}),d.jsxs("div",{style:{marginTop:12,borderTop:"1px solid var(--border2)",paddingTop:12},children:[d.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,fontSize:12,color:"var(--ink3)",cursor:"pointer",marginBottom:Ce?12:0},children:[d.jsx("input",{type:"checkbox",checked:Ce,onChange:M=>Se(M.target.checked),style:{accentColor:"var(--accent)"}}),d.jsx("span",{children:"Save to recipe library"})]}),Ce&&d.jsxs("div",{children:[d.jsxs("div",{className:"form-field",children:[d.jsx("label",{className:"form-label",children:"Source"}),d.jsx("input",{className:"form-input",placeholder:"e.g. NYT Cooking, Smitten Kitchen",value:Re,onChange:M=>Oe(M.target.value)})]}),d.jsxs("div",{className:"form-field",children:[d.jsx("label",{className:"form-label",children:"Category"}),d.jsx("div",{className:"cat-select",children:[["dinner","Dinner"],["breakfast","Breakfast & Snacks"],["sweets","Sweets"],...b.map(M=>[M,M])].map(([M,ye])=>d.jsx("button",{type:"button",className:"cat-btn"+(be===M?" active":""),onClick:()=>J(M),children:ye},M))})]}),d.jsxs("div",{className:"form-field",children:[d.jsx("label",{className:"form-label",children:"Tags"}),d.jsx("div",{className:"tag-toggle-row",children:["fish","vegetarian",...k].map(M=>d.jsx("button",{className:"tag-toggle"+(z.includes(M)?" on":""),onClick:()=>Z(ye=>ye.includes(M)?ye.filter(Le=>Le!==M):[...ye,M]),children:M==="fish"?" Fish":M==="vegetarian"?" Veg":M},M))})]})]})]})]})]}),d.jsxs("div",{className:"sheet-footer",children:[R==="note"&&d.jsx("button",{className:"sheet-btn sheet-btn-primary",disabled:!le.trim(),onClick:()=>{g(n,le),c()},children:"Save note"}),R==="new"&&d.jsxs("button",{className:"sheet-btn sheet-btn-primary",disabled:!q.trim(),onClick:Be,children:["Plan for ",i?.day??"this night"]}),d.jsx("button",{className:"sheet-btn sheet-btn-cancel",onClick:c,children:R==="note"||R==="new"?"Back":"Cancel"})]})]})})}function Jd({d:i,today:n,onClick:r,onDetail:o,readyBy:u}){const c=zv(u,i.recipe.time),f=i.recipe.pdfUrl||i.recipe.url||null;return d.jsxs("div",{className:"day-card"+(n?" today":""),onClick:()=>o(i.recipe),children:[d.jsx("button",{className:"day-card-swap",title:"Change recipe",onClick:p=>{p.stopPropagation(),r()},children:""}),d.jsx("div",{className:"day-name",children:i.day}),d.jsxs("div",{className:"day-recipe-block",children:[d.jsx("div",{className:"day-recipe-name",children:i.recipe.title}),f?d.jsxs("a",{className:"day-source linked",href:f,target:"_blank",rel:"noopener noreferrer",onClick:p=>p.stopPropagation(),children:[i.recipe.source,d.jsx("span",{className:"source-arrow",children:" "})]}):d.jsx("div",{className:"day-source",children:i.recipe._unsaved?d.jsx("em",{style:{color:"var(--ink4)"},children:"not saved"}):i.recipe.source}),d.jsxs("div",{className:"day-recipe-meta",children:[d.jsxs("span",{className:"day-time",children:["start ",c]}),d.jsxs("span",{className:"day-duration",children:[" ",i.recipe.time,"m"]})]})]})]})}function Qd({d:i,today:n,onClick:r}){return d.jsxs("div",{className:"day-stub"+(n?" today":""),onClick:r,children:[d.jsx("div",{className:"day-name",children:i.day}),d.jsx("div",{className:"day-stub-label",children:$v})]})}function Yd({d:i,today:n,onClick:r}){return d.jsxs("div",{className:"day-note"+(n?" today":""),onClick:r,children:[d.jsx("button",{className:"day-note-swap",title:"Change plan",onClick:o=>{o.stopPropagation(),r()},children:""}),d.jsx("div",{className:"day-name",children:i.day}),d.jsx("div",{className:"day-note-text",children:i.note})]})}function qv({recipes:i,onClose:n,onAdd:r}){const[o,u]=X.useState(""),c=i.filter(p=>o===""||p.title.toLowerCase().includes(o.toLowerCase())),f=p=>{r(p),n()};return d.jsx("div",{className:"sheet-overlay",onClick:n,children:d.jsxs("div",{className:"sheet",onClick:p=>p.stopPropagation(),children:[d.jsx("div",{className:"sheet-handle"}),d.jsxs("div",{className:"sheet-header",children:[d.jsxs("div",{className:"sheet-title",children:["Weekend ",d.jsx("em",{children:"Batch"})," Prep"]}),d.jsx("div",{className:"sheet-subtitle",children:"Pick a recipe to make ahead this weekend"})]}),d.jsxs("div",{className:"sheet-body",children:[d.jsx("input",{className:"pick-search",placeholder:"Search recipes",value:o,onChange:p=>u(p.target.value),autoFocus:!0}),c.map(p=>d.jsxs("div",{className:"pick-recipe-item",onClick:()=>f(p),children:[d.jsx("div",{className:"pick-thumb",children:p.title[0]}),d.jsxs("div",{style:{flex:1,minWidth:0},children:[d.jsx("div",{className:"pick-recipe-title",children:p.title}),d.jsxs("div",{className:"pick-recipe-meta",children:[p.source,"  ",p.time," min"]}),d.jsx("div",{className:"pick-tags",children:d.jsx(Ol,{tags:p.tags})})]}),d.jsx("span",{style:{color:"var(--ink4)",fontSize:20},children:""})]},p.id))]}),d.jsx("div",{className:"sheet-footer",children:d.jsx("button",{className:"sheet-btn sheet-btn-cancel",onClick:n,children:"Cancel"})})]})})}function Vv({week:i,staples:n,freezer:r,fridge:o,regulars:u,regChecked:c,onToggleRegChecked:f,shopChecked:p,onToggleShopChecked:g,freeShop:v,onAddFreeShop:w,onToggleFreeShop:C}){const[k,b]=X.useState(""),R=n.filter(U=>U.status==="ok").map(U=>U.name.toLowerCase()),A=(r||[]).map(U=>U.item.toLowerCase()),I=(o||[]).map(U=>U.item.toLowerCase()),F=n.filter(U=>U.status==="restock").map(U=>({id:"staple:"+U.name,text:U.name,source:"restock"})),q=(i||[]).filter(U=>U.recipe?.ingredients?.length).flatMap(U=>U.recipe.ingredients.map(ue=>({text:ue,source:U.day,id:U.day+":"+ue}))).filter(U=>!R.includes(U.text.toLowerCase())&&!A.includes(U.text.toLowerCase())&&!I.includes(U.text.toLowerCase())),D=[],Y={};q.forEach(U=>{Y[U.text]?Y[U.text].source+=", "+U.source:(Y[U.text]={...U},D.push(Y[U.text]))});const V=[...F,...D,...v],Q=U=>{U.done!==void 0?C(U.id):g(U.id)};return d.jsxs("div",{className:"week-shop-section",children:[u.length>0&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"week-shop-group-label",children:"Every week"}),d.jsx("div",{className:"week-shop-pills",children:u.map(U=>d.jsx("span",{className:"shop-pill"+(c[U.id]?" done":""),onClick:()=>f(U.id),children:U.name},U.id))})]}),V.length>0&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"week-shop-group-label",children:"This week"}),d.jsx("div",{className:"week-shop-pills",children:V.map(U=>d.jsx("span",{className:"shop-pill"+(p[U.id]||U.done?" done":""),onClick:()=>Q(U),children:U.text},U.id))})]}),u.length===0&&V.length===0&&d.jsx("div",{className:"week-shop-empty",children:"Plan dinners to populate your list."}),d.jsxs("div",{style:{display:"flex",gap:8,marginBottom:10},children:[d.jsx("input",{className:"pantry-add-input",placeholder:"Add item",style:{fontSize:11},value:k,onChange:U=>b(U.target.value),onKeyDown:U=>{U.key==="Enter"&&k.trim()&&(w(k.trim()),b(""))}}),d.jsx("button",{className:"pantry-add-btn",disabled:!k.trim(),style:{fontSize:11,padding:"6px 10px"},onClick:()=>{k.trim()&&(w(k.trim()),b(""))},children:"Add"})]})]})}function Kv({goals:i,week:n,recipes:r,onOpenShop:o,shopCount:u,fridge:c,freezer:f,staples:p,regulars:g,regChecked:v,shopChecked:w,freeShop:C,radar:k,customTags:b,customCategories:R,batch:A,prepTasks:I,prepChecked:F,onSlot:q,onRemove:D,onSlotNote:Y,onAddRecipe:V,onUpdateRecipe:Q,onDeleteRecipe:U,onWeekReset:ue,onAddBatch:we,onRemoveBatch:je,onAddPrepTask:Ie,onTogglePrepTask:Ce,onTogglePrepChecked:Se,onToggleRegChecked:Re,onToggleShopChecked:Oe,onAddFreeShop:be,onToggleFreeShop:J,onAdjustFreezerQty:z}){const[Z,E]=X.useState(!0),[_,x]=X.useState(!0),[se,le]=X.useState(!1),[ge,ce]=X.useState(""),[_e,xe]=X.useState(null),[Pe,Be]=X.useState(null),[Dt,Nt]=X.useState(null),Tt=n.filter($=>$.recipe?.prepNote).map($=>({key:$.day+$.recipe.id,task:$.recipe.prepNote,day:$.day,done:!!F[$.day+$.recipe.id]})),en=(f||[]).map($=>$.item.toLowerCase()),M=n.filter($=>$.recipe?.ingredients?.length).flatMap($=>$.recipe.ingredients.filter(Ee=>en.includes(Ee.toLowerCase())).map(Ee=>({key:"thaw:"+$.day+":"+Ee,ing:Ee,day:$.day,done:!!F["thaw:"+$.day+":"+Ee]}))),ye=$=>xe({dayIndex:$}),Le=()=>xe(null),kt=($,Ee)=>{q($,Ee)},tn=$=>{D($)},nn=($,Ee)=>{Y($,Ee)},Ht=$=>{V($)},Bn=$=>{we($)},Mn=n.slice(0,4),Wn=n.slice(4,7),qn=n.filter($=>$.recipe),Vn=qn.filter($=>$.recipe.tags.includes("fish")).length,vn=qn.filter($=>$.recipe.tags.includes("vegetarian")).length,rn=Vn>=i.fishMin,yn=vn>=i.vegMin,Gt=rn&&yn;return d.jsxs("div",{children:[d.jsxs("div",{className:"page-header",children:[d.jsx("div",{children:d.jsxs("div",{className:"page-title",children:["This ",d.jsx("em",{children:"Week"})]})}),d.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[se?d.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[d.jsx("span",{style:{fontSize:11,color:"var(--ink3)"},children:"Clear everything?"}),d.jsx("button",{className:"shop-fab",style:{background:"var(--accent)",color:"#fff",borderColor:"var(--accent)",fontSize:11,padding:"6px 12px"},onClick:()=>{ue(),le(!1)},children:"Yes"}),d.jsx("button",{className:"shop-fab",style:{fontSize:11,padding:"6px 12px"},onClick:()=>le(!1),children:"Cancel"})]}):d.jsx("button",{className:"shop-fab",style:{color:"var(--ink4)",fontSize:11,padding:"6px 12px"},onClick:()=>le(!0),children:" New week"}),d.jsxs("button",{className:"shop-fab",onClick:o,children:[" List",u>0&&d.jsx("span",{className:"shop-count-badge",children:u})]})]})]}),d.jsxs("div",{className:"goal-strip",children:[d.jsxs("div",{className:"goal-item "+(rn?"met":"unmet"),children:[d.jsx("div",{className:"goal-dot"})," ",Vn,"/",i.fishMin," fish"]}),d.jsx("div",{className:"goal-divider"}),d.jsxs("div",{className:"goal-item "+(yn?"met":"unmet"),children:[d.jsx("div",{className:"goal-dot"})," ",vn,"/",i.vegMin," veg"]}),Gt&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"goal-divider"}),d.jsxs("div",{className:"goal-item met",style:{marginLeft:"auto"},children:[d.jsx("div",{className:"goal-dot"}),"  goals met"]})]})]}),(()=>{if(!c)return null;const $=n.filter(Ke=>Ke.recipe?.ingredients?.length).flatMap(Ke=>Ke.recipe.ingredients.map(pr=>pr.toLowerCase())),Ee=c.filter(Ke=>Ke.s==="soon"&&!$.includes(Ke.item.toLowerCase()));return Ee.length?d.jsxs("div",{className:"use-soon-alert",children:[d.jsx("div",{className:"use-soon-alert-icon",children:""}),d.jsxs("div",{className:"use-soon-alert-body",children:[d.jsx("div",{className:"use-soon-alert-title",children:"Use soon  not in this week's recipes"}),d.jsx("div",{className:"use-soon-alert-items",children:Ee.map(Ke=>Ke.item).join("  ")})]})]}):null})(),d.jsx("div",{className:"section-header",style:{cursor:"default",marginTop:4},children:d.jsxs("div",{className:"section-header-title",children:["This Week's ",d.jsx("em",{children:"Dinners"})]})}),d.jsxs("div",{className:"week-section",children:[d.jsx("div",{className:"week-row",children:Mn.map(($,Ee)=>$.recipe?d.jsx(Jd,{d:$,today:!1,onClick:()=>ye(Ee),onDetail:Ke=>Be(Ke),readyBy:i.readyBy},Ee):$.note?d.jsx(Yd,{d:$,today:!1,onClick:()=>ye(Ee)},Ee):d.jsx(Qd,{d:$,today:!1,onClick:()=>ye(Ee)},Ee))}),d.jsx("div",{className:"week-row",style:{marginTop:8},children:Wn.map(($,Ee)=>$.recipe?d.jsx(Jd,{d:$,today:!1,onClick:()=>ye(Ee+4),onDetail:Ke=>Be(Ke),readyBy:i.readyBy},Ee):$.note?d.jsx(Yd,{d:$,today:!1,onClick:()=>ye(Ee+4)},Ee):d.jsx(Qd,{d:$,today:!1,onClick:()=>ye(Ee+4)},Ee))})]}),d.jsx("div",{className:"section-header",style:{cursor:"default"},children:d.jsxs("div",{className:"section-header-title",children:["Weekend ",d.jsx("em",{children:"Batch Cooking"})]})}),d.jsx("div",{className:"batch-section",children:d.jsxs("div",{className:"batch-row",children:[A.map($=>{if(!$)return null;const Ee=$.pdfUrl||$.url||null;return d.jsxs("div",{className:"batch-recipe-card",onClick:()=>Nt($),children:[d.jsx("button",{className:"batch-card-remove",onClick:Ke=>{Ke.stopPropagation(),je($.id)},children:""}),d.jsxs("div",{className:"batch-card-body",children:[d.jsx("div",{className:"batch-card-title",children:$.title}),Ee?d.jsxs("a",{className:"batch-card-source linked",href:Ee,target:"_blank",rel:"noopener noreferrer",onClick:Ke=>Ke.stopPropagation(),children:[$.source,d.jsx("span",{className:"source-arrow",children:" "})]}):d.jsx("div",{className:"batch-card-source",children:$.source}),d.jsx("div",{className:"batch-card-meta",children:d.jsxs("span",{className:"batch-card-time",children:[$.time,"m"]})})]})]},$.id)}),d.jsxs("div",{className:"batch-add-card",onClick:()=>xe({dayIndex:-1,mode:"batch"}),children:[d.jsx("span",{className:"batch-add-card-icon",children:""}),d.jsx("span",{children:"Add batch recipe"})]})]})}),d.jsxs("div",{className:"section-header",onClick:()=>x($=>!$),children:[d.jsxs("div",{className:"section-header-title",children:["Weekend ",d.jsx("em",{children:"Prep"})]}),d.jsx("span",{className:"section-header-chevron"+(_?" open":""),children:""})]}),_&&d.jsxs("div",{className:"prep-section",children:[d.jsxs("div",{className:"prep-list",children:[M.map($=>d.jsxs("div",{className:"prep-item",style:{opacity:$.done?.45:1},children:[d.jsx("input",{type:"checkbox",checked:$.done,onChange:()=>Se($.key)}),d.jsxs("span",{className:"prep-item-text",style:{textDecoration:$.done?"line-through":"none"},children:["Thaw ",$.ing]}),d.jsxs("span",{className:"prep-recipe-tag",style:{background:"#eaf4fb",color:"#2a6a8a",borderColor:"#a8cfe0"},children:[" ",$.day]})]},$.key)),Tt.map($=>d.jsxs("div",{className:"prep-item",style:{opacity:$.done?.45:1},children:[d.jsx("input",{type:"checkbox",checked:$.done,onChange:()=>Se($.key)}),d.jsx("span",{className:"prep-item-text",style:{textDecoration:$.done?"line-through":"none"},children:$.task}),d.jsxs("span",{className:"prep-recipe-tag",children:["For ",$.day]})]},$.key)),I.map($=>d.jsxs("div",{className:"prep-item",style:{opacity:$.done?.45:1},children:[d.jsx("input",{type:"checkbox",checked:$.done,onChange:()=>Ce($.id)}),d.jsx("span",{className:"prep-item-text",style:{textDecoration:$.done?"line-through":"none"},children:$.task}),d.jsx("span",{className:"prep-recipe-tag",style:{opacity:.4},children:"custom"})]},$.id)),M.length===0&&Tt.length===0&&I.length===0&&d.jsx("div",{style:{padding:"14px 0",color:"var(--ink4)",fontSize:12,fontStyle:"italic"},children:"Prep tasks will appear here once dinners are planned."})]}),d.jsxs("div",{className:"prep-add-row",children:[d.jsx("input",{className:"prep-add-input",placeholder:"Add a prep task",value:ge,onChange:$=>ce($.target.value),onKeyDown:$=>{$.key==="Enter"&&ge.trim()&&(Ie(ge.trim()),ce(""))}}),d.jsx("button",{className:"prep-add-btn",disabled:!ge.trim(),onClick:()=>{ge.trim()&&(Ie(ge.trim()),ce(""))},children:"Add"})]})]}),d.jsxs("div",{className:"section-header",onClick:()=>E($=>!$),children:[d.jsxs("div",{className:"section-header-title",children:["Shopping ",d.jsx("em",{children:"List"})]}),d.jsx("span",{className:"section-header-chevron"+(Z?" open":""),children:""})]}),Z&&d.jsx(Vv,{week:n,staples:p,freezer:f,fridge:c,regulars:g,regChecked:v,onToggleRegChecked:Re,shopChecked:w,onToggleShopChecked:Oe,freeShop:C,onAddFreeShop:be,onToggleFreeShop:J}),Pe&&d.jsx(Nl,{recipe:Pe,onClose:()=>Be(null),onSave:$=>{Q($),Be(null)},onDelete:$=>{U($),Be(null)},customTags:b,customCategories:R}),Dt&&d.jsx(Nl,{recipe:Dt,onClose:()=>Nt(null),onSave:$=>{Q($),Nt(null)},onDelete:$=>{U($),Nt(null)},customTags:b,customCategories:R}),_e!==null&&_e.mode!=="batch"&&d.jsx(Wv,{targetDay:n[_e.dayIndex],dayIndex:_e.dayIndex,week:n,recipes:r,radar:k,onClose:Le,onSlot:kt,onRemove:tn,onAddRecipe:Ht,freezer:f,onAdjustFreezerQty:z,onSlotNote:nn,customTags:b,customCategories:R}),_e!==null&&_e.mode==="batch"&&d.jsx(qv,{recipes:r,onClose:Le,onAdd:Bn})]})}function Hv({item:i,onClose:n,onPromote:r,onPlan:o}){return d.jsx("div",{className:"sheet-overlay",onClick:n,children:d.jsxs("div",{className:"sheet",onClick:u=>u.stopPropagation(),children:[d.jsx("div",{className:"sheet-handle"}),d.jsxs("div",{className:"sheet-header",children:[d.jsx("div",{className:"sheet-title",children:d.jsx("em",{children:i.title})}),i.source&&d.jsx("div",{className:"sheet-subtitle",children:i.source})]}),d.jsxs("div",{className:"sheet-body",children:[i.url&&d.jsxs("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",className:"detail-link",children:[d.jsx("span",{className:"detail-link-icon",children:""}),d.jsxs("div",{className:"detail-link-text",children:[d.jsx("div",{className:"detail-link-label",children:"Open recipe"}),d.jsx("div",{className:"detail-link-url",children:i.url})]}),d.jsx("span",{className:"detail-link-arrow",children:""})]}),d.jsxs("div",{className:"radar-sheet-actions",style:{marginTop:i.url?16:0},children:[d.jsx("button",{className:"sheet-btn sheet-btn-primary",onClick:r,children:"Add to recipe library"}),o&&d.jsx("button",{className:"sheet-btn",style:{background:"var(--surface2)",border:"1px solid var(--border)",color:"var(--ink2)"},onClick:o,children:"Plan for this week"})]})]}),d.jsx("div",{className:"sheet-footer",children:d.jsx("button",{className:"sheet-btn sheet-btn-cancel",onClick:n,children:"Close"})})]})})}function Gv({recipes:i,onAddRecipe:n,onUpdateRecipe:r,onDeleteRecipe:o,radar:u,onAddRadar:c,onRemoveRadar:f,customTags:p=[],customCategories:g=[]}){const[v,w]=X.useState("all"),[C,k]=X.useState(null),[b,R]=X.useState(!1),[A,I]=X.useState(null),[F,q]=X.useState(!1),[D,Y]=X.useState(null),[V,Q]=X.useState(""),[U,ue]=X.useState(""),[we,je]=X.useState(""),[Ie,Ce]=X.useState({}),[Se,Re]=X.useState(!1),Oe=E=>Ce(_=>({..._,[E]:!_[E]})),be=[{k:"all",l:"All"},{k:"fish",l:" Fish"},{k:"vegetarian",l:" Veg"}],J=v==="all"?i:i.filter(E=>E.tags?.includes(v)),z=()=>{V.trim()&&(c({title:V.trim(),url:U.trim()||null,source:we.trim()||""}),Q(""),ue(""),je(""),q(!1))},Z=E=>{Y(E),I(null)};return d.jsxs("div",{className:"tab-section",children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginBottom:16},children:[d.jsxs("div",{children:[d.jsx("div",{className:"page-title",children:"Recipes"}),d.jsxs("div",{className:"page-date",children:[i.length," saved"]})]}),d.jsx("button",{className:"btn btn-primary",onClick:()=>R(!0),children:"+ Add"})]}),d.jsxs("div",{className:"radar-shelf",children:[d.jsxs("div",{className:"recipe-library-header",style:{marginTop:0,paddingTop:0,borderTop:"none",marginBottom:Se?0:6,cursor:"pointer",userSelect:"none"},onClick:()=>Re(E=>!E),children:[d.jsxs("div",{className:"recipe-library-title",children:["On the ",d.jsx("em",{children:"Radar"}),d.jsx("span",{style:{fontFamily:"'Lato',sans-serif",fontSize:10,color:"var(--ink4)",fontStyle:"normal",marginLeft:6,transition:"transform 0.2s",display:"inline-block",transform:Se?"rotate(-90deg)":"rotate(0deg)"},children:""})]}),!F&&!Se&&d.jsx("button",{style:{fontSize:11,color:"var(--ink4)",background:"none",border:"none",cursor:"pointer",padding:0,fontFamily:"inherit"},onClick:E=>{E.stopPropagation(),q(!0)},children:"+ Add"})]}),!Se&&u.length>0&&d.jsx("div",{className:"radar-list",children:u.map(E=>d.jsxs("div",{className:"radar-row",children:[E.url?d.jsx("a",{className:"radar-row-title linked",href:E.url,target:"_blank",rel:"noopener noreferrer",children:E.title}):d.jsx("span",{className:"radar-row-title",children:E.title}),d.jsx("button",{className:"radar-row-promote",onClick:()=>Z(E),title:"Add to library",children:"+ library"}),d.jsx("button",{className:"radar-row-remove",onClick:()=>f(E.id),children:""})]},E.id))}),!Se&&u.length===0&&!F&&d.jsx("div",{style:{fontSize:12,color:"var(--ink4)",fontStyle:"italic"},children:"Nothing yet  add recipes you want to try."}),!Se&&F&&d.jsxs("div",{style:{marginTop:8,display:"flex",gap:6,alignItems:"center",flexWrap:"wrap"},children:[d.jsx("input",{className:"pantry-add-input",placeholder:"Recipe name",value:V,autoFocus:!0,style:{flex:"2 1 140px"},onChange:E=>Q(E.target.value),onKeyDown:E=>E.key==="Enter"&&z()}),d.jsx("input",{className:"pantry-add-input",placeholder:"URL (optional)",value:U,style:{flex:"3 1 180px"},onChange:E=>ue(E.target.value),onKeyDown:E=>E.key==="Enter"&&z()}),d.jsx("button",{className:"pantry-add-btn",disabled:!V.trim(),onClick:z,children:"Add"}),d.jsx("button",{className:"sheet-btn sheet-btn-cancel",style:{padding:"6px 10px",fontSize:12},onClick:()=>{q(!1),Q(""),ue(""),je("")},children:"Cancel"})]})]}),d.jsxs("div",{className:"recipe-library-header",children:[d.jsxs("div",{className:"recipe-library-title",children:["Recipe ",d.jsx("em",{children:"Library"})]}),d.jsx("div",{className:"filter-row",style:{margin:0,flex:"none"},children:be.map(E=>d.jsx("button",{className:"fpill"+(v===E.k?" active":""),onClick:()=>w(E.k),children:E.l},E.k))})]}),[{key:"dinner",label:"Dinner"},{key:"breakfast",label:"Breakfast & Snacks"},{key:"sweets",label:"Sweets"},...g.map(_=>({key:_,label:_})),{key:"",label:"Uncategorized"}].map(({key:_,label:x})=>{const se=_||"uncat",le=J.filter(ce=>_===""?!ce.category||!["dinner","breakfast","sweets"].includes(ce.category):ce.category===_);if(!le.length)return null;const ge=Ie[se];return d.jsxs("div",{children:[d.jsxs("div",{className:"recipe-section-label",onClick:()=>Oe(se),children:[d.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[x,!ge&&d.jsx("span",{className:"recipe-section-count",children:le.length})]}),d.jsx("span",{style:{fontSize:9,color:"var(--ink4)",transition:"transform 0.2s",display:"inline-block",transform:ge?"rotate(-90deg)":"rotate(0deg)"},children:""})]}),!ge&&d.jsx("div",{className:"rlist",children:le.map(ce=>d.jsxs("div",{className:"rlistitem",onClick:()=>k(ce),children:[d.jsx("div",{className:"rl-title",children:ce.title}),d.jsxs("div",{className:"rl-meta",children:[ce.source,"  ",ce.time," min"]}),ce.tags?.length>0&&d.jsx("div",{className:"rl-tags",children:d.jsx(Ol,{tags:ce.tags})})]},ce.id))})]},se)}),C&&d.jsx(Nl,{recipe:C,onClose:()=>k(null),onSave:E=>{r(E),k(null)},onDelete:E=>{o(E),k(null)},customTags:p,customCategories:g}),A&&d.jsx(Hv,{item:A,onClose:()=>I(null),onPromote:()=>Z(A)}),b&&d.jsx(Gd,{onClose:()=>R(!1),onAdd:E=>n(E),customTags:p,customCategories:g}),D&&d.jsx(Gd,{prefill:{title:D.title,source:D.source||"",url:D.url||""},onClose:()=>Y(null),onAdd:E=>{n(E),f(D.id),Y(null)},customTags:p,customCategories:g})]})}function Jv({week:i,recipes:n,staples:r,onAddStaple:o,onCycleStaple:u,onRemoveStaple:c,regulars:f,onAddRegular:p,onRemoveRegular:g,fridge:v,onAddFridge:w,onCycleFridge:C,onRemoveFridge:k,freezer:b,onAddFreezer:R,onAdjustFreezerQty:A,onRemoveFreezer:I}){const[F,q]=X.useState(""),[D,Y]=X.useState(""),[V,Q]=X.useState(""),[U,ue]=X.useState(""),we=E=>g(E),je=E=>{const _=E.trim().toLowerCase();_&&!f.find(x=>x.name===_)&&p(_),Y("")},Ie=E=>C(E),Ce=E=>k(E),Se=E=>{const _=E.trim();_&&w(_,"ok"),Q("")},Re=(E,_)=>A(E,_),Oe=E=>I(E),be=E=>{const _=E.trim();_&&R(_,1),ue("")},J=E=>u(E),z=E=>{const _=E.trim().toLowerCase();_&&!r.find(x=>x.name===_)&&o(_),q("")},Z=E=>c(E);return d.jsxs("div",{className:"tab-section",children:[d.jsxs("div",{style:{marginBottom:14},children:[d.jsx("div",{className:"page-title",children:"Pantry"}),d.jsx("div",{className:"page-date",children:"Regulars  fridge  freezer  staples"})]}),d.jsx("div",{className:"pantry-section-label",children:"Weekly regulars"}),d.jsxs("div",{className:"inv-card",style:{marginBottom:10},children:[d.jsx("div",{className:"pantry-pill-row",children:f.map(E=>d.jsxs("span",{className:"pantry-pill",children:[E.name,d.jsx("button",{className:"pp-remove",onClick:_=>{_.stopPropagation(),we(E.id)},children:""})]},E.id))}),d.jsxs("div",{className:"pantry-pill-add",children:[d.jsx("input",{className:"pantry-add-input",placeholder:"Add a weekly regular",value:D,onChange:E=>Y(E.target.value),onKeyDown:E=>{E.key==="Enter"&&je(D)}}),d.jsx("button",{className:"pantry-add-btn",disabled:!D.trim(),onClick:()=>je(D),children:"Add"})]})]}),d.jsx("div",{className:"pantry-section-label",children:"Fridge"}),d.jsxs("div",{className:"inv-card",style:{marginBottom:10},children:[d.jsx("div",{className:"pantry-pill-row",children:v.map(E=>d.jsxs("span",{className:"pantry-pill fridge-"+E.s,onClick:()=>Ie(E.id),children:[E.item,d.jsx("button",{className:"pp-remove",onClick:_=>{_.stopPropagation(),Ce(E.id)},children:""})]},E.id))}),d.jsxs("div",{className:"pantry-pill-add",children:[d.jsx("input",{className:"pantry-add-input",placeholder:"Add fridge item",value:V,onChange:E=>Q(E.target.value),onKeyDown:E=>{E.key==="Enter"&&Se(V)}}),d.jsx("button",{className:"pantry-add-btn",disabled:!V.trim(),onClick:()=>Se(V),children:"Add"})]}),d.jsx("div",{style:{fontSize:10,color:"var(--ink4)",marginTop:6,fontStyle:"italic"},children:"Tap to toggle good  use soon"})]}),d.jsx("div",{className:"pantry-section-label",children:"Freezer"}),d.jsxs("div",{className:"inv-card",style:{marginBottom:10},children:[b.map(E=>d.jsxs("div",{className:"pantry-row",children:[d.jsx("span",{className:"pantry-row-name",children:E.item}),d.jsxs("div",{className:"fz-stepper",children:[d.jsx("button",{className:"fz-stepper-btn",onClick:()=>Re(E.id,-1),children:""}),d.jsx("span",{className:"fz-stepper-val",children:E.qty}),d.jsx("button",{className:"fz-stepper-btn",onClick:()=>Re(E.id,1),children:"+"}),d.jsx("span",{className:"fz-unit",children:"lb"})]}),d.jsx("button",{className:"pantry-row-remove",onClick:()=>Oe(E.id),children:""})]},E.id)),d.jsxs("div",{className:"pantry-add-row",children:[d.jsx("input",{className:"pantry-add-input",placeholder:"Add freezer item",value:U,onChange:E=>ue(E.target.value),onKeyDown:E=>{E.key==="Enter"&&be(U)}}),d.jsx("button",{className:"pantry-add-btn",disabled:!U.trim(),onClick:()=>be(U),children:"Add"})]})]}),d.jsx("div",{className:"pantry-section-label",children:"Staples"}),d.jsxs("div",{className:"inv-card",children:[d.jsx("div",{className:"pantry-pill-row",children:r.map(E=>d.jsxs("span",{className:"pantry-pill"+(E.status==="restock"?" fridge-soon":" fridge-ok"),onClick:()=>J(E.name),children:[E.name,d.jsx("button",{className:"pp-remove",onClick:_=>{_.stopPropagation(),Z(E.name)},children:""})]},E.name))}),d.jsxs("div",{className:"pantry-pill-add",children:[d.jsx("input",{className:"pantry-add-input",placeholder:"Add a staple",value:F,onChange:E=>q(E.target.value),onKeyDown:E=>{E.key==="Enter"&&z(F)}}),d.jsx("button",{className:"pantry-add-btn",disabled:!F.trim(),onClick:()=>z(F),children:"Add"})]}),d.jsx("div",{style:{fontSize:10,color:"var(--ink4)",marginTop:6,fontStyle:"italic"},children:"Tap to toggle stocked  needs restock"})]})]})}function Qv({goals:i,updateGoal:n,customTags:r,onAddCustomTag:o,onRemoveCustomTag:u,customCategories:c,onAddCustomCategory:f,onRemoveCustomCategory:p}){const[g,v]=X.useState(""),[w,C]=X.useState("");return d.jsxs("div",{className:"tab-section",children:[d.jsxs("div",{style:{marginBottom:18},children:[d.jsx("div",{className:"page-title",children:"Preferences"}),d.jsx("div",{className:"page-date",children:"Weekly goals & reminders"})]}),d.jsx("div",{style:{fontFamily:"'Playfair Display',serif",fontSize:13,fontStyle:"italic",color:"var(--ink3)",marginBottom:10},children:"Tracked automatically"}),d.jsxs("div",{className:"pref-card",style:{marginBottom:16},children:[d.jsxs("div",{className:"pref-item",children:[d.jsx("span",{className:"pi-icon",children:""}),d.jsx("span",{className:"pi-text",children:"Fish dinners per week"}),d.jsxs("div",{className:"pi-stepper",children:[d.jsx("button",{className:"pi-stepper-btn",disabled:i.fishMin<=0,onClick:()=>n("fishMin",-1),children:""}),d.jsx("div",{className:"pi-stepper-val",children:i.fishMin}),d.jsx("button",{className:"pi-stepper-btn",disabled:i.fishMin>=7,onClick:()=>n("fishMin",1),children:"+"})]})]}),d.jsxs("div",{className:"pref-item",children:[d.jsx("span",{className:"pi-icon",children:""}),d.jsx("span",{className:"pi-text",children:"Vegetarian dinners per week"}),d.jsxs("div",{className:"pi-stepper",children:[d.jsx("button",{className:"pi-stepper-btn",disabled:i.vegMin<=0,onClick:()=>n("vegMin",-1),children:""}),d.jsx("div",{className:"pi-stepper-val",children:i.vegMin}),d.jsx("button",{className:"pi-stepper-btn",disabled:i.vegMin>=7,onClick:()=>n("vegMin",1),children:"+"})]})]})]}),d.jsx("div",{style:{fontFamily:"'Playfair Display',serif",fontSize:13,fontStyle:"italic",color:"var(--ink3)",marginBottom:10},children:"Timing"}),d.jsx("div",{className:"pref-card",children:d.jsxs("div",{className:"pref-item",children:[d.jsx("span",{className:"pi-icon",children:""}),d.jsx("span",{className:"pi-text",children:"Dinner ready by"}),d.jsxs("div",{className:"pi-stepper",children:[d.jsx("button",{className:"pi-stepper-btn",onClick:()=>n("readyBy",-15),children:""}),d.jsx("div",{className:"pi-stepper-val",style:{width:42,fontSize:12},children:Fv(i.readyBy)}),d.jsx("button",{className:"pi-stepper-btn",onClick:()=>n("readyBy",15),children:"+"})]})]})}),d.jsx("div",{className:"pantry-section-label",style:{marginTop:24},children:"Tags"}),d.jsxs("div",{className:"inv-card",style:{marginBottom:12},children:[d.jsxs("div",{className:"pantry-pill-row",style:{marginBottom:r.length?8:0},children:[["fish","vegetarian"].map(k=>d.jsx("span",{className:"pantry-pill",style:{opacity:.5,cursor:"default"},children:k==="fish"?" Fish":" Veg"},k)),r.map(k=>d.jsxs("span",{className:"pantry-pill",children:[k,d.jsx("button",{className:"pp-remove",onClick:()=>u(k),children:""})]},k))]}),d.jsxs("div",{className:"pantry-pill-add",children:[d.jsx("input",{className:"pantry-add-input",placeholder:"Add a tag",value:g,onChange:k=>v(k.target.value),onKeyDown:k=>{k.key==="Enter"&&g.trim()&&!["fish","vegetarian",...r].includes(g.trim().toLowerCase())&&(o(g.trim().toLowerCase()),v(""))}}),d.jsx("button",{className:"pantry-add-btn",disabled:!g.trim(),onClick:()=>{const k=g.trim().toLowerCase();k&&!["fish","vegetarian",...r].includes(k)&&(o(k),v(""))},children:"Add"})]})]}),d.jsx("div",{className:"pantry-section-label",children:"Categories"}),d.jsxs("div",{className:"inv-card",children:[d.jsxs("div",{className:"pantry-pill-row",style:{marginBottom:c.length?8:0},children:[[["dinner","Dinner"],["breakfast","Breakfast & Snacks"],["sweets","Sweets"]].map(([k,b])=>d.jsx("span",{className:"pantry-pill",style:{opacity:.5,cursor:"default"},children:b},k)),c.map(k=>d.jsxs("span",{className:"pantry-pill",children:[k,d.jsx("button",{className:"pp-remove",onClick:()=>p(k),children:""})]},k))]}),d.jsxs("div",{className:"pantry-pill-add",children:[d.jsx("input",{className:"pantry-add-input",placeholder:"Add a category",value:w,onChange:k=>C(k.target.value),onKeyDown:k=>{const b=["dinner","breakfast","sweets"];k.key==="Enter"&&w.trim()&&!b.includes(w.trim().toLowerCase())&&!c.includes(w.trim())&&(f(w.trim()),C(""))}}),d.jsx("button",{className:"pantry-add-btn",disabled:!w.trim(),onClick:()=>{const k=["dinner","breakfast","sweets"],b=w.trim();b&&!k.includes(b.toLowerCase())&&!c.includes(b)&&(f(b),C(""))},children:"Add"})]})]})]})}const Yv=[{id:"week",icon:"",label:"Week"},{id:"recipes",icon:"",label:"Recipes"},{id:"pantry",icon:"",label:"Pantry"},{id:"prefs",icon:"",label:"Prefs"}];function Xv(){const[i,n]=X.useState(!0),[r,o]=X.useState("week"),[u,c]=X.useState({fishMin:1,vegMin:2,readyBy:"18:30"}),[f,p]=X.useState([]),[g,v]=X.useState([]),[w,C]=X.useState([]),[k,b]=X.useState([]),[R,A]=X.useState({}),[I,F]=X.useState({}),[q,D]=X.useState([]),[Y,V]=X.useState(!1),[Q,U]=X.useState([]),[ue,we]=X.useState([]),[je,Ie]=X.useState([]),[Ce,Se]=X.useState([]),[Re,Oe]=X.useState([]),[be,J]=X.useState([]),[z,Z]=X.useState([]),[E,_]=X.useState({});X.useEffect(()=>{async function O(){try{const[Ye,Kn,Qs,Hn,ns,Gn,_a,Jn,gr,vr,rs,ka,Sa,xa,an,Ys]=await Promise.all([Hg(),qd(),Vd(),tv(),sv(),lv(),dv(),mv(),yv(),_v(),xv(),Hd(),Cv(),Tv(),Ov(),Lv()]);v(Ye.map(pa)),p(Kn),J(Qs),we(Hn),U(ns),Oe(Gn),C(_a),b(Jn),c(gr),Ie(vr),Se(rs),F(ka),A(Sa),D(xa),Z(an),_(Ys)}catch(Ye){console.error("loadAll failed",Ye)}n(!1)}O();const L=oe.channel("week_plan").on("postgres_changes",{event:"*",schema:"public",table:"week_plan"},()=>{qd().then(p)}).subscribe(),H=oe.channel("batch_prep").on("postgres_changes",{event:"*",schema:"public",table:"batch_prep"},()=>{Vd().then(J)}).subscribe(),fe=oe.channel("shop_checked").on("postgres_changes",{event:"*",schema:"public",table:"shop_checked"},()=>{Hd().then(F)}).subscribe();return()=>{oe.removeChannel(L),oe.removeChannel(H),oe.removeChannel(fe)}},[]);const x=async O=>{try{const L=await Gg(O);v(H=>[...H,pa(L)])}catch(L){console.error(L)}},se=async O=>{v(L=>L.map(H=>H.id===O.id?O:H));try{await Jg(O.id,O)}catch(L){console.error(L)}},le=async O=>{v(L=>L.filter(H=>H.id!==O));try{await Qg(O)}catch(L){console.error(L)}},ge=async(O,L)=>{p(H=>H.map((fe,Ye)=>Ye===O?{...fe,recipe:L,note:null}:fe));try{await vl(lt,O,{recipeId:L.id,note:null})}catch(H){console.error(H)}},ce=async O=>{p(L=>L.map((H,fe)=>fe===O?{...H,recipe:null,note:null}:H));try{await vl(lt,O,{recipeId:null,note:null})}catch(L){console.error(L)}},_e=async(O,L)=>{p(H=>H.map((fe,Ye)=>Ye===O?{...fe,note:L.trim()||null,recipe:null}:fe));try{await vl(lt,O,{recipeId:null,note:L.trim()||null})}catch(H){console.error(H)}},xe=async()=>{p(Uv.map(O=>({day:O,recipe:null,note:null}))),J([]),A({});try{await Yg(lt),await ev(lt)}catch(O){console.error(O)}},Pe=async O=>{J(L=>[...L,O]);try{await Xg(lt,O.id)}catch(L){console.error(L)}},Be=async O=>{J(L=>L.filter(H=>H.id!==O));try{await Zg(lt,O)}catch(L){console.error(L)}},Dt=async O=>{try{const L=await nv(O);we(H=>[L,...H])}catch(L){console.error(L)}},Nt=async O=>{we(L=>L.filter(H=>H.id!==O));try{await rv(O)}catch(L){console.error(L)}},Tt=(O,L)=>c(H=>{let fe;if(O==="readyBy"){const Ye=mh(H.readyBy)+L,Kn=Math.max(960,Math.min(1260,Ye));fe={...H,readyBy:gh(Kn)}}else fe={...H,[O]:Math.max(0,Math.min(7,H[O]+L))};return wv(fe),fe}),en=async(O,L)=>{try{const H=await iv(O,L);U(fe=>[...fe,H])}catch(H){console.error(H)}},M=async O=>{let L;U(H=>H.map(fe=>fe.id===O?(L=fe.s==="ok"?"soon":"ok",{...fe,s:L}):fe));try{await av(O,{s:L})}catch(H){console.error(H)}},ye=async O=>{U(L=>L.filter(H=>H.id!==O));try{await ov(O)}catch(L){console.error(L)}},Le=async(O,L)=>{try{const H=await uv(O,L);Oe(fe=>[...fe,H])}catch(H){console.error(H)}},kt=async(O,L)=>{let H;Oe(fe=>fe.map(Ye=>Ye.id===O?(H=Math.max(0,(Ye.qty??1)+L),{...Ye,qty:H}):Ye).filter(Ye=>Ye.qty>0));try{H===0?await Kd(O):await cv(O,{qty:H})}catch(fe){console.error(fe)}},tn=async O=>{Oe(L=>L.filter(H=>H.id!==O));try{await Kd(O)}catch(L){console.error(L)}},nn=async O=>{C(L=>[...L,{name:O,status:"ok"}]);try{await hv(O)}catch(L){console.error(L)}},Ht=async O=>{let L;C(H=>H.map(fe=>fe.name===O?(L=fe.status==="ok"?"restock":"ok",{...fe,status:L}):fe));try{await fv(O,L)}catch(H){console.error(H)}},Bn=async O=>{C(L=>L.filter(H=>H.name!==O));try{await pv(O)}catch(L){console.error(L)}},Mn=async O=>{try{const L=await gv(O);b(H=>[...H,L])}catch(L){console.error(L)}},Wn=async O=>{b(L=>L.filter(H=>H.id!==O));try{await vv(O)}catch(L){console.error(L)}},qn=async O=>{Ie(L=>[...L,O]);try{await kv(O)}catch(L){console.error(L)}},Vn=async O=>{Ie(L=>L.filter(H=>H!==O));try{await Sv(O)}catch(L){console.error(L)}},vn=async O=>{Se(L=>[...L,O]);try{await jv(O)}catch(L){console.error(L)}},rn=async O=>{Se(L=>L.filter(H=>H!==O));try{await bv(O)}catch(L){console.error(L)}},yn=async O=>{const L=I[O];F(H=>L?Object.fromEntries(Object.entries(H).filter(([fe])=>fe!==O)):{...H,[O]:!0});try{await Ev(lt,O,!L)}catch(H){console.error(H)}},Gt=async O=>{const L=R[O];A(H=>L?Object.fromEntries(Object.entries(H).filter(([fe])=>fe!==O)):{...H,[O]:!0});try{await Nv(lt,O,!L)}catch(H){console.error(H)}},$=async O=>{try{const L=await Rv(O);D(H=>[...H,L])}catch(L){console.error(L)}},Ee=async O=>{let L;D(H=>H.map(fe=>fe.id===O?(L=!fe.done,{...fe,done:L}):fe));try{await Pv(O,{done:L})}catch(H){console.error(H)}},Ke=async O=>{try{const L=await Av(lt,O);Z(H=>[...H,L])}catch(L){console.error(L)}},pr=async O=>{let L;Z(H=>H.map(fe=>fe.id===O?(L=!fe.done,{...fe,done:L}):fe));try{await Iv(O,{done:L})}catch(H){console.error(H)}},wa=async O=>{const L=E[O];_(H=>L?Object.fromEntries(Object.entries(H).filter(([fe])=>fe!==O)):{...H,[O]:!0});try{await Dv(lt,O,!L)}catch(H){console.error(H)}};if(i)return d.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",fontFamily:"Playfair Display,serif",fontSize:18,color:"var(--ink3)"},children:"Loading"});const Xr=w.filter(O=>O.status==="ok").map(O=>O.name.toLowerCase()),Zr=Re.map(O=>O.item.toLowerCase()),es=Q.map(O=>O.item.toLowerCase()),ts=f.filter(O=>O.recipe?.ingredients?.length).flatMap(O=>O.recipe.ingredients).filter(O=>!Xr.includes(O.toLowerCase())&&!Zr.includes(O.toLowerCase())&&!es.includes(O.toLowerCase())),mr=w.filter(O=>O.status==="restock").length,sn=k.filter(O=>!R[O.id]).length;sn+[...new Set(ts)].filter(O=>!I["Mon:"+O]&&!I["Tue:"+O]).length+mr+q.filter(O=>!O.done).length;const wn={week:d.jsx(Kv,{goals:u,week:f,recipes:g,onOpenShop:()=>V(!0),shopCount:sn+mr,fridge:Q,freezer:Re,staples:w,regulars:k,regChecked:R,shopChecked:I,freeShop:q,radar:ue,customTags:je,customCategories:Ce,batch:be,prepTasks:z,prepChecked:E,onSlot:ge,onRemove:ce,onSlotNote:_e,onAddRecipe:x,onUpdateRecipe:se,onDeleteRecipe:le,onWeekReset:xe,onAddBatch:Pe,onRemoveBatch:Be,onAddPrepTask:Ke,onTogglePrepTask:pr,onTogglePrepChecked:wa,onToggleRegChecked:Gt,onToggleShopChecked:yn,onAddFreeShop:$,onToggleFreeShop:Ee,onAdjustFreezerQty:kt}),recipes:d.jsx(Gv,{recipes:g,onAddRecipe:x,onUpdateRecipe:se,onDeleteRecipe:le,radar:ue,onAddRadar:Dt,onRemoveRadar:Nt,customTags:je,customCategories:Ce}),pantry:d.jsx(Jv,{week:f,recipes:g,staples:w,onAddStaple:nn,onCycleStaple:Ht,onRemoveStaple:Bn,regulars:k,onAddRegular:Mn,onRemoveRegular:Wn,fridge:Q,onAddFridge:en,onCycleFridge:M,onRemoveFridge:ye,freezer:Re,onAddFreezer:Le,onAdjustFreezerQty:kt,onRemoveFreezer:tn}),prefs:d.jsx(Qv,{goals:u,updateGoal:Tt,customTags:je,onAddCustomTag:qn,onRemoveCustomTag:Vn,customCategories:Ce,onAddCustomCategory:vn,onRemoveCustomCategory:rn})};return d.jsx(d.Fragment,{children:d.jsxs("div",{className:"app",children:[d.jsx("div",{className:"content",children:wn[r]}),Y&&d.jsx(Mv,{onClose:()=>V(!1),week:f,staples:w,freezer:Re,fridge:Q,regulars:k,onAddRegular:Mn,onRemoveRegular:Wn,regChecked:R,onToggleRegChecked:Gt,shopChecked:I,onToggleShopChecked:yn,freeShop:q,onAddFreeShop:$,onToggleFreeShop:Ee}),d.jsx("nav",{className:"tabs",children:Yv.map(O=>d.jsxs("div",{className:"tab"+(r===O.id?" active":""),onClick:()=>o(O.id),children:[d.jsx("span",{className:"tab-icon",children:O.icon}),d.jsx("span",{className:"tab-label",children:O.label})]},O.id))})]})})}gp.createRoot(document.getElementById("root")).render(d.jsx(X.StrictMode,{children:d.jsx(Xv,{})}));
