@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400;1,600&family=Lato:wght@300;400;700&display=swap');

* { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg: #faf7f2;
  --surface: #fffef9;
  --surface2: #f5f0e8;
  --surface3: #ede5d4;
  --ink: #1a1208;
  --ink2: #4a3c28;
  --ink3: #8a7860;
  --ink4: #b8a890;
  --accent: #b85c38;
  --accent-pale: #fdf0e6;
  --accent-light: #e8c4a8;
  --sage: #6b7c5e;
  --sage-pale: #f0f4ec;
  --sage-light: #c4d4b8;
  --gold: #b8841e;
  --gold-pale: #fdf4e0;
  --gold-light: #e0c478;
  --border: #ddd0bc;
  --border2: #ede5d8;
}

body { font-family: 'Lato', sans-serif; background: var(--bg); color: var(--ink); min-height: 100vh; }
.app { display: flex; flex-direction: column; min-height: 100vh; max-width: 430px; margin: 0 auto; background: var(--bg); position: relative; overflow: hidden; }
.content { flex: 1; overflow-y: auto; padding-top: 80px; }

/* ── Top Tabs ── */
.tabs { position: fixed; top: 0; left: 50%; transform: translateX(-50%); width: 100%; max-width: 430px; background: var(--surface); border-bottom: 1px solid var(--border); display: flex; z-index: 100; padding: calc(6px + env(safe-area-inset-top)) 0 6px; }
.tab { flex: 1; display: flex; flex-direction: column; align-items: center; padding: 6px 4px; cursor: pointer; gap: 3px; }
.tab-icon { font-size: 19px; line-height: 1; transition: transform 0.15s; }
.tab.active .tab-icon { transform: scale(1.1); }
.tab-label { font-size: 9px; letter-spacing: 0.08em; text-transform: uppercase; color: var(--ink4); font-weight: 700; }
.tab.active .tab-label { color: var(--accent); }

/* ── Page header ── */
.page-header { padding: 20px 18px 0; margin-bottom: 14px; display: flex; justify-content: space-between; align-items: flex-end; }
.page-title { font-family: 'Playfair Display', serif; font-size: 28px; font-weight: 400; color: var(--ink); line-height: 1; }
.page-title em { font-style: italic; color: var(--accent); }
.page-date { font-size: 10.5px; color: var(--ink3); margin-top: 4px; letter-spacing: 0.06em; text-transform: uppercase; }

/* ── Goal strip ── */
.goal-strip { margin: 0 18px 14px; padding: 8px 14px; background: var(--surface2); border: 1px solid var(--border2); border-radius: 8px; display: flex; align-items: center; gap: 14px; flex-wrap: wrap; }
.use-soon-alert { margin: 0 18px 12px; padding: 9px 13px; background: #fdf4e0; border: 1px solid var(--gold-light); border-radius: 8px; display: flex; gap: 8px; align-items: flex-start; }
.use-soon-alert-icon { font-size: 14px; flex-shrink: 0; margin-top: 1px; }
.use-soon-alert-body { flex: 1; }
.use-soon-alert-title { font-size: 11px; font-weight: 700; color: var(--gold); margin-bottom: 2px; letter-spacing: 0.02em; }
.use-soon-alert-items { font-size: 11.5px; color: var(--ink2); line-height: 1.5; }
.goal-item { display: flex; align-items: center; gap: 5px; font-size: 11.5px; color: var(--ink3); }
.goal-item.met { color: var(--sage); }
.goal-item.unmet { color: var(--ink4); }
.goal-dot { width: 6px; height: 6px; border-radius: 50%; background: var(--sage-light); }
.goal-item.met .goal-dot { background: var(--sage); }
.goal-divider { width: 1px; height: 12px; background: var(--border); }

/* ── Week scroll (horizontal day columns) ── */
.week-scroll-wrapper { position: relative; margin-bottom: 16px; }
.week-scroll {
  display: flex; gap: 10px; overflow-x: auto; scroll-snap-type: x mandatory;
  padding: 0 18px 8px; -webkit-overflow-scrolling: touch;
  scrollbar-width: thin; scrollbar-color: var(--border) transparent;
}
.week-scroll::-webkit-scrollbar { height: 4px; }
.week-scroll::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }
.week-scroll-fade {
  position: absolute; top: 0; right: 0; bottom: 8px; width: 32px;
  background: linear-gradient(to right, transparent, var(--bg)); pointer-events: none;
}

.day-col { flex: 0 0 140px; scroll-snap-align: start; display: flex; flex-direction: column; gap: 5px; }
.day-col-header { display: flex; align-items: center; gap: 6px; padding: 0 2px 4px; }
.day-col-name { font-size: 9px; letter-spacing: 0.12em; text-transform: uppercase; color: var(--ink4); font-weight: 700; }
.day-col-num { font-family: 'Playfair Display', serif; font-size: 16px; color: var(--ink3); line-height: 1; }
.day-col-header.today .day-col-name { color: var(--accent); }
.day-col-header.today .day-col-num { color: var(--accent); }

/* Empty day placeholder */
.day-empty-card {
  border: 1px dashed var(--border); border-radius: 8px; height: 80px;
  display: flex; align-items: center; justify-content: center;
  cursor: pointer; color: var(--ink4); font-size: 11px; font-style: italic;
  background: transparent; transition: border-color 0.15s;
}
.day-empty-card:hover { border-color: var(--accent-light); color: var(--ink3); }

/* "+" add card at bottom of day column */
.day-add-card {
  border: 1px dashed var(--border); border-radius: 8px; height: 44px;
  display: flex; align-items: center; justify-content: center;
  cursor: pointer; color: var(--ink4); font-size: 16px;
  background: transparent; transition: border-color 0.15s;
}
.day-add-card:hover { border-color: var(--accent-light); color: var(--accent); }

/* ── Item card (recipe / try-soon / note) ── */
.item-card {
  position: relative; border-radius: 10px; overflow: hidden;
  background: var(--surface); border: 1px solid var(--border2);
  transition: box-shadow 0.15s, border-color 0.15s;
}
.item-card:hover { box-shadow: 0 3px 14px rgba(0,0,0,0.07); border-color: var(--border); }
.item-card.today { border-color: var(--accent-light); }
.item-card.today::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; background: var(--accent); z-index: 1; }
.item-card-inner { cursor: pointer; transition: transform 0.2s ease; }

/* Thumbnail */
.item-card-thumb { width: 100%; height: 60px; object-fit: cover; display: block; }
.item-card-thumb-placeholder {
  width: 100%; height: 60px; display: flex; align-items: center; justify-content: center;
  background: var(--surface2); font-size: 22px; color: var(--ink4);
}
.item-card-radar .item-card-thumb-placeholder { background: #f0f5f0; color: var(--sage); }

/* Card text */
.item-card-title {
  font-size: 11.5px; color: var(--ink2); line-height: 1.35; font-weight: 700;
  padding: 6px 8px 0; display: -webkit-box; -webkit-line-clamp: 2;
  -webkit-box-orient: vertical; overflow: hidden;
}
.item-card-radar .item-card-title { color: var(--sage); }
.item-card-radar-label { font-size: 9px; color: var(--sage); padding: 1px 8px 0; font-style: italic; }
.item-card-meta { font-size: 10px; color: var(--ink4); padding: 3px 8px 8px; }

/* Try Soon card tint */
.item-card-radar { border-color: #d4e5d4; background: #f6faf6; }

/* Note card */
.item-card-note { border-style: dashed; min-height: 44px; }
.item-note-text { font-size: 12px; color: var(--ink3); line-height: 1.45; font-style: italic; padding: 10px; }

/* Hover remove button (desktop) */
.item-card-remove-hover {
  position: absolute; top: 4px; right: 4px; width: 22px; height: 22px;
  border-radius: 50%; border: 1px solid var(--border); background: var(--surface);
  color: var(--ink4); font-size: 14px; display: flex; align-items: center; justify-content: center;
  cursor: pointer; opacity: 0; transition: opacity 0.15s; z-index: 3;
}
.item-card:hover .item-card-remove-hover { opacity: 1; }
.item-card-remove-hover:hover { background: var(--accent); color: #fff; border-color: var(--accent); }
@media (hover: none) { .item-card-remove-hover { display: none; } }

/* Swipe remove (mobile) */
.item-card-remove-swipe {
  position: absolute; top: 0; right: 0; bottom: 0; width: 60px;
  background: var(--accent); color: #fff; display: flex; align-items: center;
  justify-content: center; font-size: 11px; font-weight: 700;
  transform: translateX(100%); transition: transform 0.2s ease;
}
.item-card.swiped .item-card-remove-swipe { transform: translateX(0); }
.item-card.swiped .item-card-inner { transform: translateX(-60px); }

/* Drag ghost (touch) */
.drag-ghost {
  position: fixed; z-index: 999; pointer-events: none;
  opacity: 0.9; transform: rotate(2deg);
}
.drag-ghost-inner {
  background: var(--surface); border: 2px solid var(--accent);
  border-radius: 10px; padding: 8px 10px;
  font-size: 11.5px; font-weight: 700; color: var(--ink2);
  box-shadow: 0 8px 24px rgba(0,0,0,0.15);
  max-width: 120px; overflow: hidden; text-overflow: ellipsis;
  white-space: nowrap;
}

/* Drop target highlight */
.day-col.drop-target {
  background: var(--accent-pale);
  border-radius: 10px;
  outline: 2px dashed var(--accent);
  outline-offset: -2px;
}

/* Source card while dragging */
.item-card.dragging { opacity: 0.3; }

/* ── Pull-to-refresh ── */
.pull-indicator {
  display: flex; align-items: center; justify-content: center;
  height: 36px; width: 100%;
  pointer-events: none;
  transition: transform 0.2s ease;
}
.pull-spinner {
  font-size: 22px; color: var(--accent); display: inline-block;
  transition: transform 0.1s linear;
}
.pull-spinner.spinning {
  animation: ptr-spin 0.7s linear infinite;
}
@keyframes ptr-spin { to { transform: rotate(360deg); } }


/* ── Section divider ── */
.section-header { display: flex; align-items: baseline; justify-content: space-between; padding: 0 18px; margin: 22px 0 12px; cursor: pointer; user-select: none; }
.section-header-title { font-family: 'Playfair Display', serif; font-size: 20px; font-weight: 400; color: var(--ink); display: flex; align-items: center; gap: 8px; }
.section-header-title em { font-style: italic; color: var(--accent); }
.section-header-chevron { font-family: 'Lato', sans-serif; font-size: 10px; color: var(--ink4); transition: transform 0.2s; display: inline-block; }
.section-header-chevron.open { transform: rotate(180deg); }
/* inline shopping list on week tab */
.week-shop-section { padding: 0 0 4px; }
.week-shop-row input[type=checkbox] { width: 14px; height: 14px; accent-color: var(--accent); flex-shrink: 0; margin: 0; }
.week-shop-row { display: flex; align-items: center; gap: 6px; padding: 3px 0; cursor: pointer; position: relative; }
.week-shop-row.done { opacity: 0.4; text-decoration: line-through; }
.week-shop-row.filtered { opacity: 0.45; font-style: italic; cursor: pointer; padding-left: 4px; }
.week-shop-row-text { font-size: 12px; color: var(--ink2); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; line-height: 1.2; }
.week-shop-row-source { font-size: 9px; color: var(--ink4); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; line-height: 1.2; }
.week-shop-row:hover .shop-item-remove { opacity: 1; }
.week-shop-row.duplicate-item { background: var(--gold-pale); border-left: 2px solid var(--gold-light); padding-left: 6px; }
.pill-refilter { background: none; border: none; padding: 0 0 0 4px; margin: 0; font-size: 11px; color: var(--ink4); cursor: pointer; opacity: 0.6; line-height: 1; }
.pill-refilter:hover { opacity: 1; }
.pill-remove { background: none; border: none; padding: 0 0 0 4px; margin: 0; font-size: 13px; color: var(--ink4); cursor: pointer; opacity: 0; line-height: 1; transition: opacity 0.12s; }
.shop-pill:hover .pill-remove { opacity: 0.6; }
.pill-remove:hover { opacity: 1; color: #c0392b; }
@media (hover: none) { .pill-remove { opacity: 0.4; } }
.shop-item-remove { background: none; border: none; cursor: pointer; color: var(--ink4); font-size: 15px; line-height: 1; padding: 0 0 0 4px; flex-shrink: 0; opacity: 0; transition: opacity 0.12s; }
.shop-col-item:hover .shop-item-remove { opacity: 1; }
.shop-item-remove:hover { color: #c0392b; }
@media (hover: none) { .shop-item-remove { opacity: 0.4; } }
.filtered-section { margin-top: 6px; }
.filtered-summary { font-size: 11px; color: var(--ink4); cursor: pointer; user-select: none; }
.filtered-note { font-size: 10px; color: var(--ink4); font-style: italic; margin: 4px 0 6px; }
.dup-popover { position: absolute; background: var(--surface); border: 1px solid var(--gold-light); border-radius: 8px; padding: 6px 10px; font-size: 11px; color: var(--ink2); box-shadow: 0 2px 8px rgba(0,0,0,0.10); z-index: 100; white-space: nowrap; top: 100%; left: 0; margin-top: 4px; }
.shop-col-item.duplicate-item { background: var(--gold-pale); border-left: 2px solid var(--gold-light); }
.week-shop-empty { font-size: 12px; color: var(--ink4); font-style: italic; padding: 6px 0 10px; }
.shop-edit-input { font-family: 'Lato', sans-serif; font-size: 12.5px; color: var(--ink); border: 1px solid var(--accent); border-radius: 4px; padding: 2px 6px; width: 100%; box-sizing: border-box; outline: none; background: var(--surface); }
.shop-col-item .shop-edit-input { font-size: 13px; }

/* ── Batch cards ── */
.batch-section { padding: 0 18px; margin-bottom: 4px; }
.batch-row { display: grid; grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: 10px; }
.batch-recipe-card { background: var(--surface); border: 1px solid var(--border2); border-radius: 10px; padding: 10px; min-height: 116px; min-width: 0; display: flex; flex-direction: column; cursor: pointer; transition: box-shadow 0.15s, border-color 0.15s; position: relative; overflow: hidden; }
.batch-recipe-card:hover { box-shadow: 0 3px 14px rgba(0,0,0,0.07); border-color: var(--border); }
.batch-card-body { flex: 1; display: flex; flex-direction: column; gap: 3px; }
.batch-card-title { font-size: 11.5px; color: var(--ink2); line-height: 1.35; font-weight: 700; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
.batch-card-source { font-size: 9.5px; color: var(--ink4); font-style: italic; text-decoration: none; display: flex; align-items: center; gap: 3px; width: fit-content; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.batch-card-source.linked:hover { color: var(--ink2); }
.batch-card-source.linked:hover .source-arrow { opacity: 1; }
.source-arrow { opacity: 0; transition: opacity 0.15s; font-style: normal; }
.batch-card-meta { display: flex; align-items: center; gap: 4px; margin-top: auto; padding-top: 5px; }
.batch-card-time { font-size: 10px; color: var(--ink4); }
.batch-card-remove { position: absolute; top: 6px; right: 6px; width: 22px; height: 22px; border-radius: 5px; border: 1px solid var(--border); background: var(--surface2); color: var(--ink4); font-size: 12px; display: flex; align-items: center; justify-content: center; cursor: pointer; opacity: 0; transition: opacity 0.15s; z-index: 2; }
.batch-recipe-card:hover .batch-card-remove { opacity: 1; }
.batch-card-remove:hover { background: #fdecea; color: #c0392b; border-color: #f0b8b0; }
.batch-add-card { background: transparent; border: 1.5px dashed var(--border); border-radius: 10px; min-height: 116px; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 6px; cursor: pointer; transition: background 0.15s, border-color 0.15s; color: var(--ink4); font-size: 11px; font-weight: 700; letter-spacing: 0.06em; text-align: center; padding: 12px; }
.batch-add-card:hover { background: var(--surface2); border-color: var(--ink4); }
.batch-add-card-icon { font-size: 22px; opacity: 0.6; }

/* ── Radar shelf ── */
.radar-shelf { padding: 0; margin-bottom: 16px; }
.radar-list { display: flex; flex-direction: column; }
.radar-row { display: flex; align-items: center; gap: 8px; padding: 5px 0; border-bottom: 1px solid var(--border2); }
.radar-row:last-child { border-bottom: none; }
.radar-row-title { flex: 1; min-width: 0; font-size: 12px; color: var(--ink2); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; text-decoration: none; }
.radar-row-title.linked:hover { color: var(--ink); text-decoration: underline; }
.radar-row-promote { font-size: 10px; color: var(--ink4); background: none; border: none; cursor: pointer; padding: 2px 4px; flex-shrink: 0; opacity: 0; transition: opacity 0.12s; }
.radar-row:hover .radar-row-promote { opacity: 1; }
.radar-row-promote:hover { color: var(--accent); }
.radar-row-remove { font-size: 13px; color: var(--ink4); background: none; border: none; cursor: pointer; padding: 2px 4px; flex-shrink: 0; opacity: 0; transition: opacity 0.12s; line-height: 1; }
.radar-row:hover .radar-row-remove { opacity: 1; }
.radar-row-remove:hover { color: #c0392b; }
/* ── Radar interleaved in library ── */
.radar-interleave { display: flex; flex-direction: column; margin-top: 8px; }
.radar-interleave-header { font-family: 'Lato', sans-serif; font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; color: var(--sage); margin-bottom: 2px; }
.radar-interleave-row { display: flex; align-items: center; gap: 8px; padding: 7px 2px; border-bottom: 1px solid var(--border2); cursor: pointer; transition: background 0.1s; }
.radar-interleave-row:last-child { border-bottom: none; }
.radar-interleave-row:hover { background: var(--surface2); }
.radar-interleave-icon { font-size: 12px; color: var(--sage); flex-shrink: 0; }
.radar-interleave-title { flex: 1; min-width: 0; font-size: 12px; color: var(--sage); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.radar-interleave-source { font-size: 11px; color: var(--ink4); font-style: italic; flex-shrink: 0; white-space: nowrap; }

/* ── Radar detail sheet ── */
.radar-sheet-actions { display: flex; flex-direction: column; gap: 8px; margin-top: 4px; }

/* ── Dinner prep ── */
.prep-section { padding: 0 18px 20px; }
.prep-list { display: flex; flex-direction: column; }
.prep-item { display: flex; align-items: flex-start; gap: 10px; padding: 10px 0; border-bottom: 1px solid var(--border2); font-size: 12.5px; color: var(--ink2); line-height: 1.45; }
.prep-item:last-child { border-bottom: none; }
.prep-item input[type=checkbox] { accent-color: var(--accent); margin-top: 2px; flex-shrink: 0; }
.prep-item-text { flex: 1; }
.prep-recipe-tag { font-size: 10px; color: var(--ink4); font-style: italic; flex-shrink: 0; padding-left: 8px; }
.prep-add-row { display: flex; gap: 8px; margin-top: 10px; align-items: center; }
.prep-add-input { flex: 1; padding: 8px 12px; border: 1px solid var(--border); border-radius: 8px; font-family: 'Lato', sans-serif; font-size: 13px; background: var(--surface2); color: var(--ink); outline: none; }
.prep-add-input:focus { border-color: var(--accent-light); background: var(--surface); }
.prep-add-input::placeholder { color: var(--ink4); }
.prep-add-btn { padding: 8px 16px; border-radius: 8px; border: none; background: var(--surface3); color: var(--ink2); font-family: 'Lato', sans-serif; font-size: 12px; font-weight: 700; cursor: pointer; transition: all 0.15s; flex-shrink: 0; letter-spacing: 0.04em; }
.prep-add-btn:hover:not(:disabled) { background: var(--accent); color: #fff; }
.prep-add-btn:disabled { opacity: 0.35; cursor: default; }

/* ── Buttons ── */
.btn { display: inline-flex; align-items: center; gap: 5px; padding: 8px 16px; border-radius: 16px; border: none; font-family: 'Lato', sans-serif; font-size: 12px; font-weight: 700; letter-spacing: 0.04em; cursor: pointer; transition: all 0.15s; }
.btn-primary { background: var(--accent); color: #fff; }
.btn-primary:hover { background: #a84e2c; }

/* ── Bottom sheet modal ── */
.sheet-overlay {
  position: fixed; inset: 0; background: rgba(26,18,8,0.45);
  z-index: 200; display: flex; align-items: flex-end;
  justify-content: center;
  animation: fadeIn 0.18s ease;
}
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
.sheet {
  width: 100%; max-width: 430px;
  background: var(--surface);
  border-radius: 20px 20px 0 0;
  padding-bottom: calc(16px + env(safe-area-inset-bottom));
  animation: slideUp 0.22s cubic-bezier(0.32,0.72,0,1);
  max-height: 88vh;
  display: flex; flex-direction: column;
  overflow: hidden;
}
@keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
.sheet-handle { width: 36px; height: 4px; border-radius: 2px; background: var(--border); margin: 10px auto 0; flex-shrink: 0; }
.sheet-header { padding: 14px 20px 12px; border-bottom: 1px solid var(--border2); flex-shrink: 0; }
.sheet-title { font-family: 'Playfair Display', serif; font-size: 19px; font-weight: 400; color: var(--ink); }
.sheet-title em { font-style: italic; color: var(--accent); }
.sheet-subtitle { font-size: 11px; color: var(--ink3); margin-top: 3px; letter-spacing: 0.04em; }

/* Mode toggle inside sheet */
.sheet-mode-toggle { display: flex; margin: 10px 20px 0; background: var(--surface2); border-radius: 8px; padding: 2px; border: 1px solid var(--border2); flex-shrink: 0; }
.sheet-mode-btn { flex: 1; padding: 6px 4px; border-radius: 6px; border: none; background: transparent; font-family: 'Lato', sans-serif; font-size: 11px; font-weight: 700; color: var(--ink3); cursor: pointer; transition: all 0.15s; letter-spacing: 0.02em; }
.sheet-mode-btn.active { background: var(--surface); color: var(--ink); box-shadow: 0 1px 4px rgba(0,0,0,0.08); }

.sheet-body { flex: 1; overflow-y: auto; padding: 14px 20px 0; }

/* Pick-from-recipes list */
.pick-search { width: 100%; padding: 7px 11px; border: 1px solid var(--border); border-radius: 6px; font-family: 'Lato', sans-serif; font-size: 12px; background: var(--surface2); color: var(--ink); margin-bottom: 8px; outline: none; }
.pick-search:focus { border-color: var(--accent-light); background: var(--surface); }
.pick-recipe-item { display: flex; align-items: center; gap: 8px; padding: 6px 0; border-bottom: 1px solid var(--border2); cursor: pointer; transition: background 0.1s; }
.pick-recipe-item:last-child { border-bottom: none; }
.pick-recipe-item:hover .pick-recipe-title { color: var(--accent); }
.pick-thumb { width: 28px; height: 28px; border-radius: 6px; background: var(--surface2); display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: 700; color: var(--ink3); flex-shrink: 0; letter-spacing: 0; }
.pick-thumb-radar { background: var(--accent-pale); color: var(--accent); font-size: 10px; }
.pick-recipe-title { font-family: 'Lato', sans-serif; font-size: 13px; font-weight: 600; color: var(--ink); line-height: 1.2; }
.pick-recipe-meta { font-size: 10px; color: var(--ink4); margin-top: 1px; font-style: italic; line-height: 1.2; }
.pick-badge-radar { font-style: normal; font-weight: 700; font-size: 9px; text-transform: uppercase; letter-spacing: 0.04em; color: var(--sage); }
.pick-tags { display: flex; gap: 3px; margin-top: 3px; flex-wrap: wrap; }

/* Current recipe on planned days */
.sheet-current { background: var(--accent-pale); border: 1px solid var(--accent-light); border-radius: 10px; padding: 12px 14px; margin-bottom: 14px; display: flex; align-items: center; justify-content: space-between; gap: 8px; }
.sheet-current-label { font-size: 10px; color: var(--accent); text-transform: uppercase; letter-spacing: 0.1em; font-weight: 700; margin-bottom: 3px; }
.sheet-current-title { font-family: 'Playfair Display', serif; font-size: 15px; color: var(--ink); }
.sheet-remove-btn { font-size: 11px; color: var(--ink4); cursor: pointer; font-weight: 700; flex-shrink: 0; padding: 4px 8px; border: 1px solid var(--border); border-radius: 6px; background: var(--surface); transition: color 0.15s; }
.sheet-remove-btn:hover { color: #c0392b; border-color: #f0b8b0; background: #fdecea; }

/* Add new form */
.form-field { margin-bottom: 14px; }
.form-label { font-size: 10.5px; letter-spacing: 0.08em; text-transform: uppercase; color: var(--ink3); font-weight: 700; margin-bottom: 5px; display: block; }
.form-input { width: 100%; padding: 9px 13px; border: 1px solid var(--border); border-radius: 8px; font-family: 'Lato', sans-serif; font-size: 13px; background: var(--surface2); color: var(--ink); outline: none; }
.form-input:focus { border-color: var(--accent-light); background: var(--surface); }
.form-row { display: flex; gap: 10px; }
.form-row .form-field { flex: 1; }
.tag-toggle-row { display: flex; gap: 6px; flex-wrap: wrap; }
.tag-toggle { padding: 5px 12px; border-radius: 16px; border: 1px solid var(--border); background: var(--surface2); font-size: 11.5px; font-family: 'Lato', sans-serif; font-weight: 700; color: var(--ink3); cursor: pointer; transition: all 0.15s; }
.tag-toggle.on { background: var(--ink); color: var(--bg); border-color: var(--ink); }

.sheet-footer { padding: 12px 20px 0; border-top: 1px solid var(--border2); flex-shrink: 0; display: flex; gap: 10px; }
.sheet-btn { flex: 1; padding: 11px; border-radius: 10px; border: none; font-family: 'Lato', sans-serif; font-size: 13px; font-weight: 700; cursor: pointer; transition: all 0.15s; }
.sheet-btn-primary { background: var(--accent); color: #fff; }
.sheet-btn-primary:hover { background: #a84e2c; }
.sheet-btn-primary:disabled { opacity: 0.4; cursor: default; }
.sheet-btn-cancel { background: var(--surface2); color: var(--ink3); }
.sheet-btn-cancel:hover { background: var(--surface3); color: var(--ink2); }

/* ── Shopping sheet ── */
.shop-sheet-group-label { font-size: 10px; letter-spacing: 0.1em; text-transform: uppercase; color: var(--ink4); font-weight: 700; padding: 14px 20px 6px; flex-shrink: 0; }
.shop-sheet-group-label:first-child { padding-top: 6px; }
.shop-section-header { font-size: 9px; letter-spacing: 0.08em; text-transform: uppercase; color: var(--ink4); font-weight: 700; padding: 10px 0 3px; margin-bottom: 0; }
.sheet-body .shop-section-header { padding-left: 20px; padding-right: 20px; }
.shop-col-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 0; }
.shop-col-item { display: flex; align-items: center; gap: 8px; padding: 8px 12px; border-bottom: 1px solid var(--border2); font-size: 13px; color: var(--ink2); }
.shop-col-item:nth-child(odd) { border-right: 1px solid var(--border2); }
.shop-col-item input[type=checkbox] { accent-color: var(--accent); flex-shrink: 0; }
.shop-col-item.done-item { opacity: 0.4; }
.shop-col-text { flex: 1; min-width: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.shop-col-source { font-size: 9px; color: var(--ink4); font-style: italic; }
.shop-count-badge { display: inline-flex; align-items: center; justify-content: center; background: var(--accent); color: #fff; border-radius: 10px; font-size: 10px; font-weight: 700; padding: 1px 6px; margin-left: 5px; }
.shop-fab { display: flex; align-items: center; gap: 6px; padding: 7px 14px; border-radius: 20px; border: none; background: var(--surface); border: 1px solid var(--border); font-family: 'Lato', sans-serif; font-size: 12px; font-weight: 700; color: var(--ink2); cursor: pointer; transition: all 0.15s; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
.shop-fab:hover { background: var(--surface2); }

/* ── Freezer deduct prompt ── */
.deduct-prompt { padding: 18px 20px; display: flex; flex-direction: column; gap: 14px; }
.deduct-title { font-family: 'Playfair Display', serif; font-size: 16px; color: var(--ink); }
.deduct-subtitle { font-size: 11px; color: var(--ink4); margin-top: 2px; }
.deduct-row { display: flex; align-items: center; gap: 10px; padding: 10px 12px; background: var(--surface2); border: 1px solid var(--border2); border-radius: 8px; }
.deduct-row-name { flex: 1; font-size: 13px; color: var(--ink2); }
.deduct-row-current { font-size: 10.5px; color: var(--ink4); }

/* ── Radar review pills ── */
.radar-review-pill { display: inline-flex; align-items: center; padding: 5px 12px; border-radius: 14px; font-size: 13px; color: var(--ink2); background: var(--surface2); border: 1px solid var(--border2); cursor: pointer; transition: all 0.15s; user-select: none; }
.radar-review-pill:hover { border-color: var(--ink4); }
.radar-review-pill.removed { text-decoration: line-through; opacity: 0.4; background: transparent; border-style: dashed; }

/* ── Day card radar loading ── */
.day-card-loading { position: absolute; top: 4px; right: 4px; width: 14px; height: 14px; border: 2px solid var(--border2); border-top-color: var(--accent); border-radius: 50%; animation: spin 0.6s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }

/* ── Recipe detail view (full-screen) ── */
@keyframes detail-slide-in { from { opacity: 0; transform: translateX(40px); } to { opacity: 1; transform: translateX(0); } }
.recipe-detail-view { display: flex; flex-direction: column; height: 100%; background: var(--surface); animation: detail-slide-in 0.25s ease-out; }
.detail-topbar { display: flex; align-items: center; gap: 12px; padding: 12px 18px; border-bottom: 1px solid var(--border2); flex-shrink: 0; }
.detail-back-btn { background: none; border: none; font-family: 'Lato', sans-serif; font-size: 14px; font-weight: 700; color: var(--accent); cursor: pointer; padding: 4px 0; }
.detail-scroll { flex: 1; overflow-y: auto; -webkit-overflow-scrolling: touch; }
.detail-hero-img { width: 100%; max-height: 280px; object-fit: cover; display: block; }
.detail-hero { padding: 22px 20px 16px; }
.detail-title { font-family: 'Playfair Display', serif; font-size: 26px; font-weight: 400; color: var(--ink); line-height: 1.2; margin-bottom: 4px; }
.detail-source { font-size: 13px; color: var(--ink3); font-style: italic; }
.detail-meta-row { display: flex; gap: 10px; margin-top: 12px; flex-wrap: wrap; }
.detail-meta-chip { display: flex; align-items: center; gap: 5px; padding: 5px 12px; border-radius: 6px; font-size: 13px; font-weight: 700; background: var(--surface2); color: var(--ink3); border: 1px solid var(--border2); }
.detail-body { padding: 16px 20px; display: flex; flex-direction: column; gap: 18px; }
.detail-section-label { font-size: 10px; letter-spacing: 0.1em; text-transform: uppercase; color: var(--ink4); font-weight: 700; margin-bottom: 8px; }
.detail-prep-note { font-size: 14px; color: var(--ink2); line-height: 1.5; padding: 10px 12px; background: var(--accent-pale); border: 1px solid var(--accent-light); border-radius: 8px; }
.detail-ingredient-chip { padding: 4px 12px; border-radius: 14px; background: var(--surface2); border: 1px solid var(--border2); font-size: 15px; color: var(--ink2); }
.detail-link { display: flex; align-items: center; gap: 10px; padding: 11px 14px; background: var(--surface2); border: 1px solid var(--border2); border-radius: 8px; text-decoration: none; color: var(--ink2); transition: background 0.15s; cursor: pointer; }
.detail-link:hover { background: var(--surface3); }
.detail-link-icon { font-size: 18px; flex-shrink: 0; }
.detail-link-text { flex: 1; min-width: 0; }
.detail-link-label { font-size: 13px; font-weight: 700; color: var(--ink2); }
.detail-link-url { font-size: 11px; color: var(--ink4); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-top: 1px; }
.detail-link-arrow { color: var(--ink4); font-size: 18px; flex-shrink: 0; }
.detail-pdf-placeholder { display: flex; align-items: center; gap: 10px; padding: 11px 14px; background: var(--surface2); border: 1.5px dashed var(--border); border-radius: 8px; color: var(--ink4); font-size: 12px; }
.detail-footer { padding: 12px 20px; border-top: 1px solid var(--border2); flex-shrink: 0; display: flex; gap: 8px; }
.detail-delete-btn { padding: 10px 16px; border-radius: 10px; border: 1px solid var(--border); background: transparent; font-family: 'Lato', sans-serif; font-size: 12px; font-weight: 700; color: var(--ink4); cursor: pointer; transition: all 0.15s; }
.detail-delete-btn:hover { background: #fdecea; color: #c0392b; border-color: #f0b8b0; }
/* Overlay panel for week/batch detail */
.sheet-overlay:has(.detail-overlay-panel) { align-items: stretch; }
.detail-overlay-panel { width: 100%; max-width: 430px; margin: 0 auto; background: var(--surface); }

/* Fullscreen detail (week plan context) */
.detail-fullscreen {
  position: fixed; inset: 0; z-index: 200;
  background: var(--surface);
  display: flex; flex-direction: column;
  animation: fadeIn 0.18s ease;
}
@media (min-width: 768px) {
  .detail-fullscreen { left: 200px; }
}
@media (min-width: 1400px) {
  .detail-fullscreen { left: 220px; }
}

/* ── Recipes tab ── */
.tab-section { padding: 18px; }
.view-toggle { display: flex; background: var(--surface2); border-radius: 8px; padding: 3px; margin-bottom: 14px; border: 1px solid var(--border2); }
.vtbtn { flex: 1; padding: 6px; border-radius: 6px; border: none; background: transparent; font-size: 11px; font-weight: 700; cursor: pointer; color: var(--ink3); font-family: 'Lato', sans-serif; letter-spacing: 0.06em; text-transform: uppercase; display: flex; align-items: center; justify-content: center; gap: 4px; transition: all 0.15s; }
.vtbtn.active { background: var(--surface); color: var(--ink); box-shadow: 0 1px 4px rgba(0,0,0,0.08); }
.filter-row { display: flex; gap: 6px; overflow-x: auto; padding-bottom: 2px; margin-bottom: 0; }
.fpill { flex-shrink: 0; padding: 5px 13px; border-radius: 16px; font-size: 11.5px; font-weight: 700; cursor: pointer; border: 1px solid var(--border); background: var(--surface); color: var(--ink3); white-space: nowrap; font-family: 'Lato', sans-serif; transition: all 0.15s; }
.fpill.active { background: var(--ink); color: var(--bg); border-color: var(--ink); }
.recipe-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.rgcard { background: var(--surface); border: 1px solid var(--border2); border-radius: 10px; overflow: hidden; cursor: pointer; transition: box-shadow 0.15s, transform 0.15s; }
.rgcard:hover { box-shadow: 0 4px 16px rgba(0,0,0,0.08); transform: translateY(-1px); }
.rgthumb { height: 6px; background: linear-gradient(to right, var(--accent-light), var(--border2)); }
.rgbody { padding: 10px 11px; }
.rgtitle { font-family: 'Playfair Display', serif; font-size: 14px; font-weight: 400; line-height: 1.35; margin-bottom: 3px; color: var(--ink); }
.rgsource { font-size: 10px; color: var(--ink4); font-style: italic; }
.rgtags { display: flex; gap: 4px; margin-top: 6px; flex-wrap: wrap; }
.rlist { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 180px)); gap: 12px; }
.rlistitem { display: flex; flex-direction: column; padding: 7px 0; border-bottom: 1px solid var(--border2); cursor: pointer; min-width: 0; }
.rlistitem:last-child { border-bottom: none; }
.rl-body { flex: 1; min-width: 0; }
.rl-title { font-size: 12px; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; color: var(--ink2); }
.rl-meta { font-size: 10px; color: var(--ink4); margin-top: 1px; font-style: italic; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.rl-tags { display: flex; gap: 3px; margin-top: 3px; flex-wrap: wrap; }
.tag { font-size: 10px; padding: 2px 7px; border-radius: 3px; font-weight: 700; letter-spacing: 0.04em; }
.tag-keeper { background: var(--accent-pale); color: var(--accent); border: 1px solid var(--accent-light); }
.tag-someday { background: var(--sage-pale); color: var(--sage); border: 1px solid var(--sage-light); }
.tag-veg { background: #f0f8ee; color: #4a7a46; border: 1px solid #b8d4b6; }
.tag-fish { background: #eaf4fb; color: #2a6a8a; border: 1px solid #a8cfe0; }
.inv-card { background: var(--surface); border: 1px solid var(--border2); border-radius: 10px; padding: 12px 14px; margin-bottom: 10px; }

/* ── Pantry / shopping list ── */
.pantry-section-label { font-family: 'Playfair Display', serif; font-size: 16px; font-style: italic; font-weight: 400; color: var(--ink2); margin: 18px 0 8px; }
.pantry-section-label:first-of-type { margin-top: 0; }
.pantry-pill-row { display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 8px; }
.pantry-pill { display: inline-flex; align-items: center; gap: 4px; padding: 4px 9px; border-radius: 20px; border: 1px solid var(--border); background: var(--surface2); font-size: 11px; color: var(--ink2); cursor: pointer; transition: all 0.12s; user-select: none; }
.pantry-pill:hover { border-color: var(--ink4); }
.pantry-pill .pp-remove { background: none; border: none; cursor: pointer; color: var(--ink4); font-size: 12px; line-height: 1; padding: 0 0 0 2px; opacity: 0; transition: opacity 0.12s; }
.pantry-pill:hover .pp-remove { opacity: 1; }
.pantry-pill .pp-remove:hover { color: #c0392b; }
.pantry-pill.fridge-soon { border-color: #f0b8b0; background: #fdecea; color: #c0392b; }
.pantry-pill.fridge-ok   { border-color: var(--sage-light); background: #f0f5ef; }
.pantry-pill-add { display: flex; gap: 6px; margin-top: 2px; }
.shop-list { display: flex; flex-direction: column; }
.shop-item { display: flex; align-items: center; gap: 10px; padding: 9px 0; border-bottom: 1px solid var(--border2); font-size: 13px; color: var(--ink2); }
.shop-item:last-child { border-bottom: none; }
.shop-item input[type=checkbox] { accent-color: var(--accent); flex-shrink: 0; }
.shop-item-text { flex: 1; }
.shop-item-text.done { text-decoration: line-through; color: var(--ink4); }
.shop-item-source { font-size: 10px; color: var(--ink4); font-style: italic; flex-shrink: 0; padding-left: 6px; }
.shop-empty { padding: 16px 0; color: var(--ink4); font-size: 12px; font-style: italic; }
/* ── Unified pantry grid ── */
.pantry-grid { display: grid; grid-template-columns: 1fr 1fr; }
.pantry-cell { display: flex; align-items: center; gap: 7px; padding: 7px 8px; border-bottom: 1px solid var(--border2); font-size: 12px; color: var(--ink2); min-width: 0; cursor: pointer; user-select: none; }
.pantry-cell:hover { background: var(--surface2); }
.pantry-cell.no-toggle { cursor: default; }
.pantry-cell.no-toggle:hover { background: transparent; }
.pantry-cell:nth-child(odd) { border-right: 1px solid var(--border2); }
.pantry-cell-name { flex: 1; min-width: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.pantry-cell-dot { width: 7px; height: 7px; border-radius: 50%; flex-shrink: 0; flex-shrink: 0; transition: background 0.15s; }
.pantry-cell-dot.ok      { background: var(--sage-light); }
.pantry-cell-dot.restock { background: #c0392b; }
.pantry-cell-dot.soon    { background: #c0392b; }
.pantry-cell-dot.frozen  { background: #6aabcc; }
.pantry-cell-remove { background: none; border: none; cursor: pointer; color: var(--ink4); font-size: 14px; line-height: 1; padding: 0; transition: color 0.15s; flex-shrink: 0; opacity: 0; }
.pantry-cell:hover .pantry-cell-remove { opacity: 1; }
.pantry-cell-remove:hover { color: #c0392b; }
.fz-stepper { display: flex; align-items: center; gap: 4px; flex-shrink: 0; }
.fz-stepper-btn { width: 18px; height: 18px; border-radius: 4px; border: 1px solid var(--border); background: var(--surface2); color: var(--ink3); font-size: 13px; line-height: 1; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.15s; padding: 0; }
.fz-stepper-btn:hover { background: var(--surface3); color: var(--ink); }
.fz-stepper-val { font-size: 11px; font-weight: 700; color: var(--ink2); min-width: 14px; text-align: center; }
.fz-unit { font-size: 9.5px; color: var(--ink4); }
/* keep pantry-row for any legacy references */
.pantry-row { display: flex; align-items: center; gap: 10px; padding: 8px 0; border-bottom: 1px solid var(--border2); font-size: 12px; color: var(--ink2); }
.pantry-row:last-child { border-bottom: none; }
.pantry-row-name { flex: 1; }
.pantry-row-remove { background: none; border: none; cursor: pointer; color: var(--ink4); font-size: 16px; line-height: 1; padding: 0 0 0 4px; transition: color 0.15s; flex-shrink: 0; opacity: 0; }
.pantry-row:hover .pantry-row-remove { opacity: 1; }
.pantry-row-remove:hover { color: #c0392b; }
.pantry-add-row { display: flex; gap: 8px; margin-top: 10px; padding-top: 10px; border-top: 1px solid var(--border2); }
.pantry-add-input { flex: 1; padding: 6px 10px; border: 1px solid var(--border); border-radius: 8px; font-family: 'Lato', sans-serif; font-size: 12px; background: var(--surface2); color: var(--ink); outline: none; }
.pantry-add-input:focus { border-color: var(--accent-light); background: var(--surface); }
.pantry-add-btn { padding: 6px 12px; border-radius: 8px; border: none; background: var(--surface3); color: var(--ink2); font-family: 'Lato', sans-serif; font-size: 12px; font-weight: 700; cursor: pointer; transition: all 0.15s; flex-shrink: 0; }
.pantry-add-btn:hover:not(:disabled) { background: var(--accent); color: #fff; }
.pantry-add-btn:disabled { opacity: 0.35; cursor: default; }
/* keep these for shopping list compat */
.staple-add-row { display: flex; gap: 8px; margin-top: 4px; }
.staple-add-input { flex: 1; padding: 7px 11px; border: 1px solid var(--border); border-radius: 8px; font-family: 'Lato', sans-serif; font-size: 12px; background: var(--surface2); color: var(--ink); outline: none; }
.staple-add-input:focus { border-color: var(--accent-light); background: var(--surface); }
.staple-add-btn { padding: 7px 14px; border-radius: 8px; border: none; background: var(--surface3); color: var(--ink2); font-family: 'Lato', sans-serif; font-size: 12px; font-weight: 700; cursor: pointer; transition: all 0.15s; flex-shrink: 0; }
.staple-add-btn:hover:not(:disabled) { background: var(--accent); color: #fff; }
.staple-add-btn:disabled { opacity: 0.35; cursor: default; }

/* ── Ingredient tag input ── */
.ingredient-tags { display: flex; flex-wrap: wrap; gap: 5px; padding: 7px 10px; border: 1px solid var(--border); border-radius: 8px; background: var(--surface2); min-height: 38px; cursor: text; }
.ingredient-tags:focus-within { border-color: var(--accent-light); background: var(--surface); }
.ingredient-tag { display: inline-flex; align-items: center; gap: 4px; padding: 2px 8px; background: var(--surface); border: 1px solid var(--border); border-radius: 12px; font-size: 11.5px; color: var(--ink2); }
.ingredient-tag-remove { background: none; border: none; cursor: pointer; color: var(--ink4); font-size: 13px; line-height: 1; padding: 0; transition: color 0.15s; }
.ingredient-tag-remove:hover { color: #c0392b; }
.ingredient-tag-input { border: none; outline: none; background: transparent; font-family: 'Lato', sans-serif; font-size: 12px; color: var(--ink); min-width: 80px; flex: 1; padding: 2px 0; }
.ingredient-tag-hint { font-size: 10px; color: var(--ink4); margin-top: 4px; }
.cat-select { display: flex; gap: 6px; flex-wrap: wrap; }
.cat-btn { padding: 5px 14px; border-radius: 16px; border: 1px solid var(--border); background: var(--surface2); font-family: 'Lato', sans-serif; font-size: 12px; color: var(--ink3); cursor: pointer; transition: all 0.15s; }
.cat-btn.active { background: var(--accent); border-color: var(--accent); color: #fff; font-weight: 700; }
.recipe-section-label { font-family: 'Playfair Display', serif; font-size: 20px; font-style: italic; font-weight: 400; color: var(--ink); margin: 24px 0 10px; display: flex; align-items: center; justify-content: space-between; cursor: pointer; user-select: none; padding-bottom: 0; }
.recipe-section-label:first-child { margin-top: 4px; }
.recipe-section-count { font-family: 'Lato', sans-serif; font-size: 11px; color: var(--ink4); font-style: normal; font-weight: 400; }
.recipe-library-header { display: flex; align-items: baseline; justify-content: space-between; margin: 20px 0 12px; padding-top: 16px; border-top: 1px solid var(--border2); }
.recipe-library-title { font-family: 'Playfair Display', serif; font-size: 20px; font-weight: 400; color: var(--ink); }
.recipe-library-title em { font-style: italic; color: var(--accent); }
.inv-title { font-family: 'Playfair Display', serif; font-size: 15px; font-weight: 700; color: var(--ink2); margin-bottom: 6px; display: flex; align-items: center; gap: 6px; }
.pref-card { background: var(--surface); border: 1px solid var(--border2); border-radius: 10px; overflow: hidden; }
.pref-item { display: flex; align-items: center; gap: 12px; padding: 12px 16px; border-bottom: 1px solid var(--border2); font-size: 13px; color: var(--ink2); }
.pref-item:last-child { border-bottom: none; }
.pref-section-row { display: flex; align-items: center; justify-content: space-between; padding: 10px 12px; cursor: pointer; user-select: none; font-size: 13px; font-weight: 600; color: var(--ink2); }
.pi-icon { font-size: 17px; width: 24px; text-align: center; flex-shrink: 0; }
.pi-text { flex: 1; }
.pi-badge { font-size: 10px; padding: 2px 8px; border-radius: 3px; background: var(--sage-pale); color: var(--sage); border: 1px solid var(--sage-light); margin-left: auto; font-weight: 700; letter-spacing: 0.04em; }
.pi-stepper { display: flex; align-items: center; gap: 0; margin-left: auto; border: 1px solid var(--border); border-radius: 8px; overflow: hidden; }
.pi-stepper-btn { width: 30px; height: 30px; border: none; background: var(--surface2); color: var(--ink2); font-size: 16px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: background 0.15s; font-family: 'Lato', sans-serif; flex-shrink: 0; }
.pi-stepper-btn:hover { background: var(--surface3); }
.pi-stepper-btn:disabled { opacity: 0.3; cursor: default; }
.pi-stepper-val { width: 28px; text-align: center; font-size: 13px; font-weight: 700; color: var(--ink); border-left: 1px solid var(--border); border-right: 1px solid var(--border); background: var(--surface); line-height: 30px; }
.pi-reminder { font-size: 10px; padding: 2px 8px; border-radius: 3px; background: var(--surface2); color: var(--ink4); border: 1px solid var(--border2); margin-left: auto; letter-spacing: 0.04em; }

/* ── Recipe card with thumbnail ── */
.rcard { background: var(--surface); border: 1px solid var(--border2); border-radius: 10px; overflow: hidden; cursor: pointer; transition: box-shadow 0.15s; }
.rcard:hover { box-shadow: 0 3px 14px rgba(0,0,0,0.07); }
.rcard-thumb { width: 100%; aspect-ratio: 4/3; object-fit: cover; display: block; }
.rcard-placeholder { width: 100%; aspect-ratio: 4/3; background: var(--surface2); display: flex; align-items: center; justify-content: center; font-size: 20px; opacity: 0.4; }
.rcard-body { padding: 8px 10px; }

/* ── Detail attachment ── */
.detail-attachment-img { width: 100%; border-radius: 8px; display: block; cursor: pointer; }
.detail-upload-btn { display: inline-flex; align-items: center; gap: 6px; padding: 8px 14px; border-radius: 8px; border: 1.5px dashed var(--border); background: var(--surface2); font-family: 'Lato', sans-serif; font-size: 12px; font-weight: 700; color: var(--ink3); cursor: pointer; transition: all 0.15s; }
.detail-upload-btn:hover { background: var(--surface3); border-color: var(--ink4); }

/* ── Detail ingredients & instructions ── */
.detail-ingredients { padding-left: 22px; font-size: 15px; line-height: 1.7; color: var(--ink2); list-style: disc; }
.detail-ingredients li { margin-bottom: 4px; }
.detail-instructions { padding-left: 0; font-size: 15px; line-height: 1.7; color: var(--ink2); list-style: none; counter-reset: step; }
.detail-instructions li { margin-bottom: 10px; counter-increment: step; display: flex; gap: 12px; }
.detail-instructions li::before { content: counter(step); display: flex; align-items: center; justify-content: center; min-width: 28px; height: 28px; border-radius: 50%; background: var(--surface2); border: 1px solid var(--border2); font-size: 14px; font-weight: 700; color: var(--ink3); flex-shrink: 0; }

/* ── iPad layout (768px+) ──────────────────────────────────────────────────── */

@media (min-width: 768px) {
  /* Switch .app from column (phone) to row (sidebar + content) */
  .app {
    flex-direction: row;
    max-width: none;
    overflow: visible;
  }

  /* Sidebar: repurpose the bottom tab bar */
  .tabs {
    position: fixed;
    bottom: auto;
    left: 0;
    top: 0;
    transform: none;
    width: 200px;
    max-width: 200px;
    height: 100vh;
    flex-direction: column;
    border-top: none;
    border-right: 1px solid var(--border);
    background: var(--surface);
    padding: 0;
    gap: 2px;
    z-index: 100;
  }

  /* App title in sidebar */
  .tabs::before {
    content: 'Meal Planner';
    display: block;
    font-family: 'Playfair Display', serif;
    font-size: 20px;
    color: var(--ink);
    padding: 24px 16px 20px;
    border-bottom: 1px solid var(--border2);
    margin-bottom: 8px;
  }

  /* Tab items: horizontal icon + label */
  .tab {
    flex: none;
    flex-direction: row;
    justify-content: flex-start;
    gap: 10px;
    padding: 12px 16px;
    margin: 0 8px;
    border-radius: 8px;
    transition: background 0.15s;
  }
  .tab:hover {
    background: var(--surface2);
  }

  .tab-icon {
    font-size: 17px;
  }
  .tab.active .tab-icon {
    transform: none;
  }

  .tab-label {
    font-size: 13px;
    letter-spacing: 0;
    text-transform: none;
    color: var(--ink2);
    font-weight: 600;
  }

  /* Active tab pill */
  .tab.active {
    background: var(--accent-pale);
  }
  .tab.active .tab-label {
    color: var(--accent);
    font-weight: 700;
  }

  /* Main content: offset by sidebar width */
  .content {
    margin-left: 200px;
    padding-top: 0;
    padding-bottom: 24px;
    width: calc(100% - 200px);
  }

  /* Remove phone border-bottom, already handled by sidebar border-right */
  .tabs {
    border-bottom: none;
  }
}

/* ── Laptop/desktop (1024px+) ──────────────────────────────────────────────── */

@media (min-width: 1024px) {
  .content {
    padding-left: 32px;
    padding-right: 32px;
    margin-left: 200px;
  }

  /* Week: 7 equal columns filling available width on desktop */
  .week-scroll { overflow-x: visible; }
  .week-scroll-fade { display: none; }
  .day-col { flex: 1 1 0; min-width: 0; max-width: calc((100% - 60px) / 7); }

  /* Recipe library: fixed-size tiles, auto-fill */
  .rlist {
    grid-template-columns: repeat(auto-fill, minmax(160px, 180px));
  }
}

/* ── Wide desktop (1400px+) ────────────────────────────────────────────────── */

@media (min-width: 1400px) {
  .tabs {
    width: 220px;
    max-width: 220px;
  }

  .content {
    margin-left: 220px;
  }
}

/* PlanSheet current items list */
.sheet-current-item {
  display: flex; align-items: center; justify-content: space-between;
  padding: 4px 0; font-size: 12px; color: var(--ink2);
}
.sheet-item-remove {
  background: none; border: none; color: var(--ink4);
  font-size: 16px; cursor: pointer; padding: 0 4px;
}
.sheet-item-remove:hover { color: var(--accent); }